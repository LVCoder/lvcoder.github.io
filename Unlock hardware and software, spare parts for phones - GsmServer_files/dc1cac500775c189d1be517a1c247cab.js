
(function(e,t){function _(e){var t=M[e]={};return v.each(e.split(y),function(e,n){t[n]=!0}),t}function H(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(P,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:D.test(r)?v.parseJSON(r):r}catch(s){}v.data(e,n,r)}else r=t}return r}function B(e){var t;for(t in e){if(t==="data"&&v.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function et(){return!1}function tt(){return!0}function ut(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function at(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ft(e,t,n){t=t||0;if(v.isFunction(t))return v.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return v.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=v.grep(e,function(e){return e.nodeType===1});if(it.test(t))return v.filter(t,r,!n);t=v.filter(t,r)}return v.grep(e,function(e,r){return v.inArray(e,t)>=0===n})}function lt(e){var t=ct.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function At(e,t){if(t.nodeType!==1||!v.hasData(e))return;var n,r,i,s=v._data(e),o=v._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)v.event.add(t,n,u[n][r])}o.data&&(o.data=v.extend({},o.data))}function Ot(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?(t.parentNode&&(t.outerHTML=e.outerHTML),v.support.html5Clone&&e.innerHTML&&!v.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):n==="input"&&Et.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(v.expando)}function Mt(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function _t(e){Et.test(e.type)&&(e.defaultChecked=e.checked)}function Qt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Jt.length;while(i--){t=Jt[i]+n;if(t in e)return t}return r}function Gt(e,t){return e=t||e,v.css(e,"display")==="none"||!v.contains(e.ownerDocument,e)}function Yt(e,t){var n,r,i=[],s=0,o=e.length;for(;s<o;s++){n=e[s];if(!n.style)continue;i[s]=v._data(n,"olddisplay"),t?(!i[s]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&Gt(n)&&(i[s]=v._data(n,"olddisplay",nn(n.nodeName)))):(r=Dt(n,"display"),!i[s]&&r!=="none"&&v._data(n,"olddisplay",r))}for(s=0;s<o;s++){n=e[s];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?i[s]||"":"none"}return e}function Zt(e,t,n){var r=Rt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function en(e,t,n,r){var i=n===(r?"border":"content")?4:t==="width"?1:0,s=0;for(;i<4;i+=2)n==="margin"&&(s+=v.css(e,n+$t[i],!0)),r?(n==="content"&&(s-=parseFloat(Dt(e,"padding"+$t[i]))||0),n!=="margin"&&(s-=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0)):(s+=parseFloat(Dt(e,"padding"+$t[i]))||0,n!=="padding"&&(s+=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0));return s}function tn(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=!0,s=v.support.boxSizing&&v.css(e,"boxSizing")==="border-box";if(r<=0||r==null){r=Dt(e,t);if(r<0||r==null)r=e.style[t];if(Ut.test(r))return r;i=s&&(v.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+en(e,t,n||(s?"border":"content"),i)+"px"}function nn(e){if(Wt[e])return Wt[e];var t=v("<"+e+">").appendTo(i.body),n=t.css("display");t.remove();if(n==="none"||n===""){Pt=i.body.appendChild(Pt||v.extend(i.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!Ht||!Pt.createElement)Ht=(Pt.contentWindow||Pt.contentDocument).document,Ht.write("<!doctype html><html><body>"),Ht.close();t=Ht.body.appendChild(Ht.createElement(e)),n=Dt(t,"display"),i.body.removeChild(Pt)}return Wt[e]=n,n}function fn(e,t,n,r){var i;if(v.isArray(t))v.each(t,function(t,i){n||sn.test(e)?r(e,i):fn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&v.type(t)==="object")for(i in t)fn(e+"["+i+"]",t[i],n,r);else r(e,t)}function Cn(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(y),u=0,a=o.length;if(v.isFunction(n))for(;u<a;u++)r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}function kn(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u,a=e[s],f=0,l=a?a.length:0,c=e===Sn;for(;f<l&&(c||!u);f++)u=a[f](n,r,i),typeof u=="string"&&(!c||o[u]?u=t:(n.dataTypes.unshift(u),u=kn(e,n,r,i,u,o)));return(c||!u)&&!o["*"]&&(u=kn(e,n,r,i,"*",o)),u}function Ln(e,n){var r,i,s=v.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&v.extend(!0,e,i)}function An(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function On(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=o[++f];)if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n)for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}function Fn(){try{return new e.XMLHttpRequest}catch(t){}}function In(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function $n(){return setTimeout(function(){qn=t},0),qn=v.now()}function Jn(e,t){v.each(t,function(t,n){var r=(Vn[t]||[]).concat(Vn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function Kn(e,t,n){var r,i=0,s=0,o=Xn.length,u=v.Deferred().always(function(){delete a.elem}),a=function(){var t=qn||$n(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,i=1-r,s=0,o=f.tweens.length;for(;s<o;s++)f.tweens[s].run(i);return u.notifyWith(e,[f,i,n]),i<1&&o?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:v.extend({},t),opts:v.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:qn||$n(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=v.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var n=0,r=t?f.tweens.length:0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;Qn(l,f.opts.specialEasing);for(;i<o;i++){r=Xn[i].call(f,e,l,f.opts);if(r)return r}return Jn(f,l),v.isFunction(f.opts.start)&&f.opts.start.call(e,f),v.fx.timer(v.extend(a,{anim:f,queue:f.opts.queue,elem:e})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Qn(e,t){var n,r,i,s,o;for(n in e){r=v.camelCase(n),i=t[r],s=e[n],v.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=v.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function Gn(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},m=[],g=e.nodeType&&Gt(e);n.queue||(l=v._queueHooks(e,"fx"),l.unqueued==null&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,v.queue(e,"fx").length||l.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],v.css(e,"display")==="inline"&&v.css(e,"float")==="none"&&(!v.support.inlineBlockNeedsLayout||nn(e.nodeName)==="inline"?p.display="inline-block":p.zoom=1)),n.overflow&&(p.overflow="hidden",v.support.shrinkWrapBlocks||h.done(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Un.exec(s)){delete t[r],a=a||s==="toggle";if(s===(g?"hide":"show"))continue;m.push(r)}}o=m.length;if(o){u=v._data(e,"fxshow")||v._data(e,"fxshow",{}),"hidden"in u&&(g=u.hidden),a&&(u.hidden=!g),g?v(e).show():h.done(function(){v(e).hide()}),h.done(function(){var t;v.removeData(e,"fxshow",!0);for(t in d)v.style(e,t,d[t])});for(r=0;r<o;r++)i=m[r],f=h.createTween(i,g?u[i]:0),d[i]=u[i]||v.style(e,i),i in u||(u[i]=f.start,g&&(f.end=f.start,f.start=i==="width"||i==="height"?1:0))}}function Yn(e,t,n,r,i){return new Yn.prototype.init(e,t,n,r,i)}function Zn(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=$t[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function tr(e){return v.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=e.document,s=e.location,o=e.navigator,u=e.jQuery,a=e.$,f=Array.prototype.push,l=Array.prototype.slice,c=Array.prototype.indexOf,h=Object.prototype.toString,p=Object.prototype.hasOwnProperty,d=String.prototype.trim,v=function(e,t){return new v.fn.init(e,t,n)},m=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,g=/\S/,y=/\s+/,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,w=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,T=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,N=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,C=/^-ms-/,k=/-([\da-z])/gi,L=function(e,t){return(t+"").toUpperCase()},A=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",A,!1),v.ready()):i.readyState==="complete"&&(i.detachEvent("onreadystatechange",A),v.ready())},O={};v.fn=v.prototype={constructor:v,init:function(e,n,r){var s,o,u,a;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?s=[null,e,null]:s=w.exec(e);if(s&&(s[1]||!n)){if(s[1])return n=n instanceof v?n[0]:n,a=n&&n.nodeType?n.ownerDocument||n:i,e=v.parseHTML(s[1],a,!0),E.test(s[1])&&v.isPlainObject(n)&&this.attr.call(e,n,!0),v.merge(this,e);o=i.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return r.find(e);this.length=1,this[0]=o}return this.context=i,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return v.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),v.makeArray(e,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return l.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=v.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return v.each(this,e,t)},ready:function(e){return v.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(l.apply(this,arguments),"slice",l.call(arguments).join(","))},map:function(e){return this.pushStack(v.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:[].sort,splice:[].splice},v.fn.init.prototype=v.fn,v.extend=v.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!v.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(v.isPlainObject(i)||(s=v.isArray(i)))?(s?(s=!1,o=r&&v.isArray(r)?r:[]):o=r&&v.isPlainObject(r)?r:{},u[n]=v.extend(l,o,i)):i!==t&&(u[n]=i)}return u},v.extend({noConflict:function(t){return e.$===v&&(e.$=a),t&&e.jQuery===v&&(e.jQuery=u),v},isReady:!1,readyWait:1,holdReady:function(e){e?v.readyWait++:v.ready(!0)},ready:function(e){if(e===!0?--v.readyWait:v.isReady)return;if(!i.body)return setTimeout(v.ready,1);v.isReady=!0;if(e!==!0&&--v.readyWait>0)return;r.resolveWith(i,[v]),v.fn.trigger&&v(i).trigger("ready").off("ready")},isFunction:function(e){return v.type(e)==="function"},isArray:Array.isArray||function(e){return v.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):O[h.call(e)]||"object"},isPlainObject:function(e){if(!e||v.type(e)!=="object"||e.nodeType||v.isWindow(e))return!1;try{if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||p.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return!e||typeof e!="string"?null:(typeof t=="boolean"&&(n=t,t=0),t=t||i,(r=E.exec(e))?[t.createElement(r[1])]:(r=v.buildFragment([e],t,n?null:[]),v.merge([],(r.cacheable?v.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string")return null;t=v.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(S.test(t.replace(T,"@").replace(N,"]").replace(x,"")))return(new Function("return "+t))();v.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&v.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&g.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(C,"ms-").replace(k,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,r){var i,s=0,o=e.length,u=o===t||v.isFunction(e);if(r){if(u){for(i in e)if(n.apply(e[i],r)===!1)break}else for(;s<o;)if(n.apply(e[s++],r)===!1)break}else if(u){for(i in e)if(n.call(e[i],i,e[i])===!1)break}else for(;s<o;)if(n.call(e[s],s,e[s++])===!1)break;return e},trim:d&&!d.call("\ufeff\u00a0")?function(e){return e==null?"":d.call(e)}:function(e){return e==null?"":(e+"").replace(b,"")},makeArray:function(e,t){var n,r=t||[];return e!=null&&(n=v.type(e),e.length==null||n==="string"||n==="function"||n==="regexp"||v.isWindow(e)?f.call(r,e):v.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(c)return c.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,n,r){var i,s,o=[],u=0,a=e.length,f=e instanceof v||a!==t&&typeof a=="number"&&(a>0&&e[0]&&e[a-1]||a===0||v.isArray(e));if(f)for(;u<a;u++)i=n(e[u],u,r),i!=null&&(o[o.length]=i);else for(s in e)i=n(e[s],s,r),i!=null&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),v.isFunction(e)?(i=l.call(arguments,2),s=function(){return e.apply(n,i.concat(l.call(arguments)))},s.guid=e.guid=e.guid||v.guid++,s):t},access:function(e,n,r,i,s,o,u){var a,f=r==null,l=0,c=e.length;if(r&&typeof r=="object"){for(l in r)v.access(e,n,l,r[l],1,o,i);s=1}else if(i!==t){a=u===t&&v.isFunction(i),f&&(a?(a=n,n=function(e,t,n){return a.call(v(e),n)}):(n.call(e,i),n=null));if(n)for(;l<c;l++)n(e[l],r,a?i.call(e[l],l,n(e[l],r)):i,u);s=1}return s?e:f?n.call(e):c?n(e[0],r):o},now:function(){return(new Date).getTime()}}),v.ready.promise=function(t){if(!r){r=v.Deferred();if(i.readyState==="complete")setTimeout(v.ready,1);else if(i.addEventListener)i.addEventListener("DOMContentLoaded",A,!1),e.addEventListener("load",v.ready,!1);else{i.attachEvent("onreadystatechange",A),e.attachEvent("onload",v.ready);var n=!1;try{n=e.frameElement==null&&i.documentElement}catch(s){}n&&n.doScroll&&function o(){if(!v.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}v.ready()}}()}}return r.promise(t)},v.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){O["[object "+t+"]"]=t.toLowerCase()}),n=v(i);var M={};v.Callbacks=function(e){e=typeof e=="string"?M[e]||_(e):v.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){n=e.memory&&t,r=!0,u=s||0,s=0,o=a.length,i=!0;for(;a&&u<o;u++)if(a[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):n?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function r(t){v.each(t,function(t,n){var i=v.type(n);i==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this},remove:function(){return a&&v.each(arguments,function(e,t){var n;while((n=v.inArray(t,a,n))>-1)a.splice(n,1),i&&(n<=o&&o--,n<=u&&u--)}),this},has:function(e){return v.inArray(e,a)>-1},empty:function(){return a=[],this},disable:function(){return a=f=n=t,this},disabled:function(){return!a},lock:function(){return f=t,n||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!r||f)&&(i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},v.extend({Deferred:function(e){var t=[["resolve","done",v.Callbacks("once memory"),"resolved"],["reject","fail",v.Callbacks("once memory"),"rejected"],["notify","progress",v.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return v.Deferred(function(n){v.each(t,function(t,r){var s=r[0],o=e[t];i[r[1]](v.isFunction(o)?function(){var e=o.apply(this,arguments);e&&v.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return e!=null?v.extend(e,r):r}},i={};return r.pipe=r.then,v.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=o.fire,i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=l.call(arguments),r=n.length,i=r!==1||e&&v.isFunction(e.promise)?r:0,s=i===1?e:v.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?l.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&v.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),v.support=function(){var t,n,r,s,o,u,a,f,l,c,h,p=i.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0];if(!n||!r||!n.length)return{};s=i.createElement("select"),o=s.appendChild(i.createElement("option")),u=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:u.value==="on",optSelected:o.selected,getSetAttribute:p.className!=="t",enctype:!!i.createElement("form").enctype,html5Clone:i.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:i.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},u.checked=!0,t.noCloneChecked=u.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!o.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",h=function(){t.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"),p.detachEvent("onclick",h)),u=i.createElement("input"),u.value="t",u.setAttribute("type","radio"),t.radioValue=u.value==="t",u.setAttribute("checked","checked"),u.setAttribute("name","t"),p.appendChild(u),a=i.createDocumentFragment(),a.appendChild(p.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=u.checked,a.removeChild(u),a.appendChild(p);if(p.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})f="on"+l,c=f in p,c||(p.setAttribute(f,"return;"),c=typeof p[f]=="function"),t[l+"Bubbles"]=c;return v(function(){var n,r,s,o,u="padding:0;margin:0;border:0;display:block;overflow:hidden;",a=i.getElementsByTagName("body")[0];if(!a)return;n=i.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",a.insertBefore(n,a.firstChild),r=i.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=r.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&s[0].offsetHeight===0,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=r.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(r,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(r,null)||{width:"4px"}).width==="4px",o=i.createElement("div"),o.style.cssText=r.style.cssText=u,o.style.marginRight=o.style.width="0",r.style.width="1px",r.appendChild(o),t.reliableMarginRight=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),typeof r.style.zoom!="undefined"&&(r.innerHTML="",r.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=r.offsetWidth===3,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=r.offsetWidth!==3,n.style.zoom=1),a.removeChild(n),n=r=s=o=null}),a.removeChild(p),n=r=s=o=u=a=p=null,t}();var D=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,P=/([A-Z])/g;v.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(v.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?v.cache[e[v.expando]]:e[v.expando],!!e&&!B(e)},data:function(e,n,r,i){if(!v.acceptData(e))return;var s,o,u=v.expando,a=typeof n=="string",f=e.nodeType,l=f?v.cache:e,c=f?e[u]:e[u]&&u;if((!c||!l[c]||!i&&!l[c].data)&&a&&r===t)return;c||(f?e[u]=c=v.deletedIds.pop()||v.guid++:c=u),l[c]||(l[c]={},f||(l[c].toJSON=v.noop));if(typeof n=="object"||typeof n=="function")i?l[c]=v.extend(l[c],n):l[c].data=v.extend(l[c].data,n);return s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[v.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[v.camelCase(n)])):o=s,o},removeData:function(e,t,n){if(!v.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?v.cache:e,a=o?e[v.expando]:v.expando;if(!u[a])return;if(t){r=n?u[a]:u[a].data;if(r){v.isArray(t)||(t in r?t=[t]:(t=v.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?B:v.isEmptyObject)(r))return}}if(!n){delete u[a].data;if(!B(u[a]))return}o?v.cleanData([e],!0):v.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null},_data:function(e,t,n){return v.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&v.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),v.fn.extend({data:function(e,n){var r,i,s,o,u,a=this[0],f=0,l=null;if(e===t){if(this.length){l=v.data(a);if(a.nodeType===1&&!v._data(a,"parsedAttrs")){s=a.attributes;for(u=s.length;f<u;f++)o=s[f].name,o.indexOf("data-")||(o=v.camelCase(o.substring(5)),H(a,o,l[o]));v._data(a,"parsedAttrs",!0)}}return l}return typeof e=="object"?this.each(function(){v.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",i=r[1]+"!",v.access(this,function(n){if(n===t)return l=this.triggerHandler("getData"+i,[r[0]]),l===t&&a&&(l=v.data(a,e),l=H(a,e,l)),l===t&&r[1]?this.data(r[0]):l;r[1]=n,this.each(function(){var t=v(this);t.triggerHandler("setData"+i,r),v.data(this,e,n),t.triggerHandler("changeData"+i,r)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){v.removeData(this,e)})}}),v.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=v._data(e,t),n&&(!r||v.isArray(n)?r=v._data(e,t,v.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=v.queue(e,t),r=n.length,i=n.shift(),s=v._queueHooks(e,t),o=function(){v.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return v._data(e,n)||v._data(e,n,{empty:v.Callbacks("once memory").add(function(){v.removeData(e,t+"queue",!0),v.removeData(e,n,!0)})})}}),v.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?v.queue(this[0],e):n===t?this:this.each(function(){var t=v.queue(this,e,n);v._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&v.dequeue(this,e)})},dequeue:function(e){return this.each(function(){v.dequeue(this,e)})},delay:function(e,t){return e=v.fx?v.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=v.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=v._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var j,F,I,q=/[\t\r\n]/g,R=/\r/g,U=/^(?:button|input)$/i,z=/^(?:button|input|object|select|textarea)$/i,W=/^a(?:rea|)$/i,X=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,V=v.support.getSetAttribute;v.fn.extend({attr:function(e,t){return v.access(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){v.removeAttr(this,e)})},prop:function(e,t){return v.access(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return e=v.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(v.isFunction(e))return this.each(function(t){v(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(y);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)s.indexOf(" "+t[o]+" ")<0&&(s+=t[o]+" ");i.className=v.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(v.isFunction(e))return this.each(function(t){v(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(y);for(u=0,a=this.length;u<a;u++){i=this[u];if(i.nodeType===1&&i.className){r=(" "+i.className+" ").replace(q," ");for(s=0,o=n.length;s<o;s++)while(r.indexOf(" "+n[s]+" ")>=0)r=r.replace(" "+n[s]+" "," ");i.className=e?v.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return v.isFunction(e)?this.each(function(n){v(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=v(this),u=t,a=e.split(y);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&v._data(this,"__className__",this.className),this.className=this.className||e===!1?"":v._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(q," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=v.valHooks[s.type]||v.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(R,""):r==null?"":r);return}return i=v.isFunction(e),this.each(function(r){var s,o=v(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":v.isArray(s)&&(s=v.map(s,function(e){return e==null?"":e+""})),n=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),v.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(v.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!v.nodeName(n.parentNode,"optgroup"))){t=v(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n=v.makeArray(t);return v(e).find("option").each(function(){this.selected=v.inArray(v(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(i&&v.isFunction(v.fn[n]))return v(e)[n](r);if(typeof e.getAttribute=="undefined")return v.prop(e,n,r);u=a!==1||!v.isXMLDoc(e),u&&(n=n.toLowerCase(),o=v.attrHooks[n]||(X.test(n)?F:j));if(r!==t){if(r===null){v.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.split(y);for(;o<r.length;o++)i=r[o],i&&(n=v.propFix[i]||i,s=X.test(i),s||v.attr(e,i,""),e.removeAttribute(V?i:n),s&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(U.test(e.nodeName)&&e.parentNode)v.error("type property can't be changed");else if(!v.support.radioValue&&t==="radio"&&v.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return j&&v.nodeName(e,"button")?j.get(e,t):t in e?e.value:null},set:function(e,t,n){if(j&&v.nodeName(e,"button"))return j.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!v.isXMLDoc(e),o&&(n=v.propFix[n]||n,s=v.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):z.test(e.nodeName)||W.test(e.nodeName)&&e.href?0:t}}}}),F={get:function(e,n){var r,i=v.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?v.removeAttr(e,n):(r=v.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},V||(I={name:!0,id:!0,coords:!0},j=v.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(I[n]?r.value!=="":r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=i.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},v.each(["width","height"],function(e,t){v.attrHooks[t]=v.extend(v.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),v.attrHooks.contenteditable={get:j.get,set:function(e,t,n){t===""&&(t="false"),j.set(e,t,n)}}),v.support.hrefNormalized||v.each(["href","src","width","height"],function(e,n){v.attrHooks[n]=v.extend(v.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),v.support.style||(v.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),v.support.optSelected||(v.propHooks.selected=v.extend(v.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),v.support.enctype||(v.propFix.enctype="encoding"),v.support.checkOn||v.each(["radio","checkbox"],function(){v.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]=v.extend(v.valHooks[this],{set:function(e,t){if(v.isArray(t))return e.checked=v.inArray(v(e).val(),t)>=0}})});var $=/^(?:textarea|input|select)$/i,J=/^([^\.]*|)(?:\.(.+)|)$/,K=/(?:^|\s)hover(\.\S+|)\b/,Q=/^key/,G=/^(?:mouse|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Z=function(e){return v.event.special.hover?e:e.replace(K,"mouseenter$1 mouseleave$1")};v.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,m,g;if(e.nodeType===3||e.nodeType===8||!n||!r||!(o=v._data(e)))return;r.handler&&(d=r,r=d.handler,s=d.selector),r.guid||(r.guid=v.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof v=="undefined"||!!e&&v.event.triggered===e.type?t:v.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=v.trim(Z(n)).split(" ");for(f=0;f<n.length;f++){l=J.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),g=v.event.special[c]||{},c=(s?g.delegateType:g.bindType)||c,g=v.event.special[c]||{},p=v.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&v.expr.match.needsContext.test(s),namespace:h.join(".")},d),m=a[c];if(!m){m=a[c]=[],m.delegateCount=0;if(!g.setup||g.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?m.splice(m.delegateCount++,0,p):m.push(p),v.event.global[c]=!0}e=null},global:{},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,m,g=v.hasData(e)&&v._data(e);if(!g||!(h=g.events))return;t=v.trim(Z(t||"")).split(" ");for(s=0;s<t.length;s++){o=J.exec(t[s])||[],u=a=o[1],f=o[2];if(!u){for(u in h)v.event.remove(e,u+t[s],n,r,!0);continue}p=v.event.special[u]||{},u=(r?p.delegateType:p.bindType)||u,d=h[u]||[],l=d.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(c=0;c<d.length;c++)m=d[c],(i||a===m.origType)&&(!n||n.guid===m.guid)&&(!f||f.test(m.namespace))&&(!r||r===m.selector||r==="**"&&m.selector)&&(d.splice(c--,1),m.selector&&d.delegateCount--,p.remove&&p.remove.call(e,m));d.length===0&&l!==d.length&&((!p.teardown||p.teardown.call(e,f,g.handle)===!1)&&v.removeEvent(e,u,g.handle),delete h[u])}v.isEmptyObject(h)&&(delete g.handle,v.removeData(e,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,s,o){if(!s||s.nodeType!==3&&s.nodeType!==8){var u,a,f,l,c,h,p,d,m,g,y=n.type||n,b=[];if(Y.test(y+v.event.triggered))return;y.indexOf("!")>=0&&(y=y.slice(0,-1),a=!0),y.indexOf(".")>=0&&(b=y.split("."),y=b.shift(),b.sort());if((!s||v.event.customEvent[y])&&!v.event.global[y])return;n=typeof n=="object"?n[v.expando]?n:new v.Event(y,n):new v.Event(y),n.type=y,n.isTrigger=!0,n.exclusive=a,n.namespace=b.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=y.indexOf(":")<0?"on"+y:"";if(!s){u=v.cache;for(f in u)u[f].events&&u[f].events[y]&&v.event.trigger(n,r,u[f].handle.elem,!0);return}n.result=t,n.target||(n.target=s),r=r!=null?v.makeArray(r):[],r.unshift(n),p=v.event.special[y]||{};if(p.trigger&&p.trigger.apply(s,r)===!1)return;m=[[s,p.bindType||y]];if(!o&&!p.noBubble&&!v.isWindow(s)){g=p.delegateType||y,l=Y.test(g+y)?s:s.parentNode;for(c=s;l;l=l.parentNode)m.push([l,g]),c=l;c===(s.ownerDocument||i)&&m.push([c.defaultView||c.parentWindow||e,g])}for(f=0;f<m.length&&!n.isPropagationStopped();f++)l=m[f][0],n.type=m[f][1],d=(v._data(l,"events")||{})[n.type]&&v._data(l,"handle"),d&&d.apply(l,r),d=h&&l[h],d&&v.acceptData(l)&&d.apply&&d.apply(l,r)===!1&&n.preventDefault();return n.type=y,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(s.ownerDocument,r)===!1)&&(y!=="click"||!v.nodeName(s,"a"))&&v.acceptData(s)&&h&&s[y]&&(y!=="focus"&&y!=="blur"||n.target.offsetWidth!==0)&&!v.isWindow(s)&&(c=s[h],c&&(s[h]=null),v.event.triggered=y,s[y](),v.event.triggered=t,c&&(s[h]=c)),n.result}return},dispatch:function(n){n=v.event.fix(n||e.event);var r,i,s,o,u,a,f,c,h,p,d=(v._data(this,"events")||{})[n.type]||[],m=d.delegateCount,g=l.call(arguments),y=!n.exclusive&&!n.namespace,b=v.event.special[n.type]||{},w=[];g[0]=n,n.delegateTarget=this;if(b.preDispatch&&b.preDispatch.call(this,n)===!1)return;if(m&&(!n.button||n.type!=="click"))for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||n.type!=="click"){u={},f=[];for(r=0;r<m;r++)c=d[r],h=c.selector,u[h]===t&&(u[h]=c.needsContext?v(h,this).index(s)>=0:v.find(h,this,null,[s]).length),u[h]&&f.push(c);f.length&&w.push({elem:s,matches:f})}d.length>m&&w.push({elem:this,matches:d.slice(m)});for(r=0;r<w.length&&!n.isPropagationStopped();r++){a=w[r],n.currentTarget=a.elem;for(i=0;i<a.matches.length&&!n.isImmediatePropagationStopped();i++){c=a.matches[i];if(y||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace))n.data=c.data,n.handleObj=c,o=((v.event.special[c.origType]||{}).handle||c.handler).apply(a.elem,g),o!==t&&(n.result=o,o===!1&&(n.preventDefault(),n.stopPropagation()))}}return b.postDispatch&&b.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,s,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||i,s=r.documentElement,o=r.body,e.pageX=n.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[v.expando])return e;var t,n,r=e,s=v.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=v.Event(r);for(t=o.length;t;)n=o[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||i),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){v.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=v.extend(new v.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?v.event.trigger(i,null,t):v.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},v.event.handle=v.event.dispatch,v.removeEvent=i.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},v.Event=function(e,t){if(!(this instanceof v.Event))return new v.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?tt:et):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||v.now(),this[v.expando]=!0},v.Event.prototype={preventDefault:function(){this.isDefaultPrevented=tt;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=tt;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=tt,this.stopPropagation()},isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et},v.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj,o=s.selector;if(!i||i!==r&&!v.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),v.support.submitBubbles||(v.event.special.submit={setup:function(){if(v.nodeName(this,"form"))return!1;v.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=v.nodeName(n,"input")||v.nodeName(n,"button")?n.form:t;r&&!v._data(r,"_submit_attached")&&(v.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),v._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&v.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(v.nodeName(this,"form"))return!1;v.event.remove(this,"._submit")}}),v.support.changeBubbles||(v.event.special.change={setup:function(){if($.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")v.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),v.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),v.event.simulate("change",this,e,!0)});return!1}v.event.add(this,"beforeactivate._change",function(e){var t=e.target;$.test(t.nodeName)&&!v._data(t,"_change_attached")&&(v.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&v.event.simulate("change",this.parentNode,e,!0)}),v._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return v.event.remove(this,"._change"),!$.test(this.nodeName)}}),v.support.focusinBubbles||v.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){v.event.simulate(t,e.target,v.event.fix(e),!0)};v.event.special[t]={setup:function(){n++===0&&i.addEventListener(e,r,!0)},teardown:function(){--n===0&&i.removeEventListener(e,r,!0)}}}),v.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=et;else if(!i)return this;return s===1&&(o=i,i=function(e){return v().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=v.guid++)),this.each(function(){v.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,v(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=et),this.each(function(){v.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return v(this.context).on(e,this.selector,t,n),this},die:function(e,t){return v(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){v.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return v.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||v.guid++,r=0,i=function(n){var i=(v._data(this,"lastToggle"+e.guid)||0)%r;return v._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){v.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Q.test(t)&&(v.event.fixHooks[t]=v.event.keyHooks),G.test(t)&&(v.event.fixHooks[t]=v.event.mouseHooks)}),function(e,t){function nt(e,t,n,r){n=n||[],t=t||g;var i,s,a,f,l=t.nodeType;if(!e||typeof e!="string")return n;if(l!==1&&l!==9)return[];a=o(t);if(!a&&!r)if(i=R.exec(e))if(f=i[1]){if(l===9){s=t.getElementById(f);if(!s||!s.parentNode)return n;if(s.id===f)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(f))&&u(t,s)&&s.id===f)return n.push(s),n}else{if(i[2])return S.apply(n,x.call(t.getElementsByTagName(e),0)),n;if((f=i[3])&&Z&&t.getElementsByClassName)return S.apply(n,x.call(t.getElementsByClassName(f),0)),n}return vt(e.replace(j,"$1"),t,n,r,a)}function rt(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function it(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function st(e){return N(function(t){return t=+t,N(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ot(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}function ut(e,t){var n,r,s,o,u,a,f,l=L[d][e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=F.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(s=[]);n=!1;if(r=I.exec(u))s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=r[0].replace(j," ");for(o in i.filter)(r=J[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=o,n.matches=r);if(!n)break}return t?u.length:u?nt.error(e):L(e,a).slice(0)}function at(e,t,r){var i=t.dir,s=r&&t.dir==="parentNode",o=w++;return t.first?function(t,n,r){while(t=t[i])if(s||t.nodeType===1)return e(t,n,r)}:function(t,r,u){if(!u){var a,f=b+" "+o+" ",l=f+n;while(t=t[i])if(s||t.nodeType===1){if((a=t[d])===l)return t.sizset;if(typeof a=="string"&&a.indexOf(f)===0){if(t.sizset)return t}else{t[d]=l;if(e(t,r,u))return t.sizset=!0,t;t.sizset=!1}}}else while(t=t[i])if(s||t.nodeType===1)if(e(t,r,u))return t}}function ft(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function lt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function ct(e,t,n,r,i,s){return r&&!r[d]&&(r=ct(r)),i&&!i[d]&&(i=ct(i,s)),N(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||dt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?lt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=lt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?T.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=lt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):S.apply(o,g)})}function ht(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,f=at(function(e){return e===t},u,!0),l=at(function(e){return T.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==c)||((t=n).nodeType?f(e,n,r):l(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[at(ft(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[d]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return ct(a>1&&ft(h),a>1&&e.slice(0,a-1).join("").replace(j,"$1"),n,a<r&&ht(e.slice(a,r)),r<s&&ht(e=e.slice(r)),r<s&&e.join(""))}h.push(n)}return ft(h)}function pt(e,t){var r=t.length>0,s=e.length>0,o=function(u,a,f,l,h){var p,d,v,m=[],y=0,w="0",x=u&&[],T=h!=null,N=c,C=u||s&&i.find.TAG("*",h&&a.parentNode||a),k=b+=N==null?1:Math.E;T&&(c=a!==g&&a,n=o.el);for(;(p=C[w])!=null;w++){if(s&&p){for(d=0;v=e[d];d++)if(v(p,a,f)){l.push(p);break}T&&(b=k,n=++o.el)}r&&((p=!v&&p)&&y--,u&&x.push(p))}y+=w;if(r&&w!==y){for(d=0;v=t[d];d++)v(x,m,a,f);if(u){if(y>0)while(w--)!x[w]&&!m[w]&&(m[w]=E.call(l));m=lt(m)}S.apply(l,m),T&&!u&&m.length>0&&y+t.length>1&&nt.uniqueSort(l)}return T&&(b=k,c=N),x};return o.el=0,r?N(o):o}function dt(e,t,n){var r=0,i=t.length;for(;r<i;r++)nt(e,t[r],n);return n}function vt(e,t,n,r,s){var o,u,f,l,c,h=ut(e),p=h.length;if(!r&&h.length===1){u=h[0]=h[0].slice(0);if(u.length>2&&(f=u[0]).type==="ID"&&t.nodeType===9&&!s&&i.relative[u[1].type]){t=i.find.ID(f.matches[0].replace($,""),t,s)[0];if(!t)return n;e=e.slice(u.shift().length)}for(o=J.POS.test(e)?-1:u.length-1;o>=0;o--){f=u[o];if(i.relative[l=f.type])break;if(c=i.find[l])if(r=c(f.matches[0].replace($,""),z.test(u[0].type)&&t.parentNode||t,s)){u.splice(o,1),e=r.length&&u.join("");if(!e)return S.apply(n,x.call(r,0)),n;break}}}return a(e,h)(r,t,s,n,z.test(e)),n}function mt(){}var n,r,i,s,o,u,a,f,l,c,h=!0,p="undefined",d=("sizcache"+Math.random()).replace(".",""),m=String,g=e.document,y=g.documentElement,b=0,w=0,E=[].pop,S=[].push,x=[].slice,T=[].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},N=function(e,t){return e[d]=t==null||t,e},C=function(){var e={},t=[];return N(function(n,r){return t.push(n)>i.cacheLength&&delete e[t.shift()],e[n+" "]=r},e)},k=C(),L=C(),A=C(),O="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",_=M.replace("w","w#"),D="([*^$|!~]?=)",P="\\["+O+"*("+M+")"+O+"*(?:"+D+O+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+_+")|)|)"+O+"*\\]",H=":("+M+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+P+")|[^:]|\\\\.)*|.*))\\)|)",B=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)",j=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g"),F=new RegExp("^"+O+"*,"+O+"*"),I=new RegExp("^"+O+"*([\\x20\\t\\r\\n\\f>+~])"+O+"*"),q=new RegExp(H),R=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,U=/^:not/,z=/[\x20\t\r\n\f]*[+~]/,W=/:not\($/,X=/h\d/i,V=/input|select|textarea|button/i,$=/\\(?!\\)/g,J={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),NAME:new RegExp("^\\[name=['\"]?("+M+")['\"]?\\]"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+H),POS:new RegExp(B,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),needsContext:new RegExp("^"+O+"*[>+~]|"+B,"i")},K=function(e){var t=g.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},Q=K(function(e){return e.appendChild(g.createComment("")),!e.getElementsByTagName("*").length}),G=K(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==p&&e.firstChild.getAttribute("href")==="#"}),Y=K(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),Z=K(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),et=K(function(e){e.id=d+0,e.innerHTML="<a name='"+d+"'></a><div name='"+d+"'></div>",y.insertBefore(e,y.firstChild);var t=g.getElementsByName&&g.getElementsByName(d).length===2+g.getElementsByName(d+0).length;return r=!g.getElementById(d),y.removeChild(e),t});try{x.call(y.childNodes,0)[0].nodeType}catch(tt){x=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}nt.matches=function(e,t){return nt(e,null,null,t)},nt.matchesSelector=function(e,t){return nt(t,null,null,[e]).length>0},s=nt.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue}else for(;t=e[r];r++)n+=s(t);return n},o=nt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},u=nt.contains=y.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:y.compareDocumentPosition?function(e,t){return t&&!!(e.compareDocumentPosition(t)&16)}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},nt.attr=function(e,t){var n,r=o(e);return r||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):r||Y?e.getAttribute(t):(n=e.getAttributeNode(t),n?typeof e[t]=="boolean"?e[t]?t:null:n.specified?n.value:null:null)},i=nt.selectors={cacheLength:50,createPseudo:N,match:J,attrHandle:G?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:r?function(e,t,n){if(typeof t.getElementById!==p&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==p&&!r){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==p&&i.getAttributeNode("id").value===e?[i]:t:[]}},TAG:Q?function(e,t){if(typeof t.getElementsByTagName!==p)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++)r.nodeType===1&&i.push(r);return i}return n},NAME:et&&function(e,t){if(typeof t.getElementsByName!==p)return t.getElementsByName(name)},CLASS:Z&&function(e,t,n){if(typeof t.getElementsByClassName!==p&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,""),e[3]=(e[4]||e[5]||"").replace($,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1]==="nth"?(e[2]||nt.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd")),e[4]=+(e[6]+e[7]||e[2]==="odd")):e[2]&&nt.error(e[0]),e},PSEUDO:function(e){var t,n;if(J.CHILD.test(e[0]))return null;if(e[3])e[2]=e[3];else if(t=e[4])q.test(t)&&(n=ut(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t;return e.slice(0,3)}},filter:{ID:r?function(e){return e=e.replace($,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace($,""),function(t){var n=typeof t.getAttributeNode!==p&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace($,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[d][e+" "];return t||(t=new RegExp("(^|"+O+")"+e+"("+O+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==p&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r,i){var s=nt.attr(r,e);return s==null?t==="!=":t?(s+="",t==="="?s===n:t==="!="?s!==n:t==="^="?n&&s.indexOf(n)===0:t==="*="?n&&s.indexOf(n)>-1:t==="$="?n&&s.substr(s.length-n.length)===n:t==="~="?(" "+s+" ").indexOf(n)>-1:t==="|="?s===n||s.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r){return e==="nth"?function(e){var t,i,s=e.parentNode;if(n===1&&r===0)return!0;if(s){i=0;for(t=s.firstChild;t;t=t.nextSibling)if(t.nodeType===1){i++;if(e===t)break}}return i-=r,i===n||i%n===0&&i/n>=0}:function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling)if(n.nodeType===1)return!1;if(e==="first")return!0;n=t;case"last":while(n=n.nextSibling)if(n.nodeType===1)return!1;return!0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||nt.error("unsupported pseudo: "+e);return r[d]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?N(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=T.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:N(function(e){var t=[],n=[],r=a(e.replace(j,"$1"));return r[d]?N(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:N(function(e){return function(t){return nt(e,t).length>0}}),contains:N(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!i.pseudos.empty(e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4)return!1;e=e.nextSibling}return!0},header:function(e){return X.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:rt("radio"),checkbox:rt("checkbox"),file:rt("file"),password:rt("password"),image:rt("image"),submit:it("submit"),reset:it("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return V.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:st(function(){return[0]}),last:st(function(e,t){return[t-1]}),eq:st(function(e,t,n){return[n<0?n+t:n]}),even:st(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:st(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:st(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:st(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},f=y.compareDocumentPosition?function(e,t){return e===t?(l=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:function(e,t){if(e===t)return l=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,u=t.parentNode,a=o;if(o===u)return ot(e,t);if(!o)return-1;if(!u)return 1;while(a)i.unshift(a),a=a.parentNode;a=u;while(a)s.unshift(a),a=a.parentNode;n=i.length,r=s.length;for(var f=0;f<n&&f<r;f++)if(i[f]!==s[f])return ot(i[f],s[f]);return f===n?ot(e,s[f],-1):ot(i[f],t,1)},[0,0].sort(f),h=!l,nt.uniqueSort=function(e){var t,n=[],r=1,i=0;l=h,e.sort(f);if(l){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},nt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},a=nt.compile=function(e,t){var n,r=[],i=[],s=A[d][e+" "];if(!s){t||(t=ut(e)),n=t.length;while(n--)s=ht(t[n]),s[d]?r.push(s):i.push(s);s=A(e,pt(i,r))}return s},g.querySelectorAll&&function(){var e,t=vt,n=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,i=[":focus"],s=[":active"],u=y.matchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector||y.msMatchesSelector;K(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||i.push("\\["+O+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||i.push(":checked")}),K(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&i.push("[*^$]="+O+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||i.push(":enabled",":disabled")}),i=new RegExp(i.join("|")),vt=function(e,r,s,o,u){if(!o&&!u&&!i.test(e)){var a,f,l=!0,c=d,h=r,p=r.nodeType===9&&e;if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){a=ut(e),(l=r.getAttribute("id"))?c=l.replace(n,"\\$&"):r.setAttribute("id",c),c="[id='"+c+"'] ",f=a.length;while(f--)a[f]=c+a[f].join("");h=z.test(e)&&r.parentNode||r,p=a.join(",")}if(p)try{return S.apply(s,x.call(h.querySelectorAll(p),0)),s}catch(v){}finally{l||r.removeAttribute("id")}}return t(e,r,s,o,u)},u&&(K(function(t){e=u.call(t,"div");try{u.call(t,"[test!='']:sizzle"),s.push("!=",H)}catch(n){}}),s=new RegExp(s.join("|")),nt.matchesSelector=function(t,n){n=n.replace(r,"='$1']");if(!o(t)&&!s.test(n)&&!i.test(n))try{var a=u.call(t,n);if(a||e||t.document&&t.document.nodeType!==11)return a}catch(f){}return nt(n,null,null,[t]).length>0})}(),i.pseudos.nth=i.pseudos.eq,i.filters=mt.prototype=i.pseudos,i.setFilters=new mt,nt.attr=v.attr,v.find=nt,v.expr=nt.selectors,v.expr[":"]=v.expr.pseudos,v.unique=nt.uniqueSort,v.text=nt.getText,v.isXMLDoc=nt.isXML,v.contains=nt.contains}(e);var nt=/Until$/,rt=/^(?:parents|prev(?:Until|All))/,it=/^.[^:#\[\.,]*$/,st=v.expr.match.needsContext,ot={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({find:function(e){var t,n,r,i,s,o,u=this;if(typeof e!="string")return v(e).filter(function(){for(t=0,n=u.length;t<n;t++)if(v.contains(u[t],this))return!0});o=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){r=o.length,v.find(e,this[t],o);if(t>0)for(i=r;i<o.length;i++)for(s=0;s<r;s++)if(o[s]===o[i]){o.splice(i--,1);break}}return o},has:function(e){var t,n=v(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(v.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1),"not",e)},filter:function(e){return this.pushStack(ft(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?st.test(e)?v(e,this.context).index(this[0])>=0:v.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=st.test(e)||typeof e!="string"?v(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:v.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return s=s.length>1?v.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?typeof e=="string"?v.inArray(this[0],v(e)):v.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?v(e,t):v.makeArray(e&&e.nodeType?[e]:e),r=v.merge(this.get(),n);return this.pushStack(ut(n[0])||ut(r[0])?r:v.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),v.fn.andSelf=v.fn.addBack,v.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return v.dir(e,"parentNode")},parentsUntil:function(e,t,n){return v.dir(e,"parentNode",n)},next:function(e){return at(e,"nextSibling")},prev:function(e){return at(e,"previousSibling")},nextAll:function(e){return v.dir(e,"nextSibling")},prevAll:function(e){return v.dir(e,"previousSibling")},nextUntil:function(e,t,n){return v.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return v.dir(e,"previousSibling",n)},siblings:function(e){return v.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return v.sibling(e.firstChild)},contents:function(e){return v.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:v.merge([],e.childNodes)}},function(e,t){v.fn[e]=function(n,r){var i=v.map(this,t,n);return nt.test(e)||(r=n),r&&typeof r=="string"&&(i=v.filter(r,i)),i=this.length>1&&!ot[e]?v.unique(i):i,this.length>1&&rt.test(e)&&(i=i.reverse()),this.pushStack(i,e,l.call(arguments).join(","))}}),v.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?v.find.matchesSelector(t[0],e)?[t[0]]:[]:v.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!v(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var ct="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ht=/ jQuery\d+="(?:null|\d+)"/g,pt=/^\s+/,dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,vt=/<([\w:]+)/,mt=/<tbody/i,gt=/<|&#?\w+;/,yt=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,wt=new RegExp("<(?:"+ct+")[\\s/>]","i"),Et=/^(?:checkbox|radio)$/,St=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/\/(java|ecma)script/i,Tt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Nt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ct=lt(i),kt=Ct.appendChild(i.createElement("div"));Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td,v.support.htmlSerialize||(Nt._default=[1,"X<div>","</div>"]),v.fn.extend({text:function(e){return v.access(this,function(e){return e===t?v.text(this):this.empty().append((this[0]&&this[0].ownerDocument||i).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(v.isFunction(e))return this.each(function(t){v(this).wrapAll(e.call(this,t))});if(this[0]){var t=v(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return v.isFunction(e)?this.each(function(t){v(this).wrapInner(e.call(this,t))}):this.each(function(){var t=v(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=v.isFunction(e);return this.each(function(n){v(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){v.nodeName(this,"body")||v(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(e,this),"before",this.selector)}},after:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||v.filter(e,[n]).length)!t&&n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),v.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&v.cleanData(e.getElementsByTagName("*"));while(e.firstChild)e.removeChild(e.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return v.clone(this,e,t)})},html:function(e){return v.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(ht,""):t;if(typeof e=="string"&&!yt.test(e)&&(v.support.htmlSerialize||!wt.test(e))&&(v.support.leadingWhitespace||!pt.test(e))&&!Nt[(vt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(dt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return ut(this[0])?this.length?this.pushStack(v(v.isFunction(e)?e():e),"replaceWith",e):this:v.isFunction(e)?this.each(function(t){var n=v(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=v(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;v(this).remove(),t?v(t).before(e):v(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var i,s,o,u,a=0,f=e[0],l=[],c=this.length;if(!v.support.checkClone&&c>1&&typeof f=="string"&&St.test(f))return this.each(function(){v(this).domManip(e,n,r)});if(v.isFunction(f))return this.each(function(i){var s=v(this);e[0]=f.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){i=v.buildFragment(e,this,l),o=i.fragment,s=o.firstChild,o.childNodes.length===1&&(o=s);if(s){n=n&&v.nodeName(s,"tr");for(u=i.cacheable||c-1;a<c;a++)r.call(n&&v.nodeName(this[a],"table")?Lt(this[a],"tbody"):this[a],a===u?o:v.clone(o,!0,!0))}o=s=null,l.length&&v.each(l,function(e,t){t.src?v.ajax?v.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):v.error("no ajax"):v.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Tt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),v.buildFragment=function(e,n,r){var s,o,u,a=e[0];return n=n||i,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,e.length===1&&typeof a=="string"&&a.length<512&&n===i&&a.charAt(0)==="<"&&!bt.test(a)&&(v.support.checkClone||!St.test(a))&&(v.support.html5Clone||!wt.test(a))&&(o=!0,s=v.fragments[a],u=s!==t),s||(s=n.createDocumentFragment(),v.clean(e,n,s,r),o&&(v.fragments[a]=u&&s)),{fragment:s,cacheable:o}},v.fragments={},v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){v.fn[e]=function(n){var r,i=0,s=[],o=v(n),u=o.length,a=this.length===1&&this[0].parentNode;if((a==null||a&&a.nodeType===11&&a.childNodes.length===1)&&u===1)return o[t](this[0]),this;for(;i<u;i++)r=(i>0?this.clone(!0):this).get(),v(o[i])[t](r),s=s.concat(r);return this.pushStack(s,e,o.selector)}}),v.extend({clone:function(e,t,n){var r,i,s,o;v.support.html5Clone||v.isXMLDoc(e)||!wt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(kt.innerHTML=e.outerHTML,kt.removeChild(o=kt.firstChild));if((!v.support.noCloneEvent||!v.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!v.isXMLDoc(e)){Ot(e,o),r=Mt(e),i=Mt(o);for(s=0;r[s];++s)i[s]&&Ot(r[s],i[s])}if(t){At(e,o);if(n){r=Mt(e),i=Mt(o);for(s=0;r[s];++s)At(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var s,o,u,a,f,l,c,h,p,d,m,g,y=t===i&&Ct,b=[];if(!t||typeof t.createDocumentFragment=="undefined")t=i;for(s=0;(u=e[s])!=null;s++){typeof u=="number"&&(u+="");if(!u)continue;if(typeof u=="string")if(!gt.test(u))u=t.createTextNode(u);else{y=y||lt(t),c=t.createElement("div"),y.appendChild(c),u=u.replace(dt,"<$1></$2>"),a=(vt.exec(u)||["",""])[1].toLowerCase(),f=Nt[a]||Nt._default,l=f[0],c.innerHTML=f[1]+u+f[2];while(l--)c=c.lastChild;if(!v.support.tbody){h=mt.test(u),p=a==="table"&&!h?c.firstChild&&c.firstChild.childNodes:f[1]==="<table>"&&!h?c.childNodes:[];for(o=p.length-1;o>=0;--o)v.nodeName(p[o],"tbody")&&!p[o].childNodes.length&&p[o].parentNode.removeChild(p[o])}!v.support.leadingWhitespace&&pt.test(u)&&c.insertBefore(t.createTextNode(pt.exec(u)[0]),c.firstChild),u=c.childNodes,c.parentNode.removeChild(c)}u.nodeType?b.push(u):v.merge(b,u)}c&&(u=c=y=null);if(!v.support.appendChecked)for(s=0;(u=b[s])!=null;s++)v.nodeName(u,"input")?_t(u):typeof u.getElementsByTagName!="undefined"&&v.grep(u.getElementsByTagName("input"),_t);if(n){m=function(e){if(!e.type||xt.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)};for(s=0;(u=b[s])!=null;s++)if(!v.nodeName(u,"script")||!m(u))n.appendChild(u),typeof u.getElementsByTagName!="undefined"&&(g=v.grep(v.merge([],u.getElementsByTagName("script")),m),b.splice.apply(b,[s+1,0].concat(g)),s+=g.length)}return b},cleanData:function(e,t){var n,r,i,s,o=0,u=v.expando,a=v.cache,f=v.support.deleteExpando,l=v.event.special;for(;(i=e[o])!=null;o++)if(t||v.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)l[s]?v.event.remove(i,s):v.removeEvent(i,s,n.handle);a[r]&&(delete a[r],f?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,v.deletedIds.push(r))}}}}),function(){var e,t;v.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=v.uaMatch(o.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),v.browser=t,v.sub=function(){function e(t,n){return new e.fn.init(t,n)}v.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,i){return i&&i instanceof v&&!(i instanceof e)&&(i=e(i)),v.fn.init.call(this,r,i,t)},e.fn.init.prototype=e.fn;var t=e(i);return e}}();var Dt,Pt,Ht,Bt=/alpha\([^)]*\)/i,jt=/opacity=([^)]*)/,Ft=/^(top|right|bottom|left)$/,It=/^(none|table(?!-c[ea]).+)/,qt=/^margin/,Rt=new RegExp("^("+m+")(.*)$","i"),Ut=new RegExp("^("+m+")(?!px)[a-z%]+$","i"),zt=new RegExp("^([-+])=("+m+")","i"),Wt={BODY:"block"},Xt={position:"absolute",visibility:"hidden",display:"block"},Vt={letterSpacing:0,fontWeight:400},$t=["Top","Right","Bottom","Left"],Jt=["Webkit","O","Moz","ms"],Kt=v.fn.toggle;v.fn.extend({css:function(e,n){return v.access(this,function(e,n,r){return r!==t?v.style(e,n,r):v.css(e,n)},e,n,arguments.length>1)},show:function(){return Yt(this,!0)},hide:function(){return Yt(this)},toggle:function(e,t){var n=typeof e=="boolean";return v.isFunction(e)&&v.isFunction(t)?Kt.apply(this,arguments):this.each(function(){(n?e:Gt(this))?v(this).show():v(this).hide()})}}),v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Dt(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":v.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=v.camelCase(n),f=e.style;n=v.cssProps[a]||(v.cssProps[a]=Qt(f,a)),u=v.cssHooks[n]||v.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=zt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(v.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!v.cssNumber[a]&&(r+="px");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=v.camelCase(n);return n=v.cssProps[a]||(v.cssProps[a]=Qt(e.style,a)),u=v.cssHooks[n]||v.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,i)),s===t&&(s=Dt(e,n)),s==="normal"&&n in Vt&&(s=Vt[n]),r||i!==t?(o=parseFloat(s),r||v.isNumeric(o)?o||0:s):s},swap:function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=s[i];return r}}),e.getComputedStyle?Dt=function(t,n){var r,i,s,o,u=e.getComputedStyle(t,null),a=t.style;return u&&(r=u.getPropertyValue(n)||u[n],r===""&&!v.contains(t.ownerDocument,t)&&(r=v.style(t,n)),Ut.test(r)&&qt.test(n)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=u.width,a.width=i,a.minWidth=s,a.maxWidth=o)),r}:i.documentElement.currentStyle&&(Dt=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;return i==null&&s&&s[t]&&(i=s[t]),Ut.test(i)&&!Ft.test(t)&&(n=s.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":i,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),i===""?"auto":i}),v.each(["height","width"],function(e,t){v.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&It.test(Dt(e,"display"))?v.swap(e,Xt,function(){return tn(e,t,r)}):tn(e,t,r)},set:function(e,n,r){return Zt(e,n,r?en(e,t,r,v.support.boxSizing&&v.css(e,"boxSizing")==="border-box"):0)}}}),v.support.opacity||(v.cssHooks.opacity={get:function(e,t){return jt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=v.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&v.trim(s.replace(Bt,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=Bt.test(s)?s.replace(Bt,i):s+" "+i}}),v(function(){v.support.reliableMarginRight||(v.cssHooks.marginRight={get:function(e,t){return v.swap(e,{display:"inline-block"},function(){if(t)return Dt(e,"marginRight")})}}),!v.support.pixelPosition&&v.fn.position&&v.each(["top","left"],function(e,t){v.cssHooks[t]={get:function(e,n){if(n){var r=Dt(e,t);return Ut.test(r)?v(e).position()[t]+"px":r}}}})}),v.expr&&v.expr.filters&&(v.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!v.support.reliableHiddenOffsets&&(e.style&&e.style.display||Dt(e,"display"))==="none"},v.expr.filters.visible=function(e){return!v.expr.filters.hidden(e)}),v.each({margin:"",padding:"",border:"Width"},function(e,t){v.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+$t[r]+t]=i[r]||i[r-2]||i[0];return s}},qt.test(e)||(v.cssHooks[e+t].set=Zt)});var rn=/%20/g,sn=/\[\]$/,on=/\r?\n/g,un=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,an=/^(?:select|textarea)/i;v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?v.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||an.test(this.nodeName)||un.test(this.type))}).map(function(e,t){var n=v(this).val();return n==null?null:v.isArray(n)?v.map(n,function(e,n){return{name:t.name,value:e.replace(on,"\r\n")}}):{name:t.name,value:n.replace(on,"\r\n")}}).get()}}),v.param=function(e,n){var r,i=[],s=function(e,t){t=v.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=v.ajaxSettings&&v.ajaxSettings.traditional);if(v.isArray(e)||e.jquery&&!v.isPlainObject(e))v.each(e,function(){s(this.name,this.value)});else for(r in e)fn(r,e[r],n,s);return i.join("&").replace(rn,"+")};var ln,cn,hn=/#.*$/,pn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,dn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,vn=/^(?:GET|HEAD)$/,mn=/^\/\//,gn=/\?/,yn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bn=/([?&])_=[^&]*/,wn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,En=v.fn.load,Sn={},xn={},Tn=["*/"]+["*"];try{cn=s.href}catch(Nn){cn=i.createElement("a"),cn.href="",cn=cn.href}ln=wn.exec(cn.toLowerCase())||[],v.fn.load=function(e,n,r){if(typeof e!="string"&&En)return En.apply(this,arguments);if(!this.length)return this;var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),v.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),v.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,u.html(i?v("<div>").append(e.replace(yn,"")).find(i):e)}),this},v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){v.fn[t]=function(e){return this.on(t,e)}}),v.each(["get","post"],function(e,n){v[n]=function(e,r,i,s){return v.isFunction(r)&&(s=s||i,i=r,r=t),v.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),v.extend({getScript:function(e,n){return v.get(e,t,n,"script")},getJSON:function(e,t,n){return v.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Ln(e,v.ajaxSettings):(t=e,e=v.ajaxSettings),Ln(e,t),e},ajaxSettings:{url:cn,isLocal:dn.test(ln[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Tn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":v.parseJSON,"text xml":v.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Cn(Sn),ajaxTransport:Cn(xn),ajax:function(e,n){function T(e,n,s,a){var l,y,b,w,S,T=n;if(E===2)return;E=2,u&&clearTimeout(u),o=t,i=a||"",x.readyState=e>0?4:0,s&&(w=An(c,x,s));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(v.lastModified[r]=S),S=x.getResponseHeader("Etag"),S&&(v.etag[r]=S)),e===304?(T="notmodified",l=!0):(l=On(c,w),T=l.state,y=l.data,b=l.error,l=!b);else{b=T;if(!T||e)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[y,T,x]):d.rejectWith(h,[x,T,b]),x.statusCode(g),g=t,f&&p.trigger("ajax"+(l?"Success":"Error"),[x,c,l?y:b]),m.fireWith(h,[x,T]),f&&(p.trigger("ajaxComplete",[x,c]),--v.active||v.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=v.ajaxSetup({},n),h=c.context||c,p=h!==c&&(h.nodeType||h instanceof v)?v(h):v.event,d=v.Deferred(),m=v.Callbacks("once memory"),g=c.statusCode||{},b={},w={},E=0,S="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!E){var n=e.toLowerCase();e=w[n]=w[n]||e,b[e]=t}return this},getAllResponseHeaders:function(){return E===2?i:null},getResponseHeader:function(e){var n;if(E===2){if(!s){s={};while(n=pn.exec(i))s[n[1].toLowerCase()]=n[2]}n=s[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return E||(c.mimeType=e),this},abort:function(e){return e=e||S,o&&o.abort(e),T(0,e),this}};d.promise(x),x.success=x.done,x.error=x.fail,x.complete=m.add,x.statusCode=function(e){if(e){var t;if(E<2)for(t in e)g[t]=[g[t],e[t]];else t=e[x.status],x.always(t)}return this},c.url=((e||c.url)+"").replace(hn,"").replace(mn,ln[1]+"//"),c.dataTypes=v.trim(c.dataType||"*").toLowerCase().split(y),c.crossDomain==null&&(a=wn.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===ln[1]&&a[2]===ln[2]&&(a[3]||(a[1]==="http:"?80:443))==(ln[3]||(ln[1]==="http:"?80:443)))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=v.param(c.data,c.traditional)),kn(Sn,c,n,x);if(E===2)return x;f=c.global,c.type=c.type.toUpperCase(),c.hasContent=!vn.test(c.type),f&&v.active++===0&&v.event.trigger("ajaxStart");if(!c.hasContent){c.data&&(c.url+=(gn.test(c.url)?"&":"?")+c.data,delete c.data),r=c.url;if(c.cache===!1){var N=v.now(),C=c.url.replace(bn,"$1_="+N);c.url=C+(C===c.url?(gn.test(c.url)?"&":"?")+"_="+N:"")}}(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),c.ifModified&&(r=r||c.url,v.lastModified[r]&&x.setRequestHeader("If-Modified-Since",v.lastModified[r]),v.etag[r]&&x.setRequestHeader("If-None-Match",v.etag[r])),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+Tn+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)x.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&E!==2){S="abort";for(l in{success:1,error:1,complete:1})x[l](c[l]);o=kn(xn,c,n,x);if(!o)T(-1,"No Transport");else{x.readyState=1,f&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{E=1,o.send(b,T)}catch(k){if(!(E<2))throw k;T(-1,k)}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var Mn=[],_n=/\?/,Dn=/(=)\?(?=&|$)|\?\?/,Pn=v.now();v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Mn.pop()||v.expando+"_"+Pn++;return this[e]=!0,e}}),v.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.data,f=n.url,l=n.jsonp!==!1,c=l&&Dn.test(f),h=l&&!c&&typeof a=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dn.test(a);if(n.dataTypes[0]==="jsonp"||c||h)return s=n.jsonpCallback=v.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[s],c?n.url=f.replace(Dn,"$1"+s):h?n.data=a.replace(Dn,"$1"+s):l&&(n.url+=(_n.test(f)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||v.error(s+" was not called"),u[0]},n.dataTypes[0]="json",e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Mn.push(s)),u&&v.isFunction(o)&&o(u[0]),u=o=t}),"script"}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return v.globalEval(e),e}}}),v.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),v.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=i.head||i.getElementsByTagName("head")[0]||i.documentElement;return{send:function(s,o){n=i.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||o(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Hn,Bn=e.ActiveXObject?function(){for(var e in Hn)Hn[e](0,1)}:!1,jn=0;v.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Fn()||In()}:Fn,function(e){v.extend(v.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(v.ajaxSettings.xhr()),v.support.ajax&&v.ajaxTransport(function(n){if(!n.crossDomain||v.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=v.noop,Bn&&delete Hn[o]);if(i)a.readyState!==4&&a.abort();else{u=a.status,l=a.getAllResponseHeaders(),c={},h=a.responseXML,h&&h.documentElement&&(c.xml=h);try{c.text=a.responseText}catch(p){}try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r,0):(o=++jn,Bn&&(Hn||(Hn={},v(e).unload(Bn)),Hn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var qn,Rn,Un=/^(?:toggle|show|hide)$/,zn=new RegExp("^(?:([-+])=|)("+m+")([a-z%]*)$","i"),Wn=/queueHooks$/,Xn=[Gn],Vn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=zn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(v.cssNumber[e]?"":"px");if(r!=="px"&&u){u=v.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,v.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};v.Animation=v.extend(Kn,{tweener:function(e,t){v.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Vn[n]=Vn[n]||[],Vn[n].unshift(t)},prefilter:function(e,t){t?Xn.unshift(e):Xn.push(e)}}),v.Tween=Yn,Yn.prototype={constructor:Yn,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(v.cssNumber[n]?"":"px")},cur:function(){var e=Yn.propHooks[this.prop];return e&&e.get?e.get(this):Yn.propHooks._default.get(this)},run:function(e){var t,n=Yn.propHooks[this.prop];return this.options.duration?this.pos=t=v.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Yn.propHooks._default.set(this),this}},Yn.prototype.init.prototype=Yn.prototype,Yn.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=v.css(e.elem,e.prop,!1,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){v.fx.step[e.prop]?v.fx.step[e.prop](e):e.elem.style&&(e.elem.style[v.cssProps[e.prop]]!=null||v.cssHooks[e.prop])?v.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Yn.propHooks.scrollTop=Yn.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},v.each(["toggle","show","hide"],function(e,t){var n=v.fn[t];v.fn[t]=function(r,i,s){return r==null||typeof r=="boolean"||!e&&v.isFunction(r)&&v.isFunction(i)?n.apply(this,arguments):this.animate(Zn(t,!0),r,i,s)}}),v.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Gt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=v.isEmptyObject(e),s=v.speed(t,n,r),o=function(){var t=Kn(this,v.extend({},e),s);i&&t.stop(!0)};return i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=v.timers,o=v._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Wn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&v.dequeue(this,e)})}}),v.each({slideDown:Zn("show"),slideUp:Zn("hide"),slideToggle:Zn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){v.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),v.speed=function(e,t,n){var r=e&&typeof e=="object"?v.extend({},e):{complete:n||!n&&t||v.isFunction(e)&&e,duration:e,easing:n&&t||t&&!v.isFunction(t)&&t};r.duration=v.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in v.fx.speeds?v.fx.speeds[r.duration]:v.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){v.isFunction(r.old)&&r.old.call(this),r.queue&&v.dequeue(this,r.queue)},r},v.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},v.timers=[],v.fx=Yn.prototype.init,v.fx.tick=function(){var e,n=v.timers,r=0;qn=v.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||v.fx.stop(),qn=t},v.fx.timer=function(e){e()&&v.timers.push(e)&&!Rn&&(Rn=setInterval(v.fx.tick,v.fx.interval))},v.fx.interval=13,v.fx.stop=function(){clearInterval(Rn),Rn=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fx.step={},v.expr&&v.expr.filters&&(v.expr.filters.animated=function(e){return v.grep(v.timers,function(t){return e===t.elem}).length});var er=/^(?:body|html)$/i;v.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){v.offset.setOffset(this,e,t)});var n,r,i,s,o,u,a,f={top:0,left:0},l=this[0],c=l&&l.ownerDocument;if(!c)return;return(r=c.body)===l?v.offset.bodyOffset(l):(n=c.documentElement,v.contains(n,l)?(typeof l.getBoundingClientRect!="undefined"&&(f=l.getBoundingClientRect()),i=tr(c),s=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,u=i.pageYOffset||n.scrollTop,a=i.pageXOffset||n.scrollLeft,{top:f.top+u-s,left:f.left+a-o}):f)},v.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return v.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(v.css(e,"marginTop"))||0,n+=parseFloat(v.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=v.css(e,"position");r==="static"&&(e.style.position="relative");var i=v(e),s=i.offset(),o=v.css(e,"top"),u=v.css(e,"left"),a=(r==="absolute"||r==="fixed")&&v.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),v.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},v.fn.extend({position:function(){if(!this[0])return;var e=this[0],t=this.offsetParent(),n=this.offset(),r=er.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(v.css(e,"marginTop"))||0,n.left-=parseFloat(v.css(e,"marginLeft"))||0,r.top+=parseFloat(v.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(v.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||i.body;while(e&&!er.test(e.nodeName)&&v.css(e,"position")==="static")e=e.offsetParent;return e||i.body})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);v.fn[e]=function(i){return v.access(this,function(e,i,s){var o=tr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?v(o).scrollLeft():s,r?s:v(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),v.each({Height:"height",Width:"width"},function(e,n){v.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){v.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return v.access(this,function(n,r,i){var s;return v.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?v.css(n,r,i,u):v.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=v,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return v})})(window);(function(){jQuery.ajaxSetup({accepts:{control:'application/x-control'},converters:{'text control':function(result){return eval('('+result+')');}}});})();(function($,undefined){$.fn.attributes=function(name,value){if(arguments.length>1){for(var i=0;i<this.length;i++){if(this[i].setAttribute){this[i].setAttribute(name,value);}else{$(this[i]).attr(name,value);}}
return this;}else{var result=[];for(var i=0;i<this.length;i++){if(this[i].getAttribute){var value=this[i].getAttribute(name);}else{var value=$(this[i]).attr(name);}
if(value){result.push(value);}}
return result;}}})(jQuery);(function($){$.Event.prototype.cancel=function(fullCancel){if($.type(this.preventDefault)=='function')this.preventDefault();if(fullCancel){if($.type(this.stopPropagation)=='function')this.stopPropagation();if($.type(this.stopImmediatePropagation)=='function')this.stopImmediatePropagation();}
this.result=false;return false;}})(jQuery);(function($){$.fn.htmlParams=function(){var result={};this.find('[data-html-param]').each(function(){var name=$(this).attr('data-html-param');if(name){var value=''+$(this).text();result[name]=value.replace("&lt;",'<').replace("&gt;",'>');}});return result;}
$.fn.htmlParamsRemove=function(){this.find('[data-html-param]').remove();return this;}})(jQuery);(function($){$.fn.triggerClass=function(className){for(var i=0;i<=this.length;i++){var item=this.eq(i);if(item.hasClass(className)){item.removeClass(className);}else{item.addClass(className);}}
return this;}})(jQuery);(function($){$.fn.scrollIntoView=function(){for(var i=0;i<this.length;i++){var element=this.get(i);if(element){if($.type(element.scrollIntoView)=='function'){element.scrollIntoView();}
break;}}
return this;}})(jQuery);(function($){if($.type(Array.prototype.indexOf)!='function'){Array.prototype.indexOf=function(element){var len=this.length;var from=Number(arguments[1])||0;from=(from<0)?Math.ceil(from):Math.floor(from);if(from<0)from+=len;for(;from<len;from++){if(from in this&&this[from]===element){return from;}}
return-1;}}
if(typeof String.prototype.upperCaseFirst!='function'){String.prototype.upperCaseFirst=function(){return this.charAt(0).toUpperCase()+this.slice(1);}}
if(typeof String.prototype.htmlEscape!='function'){String.prototype.htmlEscape=function(){return this.replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');}}})(jQuery);(function($){$.fn.directText=function(){var result=[];for(var i=0;i<this.length;i++){var element=this[i];if(element&&element.childNodes&&element.childNodes.length){for(var j=0;j<element.childNodes.length;j++){var node=element.childNodes[j];if(node.nodeType==3){result.push(node.nodeValue);}}}}
return result.join(" ");}})(jQuery);(function($){$.expr[':'].semanticRole=function(objNode,intStackIndex,arrProperties,arrNodeStack){return $(objNode).attr('data-sm-role')==arrProperties[3];};$.semanticRole=function(role){return $('[data-sm-role="'+role+'"]');}
$.fn.semanticTarget=function(){return $('[data-sm-name="'+this.attr('data-sm-target')+'"]');};$.fn.semanticRelated=function(){return $('[data-sm-related="'+this.attr('data-sm-related')+'"]');};})(jQuery);(function($,undefined){var AjaxQueue=function(alias){this.alias=alias;this.queue=[];this.current=null;this.counter=0;}
AjaxQueue.fn={};AjaxQueue.prototype=AjaxQueue.fn;var deferExecute=function(queue){if($.type(queue)!='object')return;if($.type(queue.current)=='object')return;setTimeout(function(){execute.apply(queue);},1);}
var delayHandler=function(){if($.type(this.queue)=='object'){queue=this.queue;this.queue=null;if($.type(queue.current)=='object'){if(this.marker==queue.current.marker){queue.current=null;deferExecute(queue);}}}}
var successHandler=function(data,textStatus,jqXHR){if($.type(this.queue)=='object'){queue=this.queue;this.queue=null;if($.type(queue.current)=='object'){if(this.marker==queue.current.marker){queue.current=null;if($.type(this.handler)=='function'){var response={"success":true,"xhr":jqXHR,"status":textStatus,"data":data,"alias":this.alias};this.handler.apply(response);}
deferExecute(queue);}}}}
var errorHandler=function(jqXHR,textStatus,errorThrown){if($.type(this.queue)=='object'){queue=this.queue;this.queue=null;if($.type(queue.current)=='object'){if(this.marker==queue.current.marker){queue.current=null;if($.type(this.handler)=='function'){var response={"success":false,"xhr":jqXHR,"status":textStatus,"message":errorThrown,"alias":this.alias};this.handler.apply(response);}
deferExecute(queue);}}}};var delay=function(context,timeout){if(timeout<=0)return 0;return setTimeout(function(){delayHandler.apply(context);},timeout);}
var execute=function(){if($.type(this.current)=='object')return;if(this.queue.length<=0)return;var query=this.queue.shift();this.current=query;query.queue=this;if(query.delay){if(!delay(query,query.delay)){this.current=null;query.queue=null;deferExecute(this);}}else{$.ajax({"url":query.url,"context":query,"type":query.method,"data":query.data,"success":successHandler,"error":errorHandler});}}
AjaxQueue.fn.request=function(method,url,data,handler){this.queue.push({"method":method,"url":url,"data":data,"handler":handler,"queue":null,"marker":this.counter,});this.counter++;deferExecute(this);return this;}
AjaxQueue.fn.get=function(url,handler){return this.request('GET',url,null,handler);}
AjaxQueue.fn.post=function(url,data,handler){return this.request('POST',url,data,handler);}
AjaxQueue.fn.delay=function(timeout){if(timeout<=0)return this;this.queue.push({"delay":timeout,"queue":null,"marker":this.counter,});this.counter++;deferExecute(this);return this;}
AjaxQueue.fn.clear=function(){this.current=null;this.queue=[];this.timer=0;return this;}
var manager=function(alias){if(!alias)return manager;if(manager.hasOwnProperty(alias)){if($.type(manager[alias])=='function')return null;return manager[alias];}
return null;}
manager.create=function(alias){this.destroy(alias);if(!alias)return null;var result=new AjaxQueue(alias);manager[alias]=result;return result;}
manager.destroy=function(alias){if(alias&&manager.hasOwnProperty(alias)){var queue=manager[alias];if($.type(queue)=='function')return manager;manager[alias]=undefined;queue.clear();}
return manager;}
$.ajax.queue=manager;})(jQuery);(function($){if(typeof JSON==='object'&&JSON.stringify){$.toJSON=JSON.stringify;$.fromJSON=JSON.parse;return;}
$.fromJSON=$.parseJSON;var escape=/["\\\x00-\x1f\x7f-\x9f]/g;var meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};var hasOwn=Object.prototype.hasOwnProperty;var quoteString=function(str){if(str.match(escape)){return'"'+str.replace(escape,function(a){var c=meta[a];if(typeof c==='string'){return c;}
c=a.charCodeAt();return'\\u00'+Math.floor(c/16).toString(16)+(c%16).toString(16);})+'"';}
return'"'+str+'"';};$.toJSON=function(o){if(o===null)return'null';var pairs;var k;var name;var val;var type=$.type(o);if(type==='undefined'){return undefined;}
if(type==='number'||type==='boolean')return String(o);if(type==='string')return quoteString(o);if(typeof o.toJSON==='function')return $.toJSON(o.toJSON());if(type==='date'){var month=o.getUTCMonth()+1;var day=o.getUTCDate();var year=o.getUTCFullYear();var hours=o.getUTCHours();var minutes=o.getUTCMinutes();var seconds=o.getUTCSeconds();var milli=o.getUTCMilliseconds();if(month<10)month='0'+month;if(day<10)day='0'+day;if(hours<10)hours='0'+hours;if(minutes<10)minutes='0'+minutes;if(seconds<10)seconds='0'+seconds;if(milli<100)milli='0'+milli;if(milli<10)milli='0'+milli;return'"'+year+'-'+month+'-'+day+'T'+
hours+':'+minutes+':'+seconds+'.'+milli+'Z"';}
var pairs=[];if($.isArray(o)){for(k=0;k<o.length;k++){pairs.push($.toJSON(o[k])||'null');}
return'['+pairs.join(',')+']';}
if(typeof o==='object'){for(k in o){if(hasOwn.call(o,k)){type=typeof k;if(type==='number'){name='"'+k+'"';}else if(type==='string'){name=quoteString(k);}else{continue;}
type=typeof o[k];if(type!=='function'&&type!=='undefined'){val=$.toJSON(o[k]);pairs.push(name+':'+val);}}}
return'{'+pairs.join(',')+'}';}};}(jQuery));(function($,undefined){var supported=($.type(window.history)=='object')&&($.type(window.history.pushState)=='function');var canHandleEvents=true;var instance=$({});$.history=function(){return instance;};instance.native=function(){var sessionSupported;try{sessionStorage.setItem('sessionStorage',1);sessionStorage.removeItem('sessionStorage');sessionSupported=true;}catch(e){sessionSupported=false;}
return supported&&sessionSupported;};$(function(){if($.browser.safari){canHandleEvents=false;}});instance.enabled=function(value){if(value===undefined)return canHandleEvents;canHandleEvents=!!value;return this;}
instance.push=function(url,state){canHandleEvents=true;if(!url){url=window.location.href;}
if(instance.native()){sessionStorage.setItem('refresh_url',url);window.history.pushState(state,null,url);}
return instance;};instance.replace=function(url,state){if(instance.native()){window.history.replaceState(state,null,url);}
return instance;};instance.pop=function(handler){if($.type(handler)=='function'){instance.bind('pop',handler);}else{instance.trigger('pop',[location.pathname+location.search]);}
return instance;};var page_url=window.location.href,url_timeout;if(instance.native()){$(window).bind('pageshow',function(event){sessionStorage.setItem('refresh_url',page_url);});$(window).bind('popstate',function(event){var url=window.location.href;var refresh_url=sessionStorage.getItem('refresh_url');if(!refresh_url||(refresh_url!=url)){window.location=url;}});$(window).bind('unload',function(event){});}})(jQuery);(function($){$.fn.numeric=function(config,callback)
{if(typeof config==='boolean')
{config={decimal:config};}
config=config||{};if(typeof config.negative=="undefined"){config.negative=true;}
var decimal=(config.decimal===false)?"":config.decimal||".";var negative=(config.negative===true)?true:false;callback=(typeof(callback)=="function"?callback:function(){});return this.data("numeric.decimal",decimal).data("numeric.negative",negative).data("numeric.callback",callback).keypress($.fn.numeric.keypress).keyup($.fn.numeric.keyup).blur($.fn.numeric.blur);};$.fn.numeric.keypress=function(e)
{var decimal=$.data(this,"numeric.decimal");var negative=$.data(this,"numeric.negative");var key=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(key==13&&this.nodeName.toLowerCase()=="input")
{return true;}
else if(key==13)
{return false;}
var allow=false;if((e.ctrlKey&&key==97)||(e.ctrlKey&&key==65)){return true;}
if((e.ctrlKey&&key==120)||(e.ctrlKey&&key==88)){return true;}
if((e.ctrlKey&&key==99)||(e.ctrlKey&&key==67)){return true;}
if((e.ctrlKey&&key==122)||(e.ctrlKey&&key==90)){return true;}
if((e.ctrlKey&&key==118)||(e.ctrlKey&&key==86)||(e.shiftKey&&key==45)){return true;}
if(key<48||key>57)
{var value=$(this).val();if(value.indexOf("-")!==0&&negative&&key==45&&(value.length===0||parseInt($.fn.getSelectionStart(this),10)===0)){return true;}
if(decimal&&key==decimal.charCodeAt(0)&&value.indexOf(decimal)!=-1)
{allow=false;}
if(key!=8&&key!=9&&key!=13&&key!=35&&key!=36&&key!=37&&key!=39&&key!=46)
{allow=false;}
else
{if(typeof e.charCode!="undefined")
{if(e.keyCode==e.which&&e.which!==0)
{allow=true;if(e.which==46){allow=false;}}
else if(e.keyCode!==0&&e.charCode===0&&e.which===0)
{allow=true;}}}
if(decimal&&key==decimal.charCodeAt(0))
{if(value.indexOf(decimal)==-1)
{allow=true;}
else
{allow=false;}}}
else
{allow=true;}
return allow;};$.fn.numeric.keyup=function(e)
{var val=$(this).val();if(val&&val.length>0)
{var carat=$.fn.getSelectionStart(this);var selectionEnd=$.fn.getSelectionEnd(this);var decimal=$.data(this,"numeric.decimal");var negative=$.data(this,"numeric.negative");if(decimal!==""&&decimal!==null)
{var dot=val.indexOf(decimal);if(dot===0)
{this.value="0"+val;}
if(dot==1&&val.charAt(0)=="-")
{this.value="-0"+val.substring(1);}
val=this.value;}
var validChars=[0,1,2,3,4,5,6,7,8,9,'-',decimal];var length=val.length;for(var i=length-1;i>=0;i--)
{var ch=val.charAt(i);if(i!==0&&ch=="-")
{val=val.substring(0,i)+val.substring(i+1);}
else if(i===0&&!negative&&ch=="-")
{val=val.substring(1);}
var validChar=false;for(var j=0;j<validChars.length;j++)
{if(ch==validChars[j])
{validChar=true;break;}}
if(!validChar||ch==" ")
{val=val.substring(0,i)+val.substring(i+1);}}
var firstDecimal=val.indexOf(decimal);if(firstDecimal>0)
{for(var k=length-1;k>firstDecimal;k--)
{var chch=val.charAt(k);if(chch==decimal)
{val=val.substring(0,k)+val.substring(k+1);}}}
this.value=val;$.fn.setSelection(this,[carat,selectionEnd]);}};$.fn.numeric.blur=function()
{var decimal=$.data(this,"numeric.decimal");var callback=$.data(this,"numeric.callback");var val=this.value;if(val!=="")
{var re=new RegExp("^\\d+$|^\\d*"+decimal+"\\d+$");if(!re.exec(val))
{callback.apply(this);}}};$.fn.removeNumeric=function()
{return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).unbind("keypress",$.fn.numeric.keypress).unbind("blur",$.fn.numeric.blur);};$.fn.getSelectionStart=function(o)
{if(window.getSelection){return o.selectionStart;}
if(o.createTextRange){var r
r=document.selection.createRange().duplicate();r.moveEnd('character',o.value.length);if(r.text===''){return o.value.length;}
return o.value.lastIndexOf(r.text);}else{return o.selectionStart;}};$.fn.getSelectionEnd=function(o)
{if(window.getSelection){return o.selectionEnd;}
if(o.createTextRange){var r
r=document.selection.createRange().duplicate();r.moveStart('character',-o.value.length)
return r.text.length}else return o.selectionEnd}
$.fn.setSelection=function(o,p)
{if(typeof p=="number"){p=[p,p];}
if(p&&p.constructor==Array&&p.length==2)
{if(o.createTextRange)
{var r=o.createTextRange();r.collapse(true);r.moveStart('character',p[0]);r.moveEnd('character',p[1]);r.select();}
else if(o.setSelectionRange)
{o.focus();o.setSelectionRange(p[0],p[1]);}}};})(jQuery);(function($){jQuery.fn.putCursorAtEnd=function(){return this.each(function(){$(this).focus();if(this.setSelectionRange){var len=$(this).val().length*2;this.setSelectionRange(len,len);}else{$(this).val($(this).val());}
this.scrollTop=999999;});};})(jQuery);(function($){function maybeCall(thing,ctx){return(typeof thing=='function')?(thing.call(ctx)):thing;};function isElementInDOM(ele){while(ele=ele.parentNode){if(ele==document)return true;}
return false;};function Tipsy(element,options){this.$element=$(element);this.options=options;this.enabled=true;this.fixTitle();};Tipsy.prototype={show:function(){var title=this.getTitle();if(title&&this.enabled){var $tip=this.tip();$tip.find('.tipsy-inner')[this.options.html?'html':'text'](title);$tip[0].className='tipsy';$(document.body).append($tip.remove().css({top:0,left:0,visibility:'hidden',display:'block'}));if(this.options.hintClassName){$tip.addClass(this.options.hintClassName);}
var pos=$.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight});if($.inArray(this.options.hintClassName,['product-desc-hint','select-shade-hint'])!=-1){var marginRight=parseInt(this.$element.parent().css('margin-right').replace("px",""));var spanWidth=0;var spanChildren=this.$element.children();if(spanChildren.length){spanChildren.each(function(){spanWidth+=$(this).width();});}else{spanWidth=this.$element.width();}
if(this.$element.width()-Math.abs(marginRight)>=spanWidth){return false;}
if(marginRight<0){pos.width=pos.width-Math.abs(marginRight);}}
var actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight,gravity=maybeCall(this.options.gravity,this.$element[0]);var tp;var delta;switch(gravity.charAt(0)){case'n':var left=pos.left+pos.width/2-actualWidth/2;if((delta=left+actualWidth-$(window).outerWidth()-$(window).scrollLeft())>0){left-=delta;}
tp={top:pos.top+pos.height+this.options.offset,left:(left>0)?left:0};break;case's':var left=pos.left+pos.width/2-actualWidth/2;if((delta=left+actualWidth-$(window).outerWidth()-$(window).scrollLeft())>0){left-=delta;}
tp={top:pos.top-actualHeight-this.options.offset,left:(left>0)?left:0};break;case'e':tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth-this.options.offset};break;case'w':tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width+this.options.offset};break;}
if(gravity.length==2){if(gravity.charAt(1)=='w'){tp.left=pos.left+pos.width/2-15;}else{tp.left=pos.left+pos.width/2-actualWidth+15;}}
$tip.css(tp).addClass('tipsy-'+gravity);$tip.find('.tipsy-arrow').css({'margin-left':((delta>0)?delta:0)-5}).attr('class','tipsy-arrow tipsy-arrow-'+gravity.charAt(0));if(this.options.className){$tip.addClass(maybeCall(this.options.className,this.$element[0]));}
if(this.options.fade){$tip.stop().css({opacity:0,display:'block',visibility:'visible'}).animate({opacity:this.options.opacity});}else{$tip.css({visibility:'visible',opacity:this.options.opacity});}}},hide:function(){if(this.options.fade){this.tip().stop().fadeOut(function(){$(this).remove();});}else{this.tip().remove();}},fixTitle:function(){var $e=this.$element;if($e.attr('title')||typeof($e.attr('original-title'))!='string'){$e.attr('original-title',$e.attr('title')||'').removeAttr('title');}},getTitle:function(){var title,$e=this.$element,o=this.options;this.fixTitle();var title,o=this.options;if(typeof o.title=='string'){title=$e.attr(o.title=='title'?'original-title':o.title);}else if(typeof o.title=='function'){title=o.title.call($e[0]);}
title=(''+title).replace(/(^\s*|\s*$)/,"");return title||o.fallback;},tip:function(){if(!this.$tip){this.$tip=$('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>');this.$tip.data('tipsy-pointee',this.$element[0]);}
return this.$tip;},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null;}},enable:function(){this.enabled=true;},disable:function(){this.enabled=false;},toggleEnabled:function(){this.enabled=!this.enabled;}};$.fn.tipsy=function(options){var delayEnterTimeout=null;var delayLeaveTimeout=null;if(options===true){return this.data('tipsy');}else if(typeof options=='string'){var tipsy=this.data('tipsy');if(tipsy)tipsy[options]();return this;}
options=$.extend({},$.fn.tipsy.defaults,options);function get(ele){var tipsy=$.data(ele,'tipsy');if(!tipsy){tipsy=new Tipsy(ele,$.fn.tipsy.elementOptions(ele,options));$.data(ele,'tipsy',tipsy);}
return tipsy;}
function enter(event){clearTimeout(delayLeaveTimeout);var tipsy=get(this);tipsy.hoverState='in';if(options.delayIn==0){tipsy.show();}else{tipsy.fixTitle();delayEnterTimeout=setTimeout(function(){if(tipsy.hoverState=='in')tipsy.show();},options.delayIn);}};function leave(event){clearTimeout(delayEnterTimeout);var tipsy=get(this);tipsy.hoverState='out';if(options.delayOut==0){tipsy.hide();}else{delayLeaveTimeout=setTimeout(function(){if(tipsy.hoverState=='out')tipsy.hide();},options.delayOut);}};if(!options.live)this.each(function(){get(this);});if(options.trigger!='manual'){var binder=options.live?'live':'bind',eventIn=options.trigger=='hover'?'mouseenter':'focus',eventOut=options.trigger=='hover'?'mouseleave':'blur';this[binder](eventIn,enter)[binder](eventOut,leave);}
return this;};$.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:false,fallback:'',gravity:'n',html:false,live:false,offset:0,opacity:1,title:'title',trigger:'hover',hintClassName:null};$.fn.tipsy.revalidate=function(){$('.tipsy').each(function(){var pointee=$.data(this,'tipsy-pointee');if(!pointee||!isElementInDOM(pointee)){$(this).remove();}});};$.fn.tipsy.elementOptions=function(ele,options){return $.metadata?$.extend({},options,$(ele).metadata()):options;};$.fn.tipsy.autoNS=function(){return $(this).offset().top>($(document).scrollTop()+$(window).height()/2)?'s':'n';};$.fn.tipsy.autoWE=function(){return $(this).offset().left>($(document).scrollLeft()+$(window).width()/2)?'e':'w';};$.fn.tipsy.autoBounds=function(margin,prefer){return function(){var dir={ns:prefer[0],ew:(prefer.length>1?prefer[1]:false)},boundTop=$(document).scrollTop()+margin,boundLeft=$(document).scrollLeft()+margin,$this=$(this);if($this.offset().top<boundTop)dir.ns='n';if($this.offset().left<boundLeft)dir.ew='w';if($(window).width()+$(document).scrollLeft()-$this.offset().left<margin)dir.ew='e';if($(window).height()+$(document).scrollTop()-$this.offset().top<margin)dir.ns='s';return dir.ns+(dir.ew?dir.ew:'');}};})(jQuery);(function($){var clickEvent=function(event){event.cancel();var $container=event.data.container;var $liElem=$(this).parent('li');var selected=parseInt($liElem.attr('data-id'),10);var isSubmenu=$container.parents('.submenu').length>0?true:false;if($liElem.hasClass('disabled'))return false;if(!$liElem.hasClass('selected')){if(event.ctrlKey&&!isSubmenu){var $ulElem=$('ul:first',$liElem);$('li',$ulElem).removeClass('selected');$(this).parents('li').removeClass('selected');}else{$('li',$container).removeClass('selected');}
$liElem.addClass('selected');}else{if(event.ctrlKey&&!isSubmenu){$liElem.removeClass('selected');}else{if($('.selected',$container).length>1){$('.selected',$container).removeClass('selected');$liElem.addClass('selected');}}}
$container.trigger('selection-changed',[]);return false;}
var expandCollapseEvent=function(event){event.cancel();var $liElem=$(this).parent('li');var $ulElem=$('ul:first',$liElem);if(!$liElem.hasClass('plus')&&!$liElem.hasClass('minus')){return false;}
if($ulElem.length&&!$('.selected',$ulElem).length){if($liElem.hasClass('visible')){$liElem.removeClass('minus');$liElem.addClass('plus');$liElem.removeClass('visible');$('li',$ulElem).removeClass('visible');$('.minus',$ulElem).removeClass('minus').addClass('plus');$liElem.trigger('collapse');}else{$liElem.removeClass('plus');$liElem.addClass('minus');$liElem.addClass('visible');$liElem.trigger('expand');}}
return false;}
$.fn.tree=function(){$('li:has(ul)',this).addClass('plus');var params={container:this};return this.each(function(){$('a',this).click(params,clickEvent);$('span.icon',this).click(params,expandCollapseEvent);});}
$.fn.bindToTree=function(tree){$('li:has(ul)',this).addClass('plus');var params={container:tree,};return this.each(function(){$('a',this).click(params,clickEvent);$('span.icon',this).click(params,expandCollapseEvent);});}})(jQuery);(function($){var site=null;var showLeftSubmenu=function($obj){var $submenu=$('.submenu',$obj);$submenu.css('height',$(window).height()+'px');var objHeight=$obj.outerHeight();var wHeight=$(window).height();var h=$(window).height()-objHeight;var vPos=getViewablePosition($obj);var y=vPos.y;var smY=0;if(wHeight>$submenu.outerHeight()&&wHeight-y<=h/2+objHeight){smY=parseInt(h-(wHeight-y)+objHeight+5);}else{smY=parseInt(y>h/2?h/2:y);}
$submenu.css({top:smY>0?-smY:-1});var $prev=$obj.prev();if($prev.length){$prev.addClass('bottom-solid');}}
$.fn.menu=function(options){options=$.extend(true,{afterShow:function(){},},options);var dropdownMenuEnterDelay=150;var dropdownMenuLeaveDelay=550;var dropdownMainMenuEnterDelay=300;var dropdownMainMenuLeaveDelay=550;site=site||window.site;var dropdownMenuEnterTimer;var dropdownMenuLeaveTimer;var items=this;site.dropdown.beforeShow(function(){clearTimeout(dropdownMenuEnterTimer);clearTimeout(dropdownMenuLeaveTimer);items.removeClass('hover');});return this.each(function(){$(this).hover(function(){var obj=$(this);var isLeftMenu=obj.parents('.block-byoptions').length;var menuWrapper=obj.parents('.menu');var hoverItems=$('.hover',menuWrapper);site.dropdown.beforeShow(obj);if(dropdownMenuEnterTimer){clearTimeout(dropdownMenuEnterTimer);dropdownMenuEnterTimer=null;}
if(dropdownMenuLeaveTimer){clearTimeout(dropdownMenuLeaveTimer);dropdownMenuLeaveTimer=null;}
if(hoverItems.length>=1){clearTimeout(dropdownMenuEnterTimer);dropdownMenuEnterTimer=null;hoverItems.removeClass("hover");obj.addClass("hover");options.afterShow.call(null,obj);if(isLeftMenu){showLeftSubmenu(obj);}}
if(isLeftMenu){$('.bottom-solid',menuWrapper).each(function(index){if(!$(this).is(obj.prev())){$(this).removeClass("bottom-solid");}});}
$('.menu').each(function(index){if(!$(this).is(menuWrapper)){$('.hover',$(this)).removeClass("hover");}});if(isLeftMenu){obj.trigger('sub-menu-show',[]);}
dropdownMenuEnterTimer=setTimeout(function(){obj.addClass("hover");if(isLeftMenu){showLeftSubmenu(obj);}
site.dropdown.afterShow(obj);options.afterShow.call(null,obj);},obj.parents('#main-menu').length?dropdownMainMenuEnterDelay:dropdownMenuEnterDelay);},function(){var obj=$(this);var isLeftMenu=obj.parents('.block-byoptions').length;site.dropdown.beforeHide();clearTimeout(dropdownMenuEnterTimer);dropdownMenuLeaveTimer=setTimeout(function(){if(isLeftMenu){var $prev=obj.prev();if($prev.length){$prev.removeClass('bottom-solid');}}
obj.removeClass("hover");site.dropdown.afterHide();},obj.parents('#main-menu').length?dropdownMainMenuLeaveDelay:dropdownMenuLeaveDelay);});});}})(jQuery);(function(){var $,AbstractChosen,Chosen,SelectParser,_ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;};SelectParser=(function(){function SelectParser(){this.options_index=0;this.parsed=[];}
SelectParser.prototype.add_node=function(child){if(child.nodeName.toUpperCase()==="OPTGROUP"){return this.add_group(child);}else{return this.add_option(child);}};SelectParser.prototype.add_group=function(group){var group_position,option,_i,_len,_ref,_results;group_position=this.parsed.length;this.parsed.push({array_index:group_position,group:true,label:this.escapeExpression(group.label),children:0,disabled:group.disabled});_ref=group.childNodes;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){option=_ref[_i];_results.push(this.add_option(option,group_position,group.disabled));}
return _results;};SelectParser.prototype.add_option=function(option,group_position,group_disabled){if(option.nodeName.toUpperCase()==="OPTION"){if(option.text!==""){if(group_position!=null){this.parsed[group_position].children+=1;}
this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:option.value,text:option.text,html:option.innerHTML,selected:option.selected,disabled:group_disabled===true?group_disabled:option.disabled,group_array_index:group_position,classes:option.className,style:option.style.cssText});}else{this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:true});}
return this.options_index+=1;}};SelectParser.prototype.escapeExpression=function(text){var map,unsafe_chars;if((text==null)||text===false){return"";}
if(!/[\&\<\>\"\'\`]/.test(text)){return text;}
map={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};unsafe_chars=/&(?!\w+;)|[\<\>\"\'\`]/g;return text.replace(unsafe_chars,function(chr){return map[chr]||"&amp;";});};return SelectParser;})();SelectParser.select_to_array=function(select){var child,parser,_i,_len,_ref;parser=new SelectParser();_ref=select.childNodes;for(_i=0,_len=_ref.length;_i<_len;_i++){child=_ref[_i];parser.add_node(child);}
return parser.parsed;};AbstractChosen=(function(){function AbstractChosen(form_field,options){this.is_ready=false;this.form_field=form_field;this.options=options!=null?options:{};if(!AbstractChosen.browser_is_supported()){return;}
this.is_multiple=this.form_field.multiple;this.set_default_text();this.set_default_values();this.setup();this.set_up_html();this.register_observers();}
AbstractChosen.prototype.set_default_values=function(){var _this=this;this.click_test_action=function(evt){return _this.test_active_click(evt);};this.activate_action=function(evt){return _this.activate_field(evt);};this.active_field=false;this.mouse_on_container=false;this.results_showing=false;this.result_highlighted=null;this.result_single_selected=null;this.allow_single_deselect=(this.options.allow_single_deselect!=null)&&(this.form_field.options[0]!=null)&&this.form_field.options[0].text===""?this.options.allow_single_deselect:false;this.disable_search_threshold=this.options.disable_search_threshold||0;this.disable_search=this.options.disable_search||false;this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:false;this.allow_custom_value=this.options.allow_custom_value!=null?this.options.allow_custom_value:false;this.group_search=this.options.group_search!=null?this.options.group_search:true;this.search_contains=this.options.search_contains||true;this.single_backstroke_delete=this.options.single_backstroke_delete!=null?this.options.single_backstroke_delete:true;this.max_selected_options=this.options.max_selected_options||Infinity;this.inherit_select_classes=this.options.inherit_select_classes||true;this.display_selected_options=this.options.display_selected_options!=null?this.options.display_selected_options:true;return this.display_disabled_options=this.options.display_disabled_options!=null?this.options.display_disabled_options:true;};AbstractChosen.prototype.set_default_text=function(){if(this.form_field.getAttribute("data-short-hint")){this.default_text=this.form_field.getAttribute("data-short-hint");}else if(this.is_multiple){this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||AbstractChosen.default_multiple_text;}else{this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||AbstractChosen.default_single_text;}
return this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||AbstractChosen.default_no_result_text;};AbstractChosen.prototype.mouse_enter=function(){return this.mouse_on_container=true;};AbstractChosen.prototype.mouse_leave=function(){return this.mouse_on_container=false;};AbstractChosen.prototype.input_focus=function(evt){var _this=this;if(this.is_multiple){if(!this.active_field){return setTimeout((function(){return _this.container_mousedown();}),50);}}else{if(!this.active_field){return this.activate_field();}}};AbstractChosen.prototype.input_blur=function(evt){var _this=this;if(!this.mouse_on_container){this.active_field=false;return setTimeout((function(){return _this.blur_test();}),100);}};AbstractChosen.prototype.results_option_build=function(options){var content,data,_i,_len,_ref;content='';_ref=this.results_data;for(_i=0,_len=_ref.length;_i<_len;_i++){data=_ref[_i];if(data.group){content+=this.result_add_group(data);}else{content+=this.result_add_option(data);}
if(options!=null?options.first:void 0){if(data.selected&&this.is_multiple){this.choice_build(data);}else if(data.selected&&!this.is_multiple){this.single_set_selected_text(data.text);}}}
return content;};AbstractChosen.prototype.result_add_option=function(option){var classes,style;if(!option.search_match){return'';}
if(!this.include_option_in_results(option)){return'';}
classes=[];if(!option.disabled&&!(option.selected&&this.is_multiple)){classes.push("active-result");}
if(option.disabled&&!(option.selected&&this.is_multiple)){classes.push("disabled-result");}
if(option.selected){classes.push("result-selected");}
if(option.group_array_index!=null){classes.push("group-option");}
if(option.classes!==""){classes.push(option.classes);}
style=option.style.cssText!==""?" style=\""+option.style+"\"":"";return"<li class=\"select-shade "+(classes.join(' '))+"\""+style+" data-option-array-index=\""+option.array_index+"\"><span><s></s>"+option.search_text+"</span></li>";};AbstractChosen.prototype.result_add_group=function(group){if(!(group.search_match||group.group_match)){return'';}
if(!(group.active_options>0)){return'';}
return"<li class=\"select-shade group-result\"><span>"+group.search_text+"</span></li>";};AbstractChosen.prototype.results_update_field=function(){this.set_default_text();if(!this.is_multiple){this.results_reset_cleanup();}
this.result_clear_highlight();this.result_single_selected=null;this.results_build();if(this.results_showing){return this.winnow_results();}};AbstractChosen.prototype.results_toggle=function(){if(this.results_showing){return this.results_hide();}else{return this.results_show();}};AbstractChosen.prototype.results_search=function(evt){if(this.results_showing){return this.winnow_results();}else{return this.results_show();}};AbstractChosen.prototype.winnow_results=function(){var escapedSearchText,option,regex,regexAnchor,results,results_group,searchText,startpos,text,zregex,_i,_len,_ref;this.no_results_clear();results=0;searchText=this.get_search_text();escapedSearchText=searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");regexAnchor=this.search_contains?"":"^";regex=new RegExp(regexAnchor+escapedSearchText,'i');zregex=new RegExp(escapedSearchText,'i');_ref=this.results_data;for(_i=0,_len=_ref.length;_i<_len;_i++){option=_ref[_i];option.search_match=false;results_group=null;if(this.include_option_in_results(option)){if(option.group){option.group_match=false;option.active_options=0;}
if((option.group_array_index!=null)&&this.results_data[option.group_array_index]){results_group=this.results_data[option.group_array_index];if(results_group.active_options===0&&results_group.search_match){results+=1;}
results_group.active_options+=1;}
if(!(option.group&&!this.group_search)){option.search_text=option.group?option.label:option.html;option.search_match=this.search_string_match(option.search_text,regex);if(option.search_match&&!option.group){results+=1;}
if(option.search_match){if(searchText.length){if(this.enable_split_word_search){var parts=option.search_text.split(" ");var parts_startpos;for(var i=0,len=parts.length;i<len;i++){parts_startpos=parts[i].search(zregex);if(parts_startpos==0){parts[i]='<em>'+parts[i].substr(0,parts_startpos+searchText.length)+'</em>'+parts[i].substr(parts_startpos+searchText.length);}}
option.search_text=parts.join(' ');}else{startpos=option.search_text.search(zregex);text=option.search_text.substr(0,startpos+searchText.length)+'</em>'+option.search_text.substr(startpos+searchText.length);option.search_text=text.substr(0,startpos)+'<em>'+text.substr(startpos);}}
if(results_group!=null){results_group.group_match=true;}}else if((option.group_array_index!=null)&&this.results_data[option.group_array_index].search_match){option.search_match=true;}}}}
this.result_clear_highlight();if(this.custom_value_container){if(searchText.length){var isCustomValue=this.custom_value_container.find('span').length?true:false;if(isCustomValue){this.custom_value_container.find('span').html('<em class="select-shade">'+searchText+'</em>');}else{this.custom_value_container.append('<span><em class="select-shade">'+searchText+'</em></span>');}}}
if(results<1&&searchText.length){this.update_results_content("");return this.no_results(searchText);}else{this.update_results_content(this.results_option_build());return this.winnow_results_set_highlight();}};AbstractChosen.prototype.search_string_match=function(search_string,regex){var part,parts,_i,_len;if(regex.test(search_string)){return true;}else if(this.enable_split_word_search&&(search_string.indexOf(" ")>=0||search_string.indexOf("[")===0)){parts=search_string.replace(/\[|\]/g,"").split(" ");if(parts.length){for(_i=0,_len=parts.length;_i<_len;_i++){part=parts[_i];if(regex.test(part)){return true;}}}}};AbstractChosen.prototype.choices_count=function(){var option,_i,_len,_ref;if(this.selected_option_count!=null){return this.selected_option_count;}
this.selected_option_count=0;_ref=this.form_field.options;for(_i=0,_len=_ref.length;_i<_len;_i++){option=_ref[_i];if(option.selected){this.selected_option_count+=1;}}
return this.selected_option_count;};AbstractChosen.prototype.choices_click=function(evt){evt.preventDefault();if(!(this.results_showing||this.is_disabled)){return this.results_show();}};AbstractChosen.prototype.keyup_checker=function(evt){var stroke,_ref;stroke=(_ref=evt.which)!=null?_ref:evt.keyCode;this.search_field_scale();switch(stroke){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0){return this.keydown_backstroke();}else if(!this.pending_backstroke){this.result_clear_highlight();return this.results_search();}
break;case 13:evt.preventDefault();if(this.results_showing){return this.result_select(evt);}
break;case 27:if(this.results_showing){this.results_hide();}
return true;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search();}};AbstractChosen.prototype.container_width=function(){if(this.options.width!=null){return this.options.width;}else{return""+this.form_field.offsetWidth+"px";}};AbstractChosen.prototype.include_option_in_results=function(option){if(this.is_multiple&&(!this.display_selected_options&&option.selected)){return false;}
if(!this.display_disabled_options&&option.disabled){return false;}
if(option.empty){return false;}
return true;};AbstractChosen.browser_is_supported=function(){if(window.navigator.appName==="Microsoft Internet Explorer"){return document.documentMode>=8;}
if(/iP(od|hone)/i.test(window.navigator.userAgent)){return false;}
if(/Android/i.test(window.navigator.userAgent)){if(/Mobile/i.test(window.navigator.userAgent)){return false;}}
return true;};AbstractChosen.default_multiple_text="Select Some Options";AbstractChosen.default_single_text="Select an Option";AbstractChosen.default_no_result_text="No results match";return AbstractChosen;})();$=jQuery;$.fn.extend({chosen:function(options){if(!AbstractChosen.browser_is_supported()){return this;}
return this.each(function(input_field){var $this,chosen;$this=$(this);chosen=$this.data('chosen');if(options==='destroy'&&chosen){chosen.destroy();}else if(!chosen){$this.data('chosen',new Chosen(this,options));}});}});Chosen=(function(_super){__extends(Chosen,_super);function Chosen(){_ref=Chosen.__super__.constructor.apply(this,arguments);return _ref;}
Chosen.prototype.setup=function(){this.form_field_jq=$(this.form_field);this.current_selectedIndex=this.form_field.selectedIndex;return this.is_rtl=this.form_field_jq.hasClass("chosen-rtl");};Chosen.prototype.set_up_html=function(){var container_classes,container_props;container_classes=["chosen-container"];container_classes.push("chosen-container-"+(this.is_multiple?"multi":"single"));if(this.inherit_select_classes&&this.form_field.className){container_classes.push(this.form_field.className);}
if(this.is_rtl){container_classes.push("chosen-rtl");}
container_props={'class':container_classes.join(' '),'style':"width: "+(this.container_width())+";",};if(this.form_field.id.length){container_props.id=this.form_field.id.replace(/[^\w]/g,'_')+"_chosen";}
this.container=$("<div />",container_props);if(this.is_multiple){this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results" data-scroll-capture="on" data-element="scrollbox"></ul></div>');}else{var custom_value_container='';if(!this.is_multiple&&this.allow_custom_value){custom_value_container='<div class="chosen-custom-value"></div>';}
this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span class="select-shade"><em>'+this.default_text+'</em></span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><div class="chosen-results-title">'+this.default_text+'</div><ul class="chosen-results" data-scroll-capture="on" data-element="scrollbox"></ul>'+custom_value_container+'</div>');}
this.form_field_jq.hide().after(this.container);this.dropdown=this.container.find('div.chosen-drop').first();this.search_field=this.container.find('input').first();this.search_results=this.container.find('ul.chosen-results').first();this.search_field_scale();this.search_no_results=this.container.find('li.no-results').first();this.chosen_results_title=this.container.find('.chosen-results-title').first();if(this.is_multiple){this.search_choices=this.container.find('ul.chosen-choices').first();this.search_container=this.container.find('li.search-field').first();}else{this.search_container=this.container.find('div.chosen-search').first();this.selected_item=this.container.find('.chosen-single').first();this.custom_value_container=this.container.find('.chosen-custom-value').first();if(this.allow_custom_value){var selectId=this.form_field_jq.attr('id');var inputId=selectId.substring(0,selectId.length-3);var formName=this.form_field_jq.parents('form').attr('name');if(!$('#'+inputId).length){this.form_custom_field=$('<input id="'+inputId+'" type="text" name="'+formName+'[city]" value="" tabindex="-1">').insertAfter(this.form_field_jq).hide();}else{this.form_custom_field=$('#'+inputId);this.form_custom_field.attr('name',formName+'[city]');this.form_custom_field.attr('tabindex','-1');this.form_custom_field.hide();}}}
this.results_build();this.set_tab_index();this.set_label_behavior();this.is_ready=true;return this.form_field_jq.trigger("chosen:ready",{chosen:this});};Chosen.prototype.register_observers=function(){var _this=this;this.container.bind('mousedown.chosen',function(evt){_this.container_mousedown(evt);});this.container.bind('mouseup.chosen',function(evt){_this.container_mouseup(evt);});this.container.bind('mouseenter.chosen',function(evt){_this.mouse_enter(evt);});this.container.bind('mouseleave.chosen',function(evt){_this.mouse_leave(evt);});this.search_results.bind('mouseup.chosen',function(evt){_this.search_results_mouseup(evt);});this.search_results.bind('mouseover.chosen',function(evt){_this.search_results_mouseover(evt);});this.search_results.bind('mouseout.chosen',function(evt){_this.search_results_mouseout(evt);});this.search_results.bind('mousewheel.chosen DOMMouseScroll.chosen',function(evt){_this.search_results_mousewheel(evt);});this.form_field_jq.bind("chosen:updated.chosen",function(evt){_this.results_update_field(evt);});this.form_field_jq.bind("chosen:activate.chosen",function(evt){_this.activate_field(evt);});this.form_field_jq.bind("chosen:open.chosen",function(evt){_this.container_mousedown(evt);});this.search_field.bind('blur.chosen',function(evt){_this.input_blur(evt);});this.search_field.bind('keyup.chosen',function(evt){_this.keyup_checker(evt);});this.search_field.bind('keydown.chosen',function(evt){_this.keydown_checker(evt);});this.search_field.bind('focus.chosen',function(evt){_this.input_focus(evt);});this.custom_value_container.on("click","span",function(evt){_this.make_custom_choice(evt);});if(this.is_multiple){return this.search_choices.bind('click.chosen',function(evt){_this.choices_click(evt);});}else{return this.container.bind('click.chosen',function(evt){evt.preventDefault();});}};Chosen.prototype.destroy=function(){$(document).unbind("click.chosen",this.click_test_action);if(this.search_field[0].tabIndex){this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex;}
this.container.remove();this.form_field_jq.removeData('chosen');if(this.form_custom_field){this.form_custom_field.remove();}
return this.form_field_jq.show();};Chosen.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled){this.container.addClass('chosen-disabled');this.search_field[0].disabled=true;if(!this.is_multiple){this.selected_item.unbind("focus.chosen",this.activate_action);}
return this.close_field();}else{this.container.removeClass('chosen-disabled');this.search_field[0].disabled=false;if(!this.is_multiple){return this.selected_item.bind("focus.chosen",this.activate_action);}}};Chosen.prototype.container_mousedown=function(evt){if(!this.is_disabled){if(evt&&evt.type==="mousedown"&&!this.results_showing){evt.preventDefault();}
if(!((evt!=null)&&($(evt.target)).hasClass("search-choice-close"))){if(!this.active_field){if(this.is_multiple){this.search_field.val("");}
$(document).bind('click.chosen',this.click_test_action);this.results_show();}else if(!this.is_multiple&&evt&&(($(evt.target)[0]===this.selected_item[0])||$(evt.target).parents("a.chosen-single").length)){evt.preventDefault();this.results_toggle();}
return this.activate_field();}}};Chosen.prototype.container_mouseup=function(evt){if(evt.target.nodeName==="ABBR"&&!this.is_disabled){return this.results_reset(evt);}};Chosen.prototype.search_results_mousewheel=function(evt){var delta,_ref1,_ref2;delta=-((_ref1=evt.originalEvent)!=null?_ref1.wheelDelta:void 0)||((_ref2=evt.originialEvent)!=null?_ref2.detail:void 0);if(delta!=null){evt.preventDefault();if(evt.type==='DOMMouseScroll'){delta=delta*40;}
return this.search_results.scrollTop(delta+this.search_results.scrollTop());}};Chosen.prototype.blur_test=function(evt){if(!this.active_field&&this.container.hasClass("chosen-container-active")){return this.close_field();}};Chosen.prototype.close_field=function(){$(document).unbind("click.chosen",this.click_test_action);this.active_field=false;this.results_hide();this.container.removeClass("chosen-container-active");this.clear_backstroke();this.show_search_field_default();return this.search_field_scale();};Chosen.prototype.activate_field=function(){this.container.addClass("chosen-container-active");this.active_field=true;this.search_field.val(this.search_field.val());return this.search_field.focus();};Chosen.prototype.test_active_click=function(evt){if(this.container.is($(evt.target).closest('.chosen-container'))){return this.active_field=true;}else{return this.close_field();}};Chosen.prototype.results_build=function(){this.parsing=true;this.selected_option_count=null;this.results_data=SelectParser.select_to_array(this.form_field);if(this.is_multiple){this.search_choices.find("li.search-choice").remove();}else if(!this.is_multiple){this.single_set_selected_text();if(this.disable_search||this.form_field.options.length<=this.disable_search_threshold){this.search_field[0].readOnly=true;this.container.addClass("chosen-container-single-nosearch");}else{this.search_field[0].readOnly=false;this.container.removeClass("chosen-container-single-nosearch");}}
this.update_results_content(this.results_option_build({first:true}));this.search_field_disabled();this.show_search_field_default();this.search_field_scale();return this.parsing=false;};Chosen.prototype.result_do_highlight=function(el){var high_bottom,high_top,maxHeight,visible_bottom,visible_top;if(el.length){this.result_clear_highlight();this.result_highlight=el;this.result_highlight.addClass("highlighted");maxHeight=parseInt(this.search_results.css("maxHeight"),10);visible_top=this.search_results.scrollTop();visible_bottom=maxHeight+visible_top;high_top=this.result_highlight.position().top+this.search_results.scrollTop();high_bottom=high_top+this.result_highlight.outerHeight();if(high_bottom>=visible_bottom){return this.search_results.scrollTop((high_bottom-maxHeight)>0?high_bottom-maxHeight:0);}else if(high_top<visible_top){return this.search_results.scrollTop(high_top);}}};Chosen.prototype.result_clear_highlight=function(){if(this.result_highlight){this.result_highlight.removeClass("highlighted");}
return this.result_highlight=null;};Chosen.prototype.results_show=function(){if(this.is_multiple&&this.max_selected_options<=this.choices_count()){this.form_field_jq.trigger("chosen:maxselected",{chosen:this});return false;}
this.container.addClass("chosen-with-drop");this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this});this.results_showing=true;this.search_field.focus();this.search_field.val(this.search_field.val());return this.winnow_results();};Chosen.prototype.update_results_content=function(content){return this.search_results.html(content);};Chosen.prototype.results_hide=function(){if(this.results_showing){this.result_clear_highlight();this.container.removeClass("chosen-with-drop");this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this});this.custom_value_container.find('span').remove();if(this.form_custom_field&&this.form_field_jq.val()>-1){this.form_custom_field.val('');}
if(this.form_field_jq.val()>-1||(this.form_custom_field&&this.form_custom_field.val()!='')){this.container.removeClass("error");}}
return this.results_showing=false;};Chosen.prototype.set_tab_index=function(el){var ti;if(this.form_field.tabIndex){ti=this.form_field.tabIndex;this.form_field.tabIndex=-1;return this.search_field[0].tabIndex=ti;}};Chosen.prototype.set_label_behavior=function(){var _this=this;this.form_field_label=this.form_field_jq.parents("label");if(!this.form_field_label.length&&this.form_field.id.length){this.form_field_label=$("label[for='"+this.form_field.id+"']");}
if(this.form_field_label.length>0){return this.form_field_label.bind('click.chosen',function(evt){if(_this.is_multiple){return _this.container_mousedown(evt);}else{return _this.activate_field();}});}};Chosen.prototype.show_search_field_default=function(){if(this.is_multiple&&this.choices_count()<1&&!this.active_field){this.search_field.val(this.default_text);return this.search_field.addClass("default");}else{this.search_field.val("");return this.search_field.removeClass("default");}};Chosen.prototype.search_results_mouseup=function(evt){var target;target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first();if(target.length){this.result_highlight=target;this.result_select(evt);return this.search_field.focus();}};Chosen.prototype.search_results_mouseover=function(evt){var target;target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first();if(target){return this.result_do_highlight(target);}};Chosen.prototype.search_results_mouseout=function(evt){if($(evt.target).hasClass("active-result"||$(evt.target).parents('.active-result').first())){return this.result_clear_highlight();}};Chosen.prototype.choice_build=function(item){var choice,close_link,_this=this;choice=$('<li />',{"class":"search-choice"}).html("<span>"+item.html+"</span>");if(item.disabled){choice.addClass('search-choice-disabled');}else{close_link=$('<a />',{"class":'search-choice-close','data-option-array-index':item.array_index});close_link.bind('click.chosen',function(evt){return _this.choice_destroy_link_click(evt);});choice.append(close_link);}
return this.search_container.before(choice);};Chosen.prototype.choice_destroy_link_click=function(evt){evt.preventDefault();evt.stopPropagation();if(!this.is_disabled){return this.choice_destroy($(evt.target));}};Chosen.prototype.choice_destroy=function(link){if(this.result_deselect(link[0].getAttribute("data-option-array-index"))){this.show_search_field_default();if(this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1){this.results_hide();}
link.parents('li').first().remove();return this.search_field_scale();}};Chosen.prototype.results_reset=function(){this.form_field.options[0].selected=true;this.selected_option_count=null;this.single_set_selected_text();this.show_search_field_default();this.results_reset_cleanup();this.form_field_jq.trigger("change");if(this.active_field){return this.results_hide();}};Chosen.prototype.results_reset_cleanup=function(){this.current_selectedIndex=this.form_field.selectedIndex;return this.selected_item.find("abbr").remove();};Chosen.prototype.result_select=function(evt){var high,item,selected_index;if(this.result_highlight){high=this.result_highlight;this.result_clear_highlight();if(this.is_multiple&&this.max_selected_options<=this.choices_count()){this.form_field_jq.trigger("chosen:maxselected",{chosen:this});return false;}
if(this.is_multiple){high.removeClass("active-result");}else{if(this.result_single_selected){this.result_single_selected.removeClass("result-selected");selected_index=this.result_single_selected[0].getAttribute('data-option-array-index');this.results_data[selected_index].selected=false;}
this.result_single_selected=high;}
high.addClass("result-selected");item=this.results_data[high[0].getAttribute("data-option-array-index")];item.selected=true;this.form_field.options[item.options_index].selected=true;this.selected_option_count=null;if(this.is_multiple){this.choice_build(item);}else{this.single_set_selected_text(item.text);}
if(!((evt.metaKey||evt.ctrlKey)&&this.is_multiple)){this.results_hide();}
this.search_field.val("");if(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex){this.form_field_jq.trigger("change",{'selected':this.form_field.options[item.options_index].value});}
this.current_selectedIndex=this.form_field.selectedIndex;return this.search_field_scale();}};Chosen.prototype.single_set_selected_text=function(text){if(text==null){text=this.default_text;}
if(text===this.default_text){this.selected_item.addClass("chosen-default");}else{this.single_deselect_control_build();this.selected_item.removeClass("chosen-default");}
if(!this.is_ready&&this.allow_custom_value&&this.form_custom_field.val()!=''){text=this.form_custom_field.val();this.form_field_jq.val('-1');}
return this.selected_item.find("span").html('<em>'+$('<div/>').text(text).html()+'</em>');};Chosen.prototype.result_deselect=function(pos){var result_data;result_data=this.results_data[pos];if(!this.form_field.options[result_data.options_index].disabled){result_data.selected=false;this.form_field.options[result_data.options_index].selected=false;this.selected_option_count=null;this.result_clear_highlight();if(this.results_showing){this.winnow_results();}
this.form_field_jq.trigger("change",{deselected:this.form_field.options[result_data.options_index].value});this.search_field_scale();return true;}else{return false;}};Chosen.prototype.single_deselect_control_build=function(){if(!this.allow_single_deselect){return;}
if(!this.selected_item.find("abbr").length){this.selected_item.find("span").first().after("<abbr class=\"search-choice-close\"></abbr>");}
return this.selected_item.addClass("chosen-single-with-deselect");};Chosen.prototype.get_search_text=function(){if(this.search_field.val()===this.default_text){return"";}else{return $('<div/>').text($.trim(this.search_field.val())).html();}};Chosen.prototype.winnow_results_set_highlight=function(){var do_high,selected_results;selected_results=!this.is_multiple?this.search_results.find(".result-selected.active-result"):[];do_high=selected_results.length?selected_results.first():this.search_results.find(".active-result").first();if(do_high!=null){return this.result_do_highlight(do_high);}};Chosen.prototype.no_results=function(terms){var no_results_html;this.chosen_results_title.css({display:'none'});if(!this.is_multiple&&this.allow_custom_value){no_results_html=$('<li class="custom-no-results"></li>');}else{no_results_html=$('<li class="no-results">'+this.results_none_found+'</li>');}
return this.search_results.append(no_results_html);};Chosen.prototype.no_results_clear=function(){this.chosen_results_title.css({display:''});return this.search_results.find(".no-results").remove();};Chosen.prototype.keydown_arrow=function(){var next_sib;if(this.results_showing&&this.result_highlight){next_sib=this.result_highlight.nextAll("li.active-result").first();if(next_sib){return this.result_do_highlight(next_sib);}}else{return this.results_show();}};Chosen.prototype.keyup_arrow=function(){var prev_sibs;if(!this.results_showing&&!this.is_multiple){return this.results_show();}else if(this.result_highlight){prev_sibs=this.result_highlight.prevAll("li.active-result");if(prev_sibs.length){return this.result_do_highlight(prev_sibs.first());}else{if(this.choices_count()>0){this.results_hide();}
return this.result_clear_highlight();}}};Chosen.prototype.keydown_backstroke=function(){var next_available_destroy;if(this.pending_backstroke){this.choice_destroy(this.pending_backstroke.find("a").first());return this.clear_backstroke();}else{next_available_destroy=this.search_container.siblings("li.search-choice").last();if(next_available_destroy.length&&!next_available_destroy.hasClass("search-choice-disabled")){this.pending_backstroke=next_available_destroy;if(this.single_backstroke_delete){return this.keydown_backstroke();}else{return this.pending_backstroke.addClass("search-choice-focus");}}}};Chosen.prototype.clear_backstroke=function(){if(this.pending_backstroke){this.pending_backstroke.removeClass("search-choice-focus");}
return this.pending_backstroke=null;};Chosen.prototype.keydown_checker=function(evt){var stroke,_ref1;$(".tipsy").remove();stroke=(_ref1=evt.which)!=null?_ref1:evt.keyCode;this.search_field_scale();if(stroke!==8&&this.pending_backstroke){this.clear_backstroke();}
switch(stroke){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:if(this.results_showing&&!this.is_multiple){this.result_select(evt);}
this.mouse_on_container=false;break;case 13:evt.preventDefault();break;case 38:evt.preventDefault();this.keyup_arrow();break;case 40:evt.preventDefault();this.keydown_arrow();break;}};Chosen.prototype.search_field_scale=function(){var div,f_width,h,style,style_block,styles,w,_i,_len;if(this.is_multiple){h=0;w=0;style_block="position:absolute; left: -1000px; top: -1000px; display:none;";styles=['font-size','font-style','font-weight','font-family','line-height','text-transform','letter-spacing'];for(_i=0,_len=styles.length;_i<_len;_i++){style=styles[_i];style_block+=style+":"+this.search_field.css(style)+";";}
div=$('<div />',{'style':style_block});div.text(this.search_field.val());$('body').append(div);w=div.width()+25;div.remove();f_width=this.container.outerWidth();if(w>f_width-10){w=f_width-10;}
return this.search_field.css({'width':w+'px'});}};Chosen.prototype.make_custom_choice=function(evt){var customValue=this.search_field.val();var checkOptionValue=-1;var checkOptionText='';var spanValue='';this.form_field_jq.find("option").each(function(){if($(this).text().toLowerCase()==customValue.toLowerCase()){checkOptionValue=$(this).val();checkOptionText=$(this).text();return false;}});if(checkOptionValue>0){customValue='';spanValue=checkOptionText;}else{spanValue=customValue;}
this.container.find('.chosen-single span').html('<em class="select-shade">'+$('<div/>').text(customValue).html()+'</em>');this.form_custom_field.val(customValue);this.form_field_jq.val(checkOptionValue);$('#city').val(this.form_custom_field.val()).change();this.results_hide();}
return Chosen;})(AbstractChosen);}).call(this);;(function($,undefined){'use strict';var fls=!1,nll=null,prsflt=parseFloat,mathmn=Math.min,rxLastNr=/(-?\d+\.?\d*)$/g,rxLastNrNoDash=/(\d+\.?\d*)$/g,aPluginPrepare=[],aPluginSort=[],isString=function(o){return typeof o=='string';},loop=function(array,func){var l=array.length,i=l,j;while(i--){j=l-i-1;func(array[j],j);}},fnIndexOf=Array.prototype.indexOf||function(elm){var len=this.length,from=Number(arguments[1])||0;from=from<0?Math.ceil(from):Math.floor(from);if(from<0)from+=len;for(;from<len;from++){if(from in this&&this[from]===elm)return from;}
return-1;};$.tinysort={id:'TinySort',version:'1.5.6',copyright:'Copyright (c) 2008-2013 Ron Valstar',uri:'http://tinysort.sjeiti.com/',licensed:{MIT:'http://www.opensource.org/licenses/mit-license.php',GPL:'http://www.gnu.org/licenses/gpl.html'},plugin:(function(){var fn=function(prepare,sort){aPluginPrepare.push(prepare);aPluginSort.push(sort);};fn.indexOf=fnIndexOf;return fn;})(),defaults:{order:'asc',attr:nll,data:nll,useVal:fls,place:'start',returns:fls,cases:fls,forceStrings:fls,ignoreDashes:fls,sortFunction:nll}};$.fn.extend({tinysort:function(){var i,j,l,oThis=this,aNewOrder=[],aElements=[],aElementsParent=[],aCriteria=[],iCriteria=0,iCriteriaMax,aFind=[],aSettings=[],fnPluginPrepare=function(_settings){loop(aPluginPrepare,function(fn){fn.call(fn,_settings);});},fnPrepareSortElement=function(settings,element){if(typeof element=='string'){if(!settings.cases)element=toLowerCase(element);element=element.replace(/^\s*(.*?)\s*$/i,'$1');}
return element;},fnSort=function(a,b){var iReturn=0;if(iCriteria!==0)iCriteria=0;while(iReturn===0&&iCriteria<iCriteriaMax){var oPoint=aCriteria[iCriteria],oSett=oPoint.oSettings,rxLast=oSett.ignoreDashes?rxLastNrNoDash:rxLastNr;fnPluginPrepare(oSett);if(oSett.sortFunction){iReturn=oSett.sortFunction(a,b);}else if(oSett.order=='rand'){iReturn=Math.random()<0.5?1:-1;}else{var bNumeric=fls,sA=fnPrepareSortElement(oSett,a.s[iCriteria]),sB=fnPrepareSortElement(oSett,b.s[iCriteria]);if(!oSett.forceStrings){var aAnum=isString(sA)?sA&&sA.match(rxLast):fls,aBnum=isString(sB)?sB&&sB.match(rxLast):fls;if(aAnum&&aBnum){var sAprv=sA.substr(0,sA.length-aAnum[0].length),sBprv=sB.substr(0,sB.length-aBnum[0].length);if(sAprv==sBprv){bNumeric=!fls;sA=prsflt(aAnum[0]);sB=prsflt(aBnum[0]);}}}
iReturn=oPoint.iAsc*(sA<sB?-1:(sA>sB?1:0));}
loop(aPluginSort,function(fn){iReturn=fn.call(fn,bNumeric,sA,sB,iReturn);});if(iReturn===0)iCriteria++;}
return iReturn;};for(i=0,l=arguments.length;i<l;i++){var o=arguments[i];if(isString(o)){if(aFind.push(o)-1>aSettings.length)aSettings.length=aFind.length-1;}else{if(aSettings.push(o)>aFind.length)aFind.length=aSettings.length;}}
if(aFind.length>aSettings.length)aSettings.length=aFind.length;iCriteriaMax=aFind.length;if(iCriteriaMax===0){iCriteriaMax=aFind.length=1;aSettings.push({});}
for(i=0,l=iCriteriaMax;i<l;i++){var sFind=aFind[i],oSettings=$.extend({},$.tinysort.defaults,aSettings[i]),bFind=!(!sFind||sFind===''),bFilter=bFind&&sFind[0]===':';aCriteria.push({sFind:sFind,oSettings:oSettings,bFind:bFind,bAttr:!(oSettings.attr===nll||oSettings.attr===''),bData:oSettings.data!==nll,bFilter:bFilter,$Filter:bFilter?oThis.filter(sFind):oThis,fnSort:oSettings.sortFunction,iAsc:oSettings.order=='asc'?1:-1});}
oThis.each(function(i,el){var $Elm=$(el),mParent=$Elm.parent().get(0),mFirstElmOrSub,aSort=[];for(j=0;j<iCriteriaMax;j++){var oPoint=aCriteria[j],mElmOrSub=oPoint.bFind?(oPoint.bFilter?oPoint.$Filter.filter(el):$Elm.find(oPoint.sFind)):$Elm;aSort.push(oPoint.bData?mElmOrSub.data(oPoint.oSettings.data):(oPoint.bAttr?mElmOrSub.attr(oPoint.oSettings.attr):(oPoint.oSettings.useVal?mElmOrSub.val():mElmOrSub.text())));if(mFirstElmOrSub===undefined)mFirstElmOrSub=mElmOrSub;}
var iElmIndex=fnIndexOf.call(aElementsParent,mParent);if(iElmIndex<0){iElmIndex=aElementsParent.push(mParent)-1;aElements[iElmIndex]={s:[],n:[]};}
if(mFirstElmOrSub.length>0)aElements[iElmIndex].s.push({s:aSort,e:$Elm,n:i});else aElements[iElmIndex].n.push({e:$Elm,n:i});});loop(aElements,function(oParent){oParent.s.sort(fnSort);});loop(aElements,function(oParent){var aSorted=oParent.s,aUnsorted=oParent.n,iSorted=aSorted.length,iUnsorted=aUnsorted.length,iNumElm=iSorted+iUnsorted,aOriginal=[],iLow=iNumElm,aCount=[0,0];switch(oSettings.place){case'first':loop(aSorted,function(obj){iLow=mathmn(iLow,obj.n);});break;case'org':loop(aSorted,function(obj){aOriginal.push(obj.n);});break;case'end':iLow=iUnsorted;break;default:iLow=0;}
for(i=0;i<iNumElm;i++){var bFromSortList=contains(aOriginal,i)?!fls:i>=iLow&&i<iLow+iSorted,iCountIndex=bFromSortList?0:1,mEl=(bFromSortList?aSorted:aUnsorted)[aCount[iCountIndex]].e;mEl.parent().append(mEl);if(bFromSortList||!oSettings.returns)aNewOrder.push(mEl.get(0));aCount[iCountIndex]++;}});oThis.length=0;Array.prototype.push.apply(oThis,aNewOrder);return oThis;}});function toLowerCase(s){return s&&s.toLowerCase?s.toLowerCase():s;}
function contains(a,n){for(var i=0,l=a.length;i<l;i++)if(a[i]==n)return!fls;return fls;}
$.fn.TinySort=$.fn.Tinysort=$.fn.tsort=$.fn.tinysort;})(jQuery);;(function($){$.Zebra_DatePicker=function(element,options){var defaults={always_visible:false,days:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],days_abbr:false,direction:0,disabled_dates:false,enabled_dates:false,first_day_of_week:1,format:'Y-m-d',header_navigation:['&#171;','&#187;'],inside:true,lang_clear_date:'Clear date',months:['January','February','March','April','May','June','July','August','September','October','November','December'],months_abbr:false,offset:[5,-5],pair:false,readonly_element:true,select_other_months:false,show_clear_date:0,show_icon:true,show_other_months:true,show_select_today:'Today',show_week_number:false,start_date:false,strict:false,view:'days',weekend_days:[0,6],zero_pad:false,onChange:null,onClear:null,onSelect:null};var view,datepicker,icon,header,daypicker,monthpicker,yearpicker,cleardate,current_system_month,current_system_year,current_system_day,first_selectable_month,first_selectable_year,first_selectable_day,selected_month,selected_year,default_day,default_month,default_year,enabled_dates,disabled_dates,shim,start_date,end_date,last_selectable_day,last_selectable_year,last_selectable_month,daypicker_cells,monthpicker_cells,yearpicker_cells,views,clickables,selecttoday,footer,show_select_today,timeout;var plugin=this;plugin.settings={};var $element=$(element);var init=function(update){if(!update){plugin.settings=$.extend({},defaults,options);for(var data in $element.data())
if(data.indexOf('zdp_')===0){data=data.replace(/^zdp\_/,'');if(undefined!==defaults[data])
plugin.settings[data]=$element.data('zdp_'+data);}}
if(plugin.settings.readonly_element)$element.attr('readonly','readonly');var
date_chars={days:['d','j','D'],months:['F','m','M','n','t'],years:['o','Y','y']},has_days=false,has_months=false,has_years=false,type=null;for(type in date_chars)
$.each(date_chars[type],function(index,character){if(plugin.settings.format.indexOf(character)>-1)
if(type=='days')has_days=true;else if(type=='months')has_months=true;else if(type=='years')has_years=true;});if(has_days&&has_months&&has_years)views=['years','months','days'];else if(!has_days&&has_months&&has_years)views=['years','months'];else if(!has_days&&!has_months&&has_years)views=['years'];else if(!has_days&&has_months&&!has_years)views=['months'];else views=['years','months','days'];if($.inArray(plugin.settings.view,views)==-1)plugin.settings.view=views[views.length-1];disabled_dates=[];enabled_dates=[];var dates;for(var l=0;l<2;l++){if(l===0)dates=plugin.settings.disabled_dates;else dates=plugin.settings.enabled_dates;if($.isArray(dates)&&dates.length>0)
$.each(dates,function(){var rules=this.split(' ');for(var i=0;i<4;i++){if(!rules[i])rules[i]='*';rules[i]=(rules[i].indexOf(',')>-1?rules[i].split(','):new Array(rules[i]));for(var j=0;j<rules[i].length;j++)
if(rules[i][j].indexOf('-')>-1){var limits=rules[i][j].match(/^([0-9]+)\-([0-9]+)/);if(null!==limits){for(var k=to_int(limits[1]);k<=to_int(limits[2]);k++)
if($.inArray(k,rules[i])==-1)rules[i].push(k+'');rules[i].splice(j,1);}}
for(j=0;j<rules[i].length;j++)rules[i][j]=(isNaN(to_int(rules[i][j]))?rules[i][j]:to_int(rules[i][j]));}
if(l===0)disabled_dates.push(rules);else enabled_dates.push(rules);});}
var
date=new Date(),reference_date=(!plugin.settings.reference_date?($element.data('zdp_reference_date')&&undefined!==$element.data('zdp_reference_date')?$element.data('zdp_reference_date'):date):plugin.settings.reference_date),tmp_start_date,tmp_end_date;start_date=undefined;end_date=undefined;first_selectable_month=reference_date.getMonth();current_system_month=date.getMonth();first_selectable_year=reference_date.getFullYear();current_system_year=date.getFullYear();first_selectable_day=reference_date.getDate();current_system_day=date.getDate();if(plugin.settings.direction===true)start_date=reference_date;else if(plugin.settings.direction===false){end_date=reference_date;last_selectable_month=end_date.getMonth();last_selectable_year=end_date.getFullYear();last_selectable_day=end_date.getDate();}else if((!$.isArray(plugin.settings.direction)&&is_integer(plugin.settings.direction)&&to_int(plugin.settings.direction)>0)||($.isArray(plugin.settings.direction)&&((tmp_start_date=check_date(plugin.settings.direction[0]))||plugin.settings.direction[0]===true||(is_integer(plugin.settings.direction[0])&&plugin.settings.direction[0]>0))&&((tmp_end_date=check_date(plugin.settings.direction[1]))||plugin.settings.direction[1]===false||(is_integer(plugin.settings.direction[1])&&plugin.settings.direction[1]>=0)))){if(tmp_start_date)start_date=tmp_start_date;else
start_date=new Date(first_selectable_year,first_selectable_month,first_selectable_day+(!$.isArray(plugin.settings.direction)?to_int(plugin.settings.direction):to_int(plugin.settings.direction[0]===true?0:plugin.settings.direction[0])));first_selectable_month=start_date.getMonth();first_selectable_year=start_date.getFullYear();first_selectable_day=start_date.getDate();if(tmp_end_date&&+tmp_end_date>=+start_date)end_date=tmp_end_date;else if(!tmp_end_date&&plugin.settings.direction[1]!==false&&$.isArray(plugin.settings.direction))
end_date=new Date(first_selectable_year,first_selectable_month,first_selectable_day+to_int(plugin.settings.direction[1]));if(end_date){last_selectable_month=end_date.getMonth();last_selectable_year=end_date.getFullYear();last_selectable_day=end_date.getDate();}}else if((!$.isArray(plugin.settings.direction)&&is_integer(plugin.settings.direction)&&to_int(plugin.settings.direction)<0)||($.isArray(plugin.settings.direction)&&(plugin.settings.direction[0]===false||(is_integer(plugin.settings.direction[0])&&plugin.settings.direction[0]<0))&&((tmp_start_date=check_date(plugin.settings.direction[1]))||(is_integer(plugin.settings.direction[1])&&plugin.settings.direction[1]>=0)))){end_date=new Date(first_selectable_year,first_selectable_month,first_selectable_day+(!$.isArray(plugin.settings.direction)?to_int(plugin.settings.direction):to_int(plugin.settings.direction[0]===false?0:plugin.settings.direction[0])));last_selectable_month=end_date.getMonth();last_selectable_year=end_date.getFullYear();last_selectable_day=end_date.getDate();if(tmp_start_date&&+tmp_start_date<+end_date)start_date=tmp_start_date;else if(!tmp_start_date&&$.isArray(plugin.settings.direction))
start_date=new Date(last_selectable_year,last_selectable_month,last_selectable_day-to_int(plugin.settings.direction[1]));if(start_date){first_selectable_month=start_date.getMonth();first_selectable_year=start_date.getFullYear();first_selectable_day=start_date.getDate();}}else if($.isArray(plugin.settings.disabled_dates)&&plugin.settings.disabled_dates.length>0)
for(var interval in disabled_dates)
if(disabled_dates[interval][0]=='*'&&disabled_dates[interval][1]=='*'&&disabled_dates[interval][2]=='*'&&disabled_dates[interval][3]=='*'){var tmpDates=[];$.each(enabled_dates,function(){var rule=this;if(rule[2][0]!='*')
tmpDates.push(parseInt(rule[2][0]+
(rule[1][0]=='*'?'12':str_pad(rule[1][0],2))+
(rule[0][0]=='*'?(rule[1][0]=='*'?'31':new Date(rule[2][0],rule[1][0],0).getDate()):str_pad(rule[0][0],2)),10));});tmpDates.sort();if(tmpDates.length>0){var matches=(tmpDates[0]+'').match(/([0-9]{4})([0-9]{2})([0-9]{2})/);first_selectable_year=parseInt(matches[1],10);first_selectable_month=parseInt(matches[2],10)-1;first_selectable_day=parseInt(matches[3],10);}
break;}
if(is_disabled(first_selectable_year,first_selectable_month,first_selectable_day)){while(is_disabled(first_selectable_year)){if(!start_date){first_selectable_year--;first_selectable_month=11;}else{first_selectable_year++;first_selectable_month=0;}}
while(is_disabled(first_selectable_year,first_selectable_month)){if(!start_date){first_selectable_month--;first_selectable_day=new Date(first_selectable_year,first_selectable_month+1,0).getDate();}else{first_selectable_month++;first_selectable_day=1;}
if(first_selectable_month>11){first_selectable_year++;first_selectable_month=0;first_selectable_day=1;}else if(first_selectable_month<0){first_selectable_year--;first_selectable_month=11;first_selectable_day=new Date(first_selectable_year,first_selectable_month+1,0).getDate();}}
while(is_disabled(first_selectable_year,first_selectable_month,first_selectable_day)){if(!start_date)first_selectable_day--;else first_selectable_day++;date=new Date(first_selectable_year,first_selectable_month,first_selectable_day);first_selectable_year=date.getFullYear();first_selectable_month=date.getMonth();first_selectable_day=date.getDate();}
date=new Date(first_selectable_year,first_selectable_month,first_selectable_day);first_selectable_year=date.getFullYear();first_selectable_month=date.getMonth();first_selectable_day=date.getDate();}
var default_date=check_date($element.val()||(plugin.settings.start_date?plugin.settings.start_date:''));if(default_date&&plugin.settings.strict&&is_disabled(default_date.getFullYear(),default_date.getMonth(),default_date.getDate()))
$element.val('');update_dependent(default_date);if(!plugin.settings.always_visible){if(!update){if(plugin.settings.show_icon){if(browser.name=='firefox'&&$element.is('input[type="text"]')&&$element.css('display')=='inline')$element.css('display','inline-block');var icon_wrapper=jQuery('<span class="Zebra_DatePicker_Icon_Wrapper"></span>').css({'display':'inline-block','position':$element.css('position')=='static'?'relative':$element.css('position'),'float':$element.css('float'),'top':$element.css('top'),'right':$element.css('right'),'bottom':$element.css('bottom'),'left':$element.css('left'),'width':'100%'});$element.wrap(icon_wrapper).css({'position':'relative','top':'auto','right':'auto','bottom':'auto','left':'auto'});icon=jQuery('<a class="Zebra_DatePicker_Icon'+($element.attr('disabled')=='disabled'?' Zebra_DatePicker_Icon_Disabled':'')+'">Pick a date</a>');plugin.icon=icon;clickables=icon.add($element);}else clickables=$element;clickables.bind('click',function(e){e.preventDefault();if(!$element.attr('disabled'))
if(datepicker.css('display')!='none')plugin.hide();else plugin.show();});if(undefined!==icon)icon.insertAfter($element);}
if(undefined!==icon){icon.attr('style','');if(plugin.settings.inside)icon.addClass('Zebra_DatePicker_Icon_Inside');var
element_width=$element.outerWidth(),element_height=$element.outerHeight(),element_margin_left=parseInt($element.css('marginLeft'),10)||0,element_margin_top=parseInt($element.css('marginTop'),10)||0,icon_width=icon.outerWidth(),icon_height=icon.outerHeight(),icon_margin_left=parseInt(icon.css('marginLeft'),10)||0,icon_margin_right=parseInt(icon.css('marginRight'),10)||0;if(plugin.settings.inside)
icon.css({'top':element_margin_top+((element_height-icon_height)/2),'left':element_margin_left+(element_width-icon_width-icon_margin_right)});else
icon.css({'top':element_margin_top+((element_height-icon_height)/2),'left':element_margin_left+element_width+icon_margin_left});}}
show_select_today=(plugin.settings.show_select_today!==false&&$.inArray('days',views)>-1&&!is_disabled(current_system_year,current_system_month,current_system_day)?plugin.settings.show_select_today:false);if(update)return;$(window).bind('resize',_resize);var html=''+'<div class="Zebra_DatePicker">'+'<table class="dp_header">'+'<tr>'+'<td class="dp_previous">'+plugin.settings.header_navigation[0]+'</td>'+'<td class="dp_caption">&#032;</td>'+'<td class="dp_next">'+plugin.settings.header_navigation[1]+'</td>'+'</tr>'+'</table>'+'<div class="dp_content">'+'<table class="dp_daypicker"></table>'+'<table class="dp_monthpicker"></table>'+'<table class="dp_yearpicker"></table>'+'</div>'+'<table class="dp_footer"><tr>'+'<td class="dp_today"'+(plugin.settings.show_clear_date!==false?' style="width:50%"':'')+'>'+show_select_today+'</td>'+'<td class="dp_clear"'+(show_select_today!==false?' style="width:50%"':'')+'>'+plugin.settings.lang_clear_date+'</td>'+'</tr></table>'+'</div>';datepicker=$(html);plugin.datepicker=datepicker;header=$('table.dp_header',datepicker);daypicker=$('table.dp_daypicker',datepicker);monthpicker=$('table.dp_monthpicker',datepicker);yearpicker=$('table.dp_yearpicker',datepicker);footer=$('table.dp_footer',datepicker);selecttoday=$('td.dp_today',footer);cleardate=$('td.dp_clear',footer);if(!plugin.settings.always_visible)
$('body').append(datepicker);else if(!$element.attr('disabled')){plugin.settings.always_visible.append(datepicker);plugin.show();}
datepicker.delegate('td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)','mouseover',function(){$(this).addClass('dp_hover');}).delegate('td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)','mouseout',function(){$(this).removeClass('dp_hover');});disable_text_select($('td',header));$('.dp_previous',header).bind('click',function(){if(!$(this).hasClass('dp_blocked')){if(view=='months')selected_year--;else if(view=='years')selected_year-=12;else if(--selected_month<0){selected_month=11;selected_year--;}
manage_views();}});$('.dp_caption',header).bind('click',function(){if(view=='days')view=($.inArray('months',views)>-1?'months':($.inArray('years',views)>-1?'years':'days'));else if(view=='months')view=($.inArray('years',views)>-1?'years':($.inArray('days',views)>-1?'days':'months'));else view=($.inArray('days',views)>-1?'days':($.inArray('months',views)>-1?'months':'years'));manage_views();});$('.dp_next',header).bind('click',function(){if(!$(this).hasClass('dp_blocked')){if(view=='months')selected_year++;else if(view=='years')selected_year+=12;else if(++selected_month==12){selected_month=0;selected_year++;}
manage_views();}});daypicker.delegate('td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_week_number)','click',function(){if(plugin.settings.select_other_months&&null!==(matches=$(this).attr('class').match(/date\_([0-9]{4})(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])/)))
select_date(matches[1],matches[2]-1,matches[3],'days',$(this));else select_date(selected_year,selected_month,to_int($(this).html()),'days',$(this));});monthpicker.delegate('td:not(.dp_disabled)','click',function(){var matches=$(this).attr('class').match(/dp\_month\_([0-9]+)/);selected_month=to_int(matches[1]);if($.inArray('days',views)==-1)
select_date(selected_year,selected_month,1,'months',$(this));else{view='days';if(plugin.settings.always_visible)$element.val('');manage_views();}});yearpicker.delegate('td:not(.dp_disabled)','click',function(){selected_year=to_int($(this).html());if($.inArray('months',views)==-1)
select_date(selected_year,1,1,'years',$(this));else{view='months';if(plugin.settings.always_visible)$element.val('');manage_views();}});$(selecttoday).bind('click',function(e){e.preventDefault();select_date(current_system_year,current_system_month,current_system_day,'days',$('.dp_current',daypicker));if(plugin.settings.always_visible)
plugin.show();plugin.hide();});$(cleardate).bind('click',function(e){e.preventDefault();$element.val('');if(!plugin.settings.always_visible){default_day=null;default_month=null;default_year=null;selected_month=null;selected_year=null;}else{default_day=null;default_month=null;default_year=null;$('td.dp_selected',datepicker).removeClass('dp_selected');}
plugin.hide();if(plugin.settings.onClear&&typeof plugin.settings.onClear=='function')
plugin.settings.onClear($element);});if(!plugin.settings.always_visible)
$(document).bind({'mousedown':_mousedown,'keyup':_keyup});manage_views();};plugin.destroy=function(){if(undefined!==plugin.icon)plugin.icon.remove();plugin.datepicker.remove();$(document).unbind('keyup',_keyup);$(document).unbind('mousedown',_mousedown);$(window).unbind('resize',_resize);$element.removeData('Zebra_DatePicker');delete plugin;};plugin.hide=function(){if(!plugin.settings.always_visible){iframeShim('hide');datepicker.hide();$element.parent().removeClass('active');}};plugin.show=function(){view=plugin.settings.view;var default_date=check_date($element.val()||(plugin.settings.start_date?plugin.settings.start_date:''));if(default_date){default_month=default_date.getMonth();selected_month=default_date.getMonth();default_year=default_date.getFullYear();selected_year=default_date.getFullYear();default_day=default_date.getDate();if(is_disabled(default_year,default_month,default_day)){if(plugin.settings.strict)$element.val('');selected_month=first_selectable_month;selected_year=first_selectable_year;}}else{selected_month=first_selectable_month;selected_year=first_selectable_year;}
manage_views();if(!plugin.settings.always_visible){var
datepicker_width=datepicker.outerWidth(),datepicker_height=datepicker.outerHeight(),left=(undefined!==icon?icon.offset().left+icon.outerWidth(true):$element.offset().left+$element.outerWidth(true))+plugin.settings.offset[0],top=(undefined!==icon?icon.offset().top:$element.offset().top)-datepicker_height+plugin.settings.offset[1],window_width=$(window).width(),window_height=$(window).height(),window_scroll_top=$(window).scrollTop(),window_scroll_left=$(window).scrollLeft();if(left+datepicker_width>window_scroll_left+window_width)left=window_scroll_left+window_width-datepicker_width;if(left<window_scroll_left)left=window_scroll_left;if(top+datepicker_height>window_scroll_top+window_height)top=window_scroll_top+window_height-datepicker_height;if(top<window_scroll_top)top=window_scroll_top;datepicker.css({'left':$element.offset().left,'top':$element.offset().top+$element.outerHeight()-1});datepicker.fadeIn(browser.name=='explorer'&&browser.version<9?0:150,'linear');iframeShim();}else datepicker.show();$element.parent().addClass('active');};plugin.update=function(values){if(plugin.original_direction)plugin.original_direction=plugin.direction;plugin.settings=$.extend(plugin.settings,values);init(true);};var check_date=function(str_date){str_date+='';if($.trim(str_date)!==''){var
format=escape_regexp(plugin.settings.format),format_chars=['d','D','j','l','N','S','w','F','m','M','n','Y','y'],matches=[],regexp=[],position=null,segments=null;for(var i=0;i<format_chars.length;i++)
if((position=format.indexOf(format_chars[i]))>-1)
matches.push({character:format_chars[i],position:position});matches.sort(function(a,b){return a.position-b.position;});$.each(matches,function(index,match){switch(match.character){case'd':regexp.push('0[1-9]|[12][0-9]|3[01]');break;case'D':regexp.push('[a-z]{3}');break;case'j':regexp.push('[1-9]|[12][0-9]|3[01]');break;case'l':regexp.push('[a-z]+');break;case'N':regexp.push('[1-7]');break;case'S':regexp.push('st|nd|rd|th');break;case'w':regexp.push('[0-6]');break;case'F':regexp.push('[a-z]+');break;case'm':regexp.push('0[1-9]|1[012]+');break;case'M':regexp.push('[a-z]{3}');break;case'n':regexp.push('[1-9]|1[012]');break;case'Y':regexp.push('[0-9]{4}');break;case'y':regexp.push('[0-9]{2}');break;}});if(regexp.length){matches.reverse();$.each(matches,function(index,match){format=format.replace(match.character,'('+regexp[regexp.length-index-1]+')');});regexp=new RegExp('^'+format+'$','ig');if((segments=regexp.exec(str_date))){var tmpdate=new Date(),original_day=tmpdate.getDate(),original_month=tmpdate.getMonth()+1,original_year=tmpdate.getFullYear(),english_days=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],english_months=['January','February','March','April','May','June','July','August','September','October','November','December'],iterable,valid=true;matches.reverse();$.each(matches,function(index,match){if(!valid)return true;switch(match.character){case'm':case'n':original_month=to_int(segments[index+1]);break;case'd':case'j':original_day=to_int(segments[index+1]);break;case'D':case'l':case'F':case'M':if(match.character=='D'||match.character=='l')iterable=plugin.settings.days;else iterable=plugin.settings.months;valid=false;$.each(iterable,function(key,value){if(valid)return true;if(segments[index+1].toLowerCase()==value.substring(0,(match.character=='D'||match.character=='M'?3:value.length)).toLowerCase()){switch(match.character){case'D':segments[index+1]=english_days[key].substring(0,3);break;case'l':segments[index+1]=english_days[key];break;case'F':segments[index+1]=english_months[key];original_month=key+1;break;case'M':segments[index+1]=english_months[key].substring(0,3);original_month=key+1;break;}
valid=true;}});break;case'Y':original_year=to_int(segments[index+1]);break;case'y':original_year='19'+to_int(segments[index+1]);break;}});if(valid){var date=new Date(original_year,(original_month||1)-1,original_day||1);if(date.getFullYear()==original_year&&date.getDate()==(original_day||1)&&date.getMonth()==((original_month||1)-1))
return date;}}}
return false;}};var disable_text_select=function(el){if(browser.name=='firefox')el.css('MozUserSelect','none');else if(browser.name=='explorer')el.bind('selectstart',function(){return false;});else el.mousedown(function(){return false;});};var escape_regexp=function(str){return str.replace(/([-.,*+?^${}()|[\]\/\\])/g,'\\$1');};var format=function(date){var result='',j=date.getDate(),w=date.getDay(),l=plugin.settings.days[w],n=date.getMonth()+1,f=plugin.settings.months[n-1],y=date.getFullYear()+'';for(var i=0;i<plugin.settings.format.length;i++){var chr=plugin.settings.format.charAt(i);switch(chr){case'y':y=y.substr(2);case'Y':result+=y;break;case'm':n=str_pad(n,2);case'n':result+=n;break;case'M':f=($.isArray(plugin.settings.months_abbr)&&undefined!==plugin.settings.months_abbr[n-1]?plugin.settings.months_abbr[n-1]:plugin.settings.months[n-1].substr(0,3));case'F':result+=f;break;case'd':j=str_pad(j,2);case'j':result+=j;break;case'D':l=($.isArray(plugin.settings.days_abbr)&&undefined!==plugin.settings.days_abbr[w]?plugin.settings.days_abbr[w]:plugin.settings.days[w].substr(0,3));case'l':result+=l;break;case'N':w++;case'w':result+=w;break;case'S':if(j%10==1&&j!='11')result+='st';else if(j%10==2&&j!='12')result+='nd';else if(j%10==3&&j!='13')result+='rd';else result+='th';break;default:result+=chr;}}
return result;};var generate_daypicker=function(){var
days_in_month=new Date(selected_year,selected_month+1,0).getDate(),first_day=new Date(selected_year,selected_month,1).getDay(),days_in_previous_month=new Date(selected_year,selected_month,0).getDate(),days_from_previous_month=first_day-plugin.settings.first_day_of_week;days_from_previous_month=days_from_previous_month<0?7+days_from_previous_month:days_from_previous_month;manage_header(plugin.settings.months[selected_month]+', '+selected_year);var html='<tr>';if(plugin.settings.show_week_number)
html+='<th>'+plugin.settings.show_week_number+'</th>';for(var i=0;i<7;i++)
html+='<th>'+($.isArray(plugin.settings.days_abbr)&&undefined!==plugin.settings.days_abbr[(plugin.settings.first_day_of_week+i)%7]?plugin.settings.days_abbr[(plugin.settings.first_day_of_week+i)%7]:plugin.settings.days[(plugin.settings.first_day_of_week+i)%7].substr(0,2))+'</th>';html+='</tr><tr>';for(i=0;i<42;i++){if(i>0&&i%7===0)html+='</tr><tr>';if(i%7===0&&plugin.settings.show_week_number)
html+='<td class="dp_week_number">'+getWeekNumber(new Date(selected_year,selected_month,(i-days_from_previous_month+1)))+'</td>';var day=(i-days_from_previous_month+1);if(plugin.settings.select_other_months&&(i<days_from_previous_month||day>days_in_month)){var real_date=new Date(selected_year,selected_month,day),real_year=real_date.getFullYear(),real_month=real_date.getMonth(),real_day=real_date.getDate();real_date=real_year+str_pad(real_month+1,2)+str_pad(real_day,2);}
if(i<days_from_previous_month)
html+='<td class="'+(plugin.settings.select_other_months&&!is_disabled(real_year,real_month,real_day)?'dp_not_in_month_selectable date_'+real_date:'dp_not_in_month')+'">'+(plugin.settings.select_other_months||plugin.settings.show_other_months?str_pad(days_in_previous_month-days_from_previous_month+i+1,plugin.settings.zero_pad?2:0):'&nbsp;')+'</td>';else if(day>days_in_month)
html+='<td class="'+(plugin.settings.select_other_months&&!is_disabled(real_year,real_month,real_day)?'dp_not_in_month_selectable date_'+real_date:'dp_not_in_month')+'">'+(plugin.settings.select_other_months||plugin.settings.show_other_months?str_pad(day-days_in_month,plugin.settings.zero_pad?2:0):'&nbsp;')+'</td>';else{var
weekday=(plugin.settings.first_day_of_week+i)%7,class_name='';if(is_disabled(selected_year,selected_month,day)){if($.inArray(weekday,plugin.settings.weekend_days)>-1)class_name='dp_weekend_disabled';else class_name+=' dp_disabled';if(selected_month==current_system_month&&selected_year==current_system_year&&current_system_day==day)class_name+=' dp_disabled_current';}else{if($.inArray(weekday,plugin.settings.weekend_days)>-1)class_name='dp_weekend';if(selected_month==default_month&&selected_year==default_year&&default_day==day)class_name+=' dp_selected';if(selected_month==current_system_month&&selected_year==current_system_year&&current_system_day==day)class_name+=' dp_current';}
html+='<td'+(class_name!==''?' class="'+$.trim(class_name)+'"':'')+'>'+(plugin.settings.zero_pad?str_pad(day,2):day)+'</td>';}}
html+='</tr>';daypicker.html($(html));if(plugin.settings.always_visible)
daypicker_cells=$('td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)',daypicker);daypicker.show();};var generate_monthpicker=function(){manage_header(selected_year);var html='<tr>';for(var i=0;i<12;i++){if(i>0&&i%3===0)html+='</tr><tr>';var class_name='dp_month_'+i;if(is_disabled(selected_year,i))class_name+=' dp_disabled';else if(default_month!==false&&default_month==i)class_name+=' dp_selected';else if(current_system_month==i&&current_system_year==selected_year)class_name+=' dp_current';html+='<td class="'+$.trim(class_name)+'">'+($.isArray(plugin.settings.months_abbr)&&undefined!==plugin.settings.months_abbr[i]?plugin.settings.months_abbr[i]:plugin.settings.months[i].substr(0,3))+'</td>';}
html+='</tr>';monthpicker.html($(html));if(plugin.settings.always_visible)
monthpicker_cells=$('td:not(.dp_disabled)',monthpicker);monthpicker.show();};var generate_yearpicker=function(){manage_header(selected_year-7+' - '+(selected_year+4));var html='<tr>';for(var i=0;i<12;i++){if(i>0&&i%3===0)html+='</tr><tr>';var class_name='';if(is_disabled(selected_year-7+i))class_name+=' dp_disabled';else if(default_year&&default_year==selected_year-7+i)class_name+=' dp_selected';else if(current_system_year==(selected_year-7+i))class_name+=' dp_current';html+='<td'+($.trim(class_name)!==''?' class="'+$.trim(class_name)+'"':'')+'>'+(selected_year-7+i)+'</td>';}
html+='</tr>';yearpicker.html($(html));if(plugin.settings.always_visible)
yearpicker_cells=$('td:not(.dp_disabled)',yearpicker);yearpicker.show();};var iframeShim=function(action){if(browser.name=='explorer'&&browser.version==6){if(!shim){var zIndex=to_int(datepicker.css('zIndex'))-1;shim=jQuery('<iframe>',{'src':'javascript:document.write("")','scrolling':'no','frameborder':0,'allowtransparency':'true',css:{'zIndex':zIndex,'position':'absolute','top':-1000,'left':-1000,'width':datepicker.outerWidth(),'height':datepicker.outerHeight(),'filter':'progid:DXImageTransform.Microsoft.Alpha(opacity=0)','display':'none'}});$('body').append(shim);}
switch(action){case'hide':shim.hide();break;default:var offset=datepicker.offset();shim.css({'top':offset.top,'left':offset.left,'display':'block'});}}};var is_disabled=function(year,month,day){if((undefined===year||isNaN(year))&&(undefined===month||isNaN(month))&&(undefined===day||isNaN(day)))return false;if(!(!$.isArray(plugin.settings.direction)&&to_int(plugin.settings.direction)===0)){var
now=to_int(str_concat(year,(typeof month!='undefined'?str_pad(month,2):''),(typeof day!='undefined'?str_pad(day,2):''))),len=(now+'').length;if(len==8&&((typeof start_date!='undefined'&&now<to_int(str_concat(first_selectable_year,str_pad(first_selectable_month,2),str_pad(first_selectable_day,2))))||(typeof end_date!='undefined'&&now>to_int(str_concat(last_selectable_year,str_pad(last_selectable_month,2),str_pad(last_selectable_day,2))))))return true;else if(len==6&&((typeof start_date!='undefined'&&now<to_int(str_concat(first_selectable_year,str_pad(first_selectable_month,2))))||(typeof end_date!='undefined'&&now>to_int(str_concat(last_selectable_year,str_pad(last_selectable_month,2))))))return true;else if(len==4&&((typeof start_date!='undefined'&&now<first_selectable_year)||(typeof end_date!='undefined'&&now>last_selectable_year)))return true;}
if(typeof month!='undefined')month=month+1;var disabled=false,enabled=false;if(disabled_dates)
$.each(disabled_dates,function(){if(disabled)return;var rule=this;if($.inArray(year,rule[2])>-1||$.inArray('*',rule[2])>-1)
if((typeof month!='undefined'&&$.inArray(month,rule[1])>-1)||$.inArray('*',rule[1])>-1)
if((typeof day!='undefined'&&$.inArray(day,rule[0])>-1)||$.inArray('*',rule[0])>-1){if(rule[3]=='*')return(disabled=true);var weekday=new Date(year,month-1,day).getDay();if($.inArray(weekday,rule[3])>-1)return(disabled=true);}});if(enabled_dates)
$.each(enabled_dates,function(){if(enabled)return;var rule=this;if($.inArray(year,rule[2])>-1||$.inArray('*',rule[2])>-1){enabled=true;if(typeof month!='undefined'){enabled=true;if($.inArray(month,rule[1])>-1||$.inArray('*',rule[1])>-1){if(typeof day!='undefined'){enabled=true;if($.inArray(day,rule[0])>-1||$.inArray('*',rule[0])>-1){if(rule[3]=='*')return(enabled=true);var weekday=new Date(year,month-1,day).getDay();if($.inArray(weekday,rule[3])>-1)return(enabled=true);enabled=false;}else enabled=false;}}else enabled=false;}}});if(enabled_dates&&enabled)return false;else if(disabled_dates&&disabled)return true;return false;};var is_integer=function(value){return(value+'').match(/^\-?[0-9]+$/)?true:false;};var manage_header=function(caption){$('.dp_caption',header).html(caption);if(!(!$.isArray(plugin.settings.direction)&&to_int(plugin.settings.direction)===0)||(views.length==1&&views[0]=='months')){var year=selected_year,month=selected_month,next,previous;if(view=='days'){previous=!is_disabled(month-1<0?str_concat(year-1,'11'):str_concat(year,str_pad(month-1,2)));next=!is_disabled(month+1>11?str_concat(year+1,'00'):str_concat(year,str_pad(month+1,2)));}else if(view=='months'){if(!start_date||start_date.getFullYear()<=year-1)previous=true;if(!end_date||end_date.getFullYear()>=year+1)next=true;}else if(view=='years'){if(!start_date||start_date.getFullYear()<year-7)previous=true;if(!end_date||end_date.getFullYear()>year+4)next=true;}
if(!previous){$('.dp_previous',header).addClass('dp_blocked');$('.dp_previous',header).removeClass('dp_hover');}else $('.dp_previous',header).removeClass('dp_blocked');if(!next){$('.dp_next',header).addClass('dp_blocked');$('.dp_next',header).removeClass('dp_hover');}else $('.dp_next',header).removeClass('dp_blocked');}};var manage_views=function(){if(daypicker.text()===''||view=='days'){if(daypicker.text()===''){if(!plugin.settings.always_visible)
datepicker.css('left',-1000);datepicker.show();generate_daypicker();var width=$element.outerWidth(),height=daypicker.outerHeight();datepicker.css({'width':width});monthpicker.css({'width':width,'height':height});yearpicker.css({'width':width,'height':height});header.css('width',width);footer.css('width',width);datepicker.hide();}else generate_daypicker();monthpicker.hide();yearpicker.hide();}else if(view=='months'){generate_monthpicker();daypicker.hide();yearpicker.hide();}else if(view=='years'){generate_yearpicker();daypicker.hide();monthpicker.hide();}
if(plugin.settings.onChange&&typeof plugin.settings.onChange=='function'&&undefined!==view){var elements=(view=='days'?daypicker.find('td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)'):(view=='months'?monthpicker.find('td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)'):yearpicker.find('td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)')));elements.each(function(){if(view=='days'){if($(this).hasClass('dp_not_in_month_selectable')){var matches=$(this).attr('class').match(/date\_([0-9]{4})(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])/);$(this).data('date',matches[1]+'-'+matches[2]+'-'+matches[3]);}else
$(this).data('date',selected_year+'-'+str_pad(selected_month+1,2)+'-'+str_pad(to_int($(this).text()),2));}else if(view=='months'){var matches=$(this).attr('class').match(/dp\_month\_([0-9]+)/);$(this).data('date',selected_year+'-'+str_pad(to_int(matches[1])+1,2));}else
$(this).data('date',to_int($(this).text()));});plugin.settings.onChange(view,elements,$element);}
footer.show();if(plugin.settings.show_clear_date===true||(plugin.settings.show_clear_date===0&&$element.val()!=='')||(plugin.settings.always_visible&&plugin.settings.show_clear_date!==false)){cleardate.show();if(show_select_today){selecttoday.css('width','50%');cleardate.css('width','50%');}else{selecttoday.hide();cleardate.css('width','100%');}}else{cleardate.hide();if(show_select_today)selecttoday.show().css('width','100%');else footer.hide();}};var select_date=function(year,month,day,view,cell){var
default_date=new Date(year,month,day,12,0,0),view_cells=(view=='days'?daypicker_cells:(view=='months'?monthpicker_cells:yearpicker_cells)),selected_value=format(default_date);$element.val(selected_value);if(plugin.settings.always_visible){default_month=default_date.getMonth();selected_month=default_date.getMonth();default_year=default_date.getFullYear();selected_year=default_date.getFullYear();default_day=default_date.getDate();view_cells.removeClass('dp_selected');cell.addClass('dp_selected');if(view=='days'&&cell.hasClass('dp_not_in_month_selectable'))plugin.show();}
plugin.hide();update_dependent(default_date);if(plugin.settings.onSelect&&typeof plugin.settings.onSelect=='function')
plugin.settings.onSelect(selected_value,year+'-'+str_pad(month+1,2)+'-'+str_pad(day,2),default_date,$element);$element.focus();};var str_concat=function(){var str='';for(var i=0;i<arguments.length;i++)str+=(arguments[i]+'');return str;};var str_pad=function(str,len){str+='';while(str.length<len)str='0'+str;return str;};var to_int=function(str){return parseInt(str,10);};var update_dependent=function(date){if(plugin.settings.pair){$.each(plugin.settings.pair,function(){var $pair=$(this);if(!($pair.data&&$pair.data('Zebra_DatePicker')))
$pair.data('zdp_reference_date',date);else{var dp=$pair.data('Zebra_DatePicker');dp.update({'reference_date':date,'direction':dp.settings.direction===0?1:dp.settings.direction});if(dp.settings.always_visible)dp.show();}});}};var getWeekNumber=function(date){var y=date.getFullYear(),m=date.getMonth()+1,d=date.getDate(),a,b,c,s,e,f,g,n,w;if(m<3){a=y-1;b=(a/4|0)-(a/100|0)+(a/400|0);c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0);s=b-c;e=0;f=d-1+31*(m-1);}else{a=y;b=(a/4|0)-(a/100|0)+(a/400|0);c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0);s=b-c;e=s+1;f=d+((153*(m-3)+2)/5|0)+58+s;}
g=(a+b)%7;d=(f+g-e)%7;n=f+3-d;if(n<0)w=53-((g-s)/5|0);else if(n>364+s)w=1;else w=(n/7|0)+1;return w;};var _keyup=function(e){if(datepicker.css('display')=='block'||e.which==27)plugin.hide();};var _mousedown=function(e){if(datepicker.css('display')=='block'){if(plugin.settings.show_icon&&$(e.target).get(0)===icon.get(0))return true;if($(e.target).parents().filter('.Zebra_DatePicker').length===0)plugin.hide();}};var _resize=function(){plugin.hide();if(icon!==undefined){clearTimeout(timeout);timeout=setTimeout(function(){plugin.update();},100);}};var browser={init:function(){this.name=this.searchString(this.dataBrowser)||'';this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||'';},searchString:function(data){for(var i=0;i<data.length;i++){var dataString=data[i].string;var dataProp=data[i].prop;this.versionSearchString=data[i].versionSearch||data[i].identity;if(dataString){if(dataString.indexOf(data[i].subString)!=-1)
return data[i].identity;}
else if(dataProp)
return data[i].identity;}},searchVersion:function(dataString){var index=dataString.indexOf(this.versionSearchString);if(index==-1)return;return parseFloat(dataString.substring(index+this.versionSearchString.length+1));},dataBrowser:[{string:navigator.userAgent,subString:'Firefox',identity:'firefox'},{string:navigator.userAgent,subString:'MSIE',identity:'explorer',versionSearch:'MSIE'}]};browser.init();init();};$.fn.Zebra_DatePicker=function(options){return this.each(function(){if(undefined!==$(this).data('Zebra_DatePicker'))
$(this).data('Zebra_DatePicker').destroy();var plugin=new $.Zebra_DatePicker(this,options);$(this).data('Zebra_DatePicker',plugin);});};})(jQuery);(function($){jQuery.fn.simpleSelect=function(options){options=$.extend({'hasDropdownClass':'has-dropdown','originalSelectTag':'select','styledSelectClass':'simple-select-styled'},options);var make=function(){var res='';var $select=$(this);$select.hide();var val=$select.val();res+='<div data-value="'+val+'" data-text="'+$select.find('[value="'+val+'"]').text().htmlEscape()+'" class="'+options.styledSelectClass+'">';res+='<ul tabindex="-1">';$('option',$select).each(function(){res+='<li data-value="'+(''+$(this).val()).htmlEscape()+'">'+$(this).html()+'</li>';});res+='</ul>';res+='</div>';$select.after(res);};initEvents(options);return this.each(make);};var initEvents=function(options){initEvents=function(){};$('body').on('click','.'+options.styledSelectClass,function(event){$(this).addClass(options.hasDropdownClass).find('ul').focus();}).on('blur','.'+options.styledSelectClass+' ul',function(event){$(this).parent().removeClass(options.hasDropdownClass);}).on('click','.'+options.styledSelectClass+' li',function(event){var selectedValue=$(this).attr('data-value');var $selectStyled=$(this).parents('.'+options.styledSelectClass).eq(0);if(selectedValue!=$selectStyled.attr('data-value')){$selectStyled.attr('data-value',selectedValue);$selectStyled.attr('data-text',$(this).text());var $select=$selectStyled.prev(options.originalSelectTag);$('option',$select).each(function(){if($(this).val()==selectedValue){$(this).attr('selected',true);}});$select.trigger('change');}
$selectStyled.find('ul').trigger('blur');event.stopPropagation();});};})(jQuery);(function($){$.fn.tabs=function(options){options=$.extend(true,{tab_style:'slider',classes:{header_wrapper_selector:'tabs-header-wrapper',header_selector:'tabs-header',header_item_selector:'tabs-header-item',content_selector:'tabs-content',tab_content:'tabs-item',active:'active'},attr:{tab_source:'data-tab',tab_url:'data-url',tab_content:'data-tab-id'},postData:{}},options);var init=function(){var $tabs=$(this),active=null;if(!$tabs.attr('data-role')){$tabs.attr('data-role','tabs');$tabs._content={};$tabs.$content=$tabs.find('.'+options.classes.content_selector).eq(0);$tabs.$header=$tabs.find('.'+options.classes.header_selector).eq(0);$tabs.$header.find('.'+options.classes.header_item_selector).each(function(index){var tab_id=$(this).attr(options.attr.tab_source),tab_url=$(this).attr(options.attr.tab_url),post=(typeof options.postData=='function')?options.postData():options.postData;$tabs._content[tab_id]={url:tab_url,post:post||{},loaded:false,header:$(this),content:null};if($(this).hasClass(options.classes.active)){active=index;}
$(this).on('click',function(event){selectTab($tabs,event);});}).eq(0).toggleClass('active',!active).parent().find('.'+options.classes.header_item_selector+'.'+options.classes.active).eq(0).click();}};var selectTab=function($tabs,event){event&&event.preventDefault();var tab_id=$(event.currentTarget).attr(options.attr.tab_source);if(!$tabs._content[tab_id].loaded){var $tab=$tabs.$content.find('['+options.attr.tab_content+'='+tab_id+']');if($tab.length==0){loadTabContent($tabs,tab_id);}else{$tabs._content[tab_id].content=$tab;$tabs._content[tab_id].loaded=true;activateTab(tab_id,$tabs);}}else{activateTab(tab_id,$tabs);}};var loadTabContent=function($tabs,id){if($tabs._content[id].url){var post=$tabs._content[id].post;$.post($tabs._content[id].url,post,function(data){$tabs._content[id].content=$('<div>').addClass(options.classes.tab_content).attr(options.attr.tab_content,id);$tabs.$content.append($tabs._content[id].content);$tabs._content[id].content.html(data);$tabs._content[id].loaded=true;activateTab(id,$tabs);});}};var activateTab=function(id,$tabs){switch(options.tab_style){case'regular':activateRegularTab(id,$tabs);break;case'slider':activateSliderTab(id,$tabs);break;default:return;}
$('body').trigger('tabs-activate',[$tabs]);};var activateRegularTab=function(id,$tabs){$tabs.$header.find('.'+options.classes.header_item_selector).removeClass(options.classes.active);$tabs.$content.children('.'+options.classes.tab_content).removeClass(options.classes.active);$tabs._content[id].header.addClass(options.classes.active);$tabs._content[id].content.addClass(options.classes.active);}
var activateSliderTab=function(id,$tabs){activateRegularTab(id,$tabs);}
return this.each(init);};})(jQuery);(function($){$.fn.carousel=function(options){options=$.extend(true,{selector:{carriage:'ul',item:'li'},classes:{prev:'prev',next:'next'},wheelScroll:true,wheelSlideOut:true,wheelItemsOffset:1,animate:true,animateSpeed:300,slideType:'margin',refreshInterval:1000},options);var init=function(){var $carousel=$(this);if(!$carousel.attr('data-role')){$carousel.attr('data-role','carousel');$carousel.$prev=$carousel.find('.'+options.classes.prev);$carousel.$prev.on('click',function(e){slide($carousel,-1);return false;});$carousel.$next=$carousel.find('.'+options.classes.next);$carousel.$next.on('click',function(e){slide($carousel,1);return false;});$carousel.$carriage=$carousel.find(options.selector.carriage).eq(0);$carousel.$lastItem=$carousel.$carriage.children(options.selector.item).last();$carousel.itemWidth=$carousel.$lastItem.outerWidth(true);$carousel.totalItemsCount=$carousel.$carriage.children(options.selector.item).length;$carousel.offset=0;$carousel.maxOffset=0;$carousel.minOffset=0;if(options.wheelScroll){$carousel.on('mousewheel DOMMouseScroll',function(event){var delta=(event.type=="DOMMouseScroll")?event.originalEvent.detail:-event.originalEvent.wheelDelta,offset=options.wheelItemsOffset*((delta<0)?-1:1);if((!options.wheelSlideOut||(offset>0))&&$carousel.$next.is(':visible')||(!options.wheelSlideOut||(offset<0))&&$carousel.$prev.is(':visible')){event.cancel();slide($carousel,offset);}});}
if(options.slideType=='scroll'){var scrollTimeout=0;$carousel.$carriage.on('scroll',function(event){clearTimeout(scrollTimeout);scrollTimeout=setTimeout(function(){slideScrollRefresh($carousel);},100);});}
var resizeTimeout=0;$(window).on('resize',function(){clearTimeout(resizeTimeout);resizeTimeout=setTimeout(function(){slide($carousel,0);},200);});if(options.refreshInterval){setInterval(function(){slide($carousel,0);},options.refreshInterval);}
$(window).trigger('resize');}};var refresh=function($carousel){if($carousel.is(':visible')){$carousel.maxOffset=$carousel.totalItemsCount-Math.floor($carousel.width()/$carousel.itemWidth);$carousel.maxOffset=Math.max(0,$carousel.maxOffset);}};var slide=function($carousel,offset){switch(options.slideType){case'scroll':return slideScroll.apply(this,arguments);break;case'margin':default:return slideMargin.apply(this,arguments);break;}};var slideScrollRefresh=function($carousel){var prev=+($carousel.$carriage.scrollLeft()>0);var next=+($carousel.$carriage.get(0).scrollWidth>$carousel.width()+$carousel.$carriage.scrollLeft());if(prev){$carousel.addClass('data-prev');}else{$carousel.removeClass('data-prev');}
if(next){$carousel.addClass('data-next');}else{$carousel.removeClass('data-next');}};var slideScroll=function($carousel,offset){if(offset){var center=Math.round($carousel.$carriage.width()/2);var items=$carousel.$carriage.children(options.selector.item);var index=0;var next=null;var min=9999;items.each(function(){var item=$(this);var itemCenter=item.position().left+(item.width()/2);var temp=Math.abs(center-itemCenter);if(temp<min){min=temp;index=item.index();}});next=$carousel.$carriage.children().eq(index+offset);}
if(next&&next.length){var centerOfNextElement=next.position().left+(next.width()/2);var pos=$carousel.$carriage.scrollLeft()-center+centerOfNextElement;if(options.animate){$carousel.$carriage.stop().animate({scrollLeft:pos+'px'},options.animateSpeed);}else{$carousel.$carriage.scrollLeft(pos);}}
slideScrollRefresh($carousel);};var slideMargin=function($carousel,offset){refresh($carousel);$carousel.offset+=parseInt(offset);var calculated_offset_width=Math.max($carousel.offset*$carousel.itemWidth,$carousel.minOffset),real_offset_width=Math.min(calculated_offset_width,Math.abs($carousel.totalItemsCount*$carousel.itemWidth-$carousel.width()
-($carousel.$lastItem.outerWidth(true)-$carousel.$lastItem.width())));if(($carousel.minOffset<=$carousel.offset)&&($carousel.offset<=$carousel.maxOffset)){$carousel.attr('data-prev',1);$carousel.attr('data-next',1);}
if((real_offset_width<calculated_offset_width)){$carousel.attr('data-next',0);}
if($carousel.offset>=$carousel.maxOffset){$carousel.offset=$carousel.maxOffset;$carousel.attr('data-next',0);}
if($carousel.offset<=$carousel.minOffset){$carousel.offset=$carousel.minOffset;$carousel.attr('data-prev',0);}
if(options.animate){$carousel.$carriage.stop().animate({marginLeft:(-real_offset_width)+'px'},options.animateSpeed);}else{$carousel.$carriage.css({'margin-left':(-real_offset_width)+'px'});}};return this.each(init);};})(jQuery);(function($){jQuery.fn.carouselMobile=function(options){options=$.extend({itemsWrapper:'ul',itemWrapper:'li',classes:{'prev':'prev-image','next':'next-image'}},options);var init=function(){var carousel=$(this);if(carousel.attr('data-role')===undefined){var prevButton=$('.'+options.classes['prev'],carousel);var nextButton=$('.'+options.classes['next'],carousel);carousel.attr('data-role','carousel');prevButton.hide();nextButton.hide();$('body').on('tabs-activate',function(){rebuild(carousel);$(window).on('resize',function(){rebuild(carousel);});});}};var rebuild=function(container){var itemsWrapper=container.children('div');var containerWidth=container.width();var totalWidth=0;$(options.itemsWrapper,itemsWrapper).children(options.itemWrapper).each(function(){totalWidth+=$(this).outerWidth(true);});if(containerWidth!=0&&totalWidth>=containerWidth){container.css({'overflow':'hidden'});itemsWrapper.css({'overflow-x':'scroll','padding-bottom':'14px'});}};return this.each(init);};})(jQuery);(function($){var defaults={topSpacing:0,bottomSpacing:0,className:'is-sticky',wrapperClassName:'sticky-wrapper',center:false,getWidthFrom:'',responsiveWidth:false},$window=$(window),$document=$(document),sticked=[],windowHeight=$window.height(),scroller=function(){var scrollTop=$window.scrollTop(),documentHeight=$document.height(),dwh=documentHeight-windowHeight,extra=(scrollTop>dwh)?dwh-scrollTop:0;for(var i=0;i<sticked.length;i++){var s=sticked[i],elementTop=s.stickyWrapper.offset().top,etse=elementTop-s.topSpacing-extra;if(scrollTop<=etse){if(s.currentTop!==null){s.stickyElement.css('position','').css('top','');s.stickyElement.trigger('sticky-end',[s]).parent().removeClass(s.className);s.currentTop=null;}}
else{var newTop=documentHeight-s.stickyElement.outerHeight()
-s.topSpacing-s.bottomSpacing-scrollTop-extra;if(newTop<0){newTop=newTop+s.topSpacing;}else{newTop=s.topSpacing;}
if(s.currentTop!=newTop){s.stickyElement.css('position','fixed').css('top',newTop);if(typeof s.getWidthFrom!=='undefined'){s.stickyElement.css('width',$(s.getWidthFrom).width());}
s.stickyElement.trigger('sticky-start',[s]).parent().addClass(s.className);s.currentTop=newTop;}}}},resizer=function(){windowHeight=$window.height();for(var i=0;i<sticked.length;i++){var s=sticked[i];if(typeof s.getWidthFrom!=='undefined'&&s.responsiveWidth===true){s.stickyElement.css('width',$(s.getWidthFrom).width());}
s.stickyWrapper.css('height',s.stickyElement.outerHeight());}},methods={init:function(options){var o=$.extend({},defaults,options);return this.each(function(){var stickyElement=$(this);var stickyId=stickyElement.attr('id');var wrapperId=stickyId?stickyId+'-'+defaults.wrapperClassName:defaults.wrapperClassName
var wrapper=$('<div></div>').attr('id',stickyId+'-sticky-wrapper').addClass(o.wrapperClassName);stickyElement.wrapAll(wrapper);if(o.center){stickyElement.parent().css({width:stickyElement.outerWidth(),marginLeft:"auto",marginRight:"auto"});}
if(stickyElement.css("float")=="right"){stickyElement.css({"float":"none"}).parent().css({"float":"right"});}
var stickyWrapper=stickyElement.parent();stickyWrapper.css('height',stickyElement.outerHeight());sticked.push({topSpacing:o.topSpacing,bottomSpacing:o.bottomSpacing,stickyElement:stickyElement,currentTop:null,stickyWrapper:stickyWrapper,className:o.className,getWidthFrom:o.getWidthFrom,responsiveWidth:o.responsiveWidth});});},update:scroller,unstick:function(options){return this.each(function(){var unstickyElement=$(this);var removeIdx=-1;for(var i=0;i<sticked.length;i++)
{if(sticked[i].stickyElement.get(0)==unstickyElement.get(0))
{removeIdx=i;}}
if(removeIdx!=-1)
{sticked.splice(removeIdx,1);unstickyElement.unwrap();unstickyElement.removeAttr('style');}});}};if(window.addEventListener){window.addEventListener('scroll',scroller,false);window.addEventListener('resize',resizer,false);}else if(window.attachEvent){window.attachEvent('onscroll',scroller);window.attachEvent('onresize',resizer);}
$.fn.sticky=function(method){setTimeout(scroller,0);if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.sticky');}};$.fn.unstick=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.unstick.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.sticky');}};$(function(){setTimeout(scroller,0);});})(jQuery);(function(window,$){window.mixins={'options':{'options':{},setOptions:function(data){$(this.options).extend(true,data);}}};})(window,window.jQuery);(function(window,$,undefined){window.site=window.site||$({});window.site.utils={};window.site.utils.noop=function(){};window.site.ready=function(callback){if($.type(callback)=='function'){$(callback);}};window.site.setSiteCurrency=function(){var code=$(this).attr('data-id');if(code){window.location=site.setUrlParam(window.location.href,'currency',code);}};window.site.setUrlParam=function(url,key,value,anchor){var parts=url.split('#');var params=[];var changed=false;var result;if(!anchor&&parts.length>1&&parts[1].length){anchor=parts[1];}
parts=parts[0].split('?');if(parts.length>1&&parts[1].length){params=parts[1].split('&');if(params.length>0){for(var i in params){if(params.hasOwnProperty(i)){var regex=new RegExp('^'+key+'(=|\$).*');params[i]=params[i].replace(regex,function(){changed=true;if(value!==undefined){return key+'='+value}else{return'';}});}}}}
if(params.length==0||changed==false){if(value!==undefined){params.push(key+'='+value);}}
result=parts[0];params=params.filter(function(n){return n});if(params.length){result+='?'+params.join('&');}
if(anchor){result+='#'+anchor;}
return result;};window.site.setCookie=function(name,value,expires,path,domain,secure){document.cookie=name+"="+encodeURIComponent(value)+
((!!expires)?"; expires="+expires.toUTCString():"")+
("; path="+(!!path?path:"/"))+
((!!domain)?"; domain="+domain:"")+
((!!secure)?"; secure":"");};window.site.getCookie=function(name){var cookie=" "+document.cookie;var search=" "+name+"=";var setStr=null;var offset=0;var end=0;if(cookie.length>0){offset=cookie.indexOf(search);if(offset!=-1){offset+=search.length;end=cookie.indexOf(";",offset)
if(end==-1){end=cookie.length;}
setStr=decodeURIComponent(cookie.substring(offset,end));}}
return(setStr);};window.site.setMobile=function(){var date=new Date();date.setFullYear(date.getFullYear()+1);var isMobile=parseInt($(this).attr('data-value'))?1:0;$.history().replace(null,{'previous-version':!isMobile});$.history().push(window.location.href,{'previous-version':isMobile});document.cookie="ismobile="+isMobile+"; path=/; expires="+date.toGMTString()+";";window.location.reload();};window.onpopstate=function(event){if(event.state!=undefined){if(event.state['previous-version']!=undefined){var date=new Date();date.setFullYear(date.getFullYear()+1);document.cookie="ismobile="+(+event.state['previous-version'])+"; path=/; expires="+date.toGMTString()+";";window.location.reload();}}};$('body').on('submit','form.ajax_form',function(event){var form=$(this);var url=form.attr('action')?form.attr('action'):undefined;var data=form.serialize()+'&ajax=on';var controls=form.find('input, button');var enabled={};for(var i=0;i<controls.length;i++){enabled[i]=!controls.eq(i).is(':disabled');controls[i].disabled=true;}
var enableControls=function(){for(var i=0;i<controls.length;i++){if(enabled.hasOwnProperty(i)){controls[i].disabled=!enabled[i];}}}
$.ajax({'url':url,'type':form.attr('method')||'post','data':data,'success':function(response){enableControls();if(response){if(form.parents('.ui-lightbox').length>0){ui.lightbox.show(response,false);}else{form.parent().replaceWith(response);}}},'error':function(){enableControls();}});event.cancel();return false;});})(window,window.jQuery);(function(window,site,$,undefined){var autoScroll=$({});var lastScrollTopPosition=0;var timeOut=0;site.autoScroll=autoScroll;autoScroll.top=function(){if(lastScrollTopPosition>0&&$(this).hasClass("down")){$("html, body").animate({scrollTop:lastScrollTopPosition},"slow");}else{lastScrollTopPosition=$(window).scrollTop();$("html, body").animate({scrollTop:0},"slow");}
return false;};$(window).scroll(function(){clearTimeout(timeOut);timeOut=setTimeout(function(){var scrollToTopButton=$('#scroll-to-top-button');if($(window).scrollTop()>$(window).height()){scrollToTopButton.show();}else{scrollToTopButton.hide();}},100);});var scrollTo=function($el){var elOffsetTop=$el.offset().top;$('html, body').animate({scrollTop:elOffsetTop},1000);};$('body').on('click','a[href^="#"]',function(e){e.preventDefault();var el=$(this).attr('href');if($(el).length>0){$.history().push($(this).attr('href'),{history:true});scrollTo($(el));}});})(window,site,window.jQuery);(function(window,site,$,undefined){var widget=$({});site.widget=widget;widget.initialized=false;widget.initialize=function(){widget.initialized=true;widget.initialize=window.site.utils.noop;}
widget.initialized=true;widget.initialize=window.site.utils.noop;site.ready(function(){});})(window,window.site,window.jQuery);(function(window,site,$,undefined){var dropdown=$({});site.dropdown=dropdown;var current=null;var timer=0;dropdown.dropdownMenuEnterDelay=150;dropdown.dropdownMenuLeaveDelay=550;dropdown.mainMenuShowDuration=500;dropdown.mainMenuHideDuration=450;dropdown.current=function(){return current;};dropdown.beforeShow=function(blockOrCallback){if($.type(blockOrCallback)=='function'){dropdown.on('before-show',blockOrCallback);}else{dropdown.trigger('before-show',[current,blockOrCallback]);}}
dropdown.afterShow=function(blockOrCallback){if($.type(blockOrCallback)=='function'){dropdown.on('after-show',blockOrCallback);}else{current=blockOrCallback;dropdown.trigger('after-show',[current]);}}
dropdown.beforeHide=function(callback){if($.type(callback)=='function'){dropdown.on('before-hide',callback);}else{dropdown.trigger('before-hide',[current]);}}
dropdown.afterHide=function(callback){if($.type(callback)=='function'){dropdown.on('after-hide',callback);}else{var temp=current;current=null;dropdown.trigger('after-hide',[temp]);}}
dropdown.setTimer=function(callback,timeout){if(timer)clearTimeout(timer);timer=setTimeout(function(){timer=0;if($.type(callback)=='function'){callback(current);}},timeout);}
dropdown.killTimer=function(){if(timer)clearTimeout(timer);timer=0;}
dropdown.initialized=true;dropdown.initialize=site.utils.noop;})(window,window.site,window.jQuery);(function(window,site,$,undefined){var successHandler=function(data,textStatus,jqXHR){if($.type(this.callback)=='function'){var response={"success":true,"xhr":jqXHR,"status":textStatus,"data":data,"context":this.context||null};this.callback.apply(response);}}
var errorHandler=function(jqXHR,textStatus,errorThrown){if($.type(this.callback)=='function'){var response={"success":false,"xhr":jqXHR,"status":textStatus,"message":errorThrown,"context":this.context||null};this.callback.apply(response);}};site.ajax=function(settings){var callback=settings.callback||null;delete settings.callback;settings.success=successHandler;settings.error=errorHandler;settings.context={"callback":callback,"context":settings.context||null}
return $.ajax(settings);}
site.ajax.get=function(url,data,callback,context){if(context===undefined){context=callback;callback=data;data=null;}
return site.ajax({"url":url,"type":"GET","data":data,"context":context,"callback":callback});}
site.ajax.post=function(url,data,callback,context){if(context===undefined){context=callback;callback=data;data=null;}
return site.ajax({"url":url,"type":"POST","data":data,"context":context,"callback":callback},context);}
site.ajax.initialized=true;site.ajax.initialize=site.utils.noop;})(window,window.site,jQuery);(function(window,site,$,undefined){var pagination=$({});site.pagination=pagination;var defaultIPP=20;var defaultView='list';var defaultSorting='popularity_desc';var total=0;var ipp=defaultIPP;var page=1;var si=defaultSorting;var max=Math.ceil(total/ipp);var view=defaultView;var more=false;var searchword=false;var changes={currentPage:false,totalPages:false,totalItems:false,itemPerPage:false,itemOrder:false,itemView:false,moreItems:false}
pagination.changes=function(value){if(arguments.length<=0)return changes;if($.type(value)=='object'){for(var prop in value){if(changes.hasOwnProperty(prop)){changes[prop]=!!value[prop];}}}
return pagination;}
pagination.change=function(callback){if($.type(callback)=='function'){pagination.on('change',callback);}else{var temp={};var flag=!!callback;for(var prop in changes){if(changes.hasOwnProperty(prop)){temp[prop]=changes[prop];flag=flag||changes[prop];changes[prop]=false;}}
if(flag){pagination.trigger('change',[temp]);}}
return pagination;}
pagination.page=function(value){if(arguments.length<=0)return page;value=parseInt(value);if((value<1)||(value>max)||(value==page))return pagination;page=value;changes.currentPage=true;return pagination;}
pagination.total=function(value){if(arguments.length<=0)return total;var value=(parseInt(value)>=0)?parseInt(value):0;if(value!=total){total=value;max=Math.ceil(total/ipp);changes.currentPage=page!=1;page=1;changes.totalItems=true;changes.totalPages=true;}
return pagination;}
pagination.searchword=function(value){return searchword;}
pagination.ipp=function(value){if(arguments.length<=0)return ipp;if(value!=ipp){dropdown=null;ipp=value;max=Math.ceil(total/ipp);page=1;changes.currentPage=true;changes.itemPerPage=true;changes.totalPages=true;}
return pagination;}
pagination.sort=function(value){if(arguments.length<=0)return si;var value=(''+value);if(value!=si){si=value;page=1;changes.currentPage=true;changes.itemOrder=true;}
return pagination;}
pagination.view=function(value){if(arguments.length<=0)return view;if(value!=view){view=value;changes.itemView=true;changes.page=true;}
return pagination;}
pagination.min=function(){if(arguments.length<=0)return 1;return pagination;}
pagination.max=function(){if(arguments.length<=0)return max;return pagination;}
pagination.more=function(value){if(arguments.length<=0)return more;value=value?true:false;more=value;changes.moreItems=value;return pagination;}
pagination.checkPaginatorState=site.utils.noop;pagination.initialized=false;pagination.initialize=function($page,$ipp,$total,$si,$view,$searchword){pagination.initialized=true;pagination.initialize=site.utils.noop;total=($total>0)?$total:0;ipp=$ipp;page=($page>0)?$page:1;si=(''+$si);max=Math.ceil(total/ipp);view=$view;searchword=($searchword!==null)?$searchword:searchword;}})(window,window.site,window.jQuery);(function(window,site,$,undefined){var pagination=site.pagination;var paginationDropdownTimer=null;var dropdown=null;pagination.updateUI_Paginators=function(){var ellipsisLeft=$('.pagination-ellipsis-wrapper.pagination-wrapper-left');var ellipsisRight=$('.pagination-ellipsis-wrapper.pagination-wrapper-right');if(pagination.leftEllipsis()){ellipsisLeft.removeClass('invisible');}else{ellipsisLeft.addClass('invisible');}
if(pagination.rightEllipsis()){ellipsisRight.removeClass('invisible');}else{ellipsisRight.addClass('invisible');}
checkPaginatorState();$('.pagination-range-wrapper').each(function(){var range=pagination.createPaginationRange();range.attr('id',$(this).attr('id')).attr('class',$(this).attr('class'));$(this).replaceWith(range);});}
pagination.updateUI_Page=function(){var page=pagination.page();var pageCount=pagination.max();$('[data-pagination="display-page"]').text(page);$('[data-pagination="page-first"]').attr('data-value',1).text(1);$('[data-pagination="page-next"]').attr('data-value',page+1);$('[data-pagination="page-prev"]').attr('data-value',page-1);$('[data-pagination="page-last"]').attr('data-value',pageCount).text(pageCount);if(pageCount>1){if(page==1){$('.pagination-wrapper-bottom [data-pagination="page-prev"]').hide();$('.empty-page-block-prev').show();}else{$('.pagination-wrapper-bottom [data-pagination="page-prev"]').show();$('.empty-page-block-prev').hide();}
if(page==pageCount){$('.pagination-wrapper-bottom [data-pagination="page-next"]').hide();$('.empty-page-block-next').show();}else{$('.pagination-wrapper-bottom [data-pagination="page-next"]').show();$('.empty-page-block-next').hide();}
$('.no-search-results').hide();}else{if(pageCount==0){$('.pagination-wrapper-top').hide();$('.no-search-results').show();}
$('.pagination-wrapper-bottom').hide();}
$('[data-pagination="page-dropdown"] .selected').removeClass('selected');$('[data-pagination="page-dropdown"] [data-value="'+page+'"]').addClass('selected');pagination.updateUI_Paginators();}
var updateUI_Sorting=function(){var si=site.pagination.sort();var text=$('[data-value="'+si+'"]:eq(0)').text();$('[data-pagination="display-sorting"]').text(text);var group=$('[data-value="'+si+'"]').parents('[data-popup-hidden-content]');group.find('input[type="radio"]').removeAttr('checked');group.find('[data-value="'+si+'"] input[type="radio"]').attr('checked','checked');if(si!='custom_order'){$('.pagination-wrapper [data-value="custom_order"]').remove();}}
var updateUI_View=function(){var view=pagination.view();var text=$('[data-value="'+view+'"]:eq(0)').text();$('[data-pagination="display-view-type"]').html(text);$('[data-pagination="view"]').attr('data-current-value',view);}
var updateUI_IPP=function(){var ipp=pagination.ipp();var pageCount=pagination.max();$('[data-pagination="display-count"]').text(pageCount).attr('data-value',pageCount);$('[data-pagination="display-ipp"]').text(ipp);}
var updateUI_Total=function(){var pageCount=pagination.max();$('[data-pagination="display-count"]').text(pageCount).attr('data-value',pageCount);}
var updateUI_More=function(){}
var updateUI_MoreClear=function(){if($('[data-pagination="more"] a').length){$('[data-pagination="more"] a').removeAttr('data-current-page');}}
pagination.updateVisibility=function(show){var pageCount=pagination.max();if(show){$('.pagination-wrapper').show();pagination.updateUI_Page();}else{$('.pagination-wrapper').hide();}}
pagination.OnPageChanged=function(event){var isBottom=$(this).parents('.pagination-wrapper-bottom').length>0;var page=$(this).attr('data-value')||0;if(page){pagination.page(page).change();pagination.updateUI_Page();}
if(isBottom){$('html, body').animate({scrollTop:0},50);}
event.cancel();}
pagination.OnSortingChanged=function(event){var si=$(this).attr('data-value')||null;pagination.sort(si).change();updateUI_Sorting();updateUI_MoreClear();event.cancel();}
pagination.OnViewChanged=function(event){var view=$(this).attr('data-value')||0;pagination.view(view).change();updateUI_View();updateUI_MoreClear();event.cancel();}
pagination.OnItemPerPageChanged=function(event){var ipp=$(this).attr('data-value')||0;pagination.ipp(ipp).page(1).change();updateUI_IPP();pagination.updateUI_Page();event.cancel();}
pagination.OnShowMoreChanged=function(event){var pageCount=pagination.max();var button=$('[data-pagination="more"] a');var pseudoPage=button.attr('data-current-page');pseudoPage=parseInt(pseudoPage);pseudoPage=pseudoPage>0?pseudoPage:pagination.page();var nextPage=pseudoPage+1;if(nextPage<=pageCount){button.attr('data-current-page',nextPage);pagination.more(true).page(nextPage).change();updateUI_More();if(nextPage==pageCount){setTimeout(function(){button.parents('.pagination-wrapper-bottom').hide();},1000);}}
event.cancel();}
pagination.OnPagesDropdownShow=function(){var height=$(this).outerHeight(true);dropdown=site.pagination.pageDropdown();dropdown.css("top",height);dropdown.removeClass('over');$(this).append(dropdown.detach());if($(this).parents(".pagination-wrapper-bottom").length){var positionLeft=$(this).position().left+$(this).width()-dropdown.width();var offset=getViewablePosition($(this));var dropdownHeight=dropdown.outerHeight(true);var windowHeight=$(window).outerHeight(true);if(windowHeight-(offset.y+height)<=dropdownHeight){dropdown.css("top",-1*dropdownHeight);dropdown.addClass('over');}
dropdown.css("left",positionLeft);}else{dropdown.css("left",0);dropdown.find('li').css("width",$(this).outerWidth());}};pagination.OnDropdownShow=function(event){if($(this).hasClass('hover')){$(this).removeClass('hover');}else{$(this).addClass('hover');}}
pagination.OnDropdownHide=function(){var $obj=$(this);if($obj.hasClass('hover')){if(pagination.paginationDropdownTimer){clearTimeout(pagination.paginationDropdownTimer);pagination.paginationDropdownTimer=null;}
pagination.paginationDropdownTimer=setTimeout(function(){site.dropdown.beforeHide($(this));$obj.removeClass('hover');if($obj.hasClass('page-list')){$obj.find('.submenu').remove();}},site.dropdown.dropdownMenuLeaveDelay);}}
site.dropdown.beforeShow(function(event,current,newBlock){var $elemsWithoutObj=$("#content .dropdown");$.each($elemsWithoutObj,function(){$(this).removeClass('hover');if($(this).hasClass('page-list')){$(this).find('.submenu').remove();}});});pagination.OnDropdownMouseEnter=function(){if(!$(this).hasClass('hover')){site.dropdown.beforeShow($(this));}
clearTimeout(pagination.paginationDropdownTimer);pagination.paginationDropdownTimer=null;}
pagination.change(function(event,changes){if(typeof site.comparison!='undefined'){site.comparison.update_checkbox();}
if(changes.currentPage){pagination.updateUI_Page();}
if(changes.itemPerPage){updateUI_IPP();dropdown=null;}
if(changes.itemView){updateUI_View();}
if(changes.itemOrder){updateUI_Sorting();}
if(changes.totalPages||changes.totalItems){dropdown=null;updateUI_Total();}});pagination.pageDropdown=function(){var dropdown=null;if(!dropdown){var firstPage=pagination.min();var pageCount=pagination.max();var page=pagination.page();var html=[];html.push('<ul class="submenu shadow" data-pagination="page">');if(pageCount>3){var className=(page==firstPage)?' class="selected"':'';html.push('<li data-value="'+firstPage+'" '+className+'>','<a href="javascript:void(0)">'+firstPage+'</a>','</li>');if(pageCount>7){html.push('<li>','<div class="vertical-scroll" data-element="scrollbox" data-scroll-capture="on">','<ul>');}
for(var i=firstPage+1;i<pageCount;i++){var className=(page==i)?' class="selected"':'';html.push('<li data-value="'+i+'" '+className+'>','<a href="javascript:void(0)">'+i+'</a>','</li>');}
if(pageCount>7){html.push('</ul>','</div>','</li>');}
inner=null;var className=(page==pageCount)?' class="selected"':'';html.push('<li data-value="'+pageCount+'" '+className+'>','<a href="javascript:void(0)">'+pageCount+'</a>','</li>');}
html.push('</ul>');dropdown=$(html.join(''));}
return dropdown;}
pagination.leftEllipsis=function(){return((pagination.page()-4)>1)&&(pagination.max()>7);}
pagination.rightEllipsis=function(){return((pagination.page()+4)<pagination.max())&&(pagination.max()>7);}
pagination.createPaginationRange=function(){var first=pagination.min();var page=pagination.page();var pageCount=pagination.max();var range=$('<div data-pagination="page">');var rangeLeft=page-2;if(!pagination.leftEllipsis()){rangeLeft=1;}
if(rangeLeft<1){rangeLeft=1;}
var rangeRight=page+2;if(!pagination.rightEllipsis()){rangeRight=pageCount;}
if(rangeRight>pageCount){rangeRight=pageCount;}
for(var i=rangeLeft;i<=rangeRight;i++){var item=$('<a>').text(i).attr({'href':'javascript:void(0)','data-value':i});if(i==page){item.addClass('current');}
if($('.product-page').length){item.attr('rel','nofollow');}
item.appendTo(range);}
return range;}
var checkPaginatorState=function(){var arrow=$('.button-arrow');if(pagination.max()>3){arrow.parent('.pagination-block-page').find('.page-list').addClass('dropdown');}else{arrow.parent('.pagination-block-page').find('.page-list').removeClass('dropdown');}
arrow.each(function(){showPaginationArrows($(this));});}
var showPaginationArrows=function(arrow){if(arrow.hasClass('prev')){if((pagination.page()>pagination.min())&&(pagination.max()>1)){arrow.removeClass('hide-arrow-prev');}else{arrow.addClass('hide-arrow-prev');}}
if(arrow.hasClass('next')){if((pagination.page()<pagination.max())&&(pagination.max()>1)){arrow.removeClass('hide-arrow-next');}else{arrow.addClass('hide-arrow-next');}}}
var openDeleteAccountConfirmed=function(){$.ajax({'url':'/deleteAccount','type':'post'});};$(function(){var parent=$('body');parent.on('click','[data-pagination="page"] li',pagination.OnPageChanged);parent.on('click','[data-pagination="page"] a',pagination.OnPageChanged);parent.on('click','[data-pagination="page-first"]',pagination.OnPageChanged);parent.on('click','[data-pagination="page-prev"]',pagination.OnPageChanged);parent.on('click','[data-pagination="page-next"]',pagination.OnPageChanged);parent.on('click','[data-pagination="page-last"]',pagination.OnPageChanged);parent.on('click','[data-pagination="ipp"] li',pagination.OnItemPerPageChanged);parent.on('click','[data-pagination="sort"] li',pagination.OnSortingChanged);parent.on('click','[data-pagination="view"] li',pagination.OnViewChanged);parent.on('click','.dropdown',pagination.OnDropdownShow);parent.on('click','.dropdown.page-list',pagination.OnPagesDropdownShow);parent.on('mouseleave','.dropdown',pagination.OnDropdownHide);parent.on('mouseenter','.dropdown',pagination.OnDropdownMouseEnter);parent.on('click','[data-pagination="more"] a',pagination.OnShowMoreChanged);parent.on('click','.delete-account-confirm',openDeleteAccountConfirmed);pagination.updateUI_Page();updateUI_Sorting();updateUI_View();updateUI_IPP();updateUI_More();});})(window,window.site,window.jQuery);(function(windows,site,$,undefined){var csc=$({});site.csc=csc;var countriesLoadedCallback=function(){if(this.success){this.context(this.data);}else{this.context();}}
var statesLoadedCallback=function(){if(this.success){this.context(this.data);}else{this.context();}}
var citiesLoadedCallback=function(){if(this.success){this.context(this.data);}else{this.context();}}
csc.countries=function(callback,url){url=typeof url==="undefined"?'/ajax/countries':url;site.ajax.get(url+'?ajax=on',countriesLoadedCallback,callback);}
csc.states=function(data,callback,url){url=typeof url==="undefined"?'/ajax/states':url;var params=jQuery.param(data);site.ajax.get(url+'?ajax=on'+(params!=''?'&'+params:''),statesLoadedCallback,callback);}
csc.cities=function(data,callback,url){url=typeof url==="undefined"?'/ajax/cities':url;var params=jQuery.param(data);site.ajax.get(url+'?ajax=on'+(params!=''?'&'+params:''),citiesLoadedCallback,callback);}})(window,window.site,window.jQuery);(function(window,site,$){var fake_background=$({});site.fake_background=fake_background;fake_background.initialized=true;fake_background.initialize=window.site.utils.noop;var options={fake_selector_class:'fake-background',prepend_to_selector:'body'};fake_background.show=function(on_click_method){$('<div>').addClass(options.fake_selector_class).on('click',on_click_method).prependTo(options.prepend_to_selector);};fake_background.hide=function(){$('.'+options.fake_selector_class).remove();};})(window,window.site,window.jQuery);(function(window,site,$,undefined){var widget=$({});site.tablePagination=widget;var table=null;var items=null;var updateItems=function(){var ipp=site.pagination.ipp();var page=site.pagination.page()-1;var rows=items.slice(page*ipp,page*ipp+ipp);table.find('tbody').empty().append(rows);}
widget.initialized=false;widget.initialize=function($table){widget.initialized=true;widget.initialize=window.site.utils.noop;table=$table;items=$table.find('tbody tr');site.pagination.total(items.length);updateItems();site.pagination.change(function(){updateItems();});}})(window,window.site,window.jQuery);(function(window,site,$,undefined){$(window).on('resize',function(){clearTimeout(resizeTimer);var resizeTimer=setTimeout(function(){$('.content-page').css({'min-height':$(window).height()-$('footer').outerHeight()});},100);});$(function(){$('.content-page').css({'min-height':$(window).height()-$('footer').outerHeight()});});})(window,window.site,window.jQuery);(function(window,site,$,undefined){var currentVersion;site.returnDeviceTypeByWidth=function(){var width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(width>=960){$('body').triggerHandler('desktopVersion');if(currentVersion!='desktop'){currentVersion='desktop';$('body').triggerHandler('changeVersion');}
return currentVersion;}else{$('body').triggerHandler('mobileVersion');if(currentVersion!='mobile'){currentVersion='mobile';$('body').triggerHandler('changeVersion');}
return currentVersion;}};$(function(){$('body').attr('data-device',site.returnDeviceTypeByWidth()).attr('data-dom','ready');});$(window).load(function(){$('body').attr('data-dom','ready load');});$(window).resize(function(){$('body').attr('data-device',site.returnDeviceTypeByWidth());});})(window,window.site,window.jQuery);(function(windows,site,$,undefined){var csc=site.csc;var getCountryStateCityData=function(form){var dataObject={};dataObject.countryId=null;dataObject=$.extend(true,dataObject,serializeForm(form));return dataObject;};var serializeForm=function(form){var result={};var items=form.serializeArray();for(var i=0;i<items.length;i++){var j=items[i].name.indexOf('[');if(j>-1){var name=items[i].name.substring(j+1,items[i].name.length-1);}else{var name=items[i].name;}
result[name]=items[i].value;}
return result;}
csc.buildStateHtml=function(items,form,defaultItem,changeEvent){var fieldName;var html;changeEvent=typeof changeEvent!=='undefined'?changeEvent:'site.csc.OnStateChange';if(items){fieldName=form.name?form.name+'[stateId]':'stateId';html=[];html.push('<select id="state_id" name="'+fieldName+'" data-action-change="'+changeEvent+'">');if(defaultItem){html.push('<option value="-1"></option>');}
for(var i=0;i<items.length;i++){html.push('<option value="'+items[i].id+'">'+items[i].name+'</option>');}
html.push('</select>');html=html.join('');}else{fieldName=form.name?form.name+'[state]':'state';html='<input id="state" type="text" name="'+fieldName+'">';}
return html;};csc.buildCityHtml=function(items,form,defaultItem){var fieldName;var html;if(items){fieldName=form.name?form.name+'[cityId]':'cityId';html=[];html.push('<select id="city_id" data-short-hint="'+site.t('Select a city','common')+'" name="'+fieldName+'">');if(defaultItem){html.push('<option value="-1"></option>');}
for(var i=0;i<items.length;i++){html.push('<option value="'+items[i].id+'">'+items[i].name+'</option>');}
html.push('</select>');html=html.join('');}else{fieldName=form.name?form.name+'[city]':'city';form=form instanceof jQuery?form:$(form);var validator=form.find('[data-form-element="city"] input').attr('data-validator');html='<input id="city" type="text" name="'+fieldName+'" '+(validator?'data-validator="'+validator+'"':'')+'>';}
return html;};csc.OnCountryChange=function(event){var form=$(this.form);var countryId=$(this);var state=form.find('[data-form-element="state"] input, [data-form-element="state"] select');var city=form.find('[data-form-element="city"] input, [data-form-element="city"] select');var dataObject=getCountryStateCityData(form);dataObject.stateId=null;dataObject.state=null;dataObject.cityId=null;dataObject.city=null;if(jQuery().chosen){$('#state_id').chosen('destroy');$('#city_id').chosen('destroy');}
ui.input(this).enabled(false);for(var i=0;i<state.length;i++){ui.input(state[i]).enabled(false);}
csc.states(dataObject,function(data){var items=data.state.items;ui.input(countryId.get(0)).enabled(true);var html=csc.buildStateHtml(items,countryId.get(0).form,site.t('Select','common'));state.replaceWith(html);if(html.indexOf('<select')!=-1){$('#state_id').chosen({no_results_text:site.t('State not found','common')});}
csc.changeRegionStar(form);});var cityHtml=csc.buildCityHtml(false,countryId.get(0).form,site.t('Select','common'));city.replaceWith(cityHtml);if(jQuery().chosen&&cityHtml.indexOf('<select')!=-1){$('#city_id').chosen({allow_custom_value:true});}}
csc.OnStateChange=function(event){var form=$(this.form);var stateId=$(this);var city=form.find('[data-form-element="city"] input, [data-form-element="city"] select');var dataObject=getCountryStateCityData(form);dataObject.cityId=null;dataObject.city=null;if(jQuery().chosen){$('#city_id').chosen('destroy');}
ui.input(this).enabled(false);for(var i=0;i<city.length;i++){ui.input(city[i]).enabled(false);}
csc.cities(dataObject,function(data){var items=data.city.items;ui.input(stateId.get(0)).enabled(true);var html=csc.buildCityHtml(items,stateId.get(0).form,site.t('Select','common'));city.replaceWith(html);if(jQuery().chosen&&html.indexOf('<select')!=-1){$('#city_id').chosen({allow_custom_value:true});if($("#detectedCity").length){var detectedCity=$("#detectedCity").text();if(detectedCity!=""){$('option',$('#city_id')).each(function(){if($(this).text()==detectedCity){$('#city_id').val($(this).val()).change().trigger("chosen:updated");}});}}}
csc.changeRegionStar(form);});}
csc.changeRegionStar=function($form){var autoStar=($form.attr('data-auto-star')===undefined||$form.attr('data-auto-star')=='1')?true:false;if(autoStar){if(!$('.ui-lightbox-container').is(':visible')){var $labels=$('[data-form-element="state"], [data-form-element="city"]',$form);}else{var $labels=$('.ui-lightbox-container [data-form-element="state"], .ui-lightbox-container [data-form-element="city"]',$form);}
$labels.each(function(index){var $label=$(this);var $select=$('select',$label);$('span.required',$label).remove();if($select.length){var starHtml='<span class="required">*</span>';$select.before(starHtml);}});}}})(window,window.site,window.jQuery);(function(window){var data={};var get=function(key,page,def){var s='/*'+key+'|'+page+'*/';var prop=s.toLowerCase();if(data.hasOwnProperty(prop)){return data[prop];}
return def||s;};var set=function(key,page,value){var prop=('/*'+key+'|'+page+'*/').toLowerCase();data[prop]=value;};var setMulti=function(obj){var prop,objItem;for(var k in obj){objItem=obj[k];prop=('/*'+objItem[0]+'|'+objItem[1]+'*/').toLowerCase();data[prop]=objItem[2];}};var t=get;t.get=get;t.set=set;t.setMulti=setMulti;t.initialized=true;t.initialize=function(){};window.site.t=t;})(window,undefined);(function(window,site,ui,$){var BaseClass=function(){this.initialize.apply(this,arguments);};BaseClass.extend=function(protoProps,staticProps){var parent=this;var child;if(protoProps&&Object.prototype.hasOwnProperty.call(protoProps,'constructor')){child=protoProps.constructor;}else{child=function(){return parent.apply(this,arguments);};}
$.extend(true,child,parent,staticProps);var Surrogate=function(){this.constructor=child};Surrogate.prototype=parent.prototype;child.prototype=new Surrogate;if(protoProps){$.extend(true,child.prototype,protoProps);}
child.__super__=parent.prototype;return child;};$.extend(true,BaseClass.prototype,{options:{},setOptions:function(options){this.options=this.options||{};options=options||{};$.extend(true,this.options,options);},initialize:function(){},createNamespace:function(){var obj=$({});for(var key in this.vmt){obj[key]=this.vmt[key];}
return obj;}});if(!site.classes){site.classes=$({});}
site.classes.base=BaseClass;})(window,window.site,window.ui,window.jQuery);(function(window,site,ui,$){site.classes.catalog=site.classes.base.extend({_class:'catalog_item',_catalog:[],_ids:{},_id_pref:'id_',is_updated:false,constructor:function(item_class,id_pref){site.classes.base.prototype.constructor.apply(this,arguments);if(item_class){this._class=item_class;}
if(id_pref){this._id_pref=id_pref;}
this.clear();this._ids={};},clear:function(){this._catalog=[];},update:function(data){var name,row,id;for(name in this._catalog){if(this._catalog.hasOwnProperty(name)){if(data&&(id=this._catalog[name].id)&&data[id]){this._catalog[name].setData(data[id]);this._catalog[name].update();}}}
this.is_updated=true;},addItem:function(data){var id=data.id,selector=this._id_pref+id,i=this._catalog.push(new site.classes[this._class](id,selector))-1;this._catalog[i].init(this,data);if(!this._ids[id]){this._ids[id]=1;}else{this._ids[id]++;}
return this._catalog[i];},clearNotNested:function(){var i,id;for(i=this._catalog.length-1;i>=0;i--){if(!this._catalog[i].isBlockNested()){id=this._catalog[i].id;delete this._catalog[i];this._catalog.splice(i,1);if(this._ids[id]>1){this._ids[id]--;}else{delete this._ids[id];}}}},getItemIds:function(){this.clearNotNested();return Object.keys(this._ids);}});})(window,window.site,window.ui,window.jQuery);(function(window,site,ui,$){site.classes.catalog_item=site.classes.base.extend({$elem:$({blocks:{}}),data:{},_block_selector_attr:'data-block',options:{tplBlocks:{},eventBlocks:{}},constructor:function(id,selector){this.id=id;this.$elem=$('#'+selector);this.$elem.removeAttr('id');this.$elem.blocks={};this.data={};},init:function(catalog,data){this.setOptions(catalog.options);data=data||{};this.setData(data);if(catalog.is_updated){this.update();}},setData:function(data){this.data=$.extend(true,this.data,data);},getData:function(key){return key?this.data[key]:this.data;},isBlockNested:function(){return $.contains(window.document.body,this.$elem[0]);},update:function(){this.map(this.options.tplBlocks,'setHTML');this.map(this.options.eventBlocks,'setEvents');},map:function(collection,fnName){var name;for(name in collection){if(!this.$elem.blocks[name]){this.$elem.blocks[name]=this.$elem.find('['+this._block_selector_attr+'='+name+']');}
if(this.$elem.blocks[name].length>0){this[fnName](this.$elem.blocks[name],collection[name]);}}},setHTML:function(elem,tpl){if(typeof tpl==='function'){tpl.apply(this,[elem]);}else if((tpl in this)&&(typeof this[tpl]==='function')){this[tpl].apply(this,[elem]);}else{elem.html(this.template(tpl,this.getData()));}},setEvents:function(elem,param){elem.off();elem.on(param.event?param.event:'click',function(event){if(event.type==='click'){event.preventDefault();}
this[param.action](elem);}.bind(this));},template:function(str,data){var fn=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};"+"with(obj){p.push('"+
str.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")
+"');}return p.join('');");return data?fn(data):fn;}});})(window,window.site,window.ui,window.jQuery);(function(window,site){site.classes.product_catalog=site.classes.catalog.extend({});})(window,window.site);(function(window,site,ui,$){site.classes.product_catalog_item=site.classes.catalog_item.extend({options:{buttonTemplates:{},priceTemplate:'',tplBlocks:{buyButton:'updateBuyButton',priceBlock:'updatePriceBlock'},eventBlocks:{}},updateBuyButton:function(el){el.html(this.options.buttonTemplates[this.getData('bt')]);var counts=this.getData('cs'),$list=el.find('[name=available-counts]'),key;if(counts&&$list[0]){for(key in counts){if(counts[key]>0){$list.append($('<li>').attr('data-count',counts[key]).html(counts[key]).clone());}}}
var $item=el.find('[data-product]'),trigger_name;var buttonsWithAnalogues=['analogues','contactManager','contactManagerOutOfStock','addToPreorder','inPreorder','notForSale'];$item.attr('data-product',this.getData('id'));if(this.getData('max-init')!=0){$item.attr('data-max',this.getData('max')).attr('data-max-init',this.getData('max-init')).attr('data-min',this.getData('min'));}
var sm=this.getData('sm'),uic=this.getData('uic');if(trigger_name=$item.attr('data-update-trigger')){$item.parent().parent().find('.only-in-stock').each(function(index){if($(this).hasClass('used-in-combo')){$(this).html(uic);}else{$(this).html(sm);}});$item.attr('data-value',this.getData('q')).val(this.getData('q')).trigger(trigger_name);}else{$item.parent().parent().find('.used-in-combo').html(uic);}
if(($.inArray(this.getData('bt'),buttonsWithAnalogues)!=-1)&&this.getData('an')){el.children().attr('data-analogue','on');if(window.location.pathname==this.getData('url')){el.find('.analogue-link').attr('data-value',this.getData('id'));}else{el.find('.analogue-link').removeAttr('data-action-click').attr('href',this.getData('url')+'#analogues');}}
$('[data-function="shipping-term"][data-product="'+this.getData('id')+'"]').html(this.getData('sw'));},updatePriceBlock:function(el){var pb=this.getData('pb');if(pb){el.html(pb);}}});})(window,window.site,window.ui,window.jQuery);(function(window,$){var MIN_VALUE=1;var timer,options={field_name:'data-field',selector:{block:'.in-cart-spin',input:'input[name=quantity]',plus:'a[name=btn-plus]',minus:'a[name=btn-minus]'},data_max_attr:'data-max',data_min_attr:'data-min',data_value_attr:'data-value',disable_class:'disabled'};function can_remove(el){return!($(el).parents('#cart').length);}
function changeQuantity(elem,increment,force_event,can_remove){var $input=elem.tagName=='INPUT'?$(elem):$(elem).parent().find('input[name='+$(elem).attr(options.field_name)+']'),$incrButton=$(elem).parent().find(options.selector.plus),$decrButton=$(elem).parent().find(options.selector.minus),currentVal=parseInt($input.val()),maxVal=parseInt($input.attr(options.data_max_attr))||Infinity,minVal=parseInt($input.attr(options.data_min_attr))||MIN_VALUE,newValue=0;if(!parseInt($input.attr(options.data_max_attr))&&!can_remove){return;}
if(isNaN(currentVal)){newValue=minVal;}else{newValue=currentVal+parseInt(increment);}
if(newValue<=minVal){if(can_remove){newValue=(newValue==minVal)?minVal:0;}else{newValue=minVal;$decrButton.addClass(options.disable_class);}}
if(newValue>=maxVal){newValue=maxVal;$incrButton.addClass(options.disable_class);}
if((minVal<newValue)&&(newValue<maxVal)){$incrButton.removeClass(options.disable_class);$decrButton.removeClass(options.disable_class);}
$input.attr(options.data_value_attr,newValue);$input.val(newValue);if((currentVal!=newValue)||force_event){$input.trigger('updated',[{value:newValue}]);}}
$(options.selector.block+' '+options.selector.plus).live('click',function(e){e.preventDefault();changeQuantity(this,1);});$(options.selector.block+' '+options.selector.minus).live('click',function(e){e.preventDefault();changeQuantity(this,-1,null,can_remove(this));});$(options.selector.block+' '+options.selector.input).live('focus',function(e){$(e.target).numeric({decimal:false,negative:false})}).live('keydown',function(e){var key=window.event?e.keyCode:e.which;switch(key){case 38:e.preventDefault();$(this).parent().find(options.selector.plus).click();break;case 40:e.preventDefault();$(this).parent().find(options.selector.minus).click();break;default:var _this=this;if(timer){clearTimeout(timer);}
timer=setTimeout(function(){changeQuantity(_this,0,true);},500);return true;break;}}).live('force_update',function(e){changeQuantity(this,0,null,can_remove(this));});})(window,window.jQuery);(function(window,$){var MIN_VALUE=1;var options={selector:{block:'.in-cart-scale',product:'[data-product]',value:'.value',counts:'[name=available-counts]',plus:'a[name=btn-plus]',minus:'a[name=btn-minus]'},data_max_attr:'data-max',data_min_attr:'data-min',data_value_attr:'data-value',disable_class:'disabled'};function findIndex(array,value){for(var i=0;i<array.length;i++){if(parseInt(array[i])==parseInt(value))return i;}
return-1;}
function arrayChangeCell(array,current_value,increment){var index=findIndex(array,current_value)+increment;return array[index];}
function findNearestSmall(array,value){if(!array.length){return null;}
var result=array[0],i;for(i=array.length-1;i>=0;i--){if(value>=array[i]){result=array[i];break;}}
return parseInt(result);}
function can_remove(el){var element=$(el);if(element.parents('[data-can-remove]').length){return+element.parents('[data-can-remove]').attr('data-can-remove');}
return!(element.parents('#cart').length);}
function changeQuantity(elem,increment,force_event,can_remove){var $input=elem.tagName=='DIV'?$(elem).eq(0):$(elem).parents(options.selector.product).eq(0),$incrButton=$input.find(options.selector.plus),$decrButton=$input.find(options.selector.minus),$counts=$input.find(options.selector.counts),counts=[],currentVal=parseInt($input.attr('data-value')),maxVal=parseInt($input.attr(options.data_max_attr))||Infinity,minVal=parseInt($input.attr(options.data_min_attr))||MIN_VALUE,newValue=0;$counts.find('[data-count]').map(function(){counts.push($(this).attr('data-count'));});maxVal=findNearestSmall(counts,maxVal);if(!parseInt($input.attr(options.data_max_attr))&&!can_remove){return;}
if(isNaN(currentVal)){newValue=minVal;}else{currentVal=findNearestSmall(counts,currentVal);newValue=currentVal;if(increment!=0){newValue=arrayChangeCell(counts,currentVal,parseInt(increment));}}
if((newValue==undefined)&&can_remove){newValue=0;}
if(newValue<=minVal){if(!can_remove){newValue=minVal;$decrButton.addClass(options.disable_class);}}
if(newValue>=maxVal){newValue=maxVal;$incrButton.addClass(options.disable_class);}
if((minVal<newValue)&&(newValue<maxVal)){$incrButton.removeClass(options.disable_class);$decrButton.removeClass(options.disable_class);}
if($.isNumeric(newValue)){$input.attr(options.data_value_attr,newValue).val(newValue);$input.find(options.selector.value).html(newValue).val(newValue);}
if((currentVal!=newValue)||force_event){$input.trigger('updated',[{value:newValue}]);}}
$(options.selector.block+' '+options.selector.plus).live('click',function(e){e.preventDefault();changeQuantity(this,1);});$(options.selector.block+' '+options.selector.minus).live('click',function(e){e.preventDefault();changeQuantity(this,-1,null,can_remove(this));});$(options.selector.block+' '+options.selector.product).live('force_update',function(){changeQuantity(this,0,null,can_remove(this));});})(window,window.jQuery);(function(window,site,ui,$,undefined){var storage=$({}),data_storage;site.storage=storage;storage.initialized=false;storage.length=0;var objectStorage=function(){var _data={};return{length:0,setItem:function(name,value){this.length+=_data.hasOwnProperty(name)?0:1;_data[name]=value;},getItem:function(name){return _data[name];},removeItem:function(name){this.length+=_data.hasOwnProperty(name)?-1:0;delete _data[name];},clear:function(name){this.length=0;_data={};}};};window.objectStorage=new objectStorage();function isLocalStorageAvailable(){try{localStorage.setItem('localStorage',1);localStorage.removeItem('localStorage');return true;}catch(e){return false;}}
storage.initialize=function(){storage.initialized=true;storage.initialize=site.utils.noop;if(isLocalStorageAvailable()){data_storage=window.localStorage;}else{data_storage=window.objectStorage;}
return storage;};storage.get=function(name){return((data_storage.getItem(name)===null)||data_storage.getItem(name)===undefined)?undefined:JSON.parse(data_storage.getItem(name));};storage.set=function(name,value){data_storage.setItem(name,JSON.stringify(value));storage.length=data_storage.length;};storage.remove=function(name){data_storage.removeItem(name);storage.length=data_storage.length;};storage.clear=function(){data_storage.clear();storage.length=data_storage.length;};storage.addOnChange=function(callback){if(typeof callback=='function'){$(window).on('storage',callback);}}})(window,window.site,window.ui,jQuery);(function(window,site,ui,$,undefined){var formKeeper=$({});site.formKeeper=formKeeper;var getStorageKey=function(field){return field.attr('name');}
formKeeper.load=function(form,storage){if(!form.length||!window.hasOwnProperty("objectStorage"))return false;$('input, select, textarea',form).each(function(index){var field=$(this);if(field.attr('type')=='hidden'||field.attr('type')=='password')return true;var key=getStorageKey(field);key=key+form.selector;var value=storage.getItem(key);if(value){field.val(value);}
if(field.attr('type')=='checkbox'){var labelBox=field.parent();if(labelBox&&labelBox.attr('data-element')&&labelBox.attr('data-element')=='checkbox'){var isChecked=value=='on';if(isChecked){labelBox.attr('data-selected','1');field.attr('checked','checked');field.val('on');}}}});};formKeeper.save=function(form,storage){if(!form.length||!window.hasOwnProperty("objectStorage"))return false;$('input, select, textarea',form).each(function(index){var field=$(this);if(field.attr('type')=='hidden'||field.attr('type')=='password')return true;var key=getStorageKey(field);var key=key+form.selector;var value=storage.setItem(key,field.val());if(field.attr('type')=='checkbox'){var labelBox=field.parent();if(labelBox&&labelBox.attr('data-element')&&labelBox.attr('data-element')=='checkbox'){var isChecked=field.is(':checked');var value=isChecked?'on':'off';storage.setItem(key,value);}}});};formKeeper.clear=function(form,storage){if(!form.length||!window.hasOwnProperty("objectStorage"))return false;$('input, select, textarea',form).each(function(index){var field=$(this);if(field.attr('type')=='hidden'||field.attr('type')=='password')return true;var key=getStorageKey(field);key=key+form.selector;storage.removeItem(key);});};$('body').on('lightbox-ajax-load',function(event,elem){var form=$(elem).parents('.content-container').find('form').first();formKeeper.save(form,window.objectStorage);});})(window,window.site,window.ui,jQuery);(function(window,$,undefined){$.ajaxSetup({cache:false});$(document).ajaxComplete(function(event,xhr,settings){var orderId=parseInt(xhr.getResponseHeader('X-Order-Id'));if(isFinite(orderId)){if(window.mailAnalitics){window.mailAnalitics.CheckPointType='Order';window.mailAnalitics.Data={"OrderId":orderId};window.mailAnalitics.Reload();}}
var ga_href=xhr.getResponseHeader('X-GA-Send');if(!(window.site&&window.site.analytics))ga_href=null;var href=xhr.getResponseHeader('X-Redirect');if(ga_href){window.site.analytics.track(ga_href);if(href){setTimeout(function(){if(href)window.location=href;},300);}}else{if(href)window.location=href;}});ui=$({});window.ui=ui;var gettype=$.type;var override=function(target,source){if((gettype(target)=='object')&&(gettype(source)=='object')){for(var prop in source){if(source.hasOwnProperty(prop)){target[prop]=source[prop];}}}
return target;}
ui.noop=function(){};ui.events={};ui.events.CHANGE='ui_change';ui.events.COLLAPSE='ui_collapse';ui.events.EXPAND='ui_expand';var readyTriggered=false;ui.ready=function(callback){if(arguments.length>0){if(readyTriggered){if($.type(callback)=='function')
callback();}else{ui.on('ready',callback);}}else{readyTriggered=true;ui.trigger('ready').off('ready');}};ui.wrap=function(nodes,element){if(!element)return nodes;if(gettype(element)!='function'){var element=ui.hasOwnProperty(element)?ui[element]:ui.element;}
if(typeof nodes['length']!='undefined'){var result=[];var count=nodes.length;for(var i=0;i<count;i++){result.push(element(nodes[i]));}
return result;}else{return element(nodes);}}
ui.extend=function(parentClass,VMT,construct,create){var base=ui.hasOwnProperty(parentClass)?ui[parentClass]:ui;if((base!=ui)&&base.hasOwnProperty('initialize')&&(gettype(base.initialize)=='function')){base.initialize();}
var vmt=function(){override(this,VMT);}
vmt.prototype=base.__vmt__;var vmt=new vmt();var ElementClass=function(DOMElement){base.__class__.apply(this,arguments);if(gettype(construct)=='function'){construct.apply(this,arguments);}}
ElementClass.prototype=vmt;var deliveredClass=function(DOMElement){if(gettype(create)=='function'){var result=create(DOMElement);if(result!==false)return result;}
return new ElementClass(DOMElement);}
deliveredClass.__vmt__=vmt;deliveredClass.__class__=ElementClass;deliveredClass.initialized=false;deliveredClass.initialize=ui.noop;return deliveredClass;}
ui.sort=function(container,sortIndex){if(!container)return;if($.type(sortIndex)!='function')return;var items=container.childNodes;var count=items.length;if(count<=0)return this;var temp=[];for(var i=0;i<count;i++){if(items[i].nodeType==1){temp.push({si:sortIndex.apply(items[i]),n:items[i],i:i});}}
temp.sort(function(a,b){return b.si-a.si;});var count=temp.length;var needToMoveNodes=false;for(var i=0;i<count-1;i++){if((temp[i].i>temp[i+1].i)&&(temp[i].si!=temp[i+1].si)){needToMoveNodes=true;break;}}
if(needToMoveNodes){for(var i=0;i<count;i++){container.appendChild(temp[i].n);}}}
ui.drag=(function(){var handler=null;var ctx=null;var pos={x:0,y:0};var begin=function(callback,context){handler=callback;ctx=context;}
var end=function(){handler=null;ctx=null;}
var active=function(){return gettype(handler)=='function';}
var process=function(event){var result=undefined;if(gettype(handler)=='function'){var deltaX=event.screenX-pos.x;var deltaY=event.screenY-pos.y;if(handler.call(ctx,event,deltaX,deltaY)===false){end();}
var result=event.cancel();}
pos.x=event.screenX;pos.y=event.screenY
return result;};$(window.document).on('mousedown mousemove mouseup',process);return{"begin":begin,"end":end,"active":active}})();var vmt=function(){this.as=function(element){return ui.wrap(this.node[0],element);}
this.auto=function(){var element=this.getProp('element');if(!element)return this;return ui.wrap(this.node[0],element);}
this.valid=function(){return!!this.node;}
this.getAttr=function(name){if(!this.node)return;return this.node.attr(name);}
this.setAttr=function(name,value){if(this.node){if(value===true){value='1';}else
if(value===false){value=undefined;}else
if(value===null){value=undefined;}
if(value===undefined){this.node.removeAttr(name);}else{this.node.attr(name,value);}}
return this;}
this.removeAttr=function(name){if(this.node){this.node.removeAttr(name);}
return this;}
this.getProp=function(name){return this.getAttr('data-'+name);}
this.setProp=function(name,value){return this.setAttr('data-'+name,value);}
this.removeProp=function(name){return this.removeAttr('data-'+name);}};var vmt=new vmt();var ElementClass=function(DOMElement){this.node=$(DOMElement);}
ElementClass.prototype=vmt;ui.__class__=ElementClass;ui.__vmt__=vmt;ui.initialized=false;ui.initialize=function(){ui.initialized=true;ui.initialize=ui.noop;ui.ready();};})(window,jQuery);(function(window,ui,$,undefined){var vmt={selected:function(value){if(arguments.length<=0){return this.getProp('selected');}
this.setProp('selected',!!value);if(!!value){this.node.find('input[type="checkbox"]').attr('checked','checked');}else{this.node.find('input[type="checkbox"]').removeAttr('checked');}
return this;},enabled:function(value){if(arguments.length<=0){return!this.getProp('disabled');}
this.setProp('disabled',!value);return this;},visible:function(value){if(arguments.length<=0){return!this.getProp('hidden');}
this.setProp('hidden',!value);return this;},show:function(){return this.visible(true);},hide:function(){return this.visible(false);},select:function(){return this.selected(true);},unselect:function(){return this.selected(false);},enable:function(){return this.enabled(true);},disable:function(){return this.enabled(false);},text:function(value){if((arguments.length>0)&&value&&(value.length>0)){this.node.find('.item-text').eq(0).html(value);}
return this.node.find('.item-text').eq(0).text();}};ui.element=ui.extend('',vmt);})(window,window.ui,jQuery);(function(window,ui,$,undefined){var vmt={enabled:function(value){if(value===undefined){return!this.getAttr('disabled');}
this.setAttr('disabled',!value);return this;}};ui.input=ui.extend('element',vmt);})(window,window.ui,jQuery);(function(window,ui,$,undefined){var updateInput=function(element){var input=element.node.find('input');if(input.length>0){if(element.selected()){input.attr('checked','on');}else{input.removeAttr('checked');}}}
var vmt={selected:function(value){var element=this.as('element');if(arguments.length<=0){return element.selected();}else{element.selected.apply(element,arguments);updateInput(element);return this;}},toggle:function(){if(this.node){this.setProp('selected',!this.getProp('selected'));updateInput(this.as('element'));this.node.trigger(ui.events.CHANGE,[this]);}
return this;}};var checkbox=ui.extend('element',vmt);ui.checkbox=checkbox;ui.ready(function(){$('body').on('click','[data-element="checkbox"]',function(event){if($(event.target).is('.info-icon')){event.cancel();return;}
var checkbox=ui.checkbox(this);if(checkbox.enabled()){checkbox.toggle();}
event.cancel();});});})(window,window.ui,jQuery);(function(window,ui,$,undefined){var vmt={itemElement:function(){return'listitem';},listElement:function(){return'listbox';},list:function(){var parent=this.node.parent();var listElement=this.listElement();while(parent.length>0){var element=parent.attr('data-element');if(element==listElement)return ui.element(parent[0]).as(listElement);parent=parent.parent();}
return null;},toggle:function(){this.setProp('selected',!this.getProp('selected'));return this;}}
ui.listitem=ui.extend('element',vmt);})(window,window.ui,jQuery);(function(window,ui,$,undefined){var vmt={itemElement:function(){return'listitem';},listElement:function(){return'listbox';},items:function(){var itemElement=this.itemElement();return ui.wrap(this.node.find('[data-element="'+itemElement+'"]'),itemElement);},selectedItems:function(wrap){var itemElement=this.itemElement();return ui.wrap(this.node.find('[data-element="'+itemElement+'"][data-selected]'),itemElement);},selectAll:function(){var items=this.items();var count=items.length;for(var i=0;i<count;i++){items[i].select();}
return this;},unselectAll:function(){var items=this.selectedItems();var count=items.length;for(var i=0;i<count;i++){items[i].unselect();}
return this;},multiSelect:function(value){if(arguments.length<=0){return this.getProp('multi-select');}
this.setProp('multi-select',!!value);return this;},buildSelectedSubtree:function(){var tree=$('<ul>').attr('data-element','tree').attr('data-multi-select','on');var selected=this.selectedItems();var data_facet_block=this.node.attr('data-facet-block');for(var i=0;i<selected.length;i++){var current=selected[i];var item=$('<li>').attr('data-element','treenode');var id=current.node.attr('data-'+data_facet_block.toLowerCase());item.attr('data-facet-id',data_facet_block).attr('data-id',id);item.append($('<div>').append($('<div>').addClass('shade').append($('<a>').addClass('tree-text').text(current.text()))).append($('<a>').addClass('remove').attr('href','javascript:void(0)')));tree.append(item);}
return tree.get(0);},calculateColumnCount:function(){var items=this.items('element');var count=items.length;var itemWidth=0;for(var i=0;i<count;i++){var width=parseInt(items[i].node.offsetWidth);if(width>itemWidth){itemWidth=width;}}
if(itemWidth>0){var container=this.container('element');var width=parseInt(container.node.offsetWidth);var columnCount=Math.floor(width/itemWidth);if(columnCount<1)columnCount=1;return columnCount;}
return 1;},setColumns:function(columnCount){var columnCount=parseInt(columnCount);if((columnCount<=0)||isNaN(columnCount)){columnCount=this.calculateColumnCount();}
var container=this.container('element');var property=ui.css.supports('column-gap');if(property){container.css(property,'0px');}
var property=ui.css.supports('column-count');if(property){container.css(property,columnCount);}else{if((''+container.css('position')).toLowerCase()=='static'){container.css('position','relative').css('left','0px').css('top','0px');}
var itemWidth=100/columnCount;var items=this.items('element');var count=items.length;for(var i=0;i<count;i++){items[i].css('float','left').css('width',itemWidth+'%');}}},OnItemClick:function(item,event){var target=$(event.target);if(target.hasClass('item-text')){var attrClickNameBehaviour=(''+this.getProp('clickname-behaviour')).toLowerCase();if(attrClickNameBehaviour=='hide'){var block=target.parents('.facet-filter-block').eq(0);window.site.dropdown.beforeHide();block.removeClass('hover');window.site.dropdown.afterHide();}}else
if(target.hasClass('item-image')){var attrClickNameBehaviour=(''+this.getProp('clickname-behaviour')).toLowerCase();if(attrClickNameBehaviour=='hide'){window.site.dropdown.beforeHide();target.parents('.facet-filter-block').removeClass('hover');window.site.dropdown.afterHide();}}
item.node.trigger(ui.events.CHANGE,[item]);},sort:function(){if(this.getProp('sorted'))return this;var sortIndex=null;var behaviour=(''+this.getProp('sort-behaviour')).toLowerCase();if(behaviour=='normal'){sortIndex=function(){return-parseInt(ui.element(this).getProp('sort-index'));};}else
if(behaviour=='separate'){sortIndex=function(){var self=ui.element(this);var si=parseInt(self.getProp('sort-index'));if(!self.enabled()){si+=100000;}
return-si;};}
if(sortIndex){var container=this.node.find('[data-element="'+this.itemElement()+'"]:eq(0)').parent().get(0);ui.sort(container,sortIndex);this.setProp('sorted',true);}
return this;},search:function(value){var childs=this.items();for(var i=0;i<childs.length;i++){if(value.length>0){var result=match(childs[i].text(),value);if(result===false){childs[i].setProp('no-match',true);childs[i].text(childs[i].getProp('original-name'));}else{lightText(childs[i],result,value);}}else{childs[i].setProp('no-match',false);childs[i].text(childs[i].getProp('original-name'));}}
return this;}};var listbox=ui.extend('element',vmt);ui.listbox=listbox;listbox.process=function(element){var listElement=element.__vmt__.listElement();var itemElement=element.__vmt__.itemElement();$('body').on('click','[data-element="'+listElement+'"] [data-element="'+itemElement+'"]',function(event){var item=ui.wrap(this,itemElement);if(item.enabled()){var target=$(event.target);if(target.hasClass('search-highlight')){target=target.parent();event.target=target.get(0);}
var list=item.list();if(list.multiSelect()){item.toggle();}else{list.unselectAll();item.select();}
list.OnItemClick(item,event);}
event.cancel();});};ui.ready(function(){listbox.process(listbox);});})(window,window.ui,jQuery);(function(window,ui,$,undefined){var vmt={treeElement:function(){return'tree';},nodeElement:function(){return'treenode';},tree:function(){var parent=this.node.parent();var treeElement=this.treeElement();while(parent.length>0){var element=parent.attr('data-element');if(element==treeElement)return ui.element(parent[0]).as(treeElement);parent=parent.parent();}
return null;},parent:function(){var parent=this.node.parent();var treeElement=this.treeElement();var nodeElement=this.nodeElement();while(parent.length>0){var element=parent.attr('data-element');if(element==treeElement)return null;if(element==nodeElement)return ui.element(parent[0]).as(nodeElement);parent=parent.parent();}
return null;},children:function(){var element=this.nodeElement();return ui.wrap(this.node.find('> ul > [data-element="'+element+'"]'),element);},allChildren:function(){var element=this.nodeElement();return ui.wrap(this.node.find('[data-element="'+element+'"]'),element);},selectedChildren:function(){var element=this.nodeElement();return ui.wrap(this.node.find('[data-element="'+element+'"][data-selected]'),element);},caption:function(){return this.as('element');},text:function(value){if(value!=undefined&&value.length>0){this.node.find('.tree-text').eq(0).html(value);}
return this.node.find('.tree-text').eq(0).text();},expanded:function(value){if(value===undefined){return this.getProp('expanded');}
if(this.getProp('nochildren'))return this;value=!!value;if(!value){var element=this.nodeElement();if(this.node.find('[data-element="'+element+'"][data-selected]').length>0){return this;}}
if(value){this.sort();}
this.setProp('expanded',value);return this;},expand:function(){this.expanded(true);return this;},collapse:function(){this.expanded(false);return this;},selectAll:function(){var items=this.allChildren();var count=items.length;for(var i=0;i<count;i++){items[i].select();}
return this;},unselectAll:function(){var items=this.selectedChildren();var count=items.length;for(var i=0;i<count;i++){items[i].unselect();}
return this;},calculateColumnCount:function(){var items=this.children();var count=items.length;if(count<=0)return 1;var itemWidth=0;for(var i=0;i<count;i++){var caption=items[i].caption();var width=parseInt(caption.node.offsetWidth);if(width>itemWidth){itemWidth=width;}}
if(itemWidth>0){var container=items[0].as('element').parent('element');if(!container)return 1;var width=parseInt(container.node.offsetWidth);var columnCount=Math.floor(width/itemWidth);if(columnCount<1)columnCount=1;return columnCount;}
return 1;},setColumns:function(columnCount){var columnCount=parseInt(columnCount);if((columnCount<=0)||isNaN(columnCount)){columnCount=this.calculateColumnCount();}
var children=this.children();var count=children.length;if(count<=0)return;var container=children[0].as('element').parent('element');var property=ui.css.supports('column-gap');if(property){container.css(property,'0px');}
var property=ui.css.supports('column-count');if(property){container.css(property,columnCount);}else{if((''+container.css('position')).toLowerCase()=='static'){container.css('position','relative').css('left','0px').css('top','0px');}
var itemWidth=100/columnCount;for(var i=0;i<count;i++){children[i].css('width',itemWidth+'%').css('float','left');}}},autoColumns:function(){var columns=this.getProp('columns');if(columns==null)return;this.setColumns(columns);},sort:function(){if(this.getProp('sorted'))return this;var sortIndex=null;var tree=this.tree();var behaviour=(''+tree.getProp('sort-behaviour')).toLowerCase();if(behaviour=='normal'){sortIndex=function(){return-parseInt(ui.element(this).getProp('sort-index'));};}else
if(behaviour=='separate'){sortIndex=function(){var self=ui.element(this);var si=parseInt(self.getProp('sort-index'));if(!self.enabled()){si+=100000;}
return-si;};}
if(sortIndex){var container=this.node.find('[data-element="'+this.nodeElement()+'"]:eq(0)').parent().get(0);ui.sort(container,sortIndex);this.setProp('sorted',true);}
return this;}};ui.treenode=ui.extend('element',vmt);})(window,window.ui,jQuery);(function(window,ui,$,undefined){var vmt={treeElement:function(){return'tree';},nodeElement:function(){return'treenode';},children:function(){var element=this.nodeElement();return ui.wrap(this.node.find('> [data-element="'+element+'"]'),element);},allChildren:function(){var element=this.nodeElement();return ui.wrap(this.node.find('[data-element="'+element+'"]'),element);},selectedChildren:function(){var element=this.nodeElement();return ui.wrap(this.node.find('[data-element="'+element+'"][data-selected]'),element);},expand:function(){var children=this.allChildren();var count=children.length;for(var i=0;i<count;i++){children[i].expanded(true);this.OnItemExpandCollapse(children[i],$.Event(ui.events.EXPAND));}
return this;},collapse:function(){var children=this.allChildren();var count=children.length;for(var i=0;i<count;i++){children[i].expanded(false);this.OnItemExpandCollapse(children[i],$.Event(ui.events.COLLAPSE));}
return this;},selectAll:function(){var items=this.allChildren();var count=items.length;for(var i=0;i<count;i++){items[i].select();}
return this;},unselectAll:function(){var items=this.selectedChildren();var count=items.length;for(var i=0;i<count;i++){items[i].unselect();}
return this;},multiSelect:function(value){if(value===undefined){return this.getProp('multi-select');}
this.setProp('multi-select',!!value);return this;},buildSelectedSubtree:function(){var nodeElement=this.nodeElement();var data_facet_block=this.node.attr('data-facet-block');var buildItems=function(parent){var tree=$('<ul>'),children=parent.children(),subitem;for(var i=0;i<children.length;i++){var current=children[i];if(!current.selected()){if(current.node.find('[data-element="'+nodeElement+'"][data-selected]').length==0){continue;}}
var item=$('<li>').attr('data-element','treenode');var id=current.node.attr('data-'+data_facet_block.toLowerCase());if(!id){var key=data_facet_block.slice(1);id=current.node.attr('data-m'+key);data_facet_block='M'+key;}
item.attr('data-facet-id',data_facet_block).attr('data-id',id);item.append($('<div>').append($('<div>').addClass('shade').append($('<span>').addClass('tree-checkbox')).append($('<a>').addClass('tree-text').text(current.text()))).append($('<a>').attr('href','javascript:void(0);').addClass('remove')));subitem=buildItems(current);if(subitem.html()){item.append(subitem);item.attr('data-expanded','1');}else{item.attr('data-selected','1');item.find('a.tree-text').removeClass('tree-text');}
tree.append(item);}
return tree;};return buildItems(this).attr('data-element','tree').attr('data-multi-select',this.multiSelect()).attr('data-zeroitems-behaviour','hide').get(0);},OnItemClick:function(item,event){var target=$(event.target);if(target.hasClass('tree-text')){var attrClickNameBehaviour=this.getProp('clickname-behaviour');if(attrClickNameBehaviour=='hide'){window.site.dropdown.beforeHide();this.node.parents('.facet-filter-block').removeClass('hover');window.site.dropdown.afterHide();}}
if(this.multiSelect()){var children=item.selectedChildren();var count=children.length;for(var i=0;i<count;i++){children[i].unselect();}}
var node=item.parent(),nearest=true;while(node){if(item.chooseParentOnRemoveAllSibs&&nearest){nearest=false;if(!node.selectedChildren().length){node.select();}}else{node.unselect();}
node=node.parent();}
item.node.trigger(ui.events.CHANGE,[item]);},OnItemExpandCollapse:function(item,event){if(item.expanded()){item.node.trigger(ui.events.EXPAND,[item]);}else{item.node.trigger(ui.events.COLLAPSE,[item]);}},sort:function(){if(this.getProp('sorted'))return this;var sortIndex=null;var behaviour=(''+this.getProp('sort-behaviour')).toLowerCase();if(behaviour=='normal'){sortIndex=function(){return-parseInt(ui.element(this).getProp('sort-index'));};}else
if(behaviour=='separate'){sortIndex=function(){var self=ui.element(this);var si=parseInt(self.getProp('sort-index'));if(!self.enabled()){si+=100000;}
return-si;};}
if(sortIndex){var container=this.node.find('[data-element="'+this.nodeElement()+'"]:eq(0)').parent().get(0);ui.sort(container,sortIndex);this.setProp('sorted',true);}
return this;},search:function(value,ajax){var childs=this.allChildren();for(var i=0;i<childs.length;i++){if(value.length>0){var result=match(childs[i].text(),value);if(result===false){childs[i].setProp('no-match',true);childs[i].text(childs[i].getProp('original-name'));}else{lightText(childs[i],result,value);if((result!==false)&&!ajax){var parent=childs[i].parent();while(parent){parent.setProp('no-match',false);parent=parent.parent();}}}}else{childs[i].setProp('no-match',false);childs[i].text(childs[i].getProp('original-name'));}}
return this;}};tree=ui.extend('element',vmt);ui.tree=tree;tree.process=function(element){var treeElement=element.__vmt__.treeElement();var nodeElement=element.__vmt__.nodeElement();$('body').on('click','[data-element="'+treeElement+'"] [data-element="'+nodeElement+'"]',function(event){var node=ui.wrap(this,nodeElement);if(node.enabled()){var tree=node.tree();var target=$(event.target);if(target.hasClass('search-highlight')){target=target.parent();event.target=target.get(0);}
if(target.hasClass('tree-plus')){node.expanded(!node.expanded());tree.OnItemExpandCollapse(node,event);var level=node.node.attr('data-tree-level');var expanded=node.node.attr('data-expanded')?true:false;var showPopupElement=target.siblings('.show-head-image');var selectedElement=node.node.find('[data-selected]');if(level==2&&!selectedElement.length&&expanded&&showPopupElement.length){site.filters.OnOpenHeadPopup.call(showPopupElement,event,true);}}else
if(target.hasClass('tree-checkbox')){node.selected(!node.selected());tree.OnItemClick(node,event);}else
if(target.hasClass('tree-text')){if(!tree.multiSelect()){tree.unselectAll();}
node.selected(!node.selected());tree.OnItemClick(node,event);}}
event.cancel(true);});}
ui.ready(function(){tree.process(tree);});})(window,window.ui,jQuery);(function(window,ui,$,undefined){window.site.dropdown.beforeHide(function(event,block){if(!block)return;var input=block.find('.search-input-control');input.removeClass('can-clear').find('input').val('').blur();$.each(block.find('[data-facet-block]'),function(key){var treelist=ui.element(block.find('[data-facet-block]').get(key)).auto();treelist.search('');if($.type(treelist.collapse)=='function')treelist.collapse();$.each(block.find('[data-facet-block] .search-highlight'),function(){var spanText=$(this).html();$(this).replaceWith(spanText);})});})
ui.ready(function(){$('body').on('keyup keydown change','.search-input-control input',function(event){if((event.which==13||event.keyCode==13)&&$(this).parents('.facet-filter-block').length>0){event.cancel();}
if($(this).val().length>0){$(this).parents('.search-input-control').addClass('can-clear');}else{$(this).parents('.search-input-control').removeClass('can-clear');}});$('body').on('click','.search-input-control .search-input-clear',function(event){$(this).parents('.search-input-control').removeClass('can-clear').find('input').val('').change();$.each($(this).parents('.facet-filter-block').find('[data-facet-block]'),function(key){var treelist=ui.element($(this).parents('.facet-filter-block').find('[data-facet-block]').get(key)).auto();treelist.search('');if($.type(treelist.collapse)=='function')treelist.collapse();});});$('body').on('keyup','.search-input-control input',function(event){var self=this;setTimeout(function(event){var needleValue=$(self).val();if($(self).parents('.facet-filter-block').find('[data-ajax]').length>0){$(self).parents('.facet-filter-block').find('[data-facet-block]').each(function(key){var tree=ui.element(this).auto();var children=tree.children();var count=children.length;for(var i=0;i<count;i++){children[i].node.find('ul').empty();}
tree.search(needleValue,true);});if(site.models&&site.models.initialized)site.models.load();if(site.carBrands&&site.carBrands.initialized)site.carBrands.load();}else{$(self).parents('.facet-filter-block').find('[data-facet-block]').each(function(key){var treelist=ui.element($(self).parents('.facet-filter-block').find('[data-facet-block]').get(key)).auto();if(needleValue.length>0){treelist.search(needleValue);if($.type(treelist.expand)=='function')treelist.expand();}else{if($.type(treelist.collapse)=='function')treelist.collapse();treelist.search('');}});}},300);});$('body').on('click','#additional-information-popup, #delivery-custom-warning-popup',function(){ui.lightbox.show($(this).find('.popup-hidden-content').html(),true);}).on('click','#privacy-policy-popup',function(){ui.lightbox.show($('#privacy-policy-content').html(),true);}).on('click','#activation-panel-popup',function(){ui.lightbox.show($('.popup-hidden-content').html(),true);});});})(window,window.ui,jQuery);(function(window,ui,$,undefined){return;var original=$.fn.val;var attr='data-placeholder';var emptyClass='placeholder';var focus=function(event){var self=$(this);if(self.attr(attr)){if(self.hasClass(emptyClass)){self.removeClass(emptyClass);original.call(self,'');}}}
var blur=function(event){var self=$(this);if(original.call(self)==''){var placeholder=self.attr(attr);if(placeholder){self.addClass(emptyClass);original.call(self,placeholder||'')}}}
ui.ready(function(){var body=$('body');if(body.length<=0)return;body.on('focus','['+attr+']',focus).on('blur','['+attr+']',blur);});$(function(){$('['+attr+']').blur();});$.fn.val=function(value){var placeholder=this.attr(attr);if(placeholder){if(arguments.length<=0){if(this.hasClass(emptyClass))return'';return original.call(this);}else{var focused=this.is(':focus');if(value==''){if(!focused){this.addClass(emptyClass);value=this.attr(attr)||'';}}else{this.removeClass(emptyClass);}
original.call(this,value);}
return this;}else{return original.apply(this,arguments);}}})(window,window.ui,jQuery);(function(window,ui,$,undefined){var regexp=/^([a-zA-Z0-9_-]+):([a-zA-Z0-9_]+(\.[a-zA-Z0-9_]+)*)$/;var searchFunctionByNamespace=function(name){if(!name)return null;var handler=null;var object=[window,$];for(var i=0;i<name.length;i++){if(handler){object=handler();if(!object)return null;object=[object];}
var part=name[i];for(var j=0;j<object.length;j++){var type=$.type(object[j][part]);if(type=='function'){handler=object[j][part];break;}else
if(type=='object'){object=[object[j][part]];handler=null;break;}}}
if(!handler)return null;return handler;}
var cache={};var getActionHandler=function(action){action=regexp.exec(action);if(!action)return null;if(action.length<3)return null;var event=action[1];var cacheKey=action[2];var names=action[2].split(',');var result=[event];for(var i=0;i<names.length;i++){if(!cache.hasOwnProperty(names[i])){var namespace=names[i].split('.');var handler=searchFunctionByNamespace(namespace);cache[names[i]]=handler;}
if(cache[names[i]]){result.push(cache[names[i]]);}}
if(result.length<=1)return null;return result;}
$.actions={};var handlers={};var unbound={};var delegate=function(name){return function(event){var result=undefined;var data=$(this).attr('data-action-'+name.toLowerCase());if(data){data=data.split(';');for(var i=0;i<data.length;i++){var action=searchFunctionByNamespace(data[i].split('.'));if($.type(action)=='function'){if(action.apply(this,arguments)===false){result=false;}}}}
return result;}}
$.actions.handle=function(names){if($.type(names)!='array'){names=[''+names];}
var parent=$('body');for(var i=0;i<names.length;i++){var name=(''+names[i]).toLowerCase();if(!handlers.hasOwnProperty(name)){var handler=delegate(name);handlers[name]=handler;if(parent.length>0){parent.on.call(parent,name,'[data-action-'+name+']',handler);}else{unbound[name]=length;}}}
if(parent.length>0){for(var name in unbound){if(unbound.hasOwnProperty(name)&&handlers.hasOwnProperty(name)){parent.on.call(parent,name,'[data-action-'+name+']',handlers[name]);}}
unbound={};}}
$.actions.handle(['click','dblclick','change','submit','mouseover','mouseout','mouseenter','mouseleave','focus','focusin','focusout','blur','updated']);$.fn.bindActions=function(){cache={};this.filter('[data-action]').each(function(){var item=$(this);var data=item.attr('data-action');if(data){data=data.split(';');for(var i=0;i<data.length;i++){action=getActionHandler(data[i]);if(action){item.on.apply(item,action);}}}});this.find('[data-action]').each(function(){var item=$(this);var data=item.attr('data-action');if(data){data=data.split(';');for(var i=0;i<data.length;i++){action=getActionHandler(data[i]);if(action){item.on.apply(item,action);}}}});return this;}
ui.ready(function(){$.actions.handle();});$(function(){$('[data-action]').bindActions();});})(window,window.ui,jQuery);(function(window,ui,$,undefined){var vmt={selected:function(value){if(value){this.list().unselectAll();}
if(arguments.length>0){return this.as('element').selected(value);}else{return this.as('element').selected();}},toggle:function(){this.selected(!this.selected());return this;},itemElement:function(){return'radioitem';},listElement:function(){return'radiobox';},list:function(){var listElement=this.listElement();return ui.wrap(this.node.parents('[data-element="'+listElement+'"]').get(0),listElement);}};var radioitem=ui.extend('element',vmt);ui.radioitem=radioitem;})(window,window.ui,jQuery);(function(window,ui,$,undefined){var vmt={itemElement:function(){return'radioitem';},listElement:function(){return'radiobox';},items:function(){var itemElement=this.itemElement();return ui.wrap(this.node.find('[data-element="'+itemElement+'"]'),itemElement);},unselectAll:function(){var items=this.items();var count=items.length;for(var i=0;i<count;i++){items[i].unselect();}}};var radiobox=ui.extend('element',vmt);ui.radiobox=radiobox;radiobox.process=function(element){var listElement=element.__vmt__.listElement();var itemElement=element.__vmt__.itemElement();$('body').on('click','[data-element="'+listElement+'"] [data-element="'+itemElement+'"]',function(event){var item=ui.wrap(this,itemElement);if(item.enabled()){var parent=item.node.parents('[data-element="'+listElement+'"]').eq(0);if(item.selected()){if(parent.attr('data-allow-unselect')){item.unselect();parent.find('input').removeAttr('checked');}}else{$.each(parent.find('[data-element="'+itemElement+'"]'),function(){var otheritem=ui.wrap(this,itemElement);if(otheritem.enabled()){otheritem.unselect();otheritem.node.find('input').removeAttr('checked');}}),item.node.find('input').attr('checked','checked');item.select();}
parent.trigger(ui.events.CHANGE);}
event.cancel();});};ui.ready(function(){radiobox.process(radiobox);});})(window,window.ui,jQuery);(function(window,ui,$,undefined){var lightbox=$({});var visible=false;var closable=true;var buttonResult={left:undefined,right:undefined}
var element=$('<div class="ui-lightbox">'+'<div class="ui-lightbox-background"></div>'+'<div class="ui-lightbox-container">'+'<div class="ui-lightbox-content vertical-scroll" data-element="scrollbox"></div>'+'<a href="javascript:void(0)" class="ui-lightbox-close close"></a>'+'<div class="ui-lightbox-buttons"></div>'+'</div>'+'</div>');element.on('click','.ui-lightbox-close',function(event){lightbox.hide();});element.on('click','.ui-lightbox-background',function(event){lightbox.hide();});element.on('click','.ui-lightbox-button-left',function(event){lightbox.hide(buttonResult.left);});element.on('click','.ui-lightbox-button-right',function(event){lightbox.hide(buttonResult.right);});lightbox.show=function(content,scroll){lightbox.trigger('before-show',[element]);lightbox.update(content);scroll?element.addClass('ui-lightbox-has-scroll'):element.removeClass('ui-lightbox-has-scroll');$('body').append(element);if(scroll){var $content=element.find('.ui-lightbox-content');$content.find('a').each(function(index,el){var href=$(el).attr('href')||'',hash=href.indexOf('#');if(hash>=0){hash=href.substring(hash+1);$(el).click(function(e){var scrollTo=$content.find('[name='+hash+']').eq(0);if(scrollTo.length){$content.scrollTop(scrollTo.position().top-5);e.preventDefault();}});}});}
visible=true;lightbox.trigger('after-show',[element]);}
lightbox.update=function(content){element.find('.ui-lightbox-content').empty().append(content);element.find('.ui-lightbox-content').find('[data-target="lightbox-ready"]').attr('data-target','lightbox');}
lightbox.hide=function(){if(!closable)return;lightbox.trigger('before-hide',[element]);visible=false;element.detach();lightbox.find('.ui-lightbox-content').empty();lightbox.trigger('after-hide',[element]);}
lightbox.closable=function(flag){closable=flag;element.find('.ui-lightbox-close').toggleClass('hidden',!flag);};lightbox.visible=function(){return visible;}
lightbox.modal=function(content,onclose,leftButton,rightButton,scroll){if(!lightbox.visible()){lightbox.show('<div></div>',scroll);lightbox.modal(content,function(element,result){lightbox.hide();if($.type(onclose)=='function'){onclose(element,result);}},leftButton,rightButton,scroll);return;}
var old=null;if(lightbox.visible()){old=element.find('.ui-lightbox-content').contents().detach();if(old.length<=0)old=null;}
var prevResult=buttonResult;buttonResult={left:undefined,right:undefined}
var hadButtons=element.hasClass('ui-lightbox-has-buttons');var hadScroll=element.hasClass('ui-lightbox-has-scroll');var prevButtons=element.find('.ui-lightbox-buttons').contents().detach();var hide=lightbox.hide;lightbox.hide=function(result){lightbox.hide=hide;buttonResult=prevResult;hadButtons?element.addClass('ui-lightbox-has-buttons'):element.removeClass('ui-lightbox-has-buttons');hadScroll?element.addClass('ui-lightbox-has-scroll'):element.removeClass('ui-lightbox-has-scroll');if(prevButtons){element.find('.ui-lightbox-buttons').empty().append(prevButtons);}
old?lightbox.update(old):lightbox.hide();lightbox.trigger('modal-end',[element]);if($.type(onclose)=='function'){onclose(element,result);}}
if(($.type(leftButton)=='object')||($.type(rightButton)=='object')){if($.type(leftButton)=='object'){buttonResult.left=leftButton.result;var temp=$('<a>').attr('href','javascript:void(0)').html(leftButton.name||'');temp.addClass('ui-lightbox-button-left').addClass('styled-link');if(leftButton.gray)temp.addClass('gray');element.find('.ui-lightbox-buttons').append(temp);}
if($.type(rightButton)=='object'){buttonResult.right=rightButton.result;var temp=$('<a>').attr('href','javascript:void(0)').html(rightButton.name||'');temp.addClass('ui-lightbox-button-right').addClass('styled-link');if(rightButton.gray)temp.addClass('gray');element.find('.ui-lightbox-buttons').append(temp);}
element.addClass('ui-lightbox-has-buttons');}else{element.removeClass('ui-lightbox-has-buttons');}
scroll?element.addClass('ui-lightbox-has-scroll'):element.removeClass('ui-lightbox-has-scroll');old?lightbox.update(content):lightbox.show(content);lightbox.trigger('modal-begin',[element]);}
lightbox.close=function(){while(visible){lightbox.hide();}}
ui.lightbox=lightbox;ui.ready(function(){$('body').on('click','[data-target="lightbox"]',function(event){var url=$(this).attr('href');var scroll=$(this).attr('data-scroll')=='on';if(!url)return;if(url.indexOf('?')<0)url+='?ajax=1';else url+='&ajax=1';$('body').trigger('lightbox-ajax-load',[$(this)]);$.get(url,function(data){lightbox.show(data,scroll);if(!!$('.one-page-checkout').length){$('.previousAddressModal .custom-radio').equivalent();addScrollToPopUp();addScrollToCartPopUp();}});event.cancel();});});$(function(){var content=$('.lightbox-prerendered-content');if(content.length>0){lightbox.show(content.last().contents());content.remove();}});})(window,window.ui,jQuery);(function(window,ui,$,undefined){var waiter=$({});var element=$('<div class="ui-lightbox waiter green">'+'<div class="ui-lightbox-background"></div>'+'<div class="ui-lightbox-container">'+'<div class="ui-lightbox-content">'+'<div class="animation"></div>'+'<div class="title"></div>'+'</div>'+'</div>'+'</div>');ui.waiter=waiter;waiter.show=function(content){element.find('.ui-lightbox-content .title').html(content);$('body').append(element);};waiter.hide=function(content){element.detach();};})(window,window.ui,jQuery);(function(window,ui,$,undefined){ui.ready(function(){$('body').on('click','[data-element="rating"] .rate-point',function(event){var item=$(this);var removeSelection=item.hasClass('selected')&&!item.find('.selected').length;var element=item.parents('[data-element="rating"]');element.find('.selected').removeClass('selected');if(!removeSelection){element.find('input').val(item.attr('data-value'));while(item.hasClass('rate-point')){item.addClass('selected');item=item.parent();}}else{element.find('input').val(0);}
event.cancel(true);});});ui.ready(function(){$('body').on('mouseover','[data-element="rating"] .rate-point',function(event){var item=$(this);var element=item.parents('[data-element="rating"]');element.find('#count').html(item.attr('data-count'));event.cancel(true);});});ui.ready(function(){$('body').on('mouseout','[data-element="rating"] .rate-point',function(event){var item=$(this);var element=item.parents('[data-element="rating"]');var count=element.find('[data-value="'+element.find('input').val()+'"]').attr('data-count');if(typeof count!="undefined"){element.find('#count').html(count);}else{element.find('#count').html(0);}
event.cancel(true);});});})(window,window.ui,jQuery);(function(window,ui,$,undefined){var controls=$({});site.controls=controls;controls.initialized=false;controls.initialize=function(){controls.initialize=site.utils.noop;controls.initialized=true;};controls.sortColumn=function(){var currentHeader=$(this);var params={};var place='';if(currentHeader.attr('data-sort')=='no')return;currentHeader.siblings().removeAttr('data-sort-order');currentHeader.attr('data-sort-order',function(index,attrOldValue){return(attrOldValue=='asc')?'desc':'asc';});if(currentHeader.hasClass('quantity')){params.attr='data-value';place=' [data-value]';}
if(currentHeader.hasClass('price')){params.attr='data-price';place=' .product-price';}
params.order=currentHeader.attr('data-sort-order');$(this).parents('table:not(.non-sortable-table)').eq(0).children('tbody').children('tr').tsort('>td:eq('+currentHeader.index()+')'+place,params);};controls.setContactType=function(){var $this=$(this);var wrapper=$this.parents('.contact-type-wrapper').eq(0);var currentField=wrapper.find('.contact-item:not(.hidden)');switch($this.val()){case'1':case'2':case'3':case'4':currentField.addClass('hidden');wrapper.find('.contact-item[data-contact-type="'+$this.val()+'"]').removeClass('hidden');}};controls.changeSimpleSelectContactEvent=function(self,selected){var wrapper=self.parents('.contact-type-wrapper').eq(0);var currentField=wrapper.find('.contact-item:not(.hidden)');currentField.addClass('hidden');wrapper.find('.contact-item[data-contact-type="'+selected+'"]').removeClass('hidden');};controls.filterInput=function(event){var key=window.event?event.keyCode:event.which;if((key>31)&&((key<48)||(key>57)))return false;return true;};ui.ready(function(){$('body').on('click','.styled-phone-input:not(.no-dropdown) .styled-phone-dropdown-button',function(event){var control=$(this).parent();control.toggleClass('has-dropdown');if(control.hasClass('has-dropdown')){control.find('.styled-phone-dropdown').focus();}}).on('blur','.styled-phone-input .styled-phone-dropdown',function(event){var control=$(this).parent();control.removeClass('has-dropdown');}).on('mousedown','.styled-phone-input .styled-phone-dropdown li',function(event){event.preventDefault();event.returnValue=false;}).on('click','.styled-phone-input .styled-phone-dropdown li',function(event){var control=$(this).parent().parent().parent();var code=$(this).attr('data-value');control.find('.styled-phone-value').val(code+'-'+
control.find('.styled-phone-edit input').val());control.find('.styled-phone-dropdown-button').text('+'+code);control.removeClass('has-dropdown');control.find('.styled-phone-edit input').focus().select();}).on('keypress keyup change blur','.styled-phone-input .styled-phone-edit input',function(event){var control=$(this).parent().parent();control.find('.styled-phone-value').val(control.find('.styled-phone-dropdown-button').text().substring(1)+'-'+
control.find('.styled-phone-edit input').val());}).on('keypress','input[data-only-numbers]',site.controls.filterInput).on('keypress','input[data-next-control]',function(event){if(event.which==13){if(!this.form.tabOrder){var els=this.form.elements;var ti=[];var rest=[];for(var i=0,il=els.length;i<il;i++){if(els[i].tabIndex>0&&!els[i].disabled&&!els[i].hidden&&!els[i].readOnly&&els[i].type!=='hidden'){ti.push(els[i]);}}
ti.sort(function(a,b){return a.tabIndex-b.tabIndex;});for(i=0,il=els.length;i<il;i++){if(els[i].tabIndex==0&&!els[i].disabled&&!els[i].hidden&&!els[i].readOnly&&els[i].type!=='hidden'){rest.push(els[i]);}}
this.form.tabOrder=ti.concat(rest);}
for(var j=0,jl=this.form.tabOrder.length;j<jl;j++){if(this===this.form.tabOrder[j]){if(j+1<jl){$(this.form.tabOrder[j+1]).focus();}else{$(this).blur();}}}
event.cancel(true);}});});})(window,window.ui,jQuery);(function(window,site,$,undefined){var mainmenu=$({});site.mainmenu=mainmenu;var mainMenuShowDuration=500;mainmenu.initialized=false;mainmenu.initialize=function(){mainmenu.resize();mainmenu.initialized=true;mainmenu.initialize=window.site.utils.noop;};var changeLevel=function($submenu,ptId){};var getParentPtId=function($source){var $res='home';if($source.parents('.submenu-items-wrapper').length){$res=$source.parents('.submenu-items-wrapper').attr('id').replace("pt-id-","");}
return $res;};var setViewAllProductsUrl=function($submenu,viewAllProductsId){};mainmenu.resize=function(){if(!mainmenu.initialized){return false;}
var $allSubmenu=$('#main-menu .submenu');$allSubmenu.css({position:"absolute",visibility:"hidden",display:"block"});$allSubmenu.each(function(index){var $submenu=$(this);changeLevel($submenu,'top');setViewAllProductsUrl($submenu);});$allSubmenu.css({position:"",visibility:"",display:""});};mainmenu.changeCover=function($submenu,$newFrame,durationTime){if(!mainmenu.initialized){return false;}
durationTime=durationTime||0;var $cover=$('.submenu-cover',$submenu);var newFrameWidth=$newFrame.outerWidth();$cover.animate({left:newFrameWidth,width:$('.submenu-inner',$submenu).width()-newFrameWidth},durationTime,function(){});};mainmenu.changeBreadcrumbs=function($crumb){if(!mainmenu.initialized){return false;}
var $submenu=$crumb.parents('.submenu');var currPtId=$crumb.attr('data-pt-id');var parentPtId=getParentPtId($crumb);var viewAllProductsId=null;var $breadcrumbs=$(".submenu-breadcrumbs",$submenu);var breadcrumbsArr=[];if(currPtId!='home'){breadcrumbsArr.push([currPtId,$crumb.next('a').text()]);}
while(parentPtId!='home'){$crumb=$('i[data-pt-id="'+parentPtId+'"]',$submenu);if(typeof $crumb.attr('data-pt-id')!="undefined"){breadcrumbsArr.unshift([$crumb.attr('data-pt-id'),$crumb.next('a').text()]);}else{breadcrumbsArr.unshift(['home',$breadcrumbs.attr('data-top-text')]);}
parentPtId=getParentPtId($crumb);}
$breadcrumbs.fadeOut('fast',function(){$breadcrumbs.empty();if(breadcrumbsArr.length>1){for(var i=0;i<breadcrumbsArr.length;i++){if(i!=breadcrumbsArr.length-1){$breadcrumbs.append('<a href="javascript:void(0);" data-action-click="site.mainmenu.OnBreadcrumbsItemClick"'+'data-bc-id="'+breadcrumbsArr[i][0]+'">'+breadcrumbsArr[i][1]+'</a>');}else{$breadcrumbs.append('<span data-bc-id="'+breadcrumbsArr[i][0]+'">'+breadcrumbsArr[i][1]+'</span>');viewAllProductsId=breadcrumbsArr[i][0];}}}
setViewAllProductsUrl($submenu,viewAllProductsId);$breadcrumbs.fadeIn('fast');});};mainmenu.OnSubmenuArrowClick=function(event){var durationTime=typeof mainMenuShowDuration!='undefined'?mainMenuShowDuration:500;var hasChildren=$(this).attr("data-has-children")=="1"?true:false;var ptId=$(this).attr('data-pt-id');if(hasChildren){var $submenu=$(this).parents('.submenu');var $currFrame=$(this).parents('.submenu-items-wrapper');var currFrameWidth=$currFrame.outerWidth(true);var $newFrame=$('#pt-id-'+ptId,$submenu);$('.submenu-items-wrapper:not(#'+$currFrame.attr('id')+', #pt-id-'+ptId+')',$submenu).removeClass('submenu-visible').addClass('submenu-hidden').removeAttr("style");$currFrame.animate({marginLeft:-1*currFrameWidth},durationTime,function(){});$newFrame.css({opacity:0}).removeClass('submenu-hidden').addClass('submenu-visible').animate({opacity:1});site.mainmenu.changeCover($submenu,$newFrame,durationTime);site.mainmenu.changeBreadcrumbs($(this));return event.cancel();}};mainmenu.OnBreadcrumbsItemClick=function(event){var durationTime=typeof mainMenuShowDuration!='undefined'?mainMenuShowDuration:500;var $submenu=$(this).parents('.submenu');var breadcrumbCurrId=$(this).next().attr('data-bc-id');var breadcrumbPreviousId=$(this).attr('data-bc-id');var breadcrumbLastId=$(".submenu-breadcrumbs [data-bc-id]:last",$submenu).attr('data-bc-id');var $crumb=$('i[data-pt-id="'+breadcrumbCurrId+'"]',$submenu);var $destinationWrap=$crumb.parents('.submenu-items-wrapper');var $destinationWrapId=$destinationWrap.attr('id');$('.submenu-items-wrapper:not(#pt-id-'+breadcrumbLastId+', #'+$destinationWrapId+')',$submenu).removeClass('submenu-visible').addClass('submenu-hidden').removeAttr("style");$("#pt-id-"+breadcrumbLastId).animate({marginLeft:0},durationTime,function(){});$destinationWrap.removeClass('submenu-hidden').addClass('submenu-visible').css({marginLeft:-1*$destinationWrap.outerWidth()}).animate({marginLeft:0},durationTime,function(){});site.mainmenu.changeCover($submenu,$destinationWrap,durationTime);site.mainmenu.changeBreadcrumbs($('i[data-pt-id="'+breadcrumbPreviousId+'"]',$submenu));return event.cancel();};mainmenu.OnSubmenuItemClick=function(event){$(this).prev('i').click();};mainmenu.OnMainMenuItemClick=function(event){var parent=$(this).parents('td');if(!parent.hasClass('hover')){return event.cancel();}};mainmenu.OnMainMenuParentItemClick=function(event){if($(this).hasClass('hover')){var node=event.target.nodeName.toUpperCase();if(node=='TD'||node=='A'){var href=$(this).find('.mainmenu-item-link').attr('href');if(href!=''){document.location.href=href;}}}};$(function(){$('body').on('mouseover','.main-menu-item-cars .entry-points li',function(){var $this=$(this);$this.parents('.submenu-sequence').eq(0).attr('data-active-type',$this.attr('data-type'));$('.main-menu-item-cars .entry-point-items').trigger('mouseover');});});})(window,window.site,window.jQuery);(function(window,site,$,undefined){var facet=$({});site.facet=facet;var identifier=null;var baseUrl=null;var changed=false;var currentBlock=null;var FacetFilters=function(){return{name:'filter',has:function(name){return this.hasOwnProperty(name);},add:function(name,type){if($.type(type)=='function'){this[name]=new type(name);}},remove:function(name){if(this.hasOwnProperty(name)){delete this[name];}},toUrl:function(){var parts=[];for(var name in this){if(this.hasOwnProperty(name)&&(this[name].hasOwnProperty('toUrl'))){var url=this[name].toUrl(this.name);if(url)parts.push(url);}}
return parts.join('&');}};};var MultiSelectFilter=function(name){var result=[];result.name=name;result.add=function(value){if(!value)return;if(this.indexOf(value)<0){this.push(value);changed=true;}};result.remove=function(value){if(!value)return;var i=this.indexOf(value);if(i>-1){this.splice(i,1);changed=true;}};result.toggle=function(value){if(!value)return;var i=this.indexOf(value);if(i>-1){this.splice(i,1);}else{this.push(value);}
changed=true;}
result.replace=function(values){this.splice(0,this.length);if($.type(values)!='array')values=[values];for(var i=0;i<values.length;i++){if(values[i]){this.push(values[i]);}}
changed=true;}
result.clear=function(){if(this.length<=0)return;this.splice(0,this.length);changed=true;}
result.toUrl=function(prefix){if(this.length<=0)return'';var parts=[];var prefix=prefix?encodeURIComponent(prefix)+'['+encodeURIComponent(this.name)+']':encodeURIComponent(this.name);var temp=[];for(var i=0;i<this.length;i++){temp.push(encodeURIComponent(this[i]));}
return prefix+'='+temp.join(',');}
return result;}
var SingleSelectFilter=function(name){var result=[];result.name=name;result.add=function(value){if(!value)return;if((this.length>0)&&(this[0]==value))return;this.splice(0,this.length);this.push(value);changed=true;}
result.remove=function(value){if(this.length<=0)return;this.splice(0,this.length);changed=true;}
result.toggle=function(value){if(!value)return;if(this.length>0){this.splice(0,this.length);}else{this.push(value);}
changed=true;}
result.replace=function(values){this.splice(0,this.length);if($.type(values)!='array')values=[values];for(var i=0;i<values.length;i++){if(values[i]){this.push(values[i]);break;}}
changed=true;}
result.clear=function(){if(this.length>0)return;this.splice(0,this.length);changed=true;}
result.toUrl=function(prefix){if(this.length<=0)return'';var parts=[];var prefix=prefix?encodeURIComponent(prefix)+'['+encodeURIComponent(this.name)+']':encodeURIComponent(this.name);var temp=[];for(var i=0;i<this.length;i++){temp.push(encodeURIComponent(this[i]));}
return prefix+'='+temp.join(',');}
return result;}
var PriceFilter=function(name){var result={name:name,min:null,max:null,currencyRate:+$('.currency .chosen-currency').attr('data-rate'),toUrl:function(prefix){var parts=[];var prefix=prefix?encodeURIComponent(prefix)+'['+encodeURIComponent(this.name)+']':encodeURIComponent(this.name);if(this.min)parts.push(prefix+'[Min]='+encodeURIComponent((this.min/this.currencyRate).toFixed(7)));if(this.max)parts.push(prefix+'[Max]='+encodeURIComponent((this.max/this.currencyRate).toFixed(7)));return parts.join('&');},validate:function(){var result=[];return result;}};return result;}
var allowedFilters=['T2','B1','B2','M1','M2','PP','PPV','FL','NU','BF','PR','S','B'];facet.toUrl=function(options){var params=facet.filters().toUrl();params=params?[params]:[];if(options.ajax)params.push('ajax=on');if(options.counts)params.push('counts=on');if(options.url)params.push('url=on');params.push('page='+encodeURIComponent(site.pagination.page()));params.push('ipp='+encodeURIComponent(site.pagination.ipp()));params.push('view='+encodeURIComponent(site.pagination.view()));params.push('si='+encodeURIComponent(site.pagination.sort()));if(site.pagination.searchword()){params.push('q='+encodeURIComponent(site.pagination.searchword()));}
if(currentBlock){params.push('facet[block]='+encodeURIComponent(currentBlock));}
return baseUrl+'?'+params.join('&');}
facet.removeURLParameter=function(url,parameter){var urlparts=url.split('?');if(urlparts.length>=2){var prefix=encodeURIComponent(parameter)+'=';var pars=urlparts[1].split(/[&;]/g);for(var i=pars.length;i-->0;){if(pars[i].lastIndexOf(prefix,0)!==-1){pars.splice(i,1);}}
url=urlparts[0]+'?'+pars.join('&');return url;}else{return url;}}
facet.block=function(block){if(arguments.length<=0)return currentBlock;var block=(''+block).toUpperCase();currentBlock=(allowedFilters.indexOf(block)>-1)?block:null;return facet;}
var working=false;var refreshFiltersCallback=function(){working=true;try{if(this.success){if(typeof this.data!=='object'){this.data=$.fromJSON(this.data);}
var products=this.data.hasOwnProperty('Products')?''+this.data.Products:undefined;delete this.data.Products;if(this.data.hasOwnProperty('BF')){var show=false;if(this.data.BF.hasOwnProperty('1')&&(this.data.BF['1']>0)){var show=true;}
hideBrandFilterBlock(!show);}
facet.trigger('refresh-filters',[this.data]);if(products!==undefined){site.facet.trigger('refresh-results',[$(products)]);}}else{facet.trigger('refresh-filters',[undefined])}}catch(e){working=false;throw e;}
working=false;}
var refreshResultsCallback=function(){if(this.success){facet.trigger('refresh-results',[$(this.data)]);}else{facet.trigger('refresh-results',[undefined]);}}
facet.validate=function(){var result=true;var filters=facet.filters();if(filters.hasOwnProperty('Price')){var errors=filters.Price.validate();$('.facet-filter-block [data-price="min"]').val(filters.Price.min);$('.facet-filter-block [data-price="max"]').val(filters.Price.max);$('.facet-filter-block [data-price]').removeClass('error');if(errors){for(var i in errors){if(errors.hasOwnProperty(i)){$('.facet-filter-block [data-price="'+errors[i]+'"]').addClass('error');result=false;}}}}
return result;};facet.refresh=function(){hideNonUniversalBlock();hideBrandFilterBlock();if(!facet.validate())return;if(changed){if(site.pagination.ipp()<=20){var url=facet.toUrl({ajax:true,counts:true,url:true});var queue=$.ajax.queue('facet-filters');queue.clear().get(url,refreshFiltersCallback);}else{var url=facet.toUrl({ajax:true,counts:true,url:true});var queue=$.ajax.queue('facet-filters');queue.clear().get(url,refreshFiltersCallback);var url=facet.toUrl({ajax:true});var queue=$.ajax.queue('facet-results');queue.clear().get(url,refreshResultsCallback);}}else{var url=facet.toUrl({ajax:true,url:true});var queue=$.ajax.queue('facet-results');queue.clear().get(url,refreshResultsCallback);}}
var hideNonUniversalBlock=function(){var nonUniversalBlock=$('.facet-filter-block-non-universal');if(nonUniversalBlock.length>0){var filters=site.facet.filters();if((filters.hasOwnProperty('B')&&filters.B.length>0)){nonUniversalBlock.removeAttr('data-disabled');}else{nonUniversalBlock.attr('data-disabled',1);nonUniversalBlock.find('[data-element="checkbox"]').removeAttr('data-selected');}}};var hideBrandFilterBlock=function(forceHide){var brandFilterBlock=$('.facet-filter-block-brand-filter');if(brandFilterBlock.length>0){var filters=site.facet.filters();if(!forceHide&&filters.hasOwnProperty('B2')&&(filters.B2.length>0)){brandFilterBlock.removeAttr('data-disabled');}else{brandFilterBlock.attr('data-disabled',1);brandFilterBlock.find('[data-element="checkbox"]').removeAttr('data-selected');}}};facet.changed=function(value){if(arguments.length<=0)return changed;site.pagination.page(1);changed=!!value;return facet;}
facet.filters=function(){var result=new FacetFilters();result.add('T2',MultiSelectFilter);result.add('M1',MultiSelectFilter);result.add('B1',MultiSelectFilter);result.add('M2',MultiSelectFilter);result.add('B2',MultiSelectFilter);result.add('FL',MultiSelectFilter);result.add('NU',MultiSelectFilter);result.add('BF',MultiSelectFilter);result.add('PR',MultiSelectFilter);result.add('S',MultiSelectFilter);result.add('B',MultiSelectFilter);result.add('PPV',MultiSelectFilter);result.add('Price',PriceFilter);for(var name in result){if(allowedFilters.indexOf((''+name).toUpperCase())>-1){var filter=result[name];var attr='data-'+(''+name).toLowerCase();var selected=$('['+attr+'][data-selected]');var count=selected.length;for(var i=0;i<count;i++){var value=selected.eq(i).attr(attr);filter.add(value);}}}
if(result.hasOwnProperty('Price')){var filter=result['Price'];filter.min=null;filter.max=null;filter.minDefault=null;filter.maxDefault=null;$('.facet-filter-block [data-price="min"], .facet-filter-block [data-price="max"]').each(function(){var $this=$(this);var type=(''+$this.attr('data-price')).toLowerCase();var value=null;if(!isNaN(value=$this.hasClass('placeholder')?null:$this.val())){filter[type]=value;}
if(!isNaN(value=$this.attr('placeholder'))){filter[type+'Default']=value;}});}
return result;};facet.initialized=false;facet.initialize=function($identifier,$baseUrl,$counts){if(!$identifier)return;facet.initialized=true;facet.initialize=site.utils.noop;if(!$.ajax.queue('facet-filters'))$.ajax.queue.create('facet-filters');if(!$.ajax.queue('facet-results'))$.ajax.queue.create('facet-results');identifier=(''+$identifier).toLowerCase();facet.identifier=identifier;$baseUrl=$baseUrl||'/product/facet';baseUrl=(''+$baseUrl).toLowerCase();facet.baseUrl=baseUrl;site.pagination.change(function(){if(!working){facet.refresh();}});if($counts){facet.trigger('refresh-filters',[{Counts:$counts}]);}}})(window,window.site,window.jQuery);(function(window,site,$,undefined){var blocks={'T2':true,'B1':true,'B2':true,'S':true,'B':true,'M1':true,'PPV':true,'FL':true,'NU':true,'BF':true,'PR':true};var countsCache={};var updateCounts=function(data){countsCache=data;var blocks=$('[data-facet-block="FL"], [data-facet-block="NU"], [data-facet-block="BF"], [data-facet-block="PR"]');$('.js-facet-counts-updated').removeClass('js-facet-counts-updated');site.facet.updateCountsForBlocks(blocks);};site.facet.updateCountsForBlocks=function(blocks){if(blocks.length==0)return;var facet_selection=$('.facet-filter-block-selection [data-zeroitems-behaviour=hide]');var element=ui.element(window.document);for(var i=0;i<blocks.length;i++){var block=blocks.eq(i);if(block.hasClass('js-facet-counts-updated'))continue;var name=block.attr('data-facet-block');if(!name)continue;while(true){var attr=('data-'+name).toLowerCase();var items=$('['+attr+']');var counts=countsCache[name]||{};for(var j=0;j<items.length;j++){var item=items.eq(j);var value=counts[item.attr(attr)]||0;item.find('> .count, > a .count, > div > .count').eq(0).attr('data-value',value);element.node=item;element.enabled(value>0);if(facet_selection.length){item=facet_selection.find('[data-facet-id="'+name+'"][data-id="'+item.id+'"]').eq(0);element.node=item;element.enabled(value>0);}}
if(name=='B1')name='M1';else break;}
block.addClass('js-facet-counts-updated');}}
var buildSelectionHint=function(blocks){if(!blocks||(blocks.length<=0)){blocks=$('.facet-filter-block');}
var count=blocks.length;for(var i=0;i<count;i++){var block=blocks.eq(i);var attr=('data-'+block.find('[data-facet-block]').attr('data-facet-block')).toLowerCase();var hint=block.find('.facet-filter-block-selection');var all=block.find('['+attr+']:not([data-disabled])');var selected=block.find('[data-selected]');if(selected.length>0){block.find('.facet-filter-block-name .count').attr('data-value',selected.length+'/'+all.length);hint.removeAttr('data-hidden');block.find('.facet-filter-block-name').attr('data-active','on');hint.empty();block.find('[data-facet-block]').each(function(key,el){var item=ui.element(el).auto();hint.append(item.buildSelectedSubtree?item.buildSelectedSubtree(selected):'');});var handler=function(event){var item=$(event.target).hasClass('remove')?$(this).parents('[data-element=treenode]').eq(0):$(this),id=item.attr('data-id'),attr='data-'+item.attr('data-facet-id').toLowerCase(),$element=$('['+attr+'='+id+']'),type=$element.attr('data-element'),source_node=ui.element($element.get(0)).auto();if(type=='treenode'){var source_tree=source_node.tree(),remove=($(event.target).hasClass('remove'))?false:ui.treenode(item.get(0)).selected();if($(event.target).hasClass('tree-text')||(source_tree&&!source_tree.multiSelect())){source_tree.unselectAll();}
source_node.selected(remove);source_node.chooseParentOnRemoveAllSibs=true;source_tree.OnItemClick(source_node,event);}else{source_node.selected(!source_node.selected());}
var old_block=site.facet.block();site.facet.block(item.attr('data-facet-id'));site.facet.changed(true).refresh();site.facet.block(old_block);};hint.find('[data-element=treenode]').on(ui.events.CHANGE,handler);hint.find('[data-element=treenode] .remove').on('click',handler);}else{block.find('.facet-filter-block-name .count').attr('data-value',all.length);hint.attr('data-hidden','on');block.find('.facet-filter-block-name').removeAttr('data-active');}}};site.facet.buildSelectionHint=buildSelectionHint;site.facet.on('refresh-filters',function(event,data){var append=site.pagination.more()?true:false;$('[data-sort-behaviour="separate"][data-sorted]').removeAttr('data-sorted');$('[data-sort-behaviour="separate"] [data-sorted]').removeAttr('data-sorted');if(data){if(data.hasOwnProperty('Url')){if(append){data.Url=site.facet.removeURLParameter(data.Url,'page');}
$.history().push(data.Url,{history:true});site.analytics.track(data.Url);}
var countsUpdated=false;if(data.hasOwnProperty('TotalCount')){site.pagination.total(data.TotalCount).change();}
if(data.hasOwnProperty('ShowPagination')){site.pagination.updateVisibility(data.ShowPagination);}
if(data.hasOwnProperty('Breadcrumbs')){$('.breadcrumbs-wrapper').replaceWith($(data.Breadcrumbs));}
if(data.hasOwnProperty('ProductsCountOf')){$('.products-amount').replaceWith($(data.ProductsCountOf));}
if(data.hasOwnProperty('H1')){$('[data-type="H1"]').replaceWith(data.H1);}
if(data.hasOwnProperty('Description')){$('#content .page-description').html(data.Description);}
if(data.hasOwnProperty('Title')){document.title=data.Title;}
if(data.hasOwnProperty('Properties')){var properties=$(data.Properties);$('.filter-block-properties-container').html(properties);}
if(data.hasOwnProperty('Counts')){if(!countsUpdated){updateCounts(data.Counts);countsUpdated=true;}
if(data.hasOwnProperty('Price')){var min=data.Price.Min||null;var max=data.Price.Max||null;var minInput=$('[data-price="min"].facet-price-hint');var maxInput=$('[data-price="max"].facet-price-hint');$('.facet-filter-block.facet-filter-block-price').toggleClass('price-filter-inactive',data.NeedToHidePrice);minInput.val(min);maxInput.val(max);if(minInput.val()==''){minInput.val('');}
if(maxInput.val()==''){maxInput.val('');}}}
if(site.facet.identifier=='cars'){var blocks=$('.facet-filter-block');var categoryBlock=$('[data-facet-block="T2"]',blocks).eq(0);var solutionBlock=$('[data-facet-block="S"]',blocks).eq(0);blocks.removeClass('facet-filter-disabled-block');if($('[data-selected]',categoryBlock).length>0){solutionBlock.parents('.facet-filter-block').addClass('facet-filter-disabled-block');}
if($('[data-selected]',solutionBlock).length>0){categoryBlock.parents('.facet-filter-block').addClass('facet-filter-disabled-block');}}
buildSelectionHint();}});site.facet.on('refresh-results',function(event,object,lastUrl){var append=site.pagination.more()?true:false;var container=$('#right-panel-content-wrapper');if(!append){container.empty();}
site.cart.enableEditing=false;$(".product-desc-hint").remove();$('[data-log-product-id]').removeAttr('data-log-product-id').attr('data-catalog',1);if(object){site.facet.trigger('before_refresh');var data=object.htmlParams();if(data.hasOwnProperty('Url')){if(append){data.Url=site.facet.removeURLParameter(data.Url,'page');}
$.history().push(data.Url,{history:true});site.analytics.track(data.Url);}
if(data.hasOwnProperty('H1')){$('[data-type="H1"]').replaceWith(data.H1);}
if(data.hasOwnProperty('Description')){$('#content .page-description').html(data.Description);}
if(data.hasOwnProperty('Title')){$('head title').text(data.Title);}
if(data.hasOwnProperty('Breadcrumbs')){$('.breadcrumbs-wrapper').replaceWith($(data.Breadcrumbs));if(lastUrl){$('.breadcrumbs-wrapper .back').attr('href',lastUrl);}}
if(data.hasOwnProperty('ShowPagination')){site.pagination.updateVisibility(data.ShowPagination);}
if(append){container.append(object.htmlParamsRemove());site.pagination.page(1);}else{container.html(object.htmlParamsRemove());}
site.pagination.more(false);site.cart.enableEditing=true;site.cart.refresh();if($.fn.tipsy){$('#sidebar .block-search .category-search-wrapper').tipsy({gravity:'s',delayIn:3000,title:function(){return $(this).attr('data-hint')}});}
if(site.product.slideRebuild){site.product.slideRebuild(container);}
if(typeof site.comparison!='undefined'){site.comparison.update_checkbox();site.comparison.initialize();}
site.user.RequestLog();}});})(window,window.site,window.jQuery);(function($,site,undefined){instance=$({});site.models=instance;instance.initialized=true;instance.initialize=site.utils.noop;var all=false;var loadingAll=false;var cache={};var counts={};var countsUpdated={};var getFromCache=function(brand){if(!cache.hasOwnProperty(brand))return null;var result=cache[brand];if(!countsUpdated[brand]){for(var i in result){result[i].Q=counts[result[i].M]||0;}
countsUpdated[brand]=true;}
return result;}
var loadModelsHandler=function(){var brand=this.context;if(!brand)return;if(this.success){if($.type(this.data)!='object')return;for(var id in this.data){if(!cache.hasOwnProperty(id)){cache[id]=this.data[id];countsUpdated[id]=false;}}
if(!this.data.hasOwnProperty(brand))return;instance.trigger('ready',[brand,getFromCache(brand)]);}else{instance.trigger('ready',[brand,getFromCache(brand)]);}}
var loadAllHandler=function(){loadingAll=false;if(this.success){if($.type(this.data)!='object')return;for(var brand in this.data){cache[brand]=this.data[brand];countsUpdated[brand]=false;}
all=true;instance.trigger('ready',[0,cache]);}else{all=false;instance.trigger('ready',[0,null]);}}
site.facet.on('refresh-filters',function(event,data){if(data.hasOwnProperty('Counts')){var data=data.Counts;if(data.hasOwnProperty('M1')){if($.type(data['M1'])=='object'){counts=data['M1'];countsUpdated={};}}}});instance.load=function(brand){if(!site.facet.initialized)return;if(brand){if(cache.hasOwnProperty(brand)){instance.trigger('ready',[brand,getFromCache(brand)]);return;}}else{if(all){instance.trigger('ready',[0,null]);return;}}
var params=[];params.push('ajax=on');if(brand){params.push('brand='+encodeURIComponent(brand));site.ajax.get('/facet/models/'+site.facet.identifier+'?'+params.join('&'),loadModelsHandler,brand);}else{if(loadingAll)return;var loaded=[];for(var brand in cache){loaded.push(encodeURIComponent(brand));}
if(loaded.length>0){params.push('exclude='+loaded.join(','));}
loadingAll=true;site.ajax.get('/facet/models/'+site.facet.identifier+'?'+params.join('&'),loadAllHandler);}}
instance.get=function(filter,selected){var result={};for(var brand in cache){var models=cache[brand];if(!countsUpdated[brand]){for(var i in models){models[i].Q=counts[models[i].M]||0;}
countsUpdated[brand]=true;}
var items=site.models.filter(models,filter,selected);var models=[];for(var i in items){if(items[i].Q>0){models.push(items[i]);}}
if(models.length>0){result[brand]=models;}}
return result;}
instance.filter=function(models,filter,selected){filter=''+(filter||'');if(filter&&$.type(match)=='function'){selected=selected||[];var result=[];for(var i=0;i<models.length;i++){if((selected.indexOf(''+models[i].M)>-1)||(selected.indexOf(models[i].M)>-1)){result.push(models[i]);}else
if((offset=match(models[i].N,filter))!==false){models[i].O=offset;result.push(models[i]);}}
return result;}else{return models;}}
instance.sort=function(models){models.sort(function(a,b){var sa=a.S||99999;var sb=b.S||99999;if(sa>sb)return 1;if(sa<sb)return-1;return 0;});return models;}})(jQuery,window.site);(function($,site,undefined){var models=site.models;models.buildHtml=function(models,selected,filter,buildAll,needle){selected=selected||[];filter=filter?(''+filter).toLowerCase():false;var result=[];var columns=models.length>=4;for(var i=0;i<models.length;i++){var is_selected=(selected.indexOf(''+models[i].M)>-1)||(selected.indexOf(models[i].M)>-1);if(is_selected||buildAll){var text=models[i].N;if(text.length>8)columns=false;if(models[i].O!=undefined){text=lightTextAjax(models[i].N,models[i].O,needle);}
var id=filter?' data-'+filter+'="'+parseInt(models[i].M)+'"':'';var enabled=(models[i].Q>0)?'':' data-disabled="1"';result.push('<li data-element="treenode" data-nochildren="1"'+enabled+' data-sort-index="'+parseInt(models[i].S||99999)+'"'+id+(is_selected?' data-selected="1"':'')+'>'+'<div><div class="shade"><a class="tree-text" href="javascript:void(0)">',text,'</a></div><span class="count" data-value="'+models[i].Q+'"></span></div></li>');}}
var result=$(result.join(''));result.columns=columns;return result;}})(jQuery,window.site);(function($,site,undefined){var instance=$({});site.carBrands=instance;instance.initialized=true;instance.initialize=site.utils.noop;var cache={};var counts={};var countsUpdated={};var getFromCache=function(brand){if(!cache.hasOwnProperty(brand))return null;var result=cache[brand];if(!countsUpdated[brand]){var items=result.filter('[data-b]');for(var i=0;i<items.length;i++){var item=items.eq(i);var value=counts[item.attr('data-b')]||0;item.find('> div > .count').attr('data-value',counts[item.attr('data-b')]||0);}
var items=result.find('[data-b]');for(var i=0;i<items.length;i++){var item=items.eq(i);var value=counts[item.attr('data-b')]||0;item.find('.count').attr('data-value',counts[item.attr('data-b')]||0);}
countsUpdated[brand]=true;}
return result;}
site.facet.on('refresh-filters',function(event,data){if(data.hasOwnProperty('Counts')){var data=data.Counts;if(data.hasOwnProperty('B')){if($.type(data['B'])=='object'){counts=data['B'];countsUpdated={};}}}});var loadModelsHandler=function(){if(!this.success)return;var brand=this.context;var tree=$(this.data);if(brand){var items=tree.find('[data-b="'+brand+'"] > ul > li');cache[brand]=items;countsUpdated[brand]=false;instance.trigger('ready',[brand,getFromCache(brand)]);}else{var nodes=tree.find('[data-facet-block="B"] > [data-element="treenode"]');var subitems={};for(var i=0;i<nodes.length;i++){var node=nodes.eq(i);var brand=node.attr('data-b');var items=node.find('> ul > li');cache[brand]=items;countsUpdated[brand]=false;subitems[brand]=getFromCache(brand);}
instance.trigger('ready',[null,subitems]);}}
instance.load=function(brand){if(cache.hasOwnProperty(brand)){instance.trigger('ready',[brand,getFromCache(brand)]);return;}
var params=[];params.push('ajax=on');if(brand){params.push('brand='+encodeURIComponent(brand));}
site.ajax.get('/facet/models/'+site.facet.identifier+'?'+params.join('&'),loadModelsHandler,brand);}})(jQuery,window.site);(function(window,site,$,undefined){var absoluteTop=function findPos(obj){var node=obj[0];var current=0;var scroll=0;var htmlScrollTop=$('html').scrollTop();if(node.offsetParent){do{current+=node.offsetTop;if(node.offsetParent){var parentTagName=node.offsetParent.tagName.toLowerCase();scroll+=parentTagName=='body'&&htmlScrollTop!=0?0:node.offsetParent.scrollTop;}}while(node=node.offsetParent);current=current-scroll;}
if(window.document.body&&window.document.body.parentNode){var html=window.document.body.parentNode;current-=html.scrollTop||0;}
return current;}
site.dropdown.beforeShow(function(event,current,dropdown){if(current&&current.hasClass('facet-filter-block-popup')){current.parents('.facet-filter-block').removeClass('hover');}});var hideTimerHandler=function(current){if(current&&current.hasClass('facet-filter-block-popup')){site.dropdown.beforeHide(current);current.parents('.facet-filter-block').removeClass('hover');site.dropdown.afterHide(current);current.siblings('.facet-filter-block-popup-background').hide();}}
var filters=$({});site.filters=filters;filters.initialized=false;filters.initialize=function(){site.dropdown.initialize();filters.initialized=true;filters.initialize=site.utils.noop;var selector=[];for(var i in map){if(map.hasOwnProperty(i)){selector.push('['+i+']');}}
if(selector.length>0){selector=selector.join(',');$('body').on(ui.events.CHANGE,selector,filters.OnFilterItemClick);}};var map={'data-t2':'T2','data-b1':'B1','data-b2':'B2','data-m1':'M1','data-m2':'M2','data-fl':'FL','data-nu':'NU','data-bf':'BF','data-pr':'PR','data-pp':'PP','data-ppv':'PPV','data-s':'S','data-b':'B'};filters.OnFilterBlockToggleShow=function(event){var target=$(event.target).parents('.facet-filter-block').eq(0);if(target.hasClass('facet-filter-disabled-block'))return;if(target.hasClass('hover')){filters.OnFilterBlockCloseClick.call(target,event);}else{filters.OnFilterBlockMouseover.call(target,event);}
if($("header .search-wrapper form").length&&!$("header .search-wrapper form").hasClass("low-z")){$("header .search-wrapper form").addClass("low-z");}};filters.OnFilterBlockExpandAllClick=function(event){var block=$(this).parents('.facet-filter-block').eq(0);block.find('.expand-all-wrapper .expand-all').hide();block.find('.expand-all-wrapper .collapse-all').show();var tree=block.find('.facet-filter-block-popup [data-element="tree"]');if(tree.length){ui.tree(tree.get(0)).expand();}};filters.OnFilterBlockCollapseAllClick=function(event){var block=$(this).parents('.facet-filter-block').eq(0);block.find('.expand-all-wrapper .expand-all').show();block.find('.expand-all-wrapper .collapse-all').hide();var tree=block.find('.facet-filter-block-popup [data-element="tree"]');if(tree.length){ui.tree(tree.get(0)).collapse();}};filters.OnFilterBlockMouseover=function(event){var block=$(this);site.dropdown.killTimer();site.facet.block(block.find('[data-facet-block]').attr('data-facet-block'));var popup=block.find('.facet-filter-block-popup');function resizePopup(){var h=$(window).innerHeight();var t=-absoluteTop(block)-1;var scrollTop=document.documentElement.scrollTop||document.body.scrollTop;var headerHeight=$("#content-wrapper").position().top;if(headerHeight-scrollTop>0){headerHeight=headerHeight-scrollTop;t=t+headerHeight;h=h-headerHeight;}
popup.css({'top':t+'px','height':h+'px'});}
resizePopup();block.find('[data-sort-behaviour]').each(function(){var element=ui.element(this).auto();if($.type(element.sort)=='function'){element.sort();}
var children=$(this).find('[data-expanded]');for(var i=0;i<children.length;i++){var element=ui.element(children[i]).auto();if($.type(element.sort)=='function'){element.sort();}}});site.facet.updateCountsForBlocks(block.find('[data-facet-block]'));var oldPopup=site.dropdown.current();if(oldPopup&&(popup.get(0)!=oldPopup.get(0))){hideTimerHandler(oldPopup);}
site.dropdown.beforeShow(popup);site.fake_background.show(filters.OnFilterBlockCloseClick);block.addClass('hover');site.dropdown.afterShow(popup);};filters.OnFilterBlockMouseout=function(event){var facetFilterBlock=$(event.target).parents(".facet-filter-block");site.dropdown.setTimer(hideTimerHandler,site.dropdown.dropdownMenuLeaveDelay);};filters.OnFilterBlockClearClick=function(event){var block=$(this).parents('.facet-filter-block').eq(0);var selected=block.find('[data-selected]');selected.removeAttr('data-selected');block.find('.facet-filter-block-selection').attr('data-hidden','on');block.find('.facet-filter-block-name').removeAttr('data-active');site.facet.changed(true).refresh();event.cancel();}
filters.OnFilterBlockCloseClick=function(event){var current=site.dropdown.current();site.fake_background.hide();if(current&&current.hasClass('facet-filter-block-popup')){site.dropdown.beforeHide(current);current.parents('.facet-filter-block').removeClass('hover').find('.facet-filter-block-popup-background').hide();site.dropdown.afterHide(current);}
if($("header .search-wrapper form").length&&$("header .search-wrapper form").hasClass("low-z")){$("header .search-wrapper form").removeClass("low-z");}}
filters.OnClearAllClick=function(event){var selected=$('.facet-filter-block [data-selected]');selected.removeAttr('data-selected');var prices=$('[data-price]');for(var i=0;i<prices.length;i++){prices.eq(i).val('').blur();}
site.facet.block('T2');site.facet.changed(true).refresh();site.facet.block(null);event.cancel();}
filters.OnFilterItemClick=function(event){var blocks=$(this).parents('.facet-filter-block');if(blocks.length>0){site.facet.buildSelectionHint(blocks);}
site.facet.changed(true).refresh();var prices=$('[data-price]');for(var i=0;i<prices.length;i++){prices.eq(i).blur();}
if(headLightbox==null){blocks.find('.facet-filter-block-popup-background').hide();}
event.cancel();}
var headLightbox=null;var headImages=[];var closePopup=function(e){if(e.keyCode==27){site.filters.OnCloseHeadPopup(e);}};var setFacetFilterBlockHideStatus=function(block,status){var tree=block.find('.sidebar-tree');if(status){var oldMouseLeave=block.attr('data-action-mouseleave-tmp');if(oldMouseLeave){block.attr('data-action-mouseleave',oldMouseLeave);block.removeAttr('data-action-mouseleave-tmp');}
var oldClickName=tree.attr('data-clickname-behaviour-tmp');if(oldClickName){tree.attr('data-clickname-behaviour',oldClickName);tree.removeAttr('data-clickname-behaviour-tmp');}}else{block.attr('data-action-mouseleave-tmp',block.attr('data-action-mouseleave'));block.attr('data-action-mouseleave','');tree.attr('data-clickname-behaviour-tmp',tree.attr('data-clickname-behaviour'));tree.attr('data-clickname-behaviour','');}};var getFullNameByTreeNode=function(treeNodeParents){var fullNameArr=[];for(var i=0,len=treeNodeParents.length;i<len;i++){var treeNode=treeNodeParents.eq(i);fullNameArr.push(treeNode.find('> div .tree-text').text());}
fullNameArr.reverse();return fullNameArr.join(" ");}
filters.OnOpenHeadPopup=function(event,isList){isList=isList||false;var wrapper=$(this).parents('.facet-filter-block');setFacetFilterBlockHideStatus(wrapper,false);wrapper.find('.facet-filter-block-popup-background').show();headLightbox=wrapper.find('.lightbox');if(!headLightbox)return;var imgWrapper=$('.head-img-wrapper',headLightbox);var imgListWrapper=$('.head-img-list-wrapper',headLightbox);var treeNodeParents=$(this).parents('[data-element="treenode"]');var fullName=getFullNameByTreeNode(treeNodeParents);if(isList){imgWrapper.hide();imgListWrapper.show();$('div.popup-title',imgListWrapper).html(fullName);var subItems=$(this).closest('[data-element="treenode"]').find('> ul li:not([data-disabled]) .show-head-image');var popupHtml='';for(var i=0,len=subItems.length;i<len;i++){var subItem=subItems.eq(i);var id=subItem.attr('data-action-id');var text=subItem.siblings('.tree-text').text();popupHtml+='<div class="left">'+'<span>'+text+'</span>'+'<img class="head-img-medium" src="'+
subItem.attr('data-image-medium')+'"'+' data-action-click="site.filters.OnFilterHeadImgClick"'+' data-action-id="'+id+'"'+'>'+'</div>';}
popupHtml+='<div class="clear"></div>';var listWrapper=$('.list-wrapper',imgListWrapper);listWrapper.html(popupHtml);}else{imgListWrapper.hide();imgWrapper.show();$('.indicator-wrapper .lightbox-product-name',imgWrapper).html(fullName);var url=$(this).attr('data-image-large');var id=$(this).attr('data-action-id');var headLightboxImg=headLightbox.find('img');headLightboxImg.attr('src',url).attr('data-action-id',id);}
headLightbox.show();$(document).keyup(closePopup);if(listWrapper){listWrapper.scrollTop(0);}};filters.OnOpenHeadListPopup=function(event){site.filters.OnOpenHeadPopup.call(this,event,true);};filters.OnCloseHeadPopup=function(event){if(!headLightbox)return;var wrapper=headLightbox.parents('.facet-filter-block');setFacetFilterBlockHideStatus(wrapper,true);headLightbox.hide();headLightbox=null;$(document).unbind("keyup",closePopup);};filters.OnFilterHeadImgClick=function(event){var block=$(this).parents('.facet-filter-block').eq(0);var headId=$(this).attr('data-action-id');$('[data-b="'+headId+'"]',block).find('> div .tree-text').click();site.filters.OnCloseHeadPopup(event);};site.models.on('ready',function(event,brand,models){if(brand&&!models)return;var block=$('[data-facet-block="B1"]');var needle=block.parent().parent().parent().find('.search-input-control input').val()||'';if(brand){var list=$('[data-b1="'+brand+'"] ul');var selected=list.find('[data-selected]').attributes('data-m1');var models=site.models.filter(models,needle,[]);if(block.attr('data-zeroitems-behaviour')=='hide'){for(var i=models.length-1;i>=0;i--){if(models[i].Q<=0){models.splice(i,1);}}}
if(models.length>0){ui.element(list.parent().get(0)).setProp('no-match',false);}else{ui.element(list.parent().get(0)).auto().collapse();ui.element(list.get(0)).setProp('no-match',true);}
var items=site.models.buildHtml(site.models.sort(models),selected,'M1',true,needle);list.removeClass('columns-2').html(items);if(items.columns)list.addClass('columns-2');}else{if(needle){ui.element(block.get(0)).auto().expand();}else{ui.element(block.get(0)).auto().collapse();}}});var OnCellphonesB1TreeExpand=function(event,item){if(item.node.find('ul li').length>0)return;var id=item.getProp('b1');if(id)site.models.load(id);};var OnCellphonesB1TreeCollapse=function(event,item){var subitems=item.node.find('ul');var selected=subitems.find('[data-selected]');if(selected.length>0)return;subitems.empty();};site.carBrands.on('ready',function(event,brand,subtree){var block=$('[data-facet-block="B"]');var needle=block.parent().parent().parent().find('.search-input-control input').val()||'';if(brand){var list=$('[data-b="'+brand+'"] > ul');list.html(subtree.clone());}else{for(var brand in subtree){if(subtree.hasOwnProperty(brand)){var list=$('[data-b="'+brand+'"] > ul');list.html(subtree[brand].clone());}}}
if(needle){var tree=ui.element(block.get(0)).auto();if($.type(tree.search)=='function')tree.search(needle);if($.type(tree.expand)=='function')tree.expand();}});var OnCellphonesCarsBTreeExpand=function(event,item){if(item.parent())return;if(item.node.find('ul li').length>0)return;var id=item.getProp('b');if(id)site.carBrands.load(id);};var OnCellphonesCarsBTreeCollapse=function(event,item){if(item.parent())return;var subitems=item.node.find('ul');var selected=subitems.find('[data-selected]');if(selected.length>0)return;subitems.empty();};ui.ready(function(){var body=$('body');body.on('click','span[data-url]',function(){$(this).parent().find('.tree-text').click();}).on('blur','.facet-filter-block [data-price]',site.facet.validate).on(ui.events.EXPAND,'[data-facet-block="B1"][data-ajax]',OnCellphonesB1TreeExpand).on(ui.events.COLLAPSE,'[data-facet-block="B1"][data-ajax]',OnCellphonesB1TreeCollapse).on(ui.events.EXPAND,'[data-facet-block="B"][data-ajax]',OnCellphonesCarsBTreeExpand).on(ui.events.COLLAPSE,'[data-facet-block="B"][data-ajax]',OnCellphonesCarsBTreeCollapse);});})(window,window.site,window.jQuery);(function(window,site,ui,$){var loadProductCallback=function(){if(this.success){var currentUrl=window.location.href;site.facet.trigger('refresh-results',[$(this.data),currentUrl]);site.product.createPaging();}else{site.facet.trigger('refresh-results',[undefined]);}
$(window).scrollTop(0);};if(!$.ajax.queue('facet-results'))$.ajax.queue.create('facet-results');site.classes.product=site.classes.base.extend({vmt:{productId:null,options:{suggestPriceFormSelector:'.product-suggest-price .price-suggest',suggestPriceWrapperSelector:'.product-suggest-price'},t:window.t,initialized:false,initialize:function(id){this.productId=id;this.initialized=true;this.initialize=site.utils.noop;if(window.location.hash.length>0&&window.location.hash=='#reviews'){this.scrollToReviews();}},createPaging:function(){var devider=$('.specialProposition-pagination').attr('data-devider');var activeIndex=site.slider['specialProposition']?site.slider['specialProposition'].activeIndex:0;if(site.slider['specialProposition']){site.slider['specialProposition'].destroy()}
if($('.special-proposition .swiper-slide').length>1){site.slider.create('specialProposition',{'autoHeight':true,'slidesPerView':'auto','centeredSlides':true,'paginationType':'bullets','paginationFractionRender':function(swiper,currentClass,totalClass){return'<span class="'+currentClass+'">'+totalClass+'</span> '+devider+' <span class="'+totalClass+'"></span>';},'breakpoints':{960:{'paginationType':'fraction','spaceBetween':5}}});site.slider['specialProposition'].slideTo(activeIndex,0);}else{$('.special-proposition').addClass('swiper-disabled');}},initPaging:function(){var swiper=site.slider.get('specialProposition');if(swiper&&swiper.destroy){var realIndex=swiper.realIndex;swiper.destroy();site.slider.create('specialProposition',{'initialSlide':parseInt(realIndex)});}},scrollToReviews:function(){var link=$("a[data-target='reviews']");setTimeout(function(){if(link.attr('data-selected')!='on'){link.click();}
$('html,body').animate({scrollTop:$("#reviews").offset().top-20},300);},500);},scrollToAnalogues:function(){$('html,body').animate({scrollTop:$("#analogues").offset().top-20},300);},load:function(id){if(!id)return;var queue=$.ajax.queue('facet-results');if(queue){var url='/item/'+id+'?ajax=on';queue.clear().get(url,loadProductCallback)}
return this;},OnOpenProductPage:function(event){if(!$.history().native()){return;}
var id=$(this).parents('li[data-id]').eq(0).attr('data-id');if(!id){var id=$(this).parents('tr[data-id]').eq(0).attr('data-id');}
site.product.load(id);$('.pagination-wrapper-top').find('a').each(function(elem,test){$(test).attr('rel','nofollow')})
$('.pagination-wrapper-bottom').find('a').each(function(i,elem){$(elem).attr('rel','nofollow')})
event.cancel();},OnLoadProductInfoTab:function(event,doNotScroll){event.preventDefault();var button=$(this);var url='';var wrapper=button.parents('.product-page').eq(0);if(wrapper.length<=0)return;var container=$('[data-container="'+button.attr('data-target')+'"]');if(container.hasClass('loaded')&&button.attr('data-toggle')){wrapper.find('[data-target]').not(button).removeAttr('data-selected');wrapper.find('[data-container]').not(container).attr('data-hidden','on');if(typeof button.attr('data-selected')!==typeof undefined&&button.attr('data-selected')!==false){button.removeAttr('data-selected');container.attr('data-hidden','on');}else{button.attr('data-selected','on');container.removeAttr('data-hidden');}
return;}
wrapper.find('[data-container]').attr('data-hidden','on');container.removeAttr('data-hidden');wrapper.find('.product-info-menu [data-selected]').removeAttr('data-selected');$('[data-target='+button.attr('data-target')+']').attr('data-selected','on');if(container.hasClass('loaded')){$('body').trigger('product-infotab-load');return;}
var id=button.attr('data-value');if(id){var type=button.attr('data-target');var dependenceArr=['analogue','related'];if(jQuery.inArray(type,dependenceArr)!=-1){url='/ajax/product/dependence/'+id+'/'+type;}else{url='/content/'+id+'?ajax=on&dontredirect=1';}}
if(button.attr('data-url')){url=button.attr('data-url');}
if(url){site.ajax.get(url,function(){container.addClass('loaded').find('h2').next('.'+$(this.data).first().attr('class')).remove();container.find('h2').after(this.data);if(!doNotScroll){$('body').trigger('product-infotab-load');}});}},checkUrlHash:function(){if(window.location.hash){var cleanHash=window.location.hash.substring(1);var allowableArray=['analogues'];if(jQuery.inArray(cleanHash,allowableArray)!=-1){setTimeout(function(){var button=$('#'+cleanHash);button.trigger('click');},1);}}},loadForm:function(params){var form=$(params.formSelector);if(!form.children().length){$.get(params.url,params.data,function(response){if(response){form.html(response);if(params.append){form.append(params.append);}}});}},onShowProductWebPrices:function(){$('.product-web-prices').eq(0).addClass('hover');site.fake_background.show(site.product.onHideProductWebPrices);},onHideProductWebPrices:function(){$('.product-web-prices').eq(0).removeClass('hover');site.fake_background.hide();},deliveryCalculator:function(productId){this.loadForm({url:'/ajax/deliveryprice/calculator',formSelector:'.product-delivery .delivery-calculator',data:{'id':productId}});},onShowDeliveryCalculator:function(){$('.product-delivery').eq(0).addClass('hover');site.product.deliveryCalculator($(this).attr('data-product-id')||site.product.productId);site.fake_background.show(site.product.onHideDeliveryCalculator);},onHideDeliveryCalculator:function(){$('.product-delivery').eq(0).removeClass('hover');site.fake_background.hide();},getMinDeliveryPrice:function(){var wrapper=$('.product-delivery');if(wrapper.length){var url='/ajax/deliveryprice/calculator';var data={'type':'min','id':wrapper.find('[data-product-id]').attr('data-product-id')||this.productId};$.get(url,data,function(response){if(response&&response.Name){var title=response.Price?response.Name+' '+response.Price:response.Name;wrapper.find(".delivery-service-and-cost").html(title);wrapper.find(".min-delivery-description").html(response.Description);if(response.Warning){wrapper.find(".min").addClass('disable').removeAttr('data-action-click');}}else{wrapper.remove();}},'json');}},onShowSuggestPrice:function(id){var formSelector=this.options.suggestPriceFormSelector;var suggestPriceSelector=this.options.suggestPriceWrapperSelector;if($('.product-list-wrapper').length){formSelector='li[data-id="'+id+'"] '+formSelector;suggestPriceSelector='li[data-id="'+id+'"] '+suggestPriceSelector;}
$(suggestPriceSelector).eq(0).addClass('hover');this.loadForm({url:'/suggestprice/'+id,formSelector:formSelector,append:'<a href="javascript:site.product.onHideSuggestPrice()" class="ui-lightbox-close close"></a>'});site.fake_background.show(site.product.onHideSuggestPrice);},onHideSuggestPrice:function(){$('.product-short-info').eq(0).removeClass('hover');site.fake_background.hide();$(site.product.options.suggestPriceFormSelector).html('');},showMoreSuggestPriceFields:function(){$(this).parent().hide().next('div').removeClass('hidden');}}});})(window,window.site,window.ui,window.jQuery);(function(window,site,ui,$){var lightbox=null;var images=[];var current=-1;var updateLightboxButtons=function(){if(!lightbox)return;var button=lightbox.find('.prev-image');var fulSizeBlock=lightbox.find('.indicator-wrapper .full-size');current=(current<0)?0:current;(current<1)?button.addClass('hidden'):button.removeClass('hidden');button=lightbox.find('.next-image');(current>=images.length-1)?button.addClass('hidden'):button.removeClass('hidden');if(images.length>1){lightbox.find('.indicator .current').text(current+1);}
if(images[current]!==undefined&&images[current]['large-url']!==undefined){fulSizeBlock.removeClass('hidden').find('a').attr('href',images[current]['large-url']);}else{fulSizeBlock.addClass('hidden').find('a').attr('href','javascrip:void(0)');}};var setPopupPosition=function(){if(!lightbox)return;var content=lightbox.find('.lightbox-content');var windowWidth=$(window).width();var windowHeight=$(window).height();var fixed=Math.min(windowWidth,windowHeight,800)-60;content.find('img').css({'width':(fixed)+'px','height':(fixed)+'px'});var top=(windowHeight-content.outerHeight())/2;top=top<10?0:top;content.css({'top':top+'px','left':((windowWidth-content.outerWidth())/2)+'px'});};var closePopup=function(e){if(e.keyCode==27){site.product.OnClosePopup(e);}};site.classes.product_main=site.classes.product.extend({vmt:{slideRebuild:function($container){var $imagesWrap=$('.product-images',$container);var $images=$('.product-image-list img',$imagesWrap);var childrenWidth=0;$images.each(function(){childrenWidth+=$(this).outerWidth(true);});var $arrows=$('.prev-image, .next-image',$imagesWrap);if($imagesWrap.width()>childrenWidth){$arrows.hide();}else{$arrows.show();}},OnSlideLeft:function(event){},OnSlideRight:function(event){},OnOpenPopup:function(event){var wrapper=$(this).parents('.product-page');lightbox=wrapper.parent().find('.lightbox');images=[];if(!lightbox)return;var i=0;var url=$(this).attr('data-url');var alt=$(this).attr('data-alt');wrapper.find('.product-images .product-image-list a').each(function(){if(url==$(this).attr('data-url')){current=i;}
images.push({'url':$(this).attr('data-url'),'large-url':$(this).attr('data-large-url'),'alt':$(this).attr('data-alt')});i++;});lightbox.find('img').attr('src',url);lightbox.find('img').attr('alt',alt);lightbox.find('img').attr('title',alt);updateLightboxButtons();lightbox.show();setPopupPosition();lightbox.find('img').on('load',setPopupPosition);$(document).keyup(closePopup);},OnClosePopup:function(event){if(!lightbox)return;lightbox.hide();lightbox=null;$(document).unbind("keyup",closePopup);},OnPopupPrev:function(event){if(!lightbox)return;current--;if(current<0){current=0;return;}
if(current<images.length){lightbox.find('img').attr('src',images[current]['url']);lightbox.find('img').attr('alt',images[current]['alt']);lightbox.find('img').attr('title',images[current]['alt']);}
updateLightboxButtons();},OnPopupNext:function(event){if(!lightbox)return;current++;if(current>=images.length){current=images.length-1;return;}
if(current>=0){lightbox.find('img').attr('src',images[current]['url']);lightbox.find('img').attr('alt',images[current]['alt']);lightbox.find('img').attr('title',images[current]['alt']);}
updateLightboxButtons();},scrollTo:function(event){event.preventDefault();var id=$(this).attr('data-target');$('html,body').animate({scrollTop:$('#'+id).offset().top-20},300);}}});})(window,window.site,window.ui,window.jQuery);(function(window,site,ui,$,undefined){var _class=new site.classes.product_main();var product=_class.createNamespace();site.product=product;var comboFrameLocker=false;var comboContainerWidthChanged=function(){var container=$('.product-combo-container');var currentFrame=$('.product-combo-wrapper:visible',container);var leftCol=$('.left-col',currentFrame);var rightColWidth=225;var productItems=$('[data-product-id]',currentFrame);var productWidth=0;productItems.each(function(index){productWidth+=$(this).outerWidth(true);});$('.product-combo-wrapper',container).removeClass('combo-in-one-line');if(productWidth+rightColWidth<currentFrame.parent().width()-50){currentFrame.addClass('combo-in-one-line');if(productWidth>0){leftCol.css({width:productWidth+7});}}else{currentFrame.removeClass('combo-in-one-line');leftCol.removeAttr('style');}};var changeComboFrame=function(elem,duration,currentFrameId){duration=duration||'next';currentFrameId=currentFrameId||null;var container=elem.parents('.product-combo-container');var frames=$('[data-product-combo-id]',container);var frameIndex,frameIds=[];frames.each(function(i){frameIds[i]=$(this).attr("data-product-combo-id");});var currentFrame=$('.product-combo-wrapper:visible',container);var currentFrameIndex=currentFrame.index('.product-combo-wrapper');if(!currentFrameId){if(duration=='next'){frameIndex=(currentFrameIndex!=frameIds.length-1)?currentFrameIndex+1:0;}else{frameIndex=(currentFrameIndex!=0)?currentFrameIndex-1:frameIds.length-1;}
currentFrameId=frameIds[frameIndex];}
var regularFrame=$('[data-product-combo-id="'+currentFrameId+'"]',container);var isOneLineClass=currentFrame.hasClass('combo-in-one-line');currentFrame.css({display:"none"});regularFrame.css({position:"absolute",visibility:"hidden",display:"block"});comboContainerWidthChanged();if(isOneLineClass){currentFrame.addClass('combo-in-one-line');}else{currentFrame.removeClass('combo-in-one-line');}
currentFrame.css({display:"block"});regularFrame.css({position:"",visibility:"",display:""});comboFrameLocker=true;currentFrame.fadeOut(400,function(){var indicatorWrapper=$('.product-combo-indicator',container);var indicatorItems=$('[data-product-combo-goto]',indicatorWrapper);indicatorItems.removeClass('current');$('.product-combo-indicator [data-product-combo-goto="'+currentFrameId+'"]').addClass('current');regularFrame.fadeIn(400,function(){comboFrameLocker=false;});});};site.product.prevCombo=function(){if(comboFrameLocker)return false;var elem=$(this);changeComboFrame(elem,'prev');};site.product.nextCombo=function(){if(comboFrameLocker)return false;var elem=$(this);changeComboFrame(elem,'next');};site.product.gotoCombo=function(){if(comboFrameLocker)return false;var elem=$(this);var frameIndex=elem.attr('data-product-combo-goto');changeComboFrame(elem,null,frameIndex);};site.product.onComboContainerWidthChanged=function(){comboContainerWidthChanged();};$(function(){$('body').on('product-infotab-load',function(event){$('html,body').animate({scrollTop:$('#product-full-info').offset().top-20},300);});$(window).resize(function(){comboContainerWidthChanged();});});})(window,window.site,window.ui,jQuery);(function($,site,undefined){var content=$({});site.content=content;var identifier=null;content.initialized=false;content.OnOpenContentListPage=function(event){var id=$(this).attr('data-id');content.list(id);site.pagination.page(1).change();$('.h2-link').removeClass('active');$('.h1-link').removeClass('active');$(this).addClass('active');event.cancel();}
content.OnOpenContentPage=function(event){if(!$.history().native()){return;}
var id=$(this).attr('data-id');content.details(id);$('.h2-link').removeClass('active');$(this).addClass('active');$('.h1-link').removeClass('active');var parent=$(this).attr('data-parent-id');$('aside [data-id="'+parent+'"]').addClass('active');event.cancel();}
content.initialize=function($identifier){content.initialized=true;content.initialize=site.utils.noop;identifier=$identifier;$.ajax.queue.create('content-results');var changes=null;content.list=function(id,_changes){changes=_changes;identifier=id||identifier;if(!identifier)return;var queue=$.ajax.queue('content-results');if(queue){var url='/content/category/'+identifier+'?ajax=on&ipp='+site.pagination.ipp()+'&page='+site.pagination.page();queue.clear().get(url,refreshResultCallback);}
return this;}
content.details=function(id){if(!id)return;var queue=$.ajax.queue('content-results');if(queue){var url='/content/'+id+'?ajax=on&dontredirect=1';queue.clear().get(url,refreshResultCallback);}
return this;}
var refreshResultCallback=function(){if(this.success&&this.data){content.trigger('refresh-results',[$(this.data),changes]);}else{content.trigger('refresh-results',[undefined]);}}}})(jQuery,window.site);(function($,site,undefined){site.content.on('refresh-results',function(event,d,changes){var params=d.htmlParams();if(params.hasOwnProperty('Url')){$.history().push(params.Url,{history:true});site.user.RequestLog();site.analytics.track(params.Url);}
if(changes&&changes['moreItems']){var items=d.find('.info-block-wrap ul').children();items.length?$('.info-block-wrap ul').append(items):null;}else{$('#inner-content').html(d);}});site.pagination.change(function(event,changes){if(!site.content.initialized)return;var id=$('aside .h1-link.active').attr('data-id');site.content.list(id,changes);});})(jQuery,window.site);(function($,site,undefined){var $content=$($('.content-wrapper')[0]);var collageArr=$content.find('.image-collage');var myData={'allResolution':{},'onlyMobile':{}};for(var i=0;i<collageArr.length;i++){var collageCount=$(collageArr[i]).find('.image-wrapper').length;var $imageCollage=$(collageArr[i]);$imageCollage.attr('data-img-count',collageCount);if(collageCount===3||collageCount===4){myData.onlyMobile["collage_"+i]={"domEl":$imageCollage,"slideCount":collageCount,"swiperVariable":undefined};}
if(collageCount>4){myData.allResolution["collage_"+i]={"domEl":$imageCollage,"slideCount":collageCount,"swiperVariable":undefined};}}
var timeoutId;$(function(){for(var key in myData.allResolution){myData.allResolution[key].domEl.find('.image-row').addClass('swiper-container').wrapInner('<div class="swiper-wrapper"></div>').append('<div class="swiper-button-prev"></div><div class="swiper-button-next"></div>');myData.allResolution[key].domEl.find('.image-wrapper').wrap('<div class="swiper-slide"></div>');if(myData.allResolution[key].swiperVariable==undefined){myData.allResolution[key].swiperVariable=new Swiper(myData.allResolution[key].domEl.find('.swiper-container'),{slidesPerView:4,preventClicks:true,preventClicksPropagation:true,nextButton:myData.allResolution[key].domEl.find('.swiper-button-next'),prevButton:myData.allResolution[key].domEl.find('.swiper-button-prev'),breakpoints:{639:{slidesPerView:1},959:{slidesPerView:2},1199:{slidesPerView:4}}});}
clearTimeout(timeoutId);timeoutId=setTimeout(function(){if(myData.allResolution[key].swiperVariable!=undefined){var slideVerticalArrow=myData.allResolution[key].domEl.find('img').height()/2;myData.allResolution[key].domEl.find('.swiper-button-next, .swiper-button-prev').css('top',slideVerticalArrow);}},500);}})
$('body').on('mobileVersion',function(){for(var key in myData.onlyMobile){if(!myData.onlyMobile[key].domEl.find('.image-row').hasClass('swiper-container')){myData.onlyMobile[key].domEl.find('.image-row').addClass('swiper-container').wrapInner('<div class="swiper-wrapper"></div>').append('<div class="swiper-button-prev"></div><div class="swiper-button-next"></div>');myData.onlyMobile[key].domEl.find('.image-wrapper').wrap('<div class="swiper-slide"></div>');}
if(myData.onlyMobile[key].swiperVariable==undefined){myData.onlyMobile[key].swiperVariable=new Swiper(myData.onlyMobile[key].domEl.find('.swiper-container'),{slidesPerView:2,preventClicks:true,preventClicksPropagation:true,nextButton:myData.onlyMobile[key].domEl.find('.swiper-button-next'),prevButton:myData.onlyMobile[key].domEl.find('.swiper-button-prev'),breakpoints:{640:{slidesPerView:1},960:{slidesPerView:2}}});}}});$('body').on('desktopVersion mobileVersion',function(){for(var key in myData.allResolution){clearTimeout(timeoutId);timeoutId=setTimeout(function(){if(myData.allResolution[key].swiperVariable!=undefined){var slideVerticalArrow=myData.allResolution[key].domEl.find('img').height()/2;myData.allResolution[key].domEl.find('.swiper-button-next, .swiper-button-prev').css('top',slideVerticalArrow);}},500);}});$('body').on('desktopVersion',function(){for(var key in myData.onlyMobile){if(myData.onlyMobile[key].domEl.find('.image-row').hasClass('swiper-container')){myData.onlyMobile[key].swiperVariable.destroy();myData.onlyMobile[key].swiperVariable=undefined;myData.onlyMobile[key].domEl.find('.image-row').attr('class','image-row');myData.onlyMobile[key].domEl.find('.swiper-slide').contents().unwrap();myData.onlyMobile[key].domEl.find('.swiper-wrapper').contents().unwrap();myData.onlyMobile[key].domEl.find('.swiper-button-next, .swiper-button-prev').remove();}}});})(jQuery,window.site);(function(window,site,ui,$,undefined){var user=$({});site.user=user;user.initialize=site.utils.noop;user.initialized=true;user.forgotPassword=function(event){var username=$('input[name="login[username]"]');var forgotPasswordForm=$('[name=forgotpassword]');if(username.val().length){forgotPasswordForm.find('input[name="forgotpassword[email]"]').val(username.val());}
forgotPasswordForm.submit();event.cancel(true);};user.addOneMorePhone=function(type){};user.OnUserAgreementClick=function(event){var url=$(this).attr('href');var checkbox=ui.checkbox($(this).parent().get(0));$.get(url,function(data){ui.lightbox.modal(data,function(unused,result){if(typeof result!=='undefined'){checkbox.selected(!!result);checkbox.node.trigger(ui.events.CHANGE,[checkbox]);}},{name:site.t('Decline','user agreement'),gray:true,result:false},{name:site.t('Accept','user agreement'),result:true},true)});event.cancel(true);}
user.OnSubjectsClick=function(){if($('.subscription-subjects[data-selected]').length>0){$('.agr-chb').removeClass('hidden');}else{$('.agr-chb').addClass('hidden');}}
user.OnUserAgreementChange=function(event){var checkbox=ui.checkbox(this);var button=ui.input($(this).parents('form').eq(0).find('button').get(0));button.enabled(!!checkbox.selected());};user.recent_history={options:{module_name:'user.recent_history',max_recent_items:20},storage:site.storage.initialize(),getItems:function(){var data=this.storage.get(this.options.module_name);return data||[];},toString:function(){return user.recent_history.getItems().join(',');},toJSON:function(){return{recent_history:user.recent_history.toString()};},addItem:function(id){var data=this.getItems();data.unshift(id);data=data.unique();this.storage.set(this.options.module_name,data.slice(0,this.options.max_recent_items));}};user.product_table={options:{use_pagination:true,table_selector:'#user_product_table_full .sortable-table',empty_message_selector:'.empty-list-message',product_block_selector:'data-product-id',data_attr_name:'data-product'},removeTableRow:function(event,data){var $table=$(user.product_table.options.table_selector).eq(0),$elem=$(this),use_pagination=user.product_table.options.use_pagination,id=(data&&('id'in data))?data.id:$elem.attr(user.product_table.options.data_attr_name);if($table.length){if(use_pagination){var page=site.pagination.page();site.pagination.total(site.pagination.total()-1);site.pagination.page(Math.min(page,site.pagination.max()));site.pagination.change();}else if($table.find('td').length&&id){$table.find('['+user.product_table.options.product_block_selector+'='+id+']').remove();}
if((use_pagination&&!site.pagination.total())||(!use_pagination&&!$table.find('td').length)){$table.parent().parent().addClass('hidden').parent().find(user.product_table.options.empty_message_selector).removeClass('hidden');}}},reload:function(){$.post(window.location.pathname,{page:site.pagination.page(),ipp:site.pagination.ipp(),sort:''},function(response){response=JSON.parse(response);$("#right-panel-content-wrapper").html(response.products);if(response.hasOwnProperty('Url')){$.history().push(response.Url,{history:true});site.user.RequestLog();site.analytics.track(response.Url);}});}};user.wishlist={options:{url:{add:'/account/wishlist/add',remove:'/account/wishlist/remove'},product_block_selector:'data-product-id',wish_list_block_selector:'.wish-list-block',data_attr_name:'data-product'},OnChange:function(event){var element=$(this);$.get(element.attr('href'),function(data){if(data.success){element.parent().replaceWith(data.block);}});return event.cancel(true);}};user.RequestLog=function(){var data={};if($('body').attr('data-user-auth')){data['url']=window.location.href;data['h1']=$('h1').eq(0).text();data['info']='';if($('[data-log-product-id]').length>0){data['info']=$('[data-log-product-id]').attr('data-log-product-id');data['page-type']='product';}else
if($('[data-catalog]').length>0){data['page-type']='catalog';}else
if($('[data-search]').length>0){data['info']=$('[data-search]').attr('data-search');data['page-type']='search';}else{data['page-type']='other';}
var url='/account/requestlog';$.post(url,{data:data});}}
ui.ready(function(){user.on('list_item_remove',user.product_table.removeTableRow);$('body').on('click','.subscription-subjects',user.OnSubjectsClick).on('click','[data-link="user-agreement"]',user.OnUserAgreementClick).on('click','#product_availability_report .sortable-table>thead>tr>th:not([data-sort="no"])',function(){site.controls.sortColumn.apply(this);});});site.ready(function(){user.RequestLog();});})(window,window.site,window.ui,window.jQuery);(function(window,site,ui,$){var Sync={timer:null,syncTime:1000,syncStarted:false,previous_callback:null,callback:null,send:function(){if(typeof this.previous_callback=='function'){this.previous_callback();this.previous_callback=null;}
if(this.timer){this.timer=clearTimeout(this.timer);}
var _this=this;this.timer=setTimeout(function(){if(_this.hasOwnProperty('callback')&&(typeof _this.callback=='function')){_this.callback();_this.callback=null;}},this.syncTime);}};var _editPurchase=function(type,params){var actions={'add':['id','quantity'],'remove':['id']};Sync.callback=function(){var data={},id=params.id,quantity=params.quantity,action=type=='edit'?'add':type,param=quantity?id+','+quantity:id,callback=function(){if(this.status){site.cart.trigger('changed',[type,this.data]);if(params.callback){params.callback(this.data);}
if(this.data.deliveryTerm){var shippedTermContainer;if($(".shipped-term-warning[data-product='"+params.id+"']").length)
shippedTermContainer=$(".shipped-term-warning[data-product='"+params.id+"']");if($(".cart-product-shipping-message-"+params.id).length)
shippedTermContainer=$(".cart-product-shipping-message-"+params.id);if(shippedTermContainer&&shippedTermContainer.length){shippedTermContainer.text(this.data.deliveryTerm);var shippedTermContainerParent=shippedTermContainer.parent();if(shippedTermContainerParent.hasClass("error-message")){var css=(this.data.deliveryTerm=="")?"display: none; padding: 0; margin: 0;":"display: block;";shippedTermContainerParent.attr("style",css);}}}}};var additionalQueryParam='',pageType=_pageType(params.self);if(params.hasOwnProperty('comboProductId')){additionalQueryParam='&comboProductId='+params.comboProductId;}
if(pageType!=''){additionalQueryParam+='&pageType='+pageType;}
site.cart.trigger('before_request',[data]);action=(action in actions)?action:'add';$.ajax.queue('cart').post('/ajax/cart/'+action+'/'+param+'?ajax=on'+additionalQueryParam,data,callback);};Sync.callback.is_refreshed=true;Sync.syncTime=((type=='add')||(params.quantity==0))?0:500;Sync.send();};var _pageType=function(self){if($('#cart').length){return'cart';}else if($('#content').hasClass('landing-page-containeer')||$('body').attr('id')=='landing-page'){return'';}
if($('.product-page').length&&self){if(self.closest('.product-full-info-wrapper').length){return'sub-product';}else if(self.closest('.product-combo-container').length){return'product-combo';}
return'product-item';}
return'';};site.classes.cart=site.classes.base.extend({vmt:{enableEditing:true,initialize:false,initialize:function(){this.initialize=site.utils.noop;this.initialized=true;$.ajax.queue().create('cart');},add:function(){var id=$(this).attr('data-product'),quantity=$(this).attr('data-min');_editPurchase('add',{id:id,quantity:quantity,self:$(this)});},addCombo:function(){var id=$(this).attr('data-combo'),quantity=$(this).attr('data-min'),comboProductId=$(this).attr('data-combo-product');_editPurchase('add',{id:id,quantity:quantity,comboProductId:comboProductId,self:$(this)});},edit:function(){if(!site.cart.enableEditing){return;}
var id=$(this).attr('data-product'),quantity=$(this).attr('data-value');_editPurchase('edit',{id:id,quantity:quantity,self:$(this)});},editCombo:function(){if(!site.cart.enableEditing){return;}
var id=$(this).attr('data-combo'),quantity=$(this).attr('data-value'),comboProductId=$(this).attr('data-combo-product');_editPurchase('edit',{id:id,quantity:quantity,comboProductId:comboProductId,self:$(this)});},refresh:function(){if(!(Sync.callback&&Sync.callback.is_refreshed)){Sync.previous_callback=Sync.callback;Sync.callback=function(){var data={},pageType=_pageType(),additionalQueryParam='',callback=function(){site.cart.trigger('changed',['refresh',this.data]);};if(pageType!=''){additionalQueryParam='&pageType='+pageType;if(pageType=='product'){var productId=$('.product-page [data-product-id]').attr('data-product-id');additionalQueryParam+='&comboProductId='+productId;}}
site.cart.trigger('before_request',[data]);$.ajax.queue('cart').post('/ajax/cart/refresh/?ajax=on'+additionalQueryParam,data,callback);};}
Sync.syncTime=0;Sync.send();},remove:function(event,forceRemove){var wrapper=$(this).parents('[data-product-id]').eq(0);var productId=wrapper.attr('data-product-id');if(!productId)return;ui.confirm.options({'target':$(this).parent(),'content':$('.remove-product-from-cart-confirmation').html(),'patterns':{'productId':productId,'productName':wrapper.find('[data-product-name]').html(),'productImage':wrapper.find('.product-image-center img').attr('src'),'productPrice':wrapper.find('.product-price').html()}});ui.confirm.ask(forceRemove).done(function(){if(this.answer=='remove'||this.answer=='remove-and-add-to-wishlist'){_editPurchase('remove',{id:productId,callback:function(){wrapper.remove();},self:$(this)});}
if(this.answer=='remove-and-add-to-wishlist'){$.get('/account/wishlist/add/?productId='+productId)}});},removeCombo:function(event){var wrapper=$(this).parents('[data-combo-id]').eq(0);var comboId=wrapper.attr('data-combo-id');if(!comboId)return;ui.confirm.options({'target':$(this).parent(),'content':$('.remove-combo-from-cart-confirmation').html()});ui.confirm.ask().done(function(){if(this.answer=='remove'){var comboRows=$('[data-combo-id="'+comboId+'"]');_editPurchase('remove',{id:comboId,comboProductId:0,callback:function(){comboRows.remove();},self:$(this)});}});},checkGotoCheckout:function($wrapper){},useBrandedBoxes:function(flag){var date=new Date();date.setFullYear(date.getFullYear()+1);document.cookie="isBrandedBoxes="+flag+"; path=/; expires="+date.toGMTString()+";";},setCheckoutContinue:function(event){event.preventDefault();window.site.setCookie('checkout_continue',1);window.location=$(this).attr('href');}}});})(window,window.site,window.ui,window.jQuery);(function(window,site,ui,$){var changed=function(event,type,data){if(typeof type!=='string'||typeof data!=='object'){return false;}
var cartIndicator=data.cartIndicator||'',cartEmpty=data.cartEmpty||0,emptyCartNotification=data.emptyCartNotification||'',newCartWrapper=data.cartWrapper||'',couponData=data.couponData,comboContainer=data.comboContainer||'',$headerartWrapper=$('#header-wrapper').find('.cart-wrapper'),$rightCartIcon=$('#r-buttons').find('.cart-icon'),oldCartWrapper=$('#cart');if(cartIndicator!=''){$('.cart-indicator',$headerartWrapper).html(cartIndicator);}
if(cartEmpty){$rightCartIcon.addClass('empty');oldCartWrapper.find('.cart-table-wrapper').html(emptyCartNotification);}else{$rightCartIcon.removeClass('empty');}
if(newCartWrapper!=''&&oldCartWrapper.length){var $tmpCartTable=$(newCartWrapper),$sortCol=$('th[data-sort-order]',oldCartWrapper),$activeElement=$(":focus"),activeProductId;if($sortCol.length){var previousOrder=$sortCol.attr('data-sort-order')=='desc'?'asc':'desc',$th=$('th:eq('+$sortCol.index()+')',$tmpCartTable);$th.attr('data-sort-order',previousOrder);site.controls.sortColumn.apply($th[0]);}
if($activeElement.is("input")){activeProductId=$activeElement.attr('data-product');}
oldCartWrapper.replaceWith(newCartWrapper);$('.tipsy').remove();if(activeProductId){$('input[data-product='+activeProductId+']').putCursorAtEnd();}
oldCartWrapper.find('.quantity-input input').numeric({decimal:false,negative:false});}
if(couponData&&couponData.length!=0){var wrapper=$('.coupon-wrapper');var form=$('form',wrapper);var output=$('.error-output',form);var input=$('input[name="code"]',form);input.addClass('error');output.html(couponData.message).show();output=$('.tabs-products-to-weight-message');output.html(couponData.message).show();}else{output=$('.tabs-products-to-weight-message');output.html('').hide();}
if(comboContainer!=''){$('.product-combo-container').html(comboContainer);site.product.initPaging();}
return true;};var addAvailabilityRequest=function(){var productId=$(this).attr('data-product');var href=$(this).parent().find('.analogue-link').attr('href');var callback=function(){if(this.data){var $data=$(this.data);var params=$data.htmlParams();if(params['success']){if($data.hasClass('content-container')){ui.lightbox.show(this.data);}
if(params['hasAnalogues']!=undefined){var items={};items[productId]={'an':!!params['hasAnalogues'],'bt':'inPreorder','url':href?href.split('#')[0]:''};site.cart.trigger('changed',['refresh',{'items':items}]);}}}};$.ajax.queue('cart').get('/account/waitlist/add?productId='+productId,callback);};site.classes.cart_main=site.classes.cart.extend({vmt:{changed:changed,addAvailabilityRequest:addAvailabilityRequest}});})(window,window.site,window.ui,window.jQuery);(function(window,site,ui,$,undefined){var _class=new site.classes.cart_main();var cart=_class.createNamespace();site.cart=cart;var refresh_timer={id:null,delay:120*1000};$(function(){cart.on('changed',cart.changed);$('body').on('click','.sortable-table th:not([data-sort="no"])',function(event){site.controls.sortColumn.apply(this);}).on('click','#cart #goto-checkout',function(event){if($(event.target).hasClass('inactive-button')){return false}
return true;}).on(ui.events.CHANGE,'[data-sm-role="cart.branded-boxes"]',function(event){var element=ui.element(this);var useBrandedBoxes=!!element.selected()?1:0;$('span.has-branded-box').toggleClass('active',useBrandedBoxes);var container=$(this).parents('.checkout-product-table');var boxes=container.find('[data-element="checkbox"]');for(var i=0;i<boxes.length;i++){ui.checkbox(boxes[i]).selected(useBrandedBoxes);}
cart.useBrandedBoxes(useBrandedBoxes);});site.cart.initialize();refresh_timer.id=setInterval(site.cart.refresh,refresh_timer.delay);$(window).focus(function(){if(!refresh_timer.id){refresh_timer.id=setInterval(site.cart.refresh,refresh_timer.delay);}});$(window).blur(function(){clearInterval(refresh_timer.id);refresh_timer.id=null;});});})(window,window.site,window.ui,window.jQuery);(function(window,site,ui,$){var catalog=$({}),product_catalog=new site.classes.product_catalog('product_catalog_item','product_item_'),options={buttonTypes:{'addToCart':'.add-to-cart','addToPreorder':'.add-to-preorder','analogues':'.analog','contactManager':'.contact-manager','contactManagerOutOfStock':'.contact-manager-out-of-stock','inCartSpin':'.in-cart-spin','inCartDropDown':'.in-cart-drop-down','inCartScale':'.in-cart-scale','inPreorder':'.in-preorder','notForSale':'.not-for-sale'},priceSelector:'.price',template_id:'div#html_templates'},update_after_init=null,queue=[];catalog.initialized=false;catalog.initialize=function(){catalog.initialize=site.utils.noop;catalog.initialized=true;var templates=$(options.template_id),buttonTemplates={},priceTemplate='',el;for(el in options.buttonTypes){buttonTemplates[el]=$('<div>').append(templates.find(options.buttonTypes[el]).clone()).html();}
product_catalog.setOptions({'buttonTemplates':buttonTemplates});if(priceTemplate=templates.find(options.priceSelector).html()){product_catalog.setOptions({priceTemplate:priceTemplate});}
for(var key in queue){if(queue.hasOwnProperty(key)){product_catalog.addItem(queue[key]);}}
if(update_after_init){catalog.update(update_after_init);}
return catalog;};catalog.getCatalog=function(){return product_catalog;};catalog.addItem=function(data){if(catalog.initialized){product_catalog.addItem(data);}else{queue.push(data);}};catalog.update=function(data){if(catalog.initialized){var $focused=$('input[type="text"]:focus'),$parent,$value;if($focused[0]&&($focused.is('input'))){$parent=$focused.parent().parent().parent();$value=parseInt($focused.val());}
product_catalog.update(data);catalog.trigger('updated',data);if($parent){var $input=$parent.find('input');if($input[0].setSelectionRange){var $len=($value+'').length*2;$input.focus();$input[0].setSelectionRange($len,$len);}else{$input.focus().val($value);}}}else{update_after_init=data;}};site.catalog=catalog;$(function(){site.catalog.initialize();site.cart.on('before_request',function(event,data){data.productIdsOnPage=product_catalog.getItemIds();});site.cart.on('changed',function(event,type,data){catalog.update(data.items||{});});});})(window,window.site,window.ui,window.jQuery);(function(window,site,ui,$,undefined){var orderHistory=$({});var orderPayment=$({});site.orderHistory=orderHistory;site.orderPayment=orderPayment;var currentFilter={};var currentSorting={};orderHistory.ordersWithSumField={};orderHistory.sumFieldRequired=false;orderHistory.initialized=false;orderHistory.initialize=function(){orderHistory.initialize=site.utils.noop;orderHistory.initialized=true;site.pagination.change(function(event,changes){if(changes.currentPage||changes.itemPerPage){orderHistory.refresh();}});if(!$.ajax.queue('order-history'))$.ajax.queue.create('order-history');};var refreshCallback=function(){if(this.success){orderHistory.trigger('ready',[$.fromJSON(this.data)]);}else{orderHistory.trigger('ready',[[]]);}}
var initOrder=function(){$('body #order_id').chosen({no_results_text:site.t('Order not found','orders'),width:"100%"});$(function(){if($("#my-dropzone").length){var template='<div class="dz-preview dz-file-preview">'+'<div class="dz-details">'+'<div class="dz-filename"><span data-dz-name></span><span class="dz-filesize"> (<span class="dz-size" data-dz-size></span>) </span><a href="javascript:void(0)" class="file-remove" data-dz-remove></a></div>'+'</div>'+'<div class="dz-error-message"><span data-dz-errormessage></span></div>'+'</div>';var wrapper=$('.attachment-wrapper');var submitButton=$('#send',wrapper);var sumInput=$('[name="sum"]',wrapper);var orderIdInput=$('[name="order_id"]',wrapper);var url='/file/upload';var fileKey='key';myDropzone=new Dropzone("#my-dropzone",{url:url,paramName:fileKey,method:"post",uploadMultiple:false,autoProcessQueue:false,maxFilesize:16,maxFiles:1,filesizeBase:1024,clickable:'.dropzone-clickable',previewsContainer:".dropzone-previews",previewTemplate:template,dictInvalidFileType:site.t('Validation error','orders'),dictFileTooBig:site.t('Validation error','orders'),maxfilesexceeded:function(file){var myDropzone=this;myDropzone.removeAllFiles();myDropzone.addFile(file);},acceptedFiles:'.doc, .docx, .rtf, .txt, .odt, .pdf, .bmp, .jpg, .png',accept:function(file,done){$('#download-success',wrapper).hide();submitButton.show();done();},init:function(){var myDropzone=this;var form=$("#my-dropzone");this.on('removedfile',function(files){if(files.status!=='error'||sumInput.val()!==''){submitButton.hide();}
$('#my-dropzone').find('[name="sum"]').removeClass('error');});this.on('addedfile',function(){if($('#my-dropzone').find('[name="sum"]').length>0&&$('#my-dropzone').find('[name="sum"]').val().length==0){$('#my-dropzone').find('[name="sum"]').addClass('error');}});var attachSumToOrder=function(response){if(response){if(response.success){$('#download-success',wrapper).show();submitButton.hide();myDropzone.removeAllFiles();}}};submitButton.on('click',function(e){e.preventDefault();e.stopPropagation();if(myDropzone.files.length){myDropzone.processQueue();}else{var data={'sumForm':{'orderId':orderIdInput.val(),'sum':sumInput.val()}};$.post('/account/order/attachment?ajax=on',data,attachSumToOrder,'json');}});orderIdInput.on('click',function(e){$('.simple-select',form).removeClass('error');});orderIdInput.on('change',function(e){if(orderHistory.sumFieldRequired){sumInput.val('');if(site.orderHistory.ordersWithSumField[this.value]){sumInput.closest('.payment-sum-wrapper').removeClass('hidden');$('.dropzone-clickable',wrapper).removeClass('disabled');$('#download-warning',wrapper).hide();myDropzone.setupEventListeners();}else{sumInput.closest('.payment-sum-wrapper').addClass('hidden');submitButton.hide();$('.dropzone-clickable',wrapper).addClass('disabled');$('#download-warning',wrapper).show();myDropzone.removeEventListeners();}}});sumInput.on('keypress',function(event){if((event.which<48||event.which>57)&&event.which!=46)
return false;});sumInput.on('keyup',function(){var found=this.value.match(/^\d{1,}([\.]{1}\d{0,2}|[\.]{0,1})/);this.value=found?found[0]:'';var regex=/^(\d{1,}|\d{1,}[\.]{1}\d{1,2})$/;if(regex.test(this.value)){submitButton.show();}else if(!myDropzone.files.length){submitButton.hide();}});this.on("success",function(files,data){var showErrors=function(response){if(response&&response.errors){if(response.errors.orderId){$('.simple-select',form).addClass('error');}
if(response.errors.fileHash){$('.dz-error-message [data-dz-errormessage]',form).text(site.t('Validation error','orders'));}
if(response.errors.sum){$('.dz-error-message [data-dz-errormessage]',form).text(response.errors.sum);}}else{$('.dz-error-message [data-dz-errormessage]',form).text(site.t('Validation error','orders'));}};var attachFileToOrder=function(response){if(response){if(!response.success){showErrors(response);files.status=Dropzone.QUEUED;}else{$('#download-success',wrapper).show();submitButton.hide();myDropzone.removeAllFiles();}}else{showErrors();}};data=JSON.parse(data);if(data[fileKey]===undefined){showErrors();return;}
data={'fileForm':{'orderId':orderIdInput.val(),'fileHash':data[fileKey],'fileName':files.name}};if(sumInput.val()){data['sumForm']={'orderId':orderIdInput.val(),'sum':sumInput.val()};}
$.post('/account/order/attachment?ajax=on',data,attachFileToOrder,'json');});}});Dropzone.autoDiscover=false;}});}
orderHistory.refresh=function(){for(i in currentFilter){if(!currentFilter[i].length){delete currentFilter[i];}}
var params={'page':site.pagination.page(),'ipp':site.pagination.ipp(),'find':currentFilter,'sort':currentSorting};var queue=$.ajax.queue('order-history');queue.clear().get('/account/orders?'+$.param(params),refreshCallback);};ui.ready(function(){initOrder();$('body').on('click','#account-orders-history .status-list',function(event){$(this).addClass('has-dropdown').find('ul').focus();}).on('blur','#account-orders-history .status-list ul',function(event){$(this).parent().removeClass('has-dropdown');}).on(ui.events.CHANGE,'#account-orders-history .status-list ul li:first-child',function(event){var checked=ui.checkbox(this).selected();var items=$(this).parent().find('li');for(var i=1;i<items.length;i++){ui.element(items[i]).enabled(!checked);}}).on(ui.events.CHANGE,'#account-orders-history .status-list ul li',function(event){var statuses=[];var items=$(this).parent().find('li');for(var i=1;i<items.length;i++){var checkbox=ui.checkbox(items[i]);var name=checkbox.getProp('name');if(checkbox.enabled()&&checkbox.selected()){statuses.push(checkbox.getProp('value'));}}
currentFilter[name]=statuses;orderHistory.refresh();}).on('click','#account-orders-history [data-sorting]',function(event){var self=$(this);var items=self.parents('#account-orders-history').eq(0).find('[data-sorting][data-value]');for(var i=0;i<items.length;i++){if(items[i]!=this){$(items[i]).removeAttr('data-value');}}
var value=(''+self.attr('data-value')).toLowerCase();value=(value=='desc')?'asc':'desc';if(value){self.attr('data-value',''+value);currentSorting=(self.attr('data-sorting')+'_'+value).toLowerCase();}
orderHistory.refresh();}).on('click','.orders-search .search-input-control .search-input-submit',function(event){event.preventDefault();$(this).closest('form').find('[name]').each(function(){delete currentFilter[$(this).attr('name')];});var input=$(this).closest('.search-input-control').find('input');if(input.length){currentFilter[input.attr('name')]=input.val();orderHistory.refresh();}}).on('click','.orders-search .search-input-control .search-input-clear',function(event){$(this).parents('.search-input-control').find('input').val('').focus();$(this).closest('form').find('[name]').each(function(){delete currentFilter[$(this).attr('name')];});orderHistory.refresh();}).on('click','.orders-search-no-results .search-link-clear',function(event){event.preventDefault();currentFilter={};currentSorting={};orderHistory.refresh();}).on(ui.events.CHANGE,'.orders-search [data-element="radiobox"]',function(){var current=$(this).find(':checked').val();$(this).closest('form').find('.search-input-control').each(function(){$(this).find('input').val('').trigger('change');if($(this).find('[name="'+current+'"]').length){$(this).removeClass('hidden');$(this).find('input').focus();}else{$(this).addClass('hidden');}});}).on('click','[name="show-serial-numbers"]',function(){var target=$(this).closest('tr').next('tr');if(target.hasClass('hidden')){target.removeClass('hidden');$(this).addClass('hidden');}}).on('click','[name="hide-serial-numbers"]',function(){var target=$(this).closest('tr').prev('tr').find('[name="show-serial-numbers"]');if(target.hasClass('hidden')){target.removeClass('hidden');$(this).closest('tr').addClass('hidden');}}).on('click','#order-attachment-open',function(event){$(this).hide();$('#order-attachment-container').show();}).on('click','#cancel-button',function(event){$('#order-attachment-container').hide();$('#order-attachment-open').show();}).on('click','[name="pay"]',function(){ui.lightbox.show($$.control('popup/payment-info/desktop').token({'payment-form':$$.control('checkout/payment/regular/selected/stripe').data(site.orderPayment)}).html());$$('[space="popup/payment-info/desktop"]');});});})(window,window.site,window.ui,window.jQuery);(function(window,site,ui,$,undefined){orderHistory=site.orderHistory;orderHistory.on('ready',function(event,data){if(!orderHistory.initialized)return;site.pagination.total(data.count).change();var table=$('#account-orders-history table.orders-table');var wrapper=table.parents('.account-orders-history-wrapper').eq(0);var tableBody=table.find('.orders-rows');if(data.orders&&data.orders.length>0){tableBody.html(data.orders);wrapper.removeAttr('data-has-no-orders');}else{wrapper.attr('data-has-no-orders',1);}
site.pagination.updateVisibility(true);});})(window,window.site,window.ui,window.jQuery);(function(window,site,ui,$,undefined){var validator=$({});site.validator=validator;var valid=function(field){var value=field.val();if(field.hasClass('credit-card-number-field')){value=field.find('input').val();}else
if(field.hasClass('styled-phone-input')){value=field.find('.styled-phone-edit input').val();}
var valueLength=value.length;var validators=field.attr('data-validator').split(',');var validatorAttr=field.attr('data-validator-attr');var params;try{params=$.parseJSON(validatorAttr);}catch(error){params=$({});}
try{if($.inArray('required',validators)!=-1){value=($.inArray('phone',validators)!=-1)?(field.find('input.hide-outline').val()):value;if(!value){throw site.t('This field cannot be blank','common');}}
if($.inArray('string',validators)!=-1&&!$.isEmptyObject(params)){if(params.hasOwnProperty('min')&&valueLength<params.min){throw site.t('This field is too short','common');}
if(params.hasOwnProperty('max')&&valueLength>params.max){throw site.t('This field is too long','common');}}
if($.inArray('email',validators)!=-1&&params.hasOwnProperty('expression')){var rawExpression=params.expression;var expression=rawExpression.substring(1,rawExpression.length-1);var modificator='';value=value.trim();if(!(new RegExp(expression,modificator)).test(value)){throw site.t('Email is not a valid email address','common');}}
if($.inArray('number',validators)!=-1&&!$.isEmptyObject(params)){var mustBeInt=params.hasOwnProperty('integerOnly')&&params.integerOnly;if(mustBeInt&&params.hasOwnProperty('integerPattern')){var rawPattern=params.integerPattern;var pattern=rawPattern.substring(1,rawPattern.length-1);if(!(new RegExp(pattern)).test(value)){throw site.t('This field must be a number','common');}}
if(params.hasOwnProperty('min')&&parseFloat(value)<params.min){throw site.t('This field is too small','common');}
if(params.hasOwnProperty('max')&&parseFloat(value)>params.max){throw site.t('This field is too big','common');}}
if($.inArray('phone',validators)!=-1){var phone=field.find('input.styled-phone-value').val();if(!/^[0-9]{1,}-([0-9]{7,12})?$/.test(phone)){throw site.t('Phone is not valid','common');}}
if(field.attr('data-error')!==undefined){throw field.attr('data-error');}}catch(errorMsg){field.addClass('error');if(field.attr('original-title')!==undefined){field.attr('original-title',errorMsg);}else{field.attr('title',errorMsg);}
return false;}
field.removeClass('error').removeAttr('title').removeAttr('original-title');return true;}
validator.OnFieldFocus=function(event){};validator.OnFieldBlur=function(event){var field=$(this);valid(field);};validator.OnFieldMouseOver=function(event){};validator.OnFieldMouseLeave=function(event){$(".tipsy").remove();};ui.ready(function(){$('body').on('focus','[data-validator]',validator.OnFieldFocus).on('blur','[data-validator]',validator.OnFieldBlur).on('mouseover','[data-validator]',validator.OnFieldMouseOver).on('mouseleave','[data-validator]',validator.OnFieldMouseLeave);});})(window,window.site,window.ui,window.jQuery);(function(window,site,ui,$){var search=$({}).extend(mixins.options);site.search=search;search.initialized=false;search.text='';search.timer=null;search.options={selectors:{right_panel:'#right-panel-content-wrapper',quick_results:'#quick-search'},url:'/search/quick'};search.initialize=function(text,facet){search.initialized=true;search.initialize=site.utils.noop;setTimeout(function(){var parent=$('body');parent.off('click','[data-pagination="page"] li');parent.off('click','[data-pagination="page"] a');parent.off('click','[data-pagination="page-first"]');parent.off('click','[data-pagination="page-prev"]');parent.off('click','[data-pagination="page-next"]');parent.off('click','[data-pagination="page-last"]');parent.off('click','[data-pagination="ipp"] li');parent.off('click','[data-pagination="sort"] li');parent.off('click','[data-pagination="view"] li');parent.off('click','.dropdown.page-list');},1);return;text=text||'';facet=facet||'';site.pagination.on('change',function(event,changes){$.post(window.location.pathname,{q:text,f:facet,page:site.pagination.page(),ipp:site.pagination.ipp(),view:site.pagination.view(),si:site.pagination.sort()},function(response){response=JSON.parse(response);$(search.options.selectors.right_panel).html(response.products);if(response.hasOwnProperty('Url')){$.history().push(response.Url,{history:true});site.user.RequestLog();site.analytics.track(response.Url);}});});};search.quick=$(search.options.selectors.quick_results).extend({find:function(text,facet){text=text||'';facet=facet||'';var $quick=this;if(text.length<3){$quick.close();}else{if(search.timer){clearTimeout(search.timer);}
search.timer=setTimeout(function(){$.ajax({url:search.options.url,type:"POST",data:{q:text,f:facet},dataType:'control',success:function(response){$quick.html(response.html()).show();$$('[space="'+response.space+'"]');site.fake_background.show($quick.close);}});},500);}},close:function(){search.quick.hide();site.fake_background.hide();}});ui.ready(function(){var body=$('body'),chooseMenuItem=function(event,element){var val;if(event&&event.preventDefault){event.preventDefault();element=this;val=$(element).parents().find('input[name=q]').val();}
$(element).parents('.search-input-control').find('.search-facet-selector').removeClass('hover').find('#search_facet_selector').html($(element).html())[0].setAttribute('data-name',element.getAttribute('data-name'));$(element).parents().find('input[name=f]').val(element.getAttribute('data-name'));$(element).parent().children().each(function(id,el){$(el).show();});$(element).hide();if(val){$(element).parents('form').submit();}};$(window).on('ready',function(){var current=$('input[name=f]').val(),currentItem=$('ul.facet-popup li[data-name='+current+']');if(currentItem[0]){chooseMenuItem(null,currentItem[0]);}});body.on('click','header .search-input-control .facet-popup .facet-item',chooseMenuItem);body.on('click','header .search-input-control .search-input-submit',function(event){event.preventDefault();$(this).parents('form').submit();});body.on('submit','header .search-wrapper form',function(event){if($(this).find('input[name=q]').val().length==0){event.preventDefault();}});body.on('click','header .search-example .items',function(event){window.location='/search/?q='+$(this).text();});body.on('click','#advanced-search-menu [data-element="treenode"] .tree-text',function(event){window.location=$(this).attr('href');});body.on('click','#advanced-search-menu [data-element="treenode"] .count',function(event){window.location=$(this).attr('href');});body.on('change keyup paste focus textInput input','header .search-input-control .search-field input',function(event){if(('keyCode'in event)&&event.keyCode==27){if(search.quick.is(':visible')){search.quick.close();}else{$(this).val('').change();}}else{if($(this).val()!=site.search.text){site.search.text=$(this).val();site.search.quick.trigger('changed');}}});site.search.quick.on('changed',function(){var facet=$(this).parents('.search-input-control').find('input[name=f]').val();site.search.quick.find(site.search.text,facet);});});})(window,window.site,window.ui,jQuery);(function(window,site,ui,$,undefined){var enableButtonNext=function(){$('.checkout-button-next-wrapper .styled-link-checkout').removeAttr('data-disabled').removeClass('disabled');}
var disableButtonNext=function(){$('.checkout-button-next-wrapper .styled-link-checkout').attr('data-disabled','on').addClass('disabled');}
var checkout=$({});site.checkout=checkout;checkout.initialized=false;var currencyId=0;var CheckoutStep={}
var t=window.t;var data={};var actionUrl=null;var savedGifts=null;var loadProductsToWeight=function(showProductTable){if(!$('.checkout-products-to-weight').length)return false;updateSelectedDeliveryAddress();var post=$.extend(true,{},data);post.showProductTable=showProductTable;var blocks=$('[data-sm-role="checkout.container"] [data-sm-role="checkout.delivery-service-block"]:visible');var delivery={};for(var i=0;i<blocks.length;i++){var block=blocks.eq(i);var storeGroupId=block.attr('data-value');var form=block.find('form');delivery[storeGroupId]=serializeForm(form);}
post.delivery=delivery;$.post('/ajax/checkout/productsToWeight',post,function(response){var response=$(response);var container=$(':semanticRole(checkout.container)');if(showProductTable){var target=container.find('.checkout-products-to-weight-group');if(target.length){target.replaceWith(response.filter('.checkout-products-to-weight-group'));}}
var target=container.find('.checkout-products-to-weight');if(target.length){target.replaceWith(response.filter('.checkout-products-to-weight'));}
response.filter('script').each(function(){$.globalEval(this.text||this.textContent||this.innerHTML||'');});container.find('.checkout-products-to-weight .product-button').addClass('ga-add-to-weight');container.find('.checkout-products-to-weight [data-tab-id="toys"] .product-button').addClass('ga-add-weight-stem');checkActualProductsToWeightState();});}
var checkActualProductsToWeightState=function(){var initialWrapper=$('.checkout-products-to-weight-list-initial');var changeWrapper=$('.checkout-products-to-weight-list-change');var cancelWrapper=$('.checkout-products-to-weight-list-cancel');var tabsWrapper=$('.checkout-products-to-weight .tabs');initialWrapper.hide();changeWrapper.hide();cancelWrapper.hide();tabsWrapper.hide();if(tabsWrapper.length==0){changeWrapper.show();changeWrapper.find('a').hide();}else if(data.showProductsToWeight){cancelWrapper.show();tabsWrapper.show();}else if($('.checkout-products-to-weight .unified-product-table').length>0){changeWrapper.show();}else{initialWrapper.show();}
data.selectedProductsToWeight=data.selectedProductsToWeight||{};data.showProductsToWeight=tabsWrapper.is(":visible");}
var updateSelectedDeliveryAddress=function(){if(data.address&&data.address.autofill)return;var form=$('[data-sm-name="checkout.address.raw-selected"]');if(form.length){setUpDeliveryAddress(form);data.address.autofill=true;}}
var serializeForm=function(form){var result={};var items=form.serializeArray();for(var i=0;i<items.length;i++){var j=items[i].name.indexOf('[');if(j>-1){var name=items[i].name.substring(j+1,items[i].name.length-1);}else{var name=items[i].name;}
result[name]=items[i].value;}
return result;}
checkout.updateAddressRequiredFields=function(fields,nameforform){var nameforform=nameforform||'address';var form=$(':semanticRole(checkout.container) :semanticRole(checkout.address-form) form');if(!form.length){form=$(':semanticRole(checkout3.container)  form[name="'+nameforform+'"]');}
var formName=form.attr('name');for(var field in fields){if(fields.hasOwnProperty(field)){var input=form.find('[name="'+formName+'\\['+field+'\\]'+'"]');var label=input.parent('label');if(fields[field]){var customElementText=label.find('.custom-element-text');if(!customElementText.find('.required').length){label.addClass('required');customElementText.append('<span class="required">*</span>');input.attr('data-validator','required').removeClass('error');}
if(label.hasClass("hide-when-not-required"))
label.closest("div").show();}else{label.removeClass('required');label.find('.custom-element-text').find('span.required').remove();input.removeAttr('data-validator').removeClass('error');if(label.hasClass("hide-when-not-required")){label.closest("div").hide();label.find("input[type=text]").val("");}}}}}
var initCountryStateCity=function(){if(jQuery().chosen){$('body #country_id').chosen({no_results_text:site.t('Country not found','common')});$('body #state_id').chosen({no_results_text:site.t('State not found','common')});$('body #city_id').chosen({allow_custom_value:true});}}
var initFormSelect=function(forms){for(var i=0;i<forms.length;i++){form=forms.eq(i);if(jQuery().simpleSelect&&!form.hasClass('simple-select-added')){form.find('.simple-select').simpleSelect();form.addClass('simple-select-added');}}}
var selectGiftsInBlocks=function(gifts){if(!gifts)return;for(var n in gifts){if(!gifts.hasOwnProperty(n))continue;var item=$('.checkout-gift-list [data-tab-id="'+n+'"] [data-product-id="'+gifts[n]+'"] [data-element="radioitem"]');if(item.length){ui.checkbox(item.get(0)).select();}}
$('.checkout-gift-list .gift-tabs').trigger(ui.events.CHANGE);}
var collectSelectedDelivery=function(container){var blocks=container.find(':semanticRole(checkout.store-group)');var delivery={};for(var i=0;i<blocks.length;i++){var block=blocks.eq(i).find(':semanticRole(checkout.delivery-service-block):visible');var storeGroupId=block.attr('data-value');var form=block.find('form');delivery[storeGroupId]=serializeForm(form);}
return delivery;}
var updateControlsOnDeliveryChange=function(container){var blocks=$(':semanticRole(checkout.store-group)');var allSelected=true;for(var i=0;i<blocks.length;i++){var block=blocks.eq(i).find(':semanticRole(checkout.delivery-service-block):visible');if(block.length<1){allSelected=false;break;}}
if(allSelected)enableButtonNext();else disableButtonNext();}
var fixWindowScrollPosition=function(scroll){var result=scroll;if(data.scrollPosition!==undefined){if(typeof data.scrollCondition=='function'){if(data.scrollCondition()){result=data.scrollPosition;}}else{result=data.scrollPosition;}}
if(data.currentStep==CheckoutStep.GIFTS){result=scroll;}
if(data.currentStep==CheckoutStep.PAYMENT){result=0;}
if(data.scrollDuration!==undefined){$('html, body').animate({scrollTop:result},data.scrollDuration);}else{$(window).scrollTop(result);}
data.scrollPosition=data.scrollDuration=data.scrollCondition=undefined;}
checkout.initialize=function(initialData,steps,url,checkoutCurrencyId){checkout.initialize=site.utils.noop;data=($.type(initialData)=='object')?initialData:{};actionUrl=url;currencyId=checkoutCurrencyId;CheckoutStep=steps;initCountryStateCity();initAddressFormNonRequiredFields();checkout.initialized=true;}
checkout.bindEvents=function(container){if(!container)container=$.semanticRole('checkout.container');if(container.length==0)return;container.on('click','[data-sm-role="checkout.payment-select"]',checkout.OnPaymentServiceSelect).on('click','[data-sm-role="checkout.payment-change"]',checkout.OnChangePaymentService).on('click','[data-sm-role="checkout.delivery-type.self-delivery"]',checkout.OnSelfDeliverySelected).on('click','[data-sm-role="checkout.delivery-type.regular-delivery"]',checkout.OnAddressDeliverySelected).on('click','[data-sm-role="checkout.self-delivery-service"]',checkout.OnSelfDeliveryServiceSelected).on('click','[data-sm-role="checkout.delivery-select"]',checkout.OnDeliveryServiceSelect).on('click','[data-sm-role="checkout.delivery-change"]',checkout.OnChangeDeliveryService).on('click','[data-sm-role="checkout.selected-address"] [data-sm-role="checkout.edit"]',checkout.OnEditAddress).on('click','[data-sm-role="checkout.delivery-address"]',checkout.OnSelectDeliveryAddress).on('click','[data-sm-role="checkout.delivery-address"] [data-sm-role="checkout.edit"]',checkout.OnEditDeliveryAddress).on('click','[data-sm-role="delivery-type"] [data-element="radioitem"]',checkout.deliveryToDoorShowMessage).on('mouseenter','[data-sm-role="checkout.delivery-rating-show"]',checkout.OnShowDeliveryRating).on('click','[data-sm-role="checkout.prepaids.payment-change"]',checkout.OnChangePrepaidsPaymentService);initCountryStateCity();if(container.attr('class')=="one-page-checkout"){initChosenSelect(container);$("[name='selfDelivery']").on('change',checkout.onChooseType);$("[name='deliveryToDoor']").on('change',checkout.onTypeDeliveryChoose);$('.selfDeliveryService').on('change',checkout.onSelfDeliverySelect);if($('select#city_id').val()||$('input[name="address[city]"]').val()){setTimeout(checkout.onChooseType,700);}else{setTimeout(checkout.getDelivery,700);}
$('#city_id').chosen({allow_custom_value:true}).change(site.checkout.onCityChange);$('input#city').on('change',site.checkout.onCityChange);}
initFormSelect(container.find('form'));}
var initAddressFormNonRequiredFields=function(){if($('form[name="address"]').length){$('form[name="address"] label').each(function(){var label=$(this);if(label.hasClass("hide-when-not-required")&&!label.hasClass("required")){label.closest("div").hide();}});}}
checkout.process=function(stopOnStep,stopOnNextStep){if(!checkout.initialized)return;updateSelectedDeliveryAddress();var post=$.extend(true,{},data);if(stopOnStep){post.currentStep=stopOnStep;post.stopOnStep=stopOnStep;post.stopOnNextStep=stopOnNextStep;}else{post.stopOnStep=data.currentStep;post.stopOnNextStep=1;}
$.post(actionUrl,post,function(response){var response=$(response);var params=response.htmlParams();if(params.step){params.step=parseInt(params.step);if(isFinite(params.step)&&!isNaN(params.step)){data.currentStep=params.step;}}
var container=$(':semanticRole(checkout.container)');var scroll=$(window).scrollTop();container.empty().append(response);if($(".hide-when-not-required",container).length){$(".hide-when-not-required",container).each(function(){var elem=$(this);var formField=elem.parent();if(!elem.hasClass("required"))
formField.hide();});}
updateSelectedDeliveryAddress();$('.tipsy.tipsy-s').remove();var form=container.find('form');fixWindowScrollPosition(scroll);initFormSelect(form);initCountryStateCity();selectGiftsInBlocks(savedGifts);data.selectedProductsToWeight=data.selectedProductsToWeight||{};data.showProductsToWeight=false;checkActualProductsToWeightState();checkout.trigger('checkout-step-changed');});}
checkout.toggleProductTable=function(id,el){var $el=$(el),$id=$(id);if($id.is(':visible')){$id.slideUp();if(el&&$el.attr('data-title-hidden')){$el.html($el.attr('data-title-hidden'));}}else{$id.slideDown();if(el&&$el.attr('data-title-shown')){$el.html($el.attr('data-title-shown'));}}
return false;};checkout.OnCheckoutAdditionalInfoCustom=function(event){var selector='.checkout-additional-info-item';var wrapper=$(this).parents(selector).eq(0);var post=wrapper.find('.checkout-additional-info-product-fields').eq(0).clone();var select=wrapper.find('select.custom-fields-amount');var productId=wrapper.attr('data-product-id');var quantityWantToBuy=wrapper.attr('data-quantity');post.append(select);post.append('<input name="quantityWantToBuy" value="'+quantityWantToBuy+'">');post.find('input[name*="_quantity"]').remove();$.post('/ajax/checkout/editadditionalinfo',post.serialize(),function(response){wrapper.replaceWith(response);initFormSelect($('[data-product-id="'+productId+'"]'+selector));});};checkout.OnCheckoutAdditionalInfoContinue=function(event){$('.checkout-additional-info-item [name^="activationInfo"]').each(function(){var $this=$(this);data[$this.attr('name')]=$this.val();});data.scrollPosition=0;checkout.process();}
var collectGiftProductIds=function(){var result={"dummy":0};var blocks=$('.checkout-gift-list [data-tab-id]');for(var i=0;i<blocks.length;i++){var block=blocks.eq(i);if(block.parents('[data-tab-id]').length>0)continue;var blockId=block.attr('data-tab-id');delete result[blockId];var product=block.find('[data-element="radioitem"][data-selected]');if(!product.length)continue;var productId=product.parents('[data-product-id]').eq(0).attr('data-product-id');if(!productId)continue;result[blockId]=[{'id':productId,'quantity':1}];}
return result;}
checkout.OnGiftSelected=function(event){if(!data.gifts){data.gifts={"dummy":0};}
var blocks=$('.checkout-gift-list [data-tab-id]');data.gifts=collectGiftProductIds();savedGifts=data.gifts;data.scrollPosition=0;checkout.process();}
checkout.OnSelfDeliverySelected=function(event){$(this).semanticRelated().removeAttr('data-selected');$(this).attr('data-selected','on');data.selfDelivery=1;delete data.selfDeliveryService;delete data.delivery;data.address=data.address||{};delete data.address.countryId;delete data.address.stateId;delete data.address.state;delete data.address.cityId;delete data.address.city;delete data.addressSelected;checkout.process(CheckoutStep.ADDRESS,true);}
checkout.OnAddressDeliverySelected=function(event){$(this).semanticRelated().removeAttr('data-selected');$(this).attr('data-selected','on');data.selfDelivery=0;delete data.selfDeliveryService;delete data.delivery;data.address=data.address||{};delete data.address.countryId;delete data.address.stateId;delete data.address.state;delete data.address.cityId;delete data.address.city;delete data.addressSelected;checkout.process(CheckoutStep.ADDRESS,true);}
checkout.OnAgreeWithNotRecommendedProducts=function(event){data.userAgreedWithNotRecommendedProducts=1;checkout.process();}
checkout.OnAgreeWithDeliveryCostChange=function(event){data.userAgreedWithDeliveryCostChange=1;checkout.process();}
checkout.OnSupplementaryInfoSelected=function(event){var container=$(this).parents(':semanticRole(checkout.container)');data.address=data.address||{};delete data.address.supplementary;var temp={countryId:true,stateId:true,state:true,cityId:true,city:true}
var form=container.find(':semanticRole(checkout.supplementary) form');if(form.length>0){var info=serializeForm(form);for(var name in info){if(info.hasOwnProperty(name)){data.address[name]=info[name];}}
data.address.supplementary=true;}
checkout.process();}
checkout.OnPrepaidSupplementaryInfoSelected=function(event){var form=$('.checkout-delivery-supplementary-info-wrapper').find('form');data.supplementary=serializeForm(form);checkout.process();}
checkout.BindPrepaidSupplementaryInfoEvents=function(paymentFeePercent,paymentFeeFixed){var paymentFeePercent=paymentFeePercent/100;var paymentFeeFixed=Math.round(paymentFeeFixed*100);var form=$('.checkout-delivery-supplementary-info-wrapper').find('form');var amount=form.find('.prepaids-amount input');var total=form.find('.prepaids-total input');var flag=false;amount.on('keyup',function(event){if(flag)return;flag=true;var v=parseFloat(amount.val());if(!isFinite(v)||isNaN(v))v=0.0;var v=v*100;var n=v*(1+paymentFeePercent)+paymentFeeFixed;total.val(Math.round(n)/100);flag=false;});total.on('keyup',function(event){if(flag)return;flag=true;var v=parseFloat(total.val());if(!isFinite(v)||isNaN(v))v=0.0;var v=v*100;var n=(v-paymentFeeFixed)/(1+paymentFeePercent);amount.val(Math.round(n)/100);flag=false;});}
checkout.OnDeliveryServiceSelect=function(event){var target=$(event.target);if(target.attr('data-stop-bubbling')=='on'||target.parents('[data-stop-bubbling="on"]').length){return true;}
$(this).parents(':semanticRole(checkout.delivery-service-list)').hide();var target=$(this).semanticTarget().show();var container=$(this).parents(':semanticRole(checkout.store-group)');container.find(':semanticRole(checkout.delivery.cost-not-included-hint)').hide();var container=$(this).parents(':semanticRole(checkout.container)');if(data.selfDelivery){var delivery=collectSelectedDelivery(container);if(delivery.hasOwnProperty('0'))delivery=delivery[0];else
if(delivery.hasOwnProperty(''))delivery=delivery[''];else
delivery=null;if(delivery)data.selfDeliveryService=delivery.id;}else{data.delivery=collectSelectedDelivery(container);}
loadProductsToWeight();updateControlsOnDeliveryChange(container);}
checkout.OnDeliveryServiceSelected=function(event){if(!$(this).data('disabled')){var container=$(this).parents(':semanticRole(checkout.container)');delete data.selfDeliveryService;data.delivery=collectSelectedDelivery(container);checkout.process();}}
checkout.OnChangeSelfDeliveryService=function(event){delete data.selfDeliveryService;delete data.delivery;checkout.process(CheckoutStep.DELIVERY_TYPE,true);}
checkout.OnChangeDeliveryService=function(event){var container=$(this).parents(':semanticRole(checkout.store-group)');var storeGroupId=container.attr('data-value');updateControlsOnDeliveryChange(container);var container=$(this).parents(':semanticRole(checkout.container)');container.find(':semanticRole(checkout.supplementary)').remove();container.find('.checkout-button-next-wrapper a').attr('data-action-click','site.checkout.OnDeliveryServiceSelected');data.selectedProductsToWeight={};data.showProductsToWeight=false;if(data.selfDelivery){delete data.delivery;delete data.selfDeliveryService;checkout.process(CheckoutStep.SELF_DELIVERY,true);}else{delete data.delivery[storeGroupId];delete data.selfDeliveryService;checkout.process(CheckoutStep.DELIVERY,true);}}
checkout.OnShowDeliveryRating=function(event){site.dropdown.beforeShow(function(event,current,newBlock){$('.dropdown').removeClass('hover');});site.dropdown.beforeShow($(this));$(this).addClass('hover');};checkout.OnSelfDeliveryServiceSelected=function(event){var container=$(this).parents(':semanticRole(checkout.container)');delete data.delivery;var delivery=collectSelectedDelivery(container);for(var n in delivery){if(delivery.hasOwnProperty(n)){data.selfDeliveryService=delivery[n].id;break;}}
checkout.process();}
checkout.OnChangePaymentService=function(event){delete data.payment;var container=$(this).parents(':semanticRole(checkout.container)');checkout.process(CheckoutStep.PAYMENT,true);}
checkout.OnChangePrepaidsPaymentService=function(event){delete data.payment;checkout.process(CheckoutStep.ENTER,true);}
checkout.OnPaymentServiceSelect=function(event){$(this).parents(':semanticRole(checkout.payment-service-list)').hide();$(this).semanticTarget().show();var container=$(this).parents(':semanticRole(checkout.container)');container.find(':semanticRole(checkout.payment.other-charges-hint)').hide();enableButtonNext();}
checkout.OnPaymentServiceSelected=function(event){var container=$(this).parents(':semanticRole(checkout.container)');var form=container.find(':semanticRole(checkout.payment-service-block):visible').find('form');data.payment=serializeForm(form);var stripeForm=$('[space="checkout/payment/regular/selected/stripe"]');if(stripeForm.length&&data.payment.id=='-1554126484'){stripeForm[0].$$().call('process-token');}else{checkout.process();}}
checkout.SetDataParam=function(name,value){data[name]=value;};var getProductsWithBrandedBoxes=function(block){var brandedCheckboxes=block.find('.branded-box [data-selected]');var productIds=[];for(var j=0;j<brandedCheckboxes.length;j++){var productId=brandedCheckboxes.eq(j).attr('data-product');productIds.push(productId);}
return productIds;}
checkout.OnConfirmAgreement=function(){if($('.agreement-checkbox:checked').length>0){$('.summary-order').each(function(){$(this).attr("disabled",false)})}else{$('.summary-order').each(function(){$(this).attr("disabled",true)})}};checkout.OnConfirmOrder=function(event){if($('.agr-chb').length>0){if(window.site.getCookie('ismobile')==1){if($('.agreement-checkbox:checked').length<1){return false;}}else{if(!$('[name="agreement"]').attr("checked")){$('.agreement-error').removeClass('hidden');return false;}}}
var container=$(this).parents(':semanticRole(checkout.container)');data.summary=1;data.comment=container.find(':semanticRole(checkout.order-comment)').val();ui.waiter.show(site.t('Order in progress','gsmserver.checkout'));checkout.process();}
checkout.OnCheckoutRestart=function(event){checkout.process();}
checkout.OnEditAddress=function(event){delete data.delivery;checkout.process(CheckoutStep.ADDRESS);}
var setUpDeliveryAddress=function(form){data.address=data.address||{};data.address.countryId=null;data.address.stateId=null;data.address.state=null;data.address.cityId=null;data.address.city=null;data.address=$.extend(true,data.address,serializeForm(form));data.addressSelected=1;}
checkout.OnAddressSelected=function(event){var container=$(':semanticRole(checkout.container)');var form=container.find('.checkout-address-form');setUpDeliveryAddress(form);data.scrollPosition=0;data.scrollCondition=function(){return data.currentStep!=CheckoutStep.ADDRESS;}
checkout.process();}
checkout.OnSelectDeliveryAddress=function(event){$(this).semanticRelated().find('.styled-checkbox').removeAttr('data-selected');$(this).find('.styled-checkbox').attr('data-selected','on');var form=$(this).semanticTarget();var parent=form.parents('.checkout-delivery-type').eq(0);var indicator=$('.checkout-indicator-wrapper-new');data.scrollPosition=parent.offset().top+parent.height()-indicator.height();data.scrollDuration=400;data.scrollCondition=function(){return data.currentStep==CheckoutStep.ADDRESS;}
setUpDeliveryAddress(form);delete data.delivery;checkout.process();}
checkout.OnEditDeliveryAddress=function(event){var form=$(this).parents(':semanticRole(checkout.delivery-address)').semanticTarget();var parent=form.parents('.checkout-delivery-type').eq(0);var indicator=$('.checkout-indicator-wrapper-new');data.scrollPosition=parent.offset().top+parent.height()-indicator.height();data.scrollDuration=400;setUpDeliveryAddress(form);checkout.process(CheckoutStep.ADDRESS,0);return event.cancel();}
checkout.OnGoBackClick=function(event){var step=parseInt($(this).attr('data-value'));if(!isFinite(step)||isNaN(step))return;checkout.process(step);}
checkout.debug=function(){console.log(data);}
var showCheckoutHint=function(listItem,type){var hint=listItem.find('.checkout-service-hint');var parentWidth=listItem.outerWidth();var hintWidth=hint.outerWidth();var listWrapper=listItem.parents('.checkout-'+type+'-services');var listItems=$('.checkout-'+type+'-service',listWrapper);var listItemIndex=listItems.index(listItem);var listVisibleItems=$('.checkout-'+type+'-service:visible',listWrapper);listItem.addClass('hover');if(listWrapper.innerWidth()<parseInt(listItem.position().left)+hintWidth){hint.css({right:-2,left:'auto'});}else{hint.css({right:'auto',left:-2});}};var hideCheckoutServiceHint=function(){$('.checkout-service-hint').parent().removeClass('hover');};checkout.OnShowDeliveryHint=function(event){var wrapper=$(this);var disabled=wrapper.attr('data-disabled')=="on"?true:false;if(!disabled){showCheckoutHint(wrapper,'delivery');}};checkout.OnShowPaymentHint=function(event){var wrapper=$(this);showCheckoutHint(wrapper,'payment');};checkout.OnHideCheckoutServiceHint=function(){hideCheckoutServiceHint();};checkout.OnUnselectGiftInTable=function(){$('.checkout-gift-list .checkout-selected-gifts-list').empty();var tabs=$('.checkout-gift-list .gift-tabs');if(tabs.length>0){tabs=ui.radiobox(tabs.get(0));tabs.unselectAll();if($('.checkout-gift-list-change').is(":visible")){checkout.OnCancelGiftList();}}
if(!!$('.one-page-checkout').length){$('.one-page-checkout input[name="gifts[dummy]"]').val('');$('.one-page-checkout input[name="gifts[presents]"]').val('');$('.virtual-info').hide();$('.virtualInfo-wrapper').show();$('.general-col-container').hide();$('.follow-order').hide();checkout.OnShowGiftList();$('.one-page-checkout .choose-present .down-next-wrapper').show();}}
checkout.OnShowGiftList=function(){var wrapper=$('.checkout-gift-list');wrapper.removeClass('without-border');$('.virtual-info').hide();$('.virtualInfo-wrapper').show();$('.general-col-container').hide();$('.follow-order').hide();$('.checkout-gift-list-initial',wrapper).slideUp();$('.checkout-gift-list-change',wrapper).slideUp();if(window.navigator.userAgent.indexOf('Trident/')>0){$('.tabs',wrapper).show();$('.checkout-gift-list-cancel',wrapper).show();}else{$('.tabs',wrapper).slideDown('slow',function(){$('.checkout-gift-list-cancel',wrapper).show();});}
$('.one-page-checkout .choose-present .down-next-wrapper').show();}
checkout.OnCancelGiftList=function(){var wrapper=$('.checkout-gift-list');$('.checkout-gift-list-cancel',wrapper).slideUp();$('.tabs',wrapper).slideUp();if($('.unified-product-table',wrapper).length>0){wrapper.addClass('without-border');$('.checkout-gift-list-change',wrapper).slideDown('slow');}else{wrapper.removeClass('without-border');$('.checkout-gift-list-change',wrapper).slideUp();$('.checkout-gift-list-initial',wrapper).slideDown('slow');}}
checkout.OnUnselectProductToWeightInTable=function(){var id=$(this).attr('data-product');data.selectedProductsToWeight=data.selectedProductsToWeight||{};if(data.selectedProductsToWeight.hasOwnProperty(id)){delete data.selectedProductsToWeight[id];site.cart.remove.call($(this),undefined,true);}
data.showProductsToWeight=$('.checkout-products-to-weight .tabs').is(":visible");}
checkout.OnShowProductToWeightList=function(){var wrapper=$('.checkout-products-to-weight');$('.checkout-products-to-weight-list-initial',wrapper).slideUp();$('.checkout-products-to-weight-list-change',wrapper).slideUp();$('.tabs',wrapper).slideDown('slow',function(){$('.checkout-products-to-weight-list-cancel',wrapper).show();});}
checkout.OnCancelProductToWeightList=function(){var wrapper=$('.checkout-products-to-weight');$('.checkout-products-to-weight-list-cancel',wrapper).slideUp();$('.tabs',wrapper).slideUp();if($('.unified-product-table',wrapper).length>0){$('.checkout-products-to-weight-list-change',wrapper).slideDown('slow');}else{$('.checkout-products-to-weight-list-change',wrapper).slideUp();$('.checkout-products-to-weight-list-initial',wrapper).slideDown('slow');}}
ui.ready(function(){$('body').on(ui.events.CHANGE,'.checkout-address-form .is-organization',function(event){var organization=$(this).parents('form').find('.checkout-address-organization');if(ui.element(this).selected()){organization.show();}else{organization.hide();}}).on(ui.events.CHANGE,'[data-sm-role="checkout.container"] .checkout-gift-list .gift-tabs, [data-sm-role="checkout3.container"] .checkout-gift-list .gift-tabs',function(event){var productIds=collectGiftProductIds();var ids=[];for(var i in productIds){if(productIds.hasOwnProperty(i)&&productIds[i]){for(var j in productIds[i]){if(productIds[i][j]['id']){ids.push(productIds[i][j]['id']);}}}}
if(ids.length>0){params={"ids":ids.join(','),"currency":currencyId}
$.get('/ajax/checkout/products/gifts/',params,function(data){$('.checkout-gift-list .checkout-selected-gifts-list').html(data);var wrapper=$('.checkout-gift-list');if($('.checkout-gift-list-initial',wrapper).is(":visible")&&$('.unified-product-table',wrapper).length>0){wrapper.addClass('without-border');$('.checkout-gift-list-initial',wrapper).hide();$('.checkout-gift-list-change',wrapper).show();}});}else{$('.checkout-gift-list .checkout-selected-gifts-list').empty();}}).on('click','[data-sm-role="checkout.container"] .product-tile-wrapper li img, [data-sm-role="checkout3.container"] .product-tile-wrapper li > a',function(event){var item=ui.element($(this).parents('[data-product-id]').find('[data-element="radioitem"]').get(0)).auto();item.toggle();item.list().node.trigger(ui.events.CHANGE);return event.cancel();}).on('click','#tabs-products-to-weight .product-button',function(event){var id=$(this).attr('data-product');data.selectedProductsToWeight=data.selectedProductsToWeight||{};data.selectedProductsToWeight[id]=true;data.showProductsToWeight=$('.checkout-products-to-weight .tabs').is(":visible");return event.cancel();}).on(ui.events.CHANGE,'.checkout-user-agreement .user-agreement',function(event){data.checkedAgreement=ui.element(this).selected()?1:0;var checkoutData={};var cookie=window.site.getCookie('checkout');if(cookie)checkoutData=JSON.parse(cookie);if(!checkoutData['data'])checkoutData['data']={};checkoutData['data']['checkedAgreement']=data.checkedAgreement;window.site.setCookie('checkout',JSON.stringify(checkoutData));}).on('keyup',':semanticRole(checkout.order-comment)',function(event){data.comment=$(this).val();var checkoutData={};var cookie=window.site.getCookie('checkout');if(cookie)checkoutData=JSON.parse(cookie);if(!checkoutData['data'])checkoutData['data']={};checkoutData['data']['comment']=data.comment;window.site.setCookie('checkout',JSON.stringify(checkoutData));});site.cart.on('changed',function(event,type,data){if(type!='add')return;var productsToWeight=$('[data-sm-role="checkout.container"] .checkout-products-to-weight');if(!productsToWeight.length)return;loadProductsToWeight(true);});site.cart.on('changed',function(event,type,data){if(type!='remove')return;var productsToWeight=$('[data-sm-role="checkout.container"] .checkout-products-to-weight');if(!productsToWeight.length)return;loadProductsToWeight(true);});});ui.ready(function(){var timeout=null
$('body').on('keyup blur','.checkout-additional-info-item input[name*="_quantity"]',function(event){clearTimeout(timeout);var $this=$(this);timeout=setTimeout(function(){var wrapper=$this.parents('.checkout-additional-info-item');var cartAmount=wrapper.attr('data-quantity');var userAmount=0;wrapper.find('input[name*="_quantity"]').each(function(){userAmount+=Number($(this).val());});var available=cartAmount-userAmount;var showWarning=available<0;available=available>0?available:0;wrapper.find('[data-type="not-enough"]').toggleClass('hidden',!showWarning);wrapper.find('[data-type="available-amount"]').toggleClass('hidden',showWarning);wrapper.find('[data-type="available-amount"]').find('span').html(available);wrapper.find('[data-type="summary"]').addClass('hidden');},300);}).on('change','.custom-fields-amount',site.checkout.OnCheckoutAdditionalInfoCustom);});checkout.trackOrder=function(){}
checkout.getCountryStateCityData=function(form){var dataObject={};dataObject.address=data.address||{};dataObject.address.countryId=null;dataObject.address=$.extend(true,dataObject.address,serializeForm(form));dataObject.currentStep=data.currentStep;dataObject.stopOnStep=data.currentStep;dataObject.stopOnNextStep=1;return dataObject;}
checkout.changeRegionStar=function($form,params){params=typeof params!=='undefined'?params:{};var $labels=$('[data-form-element="state"], [data-form-element="city"]',$form);$labels.each(function(index){var $label=$(this);var type=$label.attr('data-form-element');var starHtml='<span class="required">*</span>';var $select=$('select',$label);$('span.required',$label).remove();if(params.hasOwnProperty(type)&&params[type].required){var $customText=$label.find('.custom-element-text');$customText.append(starHtml);}});}
checkout.OnCountryChange=function(event){var form=$(this.form);var countryId=$(this);var state=form.find('[data-form-element="state"] input, [data-form-element="state"] select');var city=form.find('[data-form-element="city"] input, [data-form-element="city"] select');var dataObject=checkout.getCountryStateCityData(form);dataObject.address.stateId=null;dataObject.address.state=null;dataObject.address.cityId=null;dataObject.address.city=null;if(jQuery().chosen){$('#state_id').chosen('destroy');$('#city_id').chosen('destroy');}
ui.input(this).enabled(false);for(var i=0;i<state.length;i++){ui.input(state[i]).enabled(false);}
site.csc.states(dataObject,function(data){var items=data.state.items;ui.input(countryId.get(0)).enabled(true);if(~document.location.pathname.indexOf('onepagecheckout')){$('input#city').on('change',checkout.onCityChange);$('#no-delivery').hide();if(window.onlyVirtual===false){checkout.onChooseType();}else{checkout.getPayments();}}
var html=site.csc.buildStateHtml(items,countryId.get(0).form,site.t('Select','common'),'site.checkout.OnStateChange');state.replaceWith(html);if(jQuery().chosen&&html.indexOf('<select')!=-1){$('#state_id').chosen({no_results_text:site.t('State not found','common')});}
checkout.changeRegionStar(form,data);if(data.hasOwnProperty('requiredFields')){checkout.updateAddressRequiredFields(data.requiredFields);}},'/ajax/checkout/states');var cityHtml=site.csc.buildCityHtml(false,countryId.get(0).form,site.t('Select','common'));city.replaceWith(cityHtml);if(jQuery().chosen&&cityHtml.indexOf('<select')!=-1){$('#city_id').chosen({allow_custom_value:true});}}
checkout.OnStateChange=function(event){var form=$(this.form);var stateId=$(this);var city=form.find('[data-form-element="city"] input, [data-form-element="city"] select');var dataObject=checkout.getCountryStateCityData(form);dataObject.address.cityId=null;dataObject.address.city=null;if(jQuery().chosen){$('#city_id').chosen('destroy');}
ui.input(this).enabled(false);for(var i=0;i<city.length;i++){ui.input(city[i]).enabled(false);}
site.csc.cities(dataObject,function(data){var items=data.city.items;ui.input(stateId.get(0)).enabled(true);if(~document.location.pathname.indexOf('onepagecheckout')){$('#no-delivery').hide();$('[data-chose-delivery-type] [disabled]').removeAttr('disabled');checkout.updateAddressRequiredFields({'organization':false},'payment');if(window.onlyVirtual===false){checkout.onChooseType();}else{checkout.getPayments();}}
var html=site.csc.buildCityHtml(items,stateId.get(0).form,site.t('Select','common'));city.replaceWith(html);if(jQuery().chosen&&html.indexOf('<select')!=-1){$('#city_id').chosen({allow_custom_value:true}).change(site.checkout.onCityChange);$('input#city').on('change',site.checkout.onCityChange);}else{$('input#city').on('change',checkout.onCityChange);}
checkout.changeRegionStar(form,data);},'/ajax/checkout/cities');}
checkout.onCityChange=function(event){if(!~document.location.pathname.indexOf('onepagecheckout')){return false;}
$('#no-delivery').hide();$('[data-chose-delivery-type] [disabled]').removeAttr('disabled');if(!$('#city_id').length)return false;if(window.onlyVirtual===false){checkout.onChooseType();}else{checkout.getPayments();}}
checkout.checkVirtual=function(){var forms=$('div.one-page-checkout form');ui.waiter.show();$.post("/checkvirtual",forms.serialize(),function(items){ui.waiter.hide();$('.checkout-additional-info-product-field-block span.errors').remove();$('.virtualInfo_container ul.content').empty();var str=JSON.parse(items);if(str.status=='success'){$.each(str.data,function(pid,record){$.each(record,function(id,string){$('.virtualInfo_container ul.content').append('<li>'+string+'</li>');})});$('.virtual-info').hide();$('.virtualInfo-wrapper').show();if(!!$('.choose-present').length){$('.choose-present').show();if($('.choose-present .down-next-wrapper').css('display')=='none'){$('.general-col-container').show();$('.follow-order').show();if(window.onlyVirtual===false){checkout.onChooseType();}else{checkout.getPayments();}}else{checkout.OnShowGiftList();$('.one-page-checkout .choose-present .down-next-wrapper').show();}
var cords=$('.choose-present').offset();window.scrollTo(0,cords.top);}else{$('.general-col-container').show();$('.follow-order').show();if(window.onlyVirtual===false){checkout.onChooseType();}else{checkout.getPayments();}}
$('.checkout_col_height').equivalent();}
if(str.status=='errors'){$.each(str.errors,function(key,text){if(text==undefined)
return true;$('input[name="'+key+'"]').parent().parent().append('<span class="errors">'+text+'</span>');$('input[name="'+key+'"]').addClass('error');});}});}
checkout.editVirtual=function(){$('.virtual-info').show();$('.virtualInfo-wrapper').hide();$('.choose-present').hide();$('.general-col-container').hide();$('.follow-order').hide();}
checkout.OnGiftsSelect=function(){initAddressFormNonRequiredFields();var gifts=collectGiftProductIds();$('input[name="gifts[presents]"]').val(gifts.presents);$('input[name="gifts[dummy]"]').val(gifts.dummy);site.checkout.OnCancelGiftList();$('.choose-present .down-next-wrapper').hide();$('.general-col-container').show();checkout.check();$('.follow-order').show();$('.checkout_col_height').equivalent();}
checkout.OnGiftsChange=function(){site.checkout.OnShowGiftList();$('.choose-present .down-next-wrapper').show();$('.virtual-info').hide();$('.virtualInfo-wrapper').show();$('.general-col-container').hide();$('.follow-order').hide();}
checkout.updatePrice=function(){var forms=$('div.one-page-checkout form');$.post("/price",forms.serialize(),function(items){var price=JSON.parse(items);$('td.cost strong').html(price.cost);$('td.delivery-cost strong').html(price.deliverycost);$('td.payment-fee strong').html(price.paymentfee);$('.total-cost strong').html(price.totalcost);})}
checkout.check=function(){var forms=$('div.one-page-checkout form');$('#products-forbidden-to-sell-in-user-country').hide().find('.products_list').empty();$('#products-not-recommended-to-sell-in-user-country').hide();$('.agreement_accepted').hide();$('#products-not-recommended-to-sell-in-user-country input[name="userAgreedWithNotRecommendedProducts"]').val(0);$('.agreement_warning_procedures').hide();$('.pay-pal-verification-info').hide();$.post("/condition",forms.serialize(),function(response){if(!response)
return false;var data=JSON.parse(response);if(data.status=='remove'){$.each(data.product,function(id,name){$('#products-forbidden-to-sell-in-user-country').show().find('.products_list').append('<p>ID: '+id+'<br> '+name+'</p>');})
$('#products-forbidden-to-sell-in-user-country a').attr('href',data.link);}
if(data.status=='agree'){$('#products-not-recommended-to-sell-in-user-country').show();checkout.getDelivery();}
if(data.procedures=='procedures'){$('.agreement_warning_procedures').show();window.proceduresMessages=data.procedures_message;}
return true;});}
checkout.checkSupplementary=function(){var forms=$('div.one-page-checkout form');$('.pay-pal-verification-info').hide();$.post("/condition",forms.serialize(),function(response){if(!response)
return false;var data=JSON.parse(response);if(data.supplementary!=undefined){if(data.supplementary.toString()=='address'){var input=$("input[name='address[address]']");var label=input.parent('label');var customElementText=label.find('.custom-element-text');if(!customElementText.find('.required').length){label.addClass('required');customElementText.append('<span class="required">*</span>');input.attr('data-validator','required').removeClass('error');}}else{var input=$("input[name='address[address]']");var label=input.parent('label');label.removeClass('required');label.find('.custom-element-text').find('span.required').remove();input.removeAttr('data-validator').removeClass('error');}}
if(data.procedures=='procedures'){$('.agreement_warning_procedures').show();window.proceduresMessages=data.procedures_message;}
if(data.payment=='paypal'){$('.pay-pal-verification-info').show();window.paypalMessages=data.paypalmessage;}});}
checkout.agreeCondition=function(){$('#products-not-recommended-to-sell-in-user-country').hide();$('.agreement_accepted').show();$('#products-not-recommended-to-sell-in-user-country input[name="userAgreedWithNotRecommendedProducts"]').val(1);checkout.getDelivery();checkout.checkSupplementary();}
checkout.getDeliveryPrices=function(){var forms=$('div.one-page-checkout form');$.post("/getdeliveries",forms.serialize(),function(items){$.each(items,function(storeGroupId,deliveryItems){var li=$('#delivery-id-'+storeGroupId+' #delivery_dropdown li[data-value]');$.each(deliveryItems,function(index,item){li.filter('[data-value="'+item.id+'"]').attr('data-price',item.price).find('.price').html(item.price)});});},'json');};checkout.getDelivery=function(){var forms=$('div.one-page-checkout form');select=new checkout.getDeliverySelect($('.delivery-popup-1'));select.initialize();select.items.empty();select.input.val('');$('#no-delivery').hide();$('.delivery-service-type-wrapper').hide();$('.delivery-office-wrapper').hide();$('input[name="address[address]"]').removeClass('error');$('input[name="address[zip]"]').removeClass('error');$.post("/getdeliveries",forms.serialize(),function(items){var morestoregroup=false;$('#no-offices-only-to-door.msg-warning').hide();if(items===null||!Object.keys(items).length){select.setTitle(site.t('Fill in required fields','gsmserver.checkout'));select.disable(true);return false;}
if(items.status=='No delivery'){$('#no-delivery').show();if($('[data-chose-delivery-type]').length){$('[data-chose-delivery-type] [name="selfDelivery"][value="1"]').click();$('[data-chose-delivery-type] [name="selfDelivery"][value=""]').attr('disabled','disabled').parents('.custom-radio').eq(0).attr('disabled','disabled');}
return false;}
$.each(items,function(storegroupid,object){if(morestoregroup===true){if(storegroupid!=1&&$('.delivery-service-wrapper.'+storegroupid).length==0){$('.delivery-service-wrapper').last().clone().insertAfter('.delivery-service-wrapper').addClass(storegroupid);}
$('.many-store-groups').show();if($('.scroll_vertical-'+storegroupid).length==0){$('.delivery-service-wrapper.'+storegroupid+' #delivery_dropdown').last().empty().attr('class','my_dropdown scroll_vertical-'+storegroupid);checkout.initScroll('scroll_vertical-'+storegroupid);}
morestoregroup=false;}
$('.delivery-popup-1').last().attr('id','delivery-id-'+storegroupid);var select=new checkout.getDeliverySelect($('#delivery-id-'+storegroupid));select.initialize();select.items.empty();select.setTitle(site.t('Select from list','gsmserver.checkout'));select.disable(false);select.name('delivery['+storegroupid+'][id]');$('input.deliveryToDoor').attr('name','delivery['+storegroupid+'][deliveryToDoor]');$.each(object,function(id,model){if(id=='hint'){$('.delivery-service-wrapper').last().find('p.mb3 strong').html(model);return true;}
if(id=='forbidden'){$('#forbidden-battery').html(model).show();$.fn.equivalent();return true;}
select.addOption(select.makeOption(model.id,model.name,model.price,model.time,model.ratings,model.comments,model.ziprequired,model.isDisabled));})
morestoregroup=true;select.bind();select.input.off('change');select.input.on('change',checkout.onDeliverySelect);})},"json");}
checkout.onDeliverySelect=function(event){var forms=$('div.one-page-checkout form');$(".delivery-popup-1 .chosen-container").removeClass('error');$('.selected_goods .box').remove();$('.selected_goods > p').hide();checkout.updatePrice();checkout.getProductsToWeight();$.post("/getoffices",forms.serialize(),function(items){var select=$('select.delivery-offices');select.empty();select.chosen('destroy');var emptyOption=new Option('',null);select.append($(emptyOption));$('#no-offices-only-to-door.msg-warning').hide();if(items.length==0){$('.address-wrapper').show();$('.delivery-office-wrapper').hide();if($('.delivery-popup-1 input[type="hidden"]').val()==-1830489047){$('#no-offices-only-to-door.msg-warning').html($('#no-offices-only-to-door.msg-warning').attr('tmp').replace('[service-name]',$('.delivery-popup-1 span.select-shade em').html().split('(')[0].trim())).show();}
$('.delivery-service-type-wrapper').hide();$.fn.equivalent();checkout.getPayments();}else{$('.delivery-service-type-wrapper').show();$('.delivery-office-wrapper').show();$.fn.equivalent();$.each(items,function(storegroupid,delivery){select.attr('name','delivery['+storegroupid+'][office]');$.each(delivery,function(deliveryid,offices){$.each(offices,function(id,address){var option=new Option(address,id);select.append($(option));})})})
checkout.onTypeDeliveryChoose();}
select.chosen({placeholder_text_single:site.t('Select from list','gsmserver.checkout'),no_results_text:site.t('Select from list','gsmserver.checkout')});$('select.delivery-offices').off('change');$('select.delivery-offices').on('change',checkout.onOfficeSelect);checkout.checkSupplementary();},"json");}
checkout.getSelfDeliveryService=function(){var forms=$('div.one-page-checkout form');$('[name="selfDeliveryService"]').prop('selectedIndex',0);$.post("/getSelfDelivey",forms.serialize(),function(items){var select=$('select.selfDeliveryService');select.empty();select.chosen('destroy');var emptyOption=new Option('','');select.append($(emptyOption));var itemsobj=JSON.parse(items);$.each(itemsobj,function(id,name){var option=new Option(name,id);select.append($(option));});select.chosen({placeholder_text_single:site.t('Select from list','gsmserver.checkout'),no_results_text:site.t('Select from list','gsmserver.checkout')});});}
checkout.onOfficeSelect=function(event){checkout.getProductsToWeight();checkout.getPayments();checkout.updatePrice();}
checkout.getProductsToWeight=function(){var forms=$('div.one-page-checkout form');var facet=forms.find('[name="ptw_active_tag"]').val();$.post("/getproductstoweight",forms.serialize(),function(items){if(!items.length){$('.products-to-weight-wrapper').hide();return false;}
$('.products-to-weight-wrapper').show();var select=checkout.getProductsSelect('#goods_dropdown');select.initialize();select.items.empty();select.menu.empty();var data=JSON.parse(items);$('p.weight_remain_title').html(data.weight_remain);if(typeof(data.facets)=="object"){select.createTags(data.facets);}
if(typeof(data.products)=="object"){$('.delivery-popup-2').show();$.fn.equivalent();$.each(data.products,function(id,model){select.addOption(select.makeOption(id,model.name,model.img,model.weight,model.price,model.oldprice,facet));});select.bind();}else{$('.delivery-popup-2').hide();}});}
checkout.onSelfDeliverySelect=function(){$('.selfdelivery-office-wrapper .hint').hide();$('.selfdelivery-office-wrapper .hint.title').show();$('.selfdelivery-office-wrapper .hint.address'+$('select[name="selfDeliveryService"]').val()).show();checkout.getPayments();checkout.updatePrice();}
checkout.getPayments=function(){var forms=$('div.one-page-checkout form');var select=checkout.getPaymentsSelect('.payment-popup');select.initialize();select.items.empty();select.input.val('');checkout.updateAddressRequiredFields({'organization':false},'payment');$.post("/getpayments",forms.serialize(),function(items){checkout.updatePrice();if(!items){select.setTitle(site.t('Fill in required fields','gsmserver.checkout'));select.disable(true);$("#payment-id .chosen-container").removeClass('error');return false;}
var dataResponceObj=JSON.parse(items);var itemsobj=dataResponceObj.data;var warningMessages=dataResponceObj.warningMessages;$('#warningMessageWrapper').html();if(warningMessages.length){$('#warningMessageWrapper').html(warningMessages);}
$.fn.equivalent();if(itemsobj.error=='updatedelivery'){checkout.getDelivery();return false;}
$.each(itemsobj,function(id,model){select.addOption(select.makeOption(id,model.name,model.price,model.warnBecauseOfAmountExceed));});select.setTitle(site.t('Select from list','gsmserver.checkout'));select.disable(false);select.bind();$('input[name="payment\[id\]"]').off('change');$('input[name="payment\[id\]"]').on('change',checkout.onPaymentSelect);});}
checkout.onPaymentSelect=function(){$("#payment-id .chosen-container").removeClass('error');checkout.checkSupplementary();checkout.updatePrice();checkout.enableOrderButton(true);if($('[name="payment[id]"]').val()==-801044059){$('[name="payment[isOrganization]"]').val(1);checkout.updateAddressRequiredFields({'organization':true},'payment');}else{$('[name="payment[isOrganization]"]').val(0);checkout.updateAddressRequiredFields({'organization':false},'payment');}}
checkout.enableOrderButton=function(enable){if(enable){$('.checkout-button-next-wrapper > a').removeAttr('data-disabled');}}
checkout.onChooseType=function(){if($('[name="selfDelivery"]:checked').val()){$('tr[data-delivery-cost]').hide();$('.selfdelivery-office-wrapper .hint').hide();$('.delivery-service-wrapper').hide();$('.delivery-service-type-wrapper').hide();$('.delivery-office-wrapper').hide();$('.address-wrapper').hide();$('.selfdelivery-office-wrapper').show();$('input#city').parents('label').eq(0).find('span.required').hide();checkout.getSelfDeliveryService();}else{$('tr[data-delivery-cost]').show();$('.selfdelivery-office-wrapper').hide();$('.delivery-service-wrapper').show();$('input#city').parents('label').eq(0).find('span.required').show();checkout.getDelivery();}
checkout.getPayments();$('.products-to-weight-wrapper .delete_box').trigger('click',[false]);$('.products-to-weight-wrapper').hide();checkout.check();setTimeout(checkout.updatePrice,1000);}
checkout.onTypeDeliveryChoose=function(){checkout.updatePrice();if(+$('input.deliveryToDoor:checked').val()){$('.delivery-office-wrapper').hide();$('.address-wrapper').show();checkout.checkSupplementary();}else{$('.delivery-office-wrapper').show();$('.address-wrapper').hide();}
checkout.getPayments();}
checkout.selectAddress=function(){var address=window.previousAddress[$('input[name="choose-adress"]:checked').val()];var formName='address';var form=$('form[name="'+formName+'"]');form.name=formName;var state=form.find('[data-form-element="state"] input, [data-form-element="state"] select');var city=form.find('[data-form-element="city"] input, [data-form-element="city"] select');$('#country_id').chosen('destroy');var cityId=undefined;$.each(address,function(field,value){if(field=='countryId'){;$('#country_id').val(value);$('#country_id').chosen({allow_custom_value:true});}
if(field=='stateId'){if(jQuery().chosen){$('#state_id').chosen('destroy');$('#city_id').chosen('destroy');}
if(false&&(value==null||value==0)){var html=site.csc.buildStateHtml(null,form,site.t('Select','common'),'site.checkout.OnStateChange');state.replaceWith(html);checkout.changeRegionStar(form,{city:{required:true}});}else{var dataObject=checkout.getCountryStateCityData(form);$('select#state_id').val(value);site.csc.states(dataObject,function(data){var items=data.state.items;if(~document.location.pathname.indexOf('onepagecheckout')){$('input#city').on('change',checkout.onCityChange);if(window.onlyVirtual===false){checkout.onChooseType();}else{checkout.getPayments();}}
var html=site.csc.buildStateHtml(items,form,site.t('Select','common'),'site.checkout.OnStateChange');state.replaceWith(html);$('select#state_id').val(value);if(html.indexOf('<select')!=-1){$('#state_id').chosen({no_results_text:site.t('State not found','common')});}
checkout.changeRegionStar(form,data);if(data.hasOwnProperty('requiredFields')){checkout.updateAddressRequiredFields(data.requiredFields);}
if(cityId==null){var html=site.csc.buildCityHtml(null,form,site.t('Select','common'));city.replaceWith(html);}
if(cityId!=null){var dataObject=checkout.getCountryStateCityData(form);dataObject.address.cityId=null;dataObject.address.city=null;site.csc.cities(dataObject,function(data){if(data&&data['city']){var items=data.city.items;var html=site.csc.buildCityHtml(items,form,site.t('Select','common'));city.replaceWith(html);$('select#city_id').val(cityId);if(html.indexOf('<select')!=-1){$('#city_id').chosen({allow_custom_value:true}).change(site.checkout.onCityChange);$('input#city').on('change',site.checkout.onCityChange);}}
if(~document.location.pathname.indexOf('onepagecheckout')){if(window.onlyVirtual===false){checkout.onChooseType();}else{checkout.getPayments();}}},'/ajax/checkout/cities');}},'/ajax/checkout/states');}}
if(field=='cityId'){cityId=value;if(cityId==null||cityId==0){var html=site.csc.buildCityHtml(null,form,site.t('Select','common'));city.replaceWith(html);}}
$('[name="'+formName+'['+field+']'+'"]').val(value);});setTimeout(function(){$('.ui-lightbox-close').click();},100)}
checkout.SubmitOrder=function(event){if($(this).data('disabled')=='on')
return false;var forms=$('div.one-page-checkout form');$('span.errors').remove();$('input.error').removeClass('error');ui.waiter.show(site.t('Order in progress','gsmserver.checkout'));$.post("/order",forms.serialize(),function(data){if(!data)return false;ui.waiter.hide();var item=JSON.parse(data);if(item.status=="error"&&item['errors']&&Object.keys(item).length){$.each(item.errors,function(key,text){var value=text;if(typeof(text)=='object'){var i=0;for(var t in text){if(!text.hasOwnProperty(t))continue;if(i==0){value=text[t];}else{value=value+'\n'+t;}}}
value='';$('input[name="'+key+'"]').parent().parent().append('<span class="errors">'+value+'</span>');$('input[name="'+key+'"]').addClass('error');if(key=="address[phone]"){$('.styled-phone-input').addClass('error');}
if(key=="address[stateId]"){$('#state_id_chosen').addClass('error');}
if(key=="address[city]"){$("#city_id_chosen").addClass('error');}
if(key=="delivery-id"){$(".delivery-popup-1 .chosen-container").addClass('error');}
if(key=="selfdelivery"){$(".selfdelivery-office-wrapper .chosen-container").addClass('error');}
if(key=="payment-id"){if($('[name="payment[organization]"]').parents('.required').length&&!$('[name="payment[organization]"]').val()){$('[name="payment[organization]"]').addClass('error');}else{$("#payment-id .chosen-container").addClass('error');}}
if(key=="site-usage-is-forbidden"){$('body').append(text);}})}});}
var initChosenSelect=function(container){var selects=$(container).find('select:not(#country_id, #state_id, #city_id, .checkout-additional-info-product-field-block select, .custom-fields-amount)');selects.each(function(){if(jQuery().chosen){$(this).empty();$(this).chosen('destroy');$(this).chosen({no_results_text:site.t('Select from list','gsmserver.checkout')});}});}
checkout.getDeliverySelect=function(path){var select={path:path,input:null,title:null,items:null,initialize:function(){this.input=this.path.find('input');this.title=this.path.find('span.select-shade em');this.items=this.path.find('ul > div').children().first();this.input.val('');},setTitle:function(title){this.title.html(title);},addOption:function(html){this.items.append(html);},disable:function(flag){if(flag){this.path.attr('data-disabled','');}else{this.path.removeAttr('data-disabled');}},makeOption:function(id,name,price,description,stars_count,comments_count,zip_required,isDisabled){description=description||'';stars_count=stars_count||0;comments_count=comments_count||0;zip_required=zip_required||0;return"<li class=\"clearfix\" data-name=\""+name+"\" data-value=\""+id+"\" data-price=\""+price+"\" data-zip=\""+zip_required+"\" data-disabled=\""+isDisabled+"\">"+"<div class=\"left\">"+"<img src=\"/nfs/delivery-service/"+id+"/file/100x40.png \">"+"<div class=\"clearfix\">"+"<div class=\"stars stars_active_"+stars_count+"\">"+"<a class=\"star star_1\"></a>"+"<a class=\"star star_2\"></a>"+"<a class=\"star star_3\"></a>"+"<a class=\"star star_4\"></a>"+"<a class=\"star star_5\"></a>"+"</div>"+"<a href=\"/delivery/"+id+"/feedback/\" class=\"quantity\" target=\"_blank\">&gt;&gt;</a>"+"</div>"+"</div>"+"<div class=\"right\">"+"<p class=\"top_text\">"+site.t('Delivery cost','gsmserver.checkout')+"</p>"+"<p class=\"price\">"+price+"</p>"+"<p class=\"delivery_time\">"+description+"</p>"+"</div>"+"</li>";},name:function(n){n=n||null;if(n){return $(this.input).attr('name',n);}
return $(this.input).attr('name');},bind:function(){var obj=this;this.items.find('li',obj).on('click',function(){if($(this).data('disabled'))
return false;obj.input.val($(this).data('value')).change();obj.setTitle($(this).data('name')+" ("+$(this).data('price').replace(/<(?:.|\n)*?>/gm,'')+")");var input=$('input[name="address[zip]"]');var label=input.parent('label');var customElementText=label.find('.custom-element-text');var isZip=$(this).data('zip');$('.delivery-service-wrapper input').each(function(i,c){if($('.delivery-service-wrapper ul.my_dropdown [data-value="'+$(c).val()+'"]').data('zip')==1){isZip=true;}})
if(isZip){if(!customElementText.find('.required').length){label.addClass('required');customElementText.append('<span class="required">*</span>');input.attr('data-validator','required').removeClass('error');}}else{label.removeClass('required');label.find('.custom-element-text').find('span.required').remove();input.removeAttr('data-validator').removeClass('error');}
$(this).parents('#delivery_dropdown').hide();});}}
return select;}
checkout.getProductsSelect=function(path){var select={path:$(path),menu:null,title:null,items:null,initialize:function(){this.menu=this.path.find('.tags');this.title=$('.selected_goods');this.items=this.path.find('ul').find('.mCSB_container');},setTitle:function(title){this.title.append(title);},addOption:function(html){this.items.append(html);},createTags:function(data){if(!data.active||!data.list)
return false;var html='';var obj=this;$.each(data.list,function(key,name){html='';if(key==data.active){html='<a href="#" class="selected">'+name+'</a>';$('input[name="ptw_active_tag"]').val(key);}else{html='<a>'+name+'</a>';}
obj.menu.append(html);obj.menu.find('a').last().on('click',function(){$('input[name="ptw_active_tag"]').val(key);checkout.getProductsToWeight();return false;});})},makeOption:function(id,name,img,weight,price,oldprice,facet){var oldprice=oldprice||'';var cssClass='clearfix ga-add-to-weight'+(facet=='toys'?' ga-add-weight-stem':'');return'<li class="'+cssClass+'" data-name="'+name+'" data-img="'+img+'" data-weight="'+weight+'" data-product="'+id+'" data-price="'+price+'" data-oldprice = "'+oldprice+'" data-min="1">'+'<div class="left">'+'<img src="'+img+'">'+'</div>'+'<div class="right">'+'<p class="ware_name">'+name+'</p>'+'<div class="bottom clearfix">'+'<p class="old_price">'+oldprice+'</p>'+'<p class="new_price">'+price+'</p>'+'<p class="weight">'+weight+'</p>'+'</div>'+'</div>'+'</li>';},makeTitle:function(id,name,img,weight,price,oldprice){var oldprice=oldprice||'';return'<div class="box" data-product-id="'+id+'"><a data-action-click="site.checkout.removeProductToWeight" class="delete_box"></a><div class="top clearfix"><table width="100%" class="mb12"><tr><td width="40"><div class="goods_img">'+'<img src="'+img+'"></div></td><td>'+'<p class="goods_name">'+name+'</p>'+'<input type="hidden" name="selectedProductsToWeight['+id+']" value="true">'+'</td></tr></table><table width="100%"><tr><td>'+'<span class="old_price">'+oldprice+'</span>'+'<span class="new_price">'+price+'</span></td><td width="80">'+'<p class="weight">'+weight+'</p></td></tr></table></div></div>';},bind:function(){var obj=this;this.items.find('li',obj).on('click',function(){obj.title.append(obj.makeTitle($(this).data('product'),$(this).data('name'),$(this).data('img'),$(this).data('weight'),$(this).data('price'),$(this).data('oldprice')));$('.selected_goods > p').show();site.cart.add.call(this);$.fn.equivalent();$(this).parents('#goods_dropdown').hide();setTimeout(checkout.getProductsToWeight,500);setTimeout(checkout.getDeliveryPrices,500);setTimeout(checkout.getPayments,500);setTimeout(checkout.updatePrice,500);});}}
return select;}
checkout.removeProductToWeight=function(event,loadNewProducts){loadNewProducts=loadNewProducts===undefined?true:false;site.cart.remove.call(this,undefined,true);setTimeout(function(){if(!$('.selected_goods .box').length){$('.selected_goods > p').hide();}
if(loadNewProducts)checkout.getProductsToWeight();setTimeout(checkout.getDeliveryPrices,500);setTimeout(checkout.getPayments,500);setTimeout(checkout.updatePrice,500);$.fn.equivalent();},1000);}
checkout.getPaymentsSelect=function(path){var select={path:$(path),input:null,title:null,items:null,initialize:function(){this.input=this.path.find('input');this.title=this.path.find('span.select-shade em');this.items=this.path.find('ul > div').children().first();this.input.val('');},setTitle:function(title){this.title.html(title);},addOption:function(html){this.items.append(html);},disable:function(flag){if(flag){this.path.attr('data-disabled','');}else{this.path.removeAttr('data-disabled');}},makeOption:function(id,name,price,isDisabled){return"<li class=\"clearfix\" data-name=\""+name+"\" data-value=\""+id+"\" data-price=\""+price+"\" data-disabled=\""+isDisabled+"\">"+"<div class=\"left\">"+"<img src=\"/nfs/payment-service/"+id+"/file/100x40.png \">"+"</div>"+"<div class=\"right\">"+"<p class=\"top_text\">"+site.t('Payment fee','gsmserver.checkout')+"</p>"+"<p class=\"price\">"+price+"</p>"+"</div>"+"</li>";},bind:function(){var obj=this;this.items.find('li',obj).on('click',function(){if($(this).data('disabled'))
return false;obj.input.val($(this).data('value')).change();obj.setTitle($(this).data('name')+" ("+$(this).data('price').replace(/<(?:.|\n)*?>/gm,'')+")");$(this).parents('#payment_dropdown').hide();});}}
return select;}
checkout.initScroll=function(path){$('.'+path).mCustomScrollbar({axis:"y",alwaysShowScrollbar:1,theme:"dark-thick",scrollInertia:550,scrollbarPosition:"inside"});}
checkout.deliveryToDoorShowMessage=function(){if($(this).hasClass('to-door')){$('.delivery-to-door-message').removeClass('hidden');}else{$('.delivery-to-door-message').addClass('hidden');}}
initAddressFormNonRequiredFields();})(window,window.site,window.ui,window.jQuery);(function(window,site,ui,$,undefined){var module='product_comparison';var comparison=$({});site.comparison=comparison;var updateRightButtons=function(){$('#r-buttons .compare .content').empty().append($('<div>').addClass('waiter'));var ids=comparison.get();$.post('/product/compare/groups/',"ids="+ids.join(','),function(data){var block=$('#r-buttons .compare .content');block.empty().append(data);setTimeout(function(){var item=block.parents('li:eq(0)');var icon=item.find('.icon');var submenu=item.find('.r-buttons-submenu');if((icon.length>0)&&(submenu.length>0)){submenu.css({"top":parseInt(icon.position().top-(submenu.outerHeight()-icon.outerHeight())/2)});}},10);});}
var updatePrevNextButtons=function(block){var table=block.find('table');var row=table.find('tr:eq(0)');var hiddenCount=row.find('td:not(:visible)').length;if(hiddenCount>0){block.find('.navigation[data-direction="prev"]').show();}else{block.find('.navigation[data-direction="prev"]').hide();}
if(table.width()>block.width()){block.find('.navigation[data-direction="next"]').show();block.find('.right-border').show();}else{block.find('.navigation[data-direction="next"]').hide();block.find('.right-border').hide();}}
var updateComparisonBlocks=function(){var blocks=$('.comparison-group-wrapper .comparison-table');for(var i=0;i<blocks.length;i++){updatePrevNextButtons(blocks.eq(i));}}
var checkStorageLifetime=function(){var modified=site.storage.get(module+'_date')||0;var now=parseInt(new Date().getTime()/1000);var period=60*60*24;if((now-modified)>period){site.storage.set(module,[]);}
site.storage.set(module+'_date',now);};comparison.initialize=function(){checkStorageLifetime();comparison.initialize=site.utils.noop;comparison.update_checkbox();updateComparisonBlocks();comparison.initialized=true;};comparison.update_checkbox=function(){var ids=site.comparison.get();for(var i=0;i<ids.length;i++){site.comparison.trigger('add',[ids[i]]);}};comparison.get=function(){site.storage.initialize();return site.storage.get(module)||[];};comparison.set=function(ids){site.storage.set(module,ids);};comparison.add=function(id){var ids=comparison.get();ids.push.apply(ids,arguments);ids=ids.unique();comparison.set(ids);for(var i=0;i<arguments.length;i++){comparison.trigger('add',[arguments[i]]);}};comparison.remove=function(id){var ids=comparison.get();ids=ids.diff(arguments);comparison.set(ids);for(var i=0;i<arguments.length;i++){comparison.trigger('remove',[arguments[i]]);}};comparison.OnClearComparisonGroup=function(event){var ids=(''+$(this).attr('data-value')).split(',');for(var i=0;i<ids.length;i++){var el=$('a.remove-product[data-id = "'+ids[i]+'"]');comparison.OnRemoveProduct.apply(el);}
$(this).parent().remove();comparison.remove.apply(comparison,ids);}
comparison.OnClearAll=function(event){var ids=comparison.get();comparison.set([]);for(var i=0;i<ids.length;i++){var el=$('a.remove-product[data-id = "'+ids[i]+'"]');comparison.OnRemoveProduct.apply(el);}
updateRightButtons();}
comparison.OnComparisonCheckBoxChange=function(event){var id=$(this).parent().attr('data-id');if(ui.checkbox(this).selected()){comparison.add(id);}else{comparison.remove(id);}};comparison.OnOpenComparisonGroup=function(event){var id=$(this).parent().attr('data-id');var ids=comparison.get();$.post('/product/compare/choose/',{"id":id,"ids":ids.join(','),"ajax":"on"});}
comparison.OnSlideLeft=function(){var block=$(this).parents('.comparison-table');var table=block.find('table');var rows=table.find('tr');for(var i=0;i<rows.length;i++){var hidden=rows.eq(i).find('td:not(:visible):not(.vertical-title)');hidden.last().show();}
updatePrevNextButtons(block);}
comparison.OnSlideRight=function(){var block=$(this).parents('.comparison-table')
var table=block.find('table');var rows=table.find('tr');for(var i=0;i<rows.length;i++){var visible=rows.eq(i).find('td:visible:not(.vertical-title)');visible.first().hide();}
updatePrevNextButtons(block);}
comparison.OnRemoveProduct=function(){var self=$(this);var id=self.attr('data-id');comparison.remove(id);var table=self.parents('table');var block=table.parents('.comparison-table');var rightStop=table.width()<block.width();table.find('td[data-product="'+id+'"]').remove();if(rightStop){var rows=table.find('tr');for(var i=0;i<rows.length;i++){var hidden=rows.eq(i).find('td:not(:visible):not(.vertical-title)');hidden.last().show();}}
updatePrevNextButtons(block);var url=window.location.href;var url=url.replace(/([?&])ids=([0-9,]+)/,function(match,prefix,ids){var regex=new RegExp('^'+id+',');ids=ids.replace(regex,'');var regex=new RegExp(','+id+',');ids=ids.replace(regex,',');var regex=new RegExp(','+id+'$');ids=ids.replace(regex,'');return prefix+'ids='+ids;});$.history().push(url,{history:true});site.user.RequestLog();}
comparison.on('add',function(event,id){var block=$('.product-comparison[data-id="'+id+'"]');block.find('.title').show();block.find('.comparison-add-title').hide();block.find('[data-element="checkbox"]').attr('data-selected','on');});comparison.on('remove',function(e,id){var block=$('.product-comparison[data-id="'+id+'"]');block.find('.comparison-add-title').show();block.find('.title').hide();block.find('[data-element="checkbox"]').removeAttr('data-selected');});$('body').on('mouseenter','#r-buttons .icon.compare-icon',function(){updateRightButtons();});$('body').on(ui.events.CHANGE,'.product-comparison [data-element="checkbox"]',comparison.OnComparisonCheckBoxChange);var resizeTimer=null;$(window).resize(function(){clearTimeout(resizeTimer);resizeTimer=setTimeout(function(){updateComparisonBlocks();},100);});site.comparison.initialize();})(window,window.site,window.ui,window.jQuery);(function(window,site,ui,$,undefined){var $return=$({});site.return=$return;var init=function(){$('.product-returns .products-to-return').chosen();$('.product-returns .product-types-to-return').chosen();$('.product-returns .return-delivery-services').chosen();};var callback=function(response){if(response){$('#content').html(response);init();}};$return.addFilesCallback=function(){if($return.old_files){myDropzone.removeAllFiles();$.each($return.old_files,function(i,value){myDropzone.addFile(value);});$('.attachment-open').trigger('click');}};$return.old_files=null;var cleanReturnForm=function(form){$('.errors',form).remove();$('input, textarea, select',form).each(function(){$(this).removeClass('error');});};var returnProductFormCallback=function(form,data){cleanReturnForm(form);if(data){if(data.status){var listWrapper=form.parents('#return-list');if(listWrapper.length&&data.html){listWrapper.html(data.html);}}else{var errors=data.errors;for(var field in errors){$('#'+field+'-wrapper',form).append('<ul class="errors"><li>'+errors[field]+'</li></ul>');$('#'+field,form).addClass('error');}}}};$return.clearItem=function(){$.post('/account/return/item/clear',{},callback);};$return.addItem=function(){var $this=$(this);var params=$this.parents('form').eq(0).serialize();$.post('/account/return/item/add',params,callback);};$return.editItem=function(){var $this=$(this);var params={'productId':$this.attr('data-product')};$.get('/account/return/item/edit',params,callback);};$return.removeItem=function(){var params={'productId':$(this).attr('data-product')};$.post('/account/return/item/remove',params,callback);};$return.changeType=function(){var $this=$(this);var params=$this.parents('form').eq(0).serialize();$.post('/account/return/type',params,callback);};$return.dropzoneReturnCreateInit=function(old_files){var errorMessage=site.t('Validation error','return');$return.old_files=old_files;Dropzone.autoDiscover=false;$.each($('form.dropzone'),function(i,dropzone){var template='<div class="dz-preview dz-file-preview">'+'<div class="dz-details">'+'<div class="dz-filename"><span data-dz-name></span><span class="dz-filesize"> (<span class="dz-size" data-dz-size></span>) </span><a class="file-remove" data-dz-remove></a></div>'+'</div>'+'<div class="dz-error-message"><span data-dz-errormessage></span></div>'+'</div>';var wrapper=$('.attachment-wrapper',dropzone);var url='/file/upload';var fileNumber=0;myDropzone=new Dropzone(dropzone,{url:url,paramName:function(){return fileNumber++;},method:"post",uploadMultiple:true,autoProcessQueue:false,maxFilesize:16,maxFiles:100,filesizeBase:1024,clickable:'.dropzone-clickable',previewsContainer:'.dropzone-previews',previewTemplate:template,dictInvalidFileType:errorMessage,dictFileTooBig:errorMessage,parallelUploads:20,maxfilesexceeded:function(file){var myDropzone=this;myDropzone.removeAllFiles();myDropzone.addFile(file);},acceptedFiles:'.doc, .docx, .rtf, .txt, .odt, .pdf, .bmp, .jpg, .png',init:function(){var myDropzone=this;var form=$(dropzone);$('[data-action="add-item"], [data-action="edit-item"]',dropzone).live('click',function(e){e.preventDefault();e.stopPropagation();var errorFilesCount=0;$.each(myDropzone.files,function(i,value){if(!value.accepted)errorFilesCount++;});if(!errorFilesCount){if(myDropzone.getQueuedFiles().length>0){myDropzone.on("successmultiple",function(files,data){var showErrors=function(response){if(response&&response.errors){if(response.errors.fileHash){$('.dz-error-message [data-dz-errormessage]',form).text(errorMessage);}}else{$('.dz-error-message [data-dz-errormessage]',form).text(errorMessage);}};var attachFileCallback=function(response){callback(response);$return.addFilesCallback();};data=JSON.parse(data);if(!data){showErrors();return;}
var formData=form.serialize();$.each(data,function(i,v){formData+='&fileHash['+i+']='+v;formData+='&fileName['+i+']='+files[i].name;});$.post("/account/return/item/add",formData,attachFileCallback);});myDropzone.processQueue();}else{var formData=form.serialize();$.post("/account/return/item/add",formData,callback);}}});}});});$('#create-return-form').on('submit',function(e){e.preventDefault();e.stopPropagation();var errorFilesCount=0;$.each(myDropzone.files,function(i,value){if(!value.accepted)errorFilesCount++;});if(!errorFilesCount){if(myDropzone.getQueuedFiles().length>0){myDropzone.on("successmultiple",function(files,data){var wrapper=$('.product-returns');var form=$('#create-return-form');var formData=form.serialize();data=JSON.parse(data);$.each(data,function(i,v){formData+='&fileHash['+i+']='+v;formData+='&fileName['+i+']='+files[i].name;});$.post("/account/return/create",formData,function(response){callback(response);$return.addFilesCallback();});});myDropzone.processQueue();}else{var form=$('#create-return-form');var formData=form.serialize();$.post("/account/return/create",formData,callback);}}});};$return.dropzoneReturnHistoryInit=function(){var errorMessage=site.t('Validation error','return');Dropzone.autoDiscover=false;var dropzone=$('form.dropzone');var template='<div class="dz-preview dz-file-preview">'+'<div class="dz-details">'+'<div class="dz-filename"><span data-dz-name></span><span class="dz-filesize"> (<span class="dz-size" data-dz-size></span>) </span><a class="file-remove" data-dz-remove></a></div>'+'</div>'+'<div class="dz-error-message"><span data-dz-errormessage></span></div>'+'</div>';var wrapper=$('.attachment-wrapper');var submitButton=$('#send',wrapper);var url='/file/upload';var fileNumber=0;myDropzone=new Dropzone('#returnProduct',{url:url,paramName:function(){return fileNumber++;},method:"post",uploadMultiple:true,autoProcessQueue:false,maxFilesize:16,maxFiles:100,filesizeBase:1024,clickable:'.dropzone-clickable',previewsContainer:'.dropzone-previews',previewTemplate:template,dictInvalidFileType:errorMessage,dictFileTooBig:errorMessage,parallelUploads:20,maxfilesexceeded:function(file){var myDropzone=this;myDropzone.removeAllFiles();myDropzone.addFile(file);},acceptedFiles:'.doc, .docx, .rtf, .txt, .odt, .pdf, .bmp, .jpg, .png',accept:function(file,done){$('#download-success',wrapper).hide();submitButton.show();done();},init:function(){var myDropzone=this;var form=$(dropzone);myDropzone.on('removedfile',function(files){var errorFilesCount=0;$.each(this.files,function(i,value){if(value.status!=='error')errorFilesCount++;});if(!errorFilesCount){submitButton.hide();}});$('#send',dropzone).live('click',function(e){e.preventDefault();e.stopPropagation();var errorFilesCount=0;$.each(myDropzone.files,function(i,value){if(!value.accepted)errorFilesCount++;});if(!errorFilesCount){if(myDropzone.getQueuedFiles().length>0){myDropzone.on("successmultiple",function(files,data){var showErrors=function(response){if(response&&response.errors){if(response.errors.fileHash){$('.dz-error-message [data-dz-errormessage]',form).text(errorMessage);}}else{$('.dz-error-message [data-dz-errormessage]',form).text(errorMessage);}};var attachFileCallback=function(response){if(response){if(!response.status){showErrors(response);$.each(files,function(i,value){value.status=Dropzone.QUEUED;});}else{$('#download-success',wrapper).show();submitButton.hide();$('.return-product-id-wrapper select').val('').trigger('chosen:updated');$('.account-orders-history-order-select select').val('').trigger('chosen:updated');myDropzone.removeAllFiles();}
fileNumber=0;returnProductFormCallback(form,response);}else{showErrors();}};data=JSON.parse(data);if(!data){showErrors();return;}
var formData=form.serialize();$.each(data,function(i,v){formData+='&fileHash['+i+']='+v;formData+='&fileName['+i+']='+files[i].name;});$.post("/account/return/addfile",formData,attachFileCallback,'json');});myDropzone.processQueue();}}});}});};$(function(){var trackingBox=$('.product-returns .tracking');var enableSaveButton=function(){$('.return-details-total button').removeAttr('disabled');}
var disableSaveButton=function(){$('.return-details-total button').attr('disabled','disabled');}
init();$('.product-returns .tracking select').on('change',function(){if(trackingBox.find('input').val()||$(this).val()!=-1){enableSaveButton();}else{disableSaveButton();}});$('.product-returns .tracking input').on('keyup',function(e){if(!$(this).val()&&trackingBox.find('select').val()==-1){disableSaveButton();}else{enableSaveButton();}});$('body').on('click','.product-returns [data-action="clear-item"]',$return.clearItem).on('change','.product-returns .product-types-to-return',$return.changeType).on('click','.attachment-open',function(){$(this).hide();$('.attachment-wrapper').show();}).on('click','#cancel-button',function(e){$('.attachment-wrapper').hide();$('.attachment-open').show();}).on('click','.file-delete a',function(e){e.preventDefault();e.stopPropagation();var href=$(this).attr('href');$.post(href,{},function(data){if(data.status){$("[href='"+href+"']").parent().remove();}},'json');}).on('change','#return_number_id',function(e){var return_number_id=$(this).val();$.post("/account/return/history/getproducts",{'id':return_number_id},function(response){if(response){$('.return-product-id-wrapper').html(response);$('.return-product-id-wrapper select').chosen();}});});});})(window,window.site,window.ui,window.jQuery);(function(window,site,ui,$,undefined){var activation=$({});site.activation=activation;activation.OnQuantityChange=function(event){var data={quantity:$(this).val(),productId:$(this).attr('data-product-id'),};var callback=function(response){$('.activate-product-wrapper').replaceWith(response);};$.get('/account/activationpanel/activating/',data,callback);};activation.OnActivate=function(event){var quantitySelect=$('.desired-quantity-of-product');var productId=quantitySelect.attr('data-product-id');var quantity=quantitySelect.val();if(quantity){var data={quantity:quantity,productId:productId};$('[name^="activationInfo"]').each(function(){var $this=$(this);data[$this.attr('name')]=$this.val();});ui.waiter.show(site.t('Order in progress','gsmserver.checkout'));$.post('/account/activationpanel/activating/',data,function(response){$('.activate-product-wrapper').replaceWith(response);}).fail(function(){ui.waiter.hide();ui.lightbox.show($('.popup-hidden-content').html());});}};$('body').on('click','#activating',activation.OnActivate).on('change','.desired-quantity-of-product',activation.OnQuantityChange);})(window,window.site,window.ui,window.jQuery);function trace(){try{console.log.apply(console,arguments);}catch(e){args=[];[].push.apply(args,arguments);alert(args);}}
var start_time;function start(){start_time=new Date();}
function end(){var now=new Date();trace(now-start_time);}
window.hasOwnProperty=window.hasOwnProperty||Object.prototype.hasOwnProperty;function resizeWindow(){site.mainmenu.resize();site.product.slideRebuild($('#right-panel-content-wrapper'));}
$(window).on('resize',resizeWindow);ui.ready(function(){resizeWindow();});function getViewablePosition(obj){var e=obj[0];var offset={x:0,y:0};while(e){offset.x+=e.offsetLeft;offset.y+=e.offsetTop;e=e.offsetParent;}
if(document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollLeft)){offset.x-=document.documentElement.scrollLeft;offset.y-=document.documentElement.scrollTop;}else if(document.body&&(document.body.scrollTop||document.body.scrollLeft)){offset.x-=document.body.scrollLeft;offset.y-=document.body.scrollTop;}else if(window.pageXOffset||window.pageYOffset){offset.x-=window.pageXOffset;offset.y-=window.pageYOffset;}
return offset;}
function setWaiterPosition(container){var waiter=container.find('.content-waiter');if(!waiter.is(':visible')){return false;}
var containerTop=container.offset().top;var waiterHeigth=waiter.outerHeight();var top=Math.max(0,(($(window).height()-containerTop-waiterHeigth)/2)+$(window).scrollTop());var left=Math.max(0,(container.width()-waiter.width())/2);waiter.css({top:top+"px",bottom:"auto",left:left+"px"});if(containerTop+container.outerHeight()<waiter.offset().top+waiterHeigth){waiter.css({top:"auto",bottom:0,left:left+"px"});}}
function match(haystack,needle){haystack=haystack.toUpperCase();needle=needle.toUpperCase();var result=haystack.indexOf(needle);if(result>-1){return result;}
return false;}
Array.prototype.unique=function(){var u={},a=[];for(var i=0,l=this.length;i<l;++i){if(u.hasOwnProperty(this[i])){continue;}
a.push(this[i]);u[this[i]]=1;}
return a;};Array.prototype.diff=function(b){var seen=[],diff=[];for(var i=0;i<b.length;i++){seen[b[i]]=true;}
for(var i=0;i<this.length;i++){if(!seen[this[i]]){diff.push(this[i]);}}
return diff;};if(typeof Object.keys!="function"){Object.keys=function(obj){var keys=[];for(var k in obj)keys.push(k);return keys;};}
function lightText(element,result,value){var insertText;element.setProp('no-match',false);if((element.getProp('original-name')!=undefined)&&(element.getProp('original-name').length>0)){needle=element.getProp('original-name');element.text(needle);}else{needle=element.text();element.setProp('original-name',needle);}
if(result==0){var lastS=needle.substring(value.length);insertText='<span class="search-highlight">'+needle.substring(result,value.length)+'</span>'+lastS;}else{var first=needle.substring(0,result);var last=needle.substring(result+value.length);var middle=needle.substring(result,result+value.length);insertText=first+'<span class="search-highlight">'+middle+'</span>'+last;}
if(insertText.length>0){element.text(insertText);}}
function lightTextAjax(needle,result,value){if(needle.length>0){var insertText;if(result==0){var lastS=needle.substring(value.length);insertText='<span class="search-highlight">'+needle.substring(result,value.length)+'</span>'+lastS;}else{var first=needle.substring(0,result);var last=needle.substring(result+value.length);var middle=needle.substring(result,result+value.length);insertText=first+'<span class="search-highlight">'+middle+'</span>'+last;}
if(insertText.length>0){return insertText;}}
return needle;}
(function(){var canSwipe=true;var myEffect='slide';var detectIE=function(){if(window.navigator.userAgent.indexOf("MSIE ")>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)){return true;}else{return false;}};if(detectIE()==false){myEffect='fade'}
$(function(){if($('.mbs .swiper-container').length==0){return;}
mainBomb=new Swiper('.mbs .swiper-container',{autoplay:5000,speed:500,effect:myEffect,autoplayDisableOnInteraction:false,onlyExternal:true});mainBomb.on('onSlideChangeStart',function(){canSwipe=false;});mainBomb.on('onSlideChangeEnd',function(){canSwipe=true;});$('body').on('click','#mbs_next',function(){if(canSwipe){if(mainBomb.realIndex>=mainBomb.slides.length-1){mainBomb.slideTo(0);}else{mainBomb.slideNext();}}});$('body').on('click','#mbs_prev',function(){if(canSwipe){if(mainBomb.realIndex===0){mainBomb.slideTo(mainBomb.slides.length);}else{mainBomb.slidePrev();}}});$('body').on('mouseenter','.main-bomb-swiper',function(){$('#mbs_prev').addClass('hovered');$('#mbs_next').addClass('hovered');});$('body').on('mouseleave','.main-bomb-swiper',function(){$('#mbs_prev').removeClass('hovered');$('#mbs_next').removeClass('hovered');});});}());$(function(){site.mainmenu.initialize();site.content.initialize();resizeWindow();$('footer .social a, header .header-right-icons, .facet-filter-block-non-universal .info-icon').tipsy({gravity:'s'});$('footer .social a, header .header-right-icons, .facet-filter-block-brand-filter .info-icon').tipsy({gravity:'s'});$('.country-flag').tipsy({live:true,gravity:'s',delayIn:1000,title:function(){var title=$(this).attr('data-hint');title=(typeof title!='undefined')?title:$(this).text();return(this.parentNode&&(this.scrollWidth>this.parentNode.clientWidth))?title:'';}});$('.shade').tipsy({live:true,gravity:'s',hintClassName:'product-desc-hint',title:function(){return $(this).text();}});$('.select-shade').tipsy({live:true,gravity:'s',hintClassName:'select-shade-hint',title:function(){return $(this).text();}});$('.facet-filter-block .search-input-control').tipsy({gravity:'s',live:true,delayIn:3000,title:function(){return $(this).attr('data-hint');}});$('.tipsy-info-icon').tipsy({gravity:function(){var gravity=$(this).attr('tipsy-gravity');return(typeof gravity!==typeof undefined&&gravity!==false)?gravity:'s';},live:true,delayIn:500,html:true,title:function(){return $(this).html();}});$('#cart table .info-icon, .availability-in-stores .info-icon, .web-price.info-icon').tipsy({gravity:'n',live:true,delayIn:500,html:true,title:function(){return $(this).html();}});$('.product-button-wrapper .not-for-sale').tipsy({gravity:'s',live:true,delayIn:500,title:function(){return $(this).attr('data-hint');}});$('.account-orders-history [data-hint]').tipsy({gravity:'s',live:true,delayIn:500,title:function(){return $(this).attr('data-hint');}});$('footer .more-arrow').click(function(){var wrapper=$(this).parents(".right");var shownTextWrapper=$(".shown-text",wrapper);var hiddenTextWrapper=$(".hidden-text",wrapper);var duration=450;if($(this).hasClass("more-arrow-left")){hiddenTextWrapper.slideUp(duration,function(){wrapper.removeClass("full-text");});}else{wrapper.addClass("full-text");hiddenTextWrapper.slideDown(duration);}
return false;});$('aside [data-facet-block] .count').tipsy({live:true,gravity:'s',offset:'3',title:function(){return site.t('contains product amount','facet').replace("[product amount]",$(this).attr('data-value'));}});$('.styled-form input.error, .styled-form textarea.error, .styled-form .credit-card-number-field.error, .styled-form .styled-phone-input.error').tipsy({live:true,gravity:'s',trigger:'hover'});$('.styled-form input.error, .styled-form textarea.error, .styled-form input.hide-outline').tipsy({live:true,gravity:'s',trigger:'focus'});$("div.currency:not(.only-one), li.menu-item, "+"header .search-input-control .search-facet-selector, header .cart-wrapper .livezilla").menu();$('#main-menu td:not(.sale,.sep)').menu({afterShow:function(element){if(element.data('width-calculated')==$(window).width())return;if(!element.hasClass('main-menu-item-cars')){var wrapperWidth=element.find('.submenu-inner').innerWidth();var block1=element.find('.submenu-items').eq(0).outerWidth();var block2=element.find('.submenu-items').eq(1).outerWidth();var block3=element.find('.submenu-items').eq(2);if(block3.length){var free=wrapperWidth-(block1+block2);block3.width((free<760)?'320px':'760px');}}
element.data('width-calculated',$(window).width());}});$('body').append('<a id="scroll-to-top-button" href="javascript:void(0)" data-action-click="site.autoScroll.top" class="shadow-4"></a>');$("#show-content-waiter").on("click",function(event){var container=$('#content');container.find('.content-waiter-wrapper').css({display:"block",width:container.width()+"px",height:container.height()+"px"});setWaiterPosition(container);return false;});$(window).scroll(function(){setWaiterPosition($("#content"));});$(".sidebar-tab").on("click",function(event){$('#content-wrapper').toggleClass('show-sidebar');return false;});$('body').on("mouseenter",'#r-buttons .icon',function(){var $this=$(this);var $listWrap=$this.parents('ul');var $hoverListItem=$this.parent('li');var $submenu=$('.r-buttons-submenu',$hoverListItem);var $cartIndicator=$('header .cart-indicator');var cartQuantity=$('.cart-icon',$cartIndicator).attr('data-cart-quantity');cartQuantity=jQuery.trim(cartQuantity);var cartTotalPriceHtml=$('.cart a',$cartIndicator).html();cartTotalPriceHtml=jQuery.trim(cartTotalPriceHtml);if(cartQuantity&&cartTotalPriceHtml){$('.col-left .value',$submenu).text(cartQuantity);$('.col-right .value',$submenu).html(cartTotalPriceHtml);}
$listWrap.find('.hover').removeClass('hover');$listWrap.find('li').css("zIndex",10);$this.addClass('hover');$hoverListItem.css("zIndex",0).addClass('hover');$submenu.css({top:parseInt($this.position().top-($submenu.outerHeight()-$this.outerHeight())/2)});}).on("mouseleave",'#r-buttons .icon',function(){var $this=$(this);var $hoverListItem=$this.parent('li');if(!$hoverListItem.find('.r-buttons-submenu').length){var $listWrap=$this.parents('ul');$this.removeClass('hover');$hoverListItem.removeClass('hover');$("li",$listWrap).each(function(){$(this).attr('style','');});}}).on('mainpage-promoblock-load',function(){var hash=window.location.hash.substr(1);if(hash==='recent'){setTimeout(function(){var tab=$('[data-tab="recent"]');$('html,body').animate({scrollTop:tab.offset().top-20},300);$(tab).trigger('click');},500);}});$('#r-buttons .r-buttons-submenu').on("mouseleave",function(){var $this=$(this);var $hoverListItem=$this.parents('.hover');$hoverListItem.removeClass('hover');$hoverListItem.find('a.hover').removeClass('hover');});});if(typeof deconcept=="undefined"){var deconcept=new Object();}
if(typeof deconcept.util=="undefined"){deconcept.util=new Object();}
if(typeof deconcept.SWFObjectUtil=="undefined"){deconcept.SWFObjectUtil=new Object();}
deconcept.SWFObject=function(_1,id,w,h,_5,c,_7,_8,_9,_a,_b){if(!document.getElementById){return;}
this.DETECT_KEY=_b?_b:"detectflash";this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY);this.params=new Object();this.variables=new Object();this.attributes=new Array();if(_1){this.setAttribute("swf",_1);}
if(id){this.setAttribute("id",id);}
if(w){this.setAttribute("width",w);}
if(h){this.setAttribute("height",h);}
if(_5){this.setAttribute("version",new deconcept.PlayerVersion(_5.toString().split(".")));}
this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion();if(c){this.addParam("bgcolor",c);}
var q=_8?_8:"high";this.addParam("quality",q);this.setAttribute("useExpressInstall",_7);this.setAttribute("doExpressInstall",false);var _d=(_9)?_9:window.location;this.setAttribute("xiRedirectUrl",_d);this.setAttribute("redirectUrl","");if(_a){this.setAttribute("redirectUrl",_a);}};deconcept.SWFObject.prototype={setAttribute:function(_e,_f){this.attributes[_e]=_f;},getAttribute:function(_10){return this.attributes[_10];},addParam:function(_11,_12){this.params[_11]=_12;},getParams:function(){return this.params;},addVariable:function(_13,_14){this.variables[_13]=_14;},getVariable:function(_15){return this.variables[_15];},getVariables:function(){return this.variables;},getVariablePairs:function(){var _16=new Array();var key;var _18=this.getVariables();for(key in _18){_16.push(key+"="+_18[key]);}
return _16;},getSWFHTML:function(){var _19="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");}
_19="<embed type=\"application/x-shockwave-flash\" src=\""+this.getAttribute("swf")+"\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\"";_19+=" id=\""+this.getAttribute("id")+"\" name=\""+this.getAttribute("id")+"\" ";var _1a=this.getParams();for(var key in _1a){_19+=[key]+"=\""+_1a[key]+"\" ";}
var _1c=this.getVariablePairs().join("&");if(_1c.length>0){_19+="flashvars=\""+_1c+"\"";}_19+="/>";}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");}
_19="<object id=\""+this.getAttribute("id")+"\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\">";_19+="<param name=\"movie\" value=\""+this.getAttribute("swf")+"\" />";var _1d=this.getParams();for(var key in _1d){_19+="<param name=\""+key+"\" value=\""+_1d[key]+"\" />";}
var _1f=this.getVariablePairs().join("&");if(_1f.length>0){_19+="<param name=\"flashvars\" value=\""+_1f+"\" />";}_19+="</object>";}
return _19;},write:function(_20){if(this.getAttribute("useExpressInstall")){var _21=new deconcept.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(_21)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title);}}
if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var n=(typeof _20=="string")?document.getElementById(_20):_20;n.innerHTML=this.getSWFHTML();return true;}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"));}}
return false;}};deconcept.SWFObjectUtil.getPlayerVersion=function(){var _23=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var x=navigator.plugins["Shockwave Flash"];if(x&&x.description){_23=new deconcept.PlayerVersion(x.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."));}}else{try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}
catch(e){try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");_23=new deconcept.PlayerVersion([6,0,21]);axo.AllowScriptAccess="always";}
catch(e){if(_23.major==6){return _23;}}try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}
catch(e){}}if(axo!=null){_23=new deconcept.PlayerVersion(axo.GetVariable("$version").split(" ")[1].split(","));}}
return _23;};deconcept.PlayerVersion=function(_27){this.major=_27[0]!=null?parseInt(_27[0]):0;this.minor=_27[1]!=null?parseInt(_27[1]):0;this.rev=_27[2]!=null?parseInt(_27[2]):0;};deconcept.PlayerVersion.prototype.versionIsValid=function(fv){if(this.major<fv.major){return false;}
if(this.major>fv.major){return true;}
if(this.minor<fv.minor){return false;}
if(this.minor>fv.minor){return true;}
if(this.rev<fv.rev){return false;}return true;};deconcept.util={getRequestParameter:function(_29){var q=document.location.search||document.location.hash;if(q){var _2b=q.substring(1).split("&");for(var i=0;i<_2b.length;i++){if(_2b[i].substring(0,_2b[i].indexOf("="))==_29){return _2b[i].substring((_2b[i].indexOf("=")+1));}}}
return"";}};deconcept.SWFObjectUtil.cleanupSWFs=function(){if(window.opera||!document.all){return;}
var _2d=document.getElementsByTagName("OBJECT");for(var i=0;i<_2d.length;i++){_2d[i].style.display="none";for(var x in _2d[i]){if(typeof _2d[i][x]=="function"){_2d[i][x]=function(){};}}}};deconcept.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};if(typeof window.onunload=="function"){var _30=window.onunload;window.onunload=function(){deconcept.SWFObjectUtil.cleanupSWFs();_30();};}else{window.onunload=deconcept.SWFObjectUtil.cleanupSWFs;}};if(typeof window.onbeforeunload=="function"){var oldBeforeUnload=window.onbeforeunload;window.onbeforeunload=function(){deconcept.SWFObjectUtil.prepUnload();oldBeforeUnload();};}else{window.onbeforeunload=deconcept.SWFObjectUtil.prepUnload;}
if(Array.prototype.push==null){Array.prototype.push=function(_31){this[this.length]=_31;return this.length;};}
var getQueryParamValue=deconcept.util.getRequestParameter;var FlashObject=deconcept.SWFObject;var SWFObject=deconcept.SWFObject;(function(window,site,ui,$,undefined){var coupon=$({});var showCouponFormAfterRemove=false;site.coupon=coupon;coupon.initialized=false;coupon.initialize=function(){coupon.initialize=site.utils.noop;coupon.initialized=true;};coupon.add=function(){var wrapper=$(this).parents('.coupon-wrapper');var form=$('form',wrapper);var output=$('.error-output',form);var input=$('input[name="code"]',form);var code=input.val();input.removeClass('error');output.empty().hide();$.post('/ajax/discount-code/add/',{code:code},function(response){if(response.status=='success'){site.cart.refresh();}else{input.addClass('error');output.html(response.message).show();}
if(response.loginUrl){$.get(response.loginUrl,function(response){ui.lightbox.show(response);})}});return false;};coupon.remove=function(){var wrapper=$(this).parents('.coupon-wrapper');$.post('/ajax/discount-code/remove/',function(response){if(response.status=='success'){showCouponFormAfterRemove=true;site.cart.refresh();}else{$('.error-output',wrapper).html(response.message).show();}});return false;}
coupon.changeCode=function(){var wrapper=$(this).parents('.coupon-wrapper');var loginLink=$('[data-target="lightbox"]',wrapper);if(loginLink.length>0){var code=$(this).val();var urlParts=loginLink.attr('href').split('?');var href=urlParts[0]+'?redirect='+encodeURIComponent('/cart/');if(code!=''){href+=encodeURIComponent('?coupon_code='+code);}
loginLink.attr('href',href);}}})(window,window.site,window.ui,window.jQuery);(function(window,ui,$,undefined){var options={'target':$('body'),'content':'','patterns':{}};var confirm=$({});var element=$('<div data-element="confirm"><div class="content"></div></div>');ui.confirm=confirm;confirm.options=function(o){options=$.extend(true,options,o);};confirm.show=function(){for(var pattern in options.patterns){var regex=new RegExp('@@{'+pattern+'}@@');options.content=options.content.replace(regex,options.patterns[pattern]);}
element.find('.content').html(options.content);options.target.append(element);};confirm.hide=function(){element.detach();};confirm.ask=function(force){var deferred=$.Deferred();if(force){deferred.resolve();deferred.answer='remove';}else{confirm.show();element.find('[data-answer]').on('click',function(){$(this).trigger('before-remove-product',[this]);deferred.answer=$(this).attr('data-answer');deferred.resolve();confirm.hide();});}
return deferred.promise();};})(window,window.ui,jQuery);(function(){var Dropzone,Emitter,camelize,contentLoaded,detectVerticalSquash,drawImageIOSFix,noop,without,__slice=[].slice,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;};noop=function(){};Emitter=(function(){function Emitter(){}
Emitter.prototype.addEventListener=Emitter.prototype.on;Emitter.prototype.on=function(event,fn){this._callbacks=this._callbacks||{};if(!this._callbacks[event]){this._callbacks[event]=[];}
this._callbacks[event].push(fn);return this;};Emitter.prototype.emit=function(){var args,callback,callbacks,event,_i,_len;event=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];this._callbacks=this._callbacks||{};callbacks=this._callbacks[event];if(callbacks){for(_i=0,_len=callbacks.length;_i<_len;_i++){callback=callbacks[_i];callback.apply(this,args);}}
return this;};Emitter.prototype.removeListener=Emitter.prototype.off;Emitter.prototype.removeAllListeners=Emitter.prototype.off;Emitter.prototype.removeEventListener=Emitter.prototype.off;Emitter.prototype.off=function(event,fn){var callback,callbacks,i,_i,_len;if(!this._callbacks||arguments.length===0){this._callbacks={};return this;}
callbacks=this._callbacks[event];if(!callbacks){return this;}
if(arguments.length===1){delete this._callbacks[event];return this;}
for(i=_i=0,_len=callbacks.length;_i<_len;i=++_i){callback=callbacks[i];if(callback===fn){callbacks.splice(i,1);break;}}
return this;};return Emitter;})();Dropzone=(function(_super){var extend,resolveOption;__extends(Dropzone,_super);Dropzone.prototype.Emitter=Emitter;Dropzone.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"];Dropzone.prototype.defaultOptions={url:null,method:"post",withCredentials:false,parallelUploads:2,uploadMultiple:false,maxFilesize:256,paramName:"file",createImageThumbnails:true,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1000,maxFiles:null,params:{},clickable:true,ignoreHiddenFiles:true,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:true,autoQueue:true,addRemoveLinks:false,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(file,done){return done();},init:function(){return noop;},forceFallback:false,fallback:function(){var child,messageElement,span,_i,_len,_ref;this.element.className=""+this.element.className+" dz-browser-not-supported";_ref=this.element.getElementsByTagName("div");for(_i=0,_len=_ref.length;_i<_len;_i++){child=_ref[_i];if(/(^| )dz-message($| )/.test(child.className)){messageElement=child;child.className="dz-message";continue;}}
if(!messageElement){messageElement=Dropzone.createElement("<div class=\"dz-message\"><span></span></div>");this.element.appendChild(messageElement);}
span=messageElement.getElementsByTagName("span")[0];if(span){if(span.textContent!=null){span.textContent=this.options.dictFallbackMessage;}else if(span.innerText!=null){span.innerText=this.options.dictFallbackMessage;}}
return this.element.appendChild(this.getFallbackForm());},resize:function(file){var info,srcRatio,trgRatio;info={srcX:0,srcY:0,srcWidth:file.width,srcHeight:file.height};srcRatio=file.width/file.height;info.optWidth=this.options.thumbnailWidth;info.optHeight=this.options.thumbnailHeight;if((info.optWidth==null)&&(info.optHeight==null)){info.optWidth=info.srcWidth;info.optHeight=info.srcHeight;}else if(info.optWidth==null){info.optWidth=srcRatio*info.optHeight;}else if(info.optHeight==null){info.optHeight=(1/srcRatio)*info.optWidth;}
trgRatio=info.optWidth/info.optHeight;if(file.height<info.optHeight||file.width<info.optWidth){info.trgHeight=info.srcHeight;info.trgWidth=info.srcWidth;}else{if(srcRatio>trgRatio){info.srcHeight=file.height;info.srcWidth=info.srcHeight*trgRatio;}else{info.srcWidth=file.width;info.srcHeight=info.srcWidth/trgRatio;}}
info.srcX=(file.width-info.srcWidth)/2;info.srcY=(file.height-info.srcHeight)/2;return info;},drop:function(e){return this.element.classList.remove("dz-drag-hover");},dragstart:noop,dragend:function(e){return this.element.classList.remove("dz-drag-hover");},dragenter:function(e){return this.element.classList.add("dz-drag-hover");},dragover:function(e){return this.element.classList.add("dz-drag-hover");},dragleave:function(e){return this.element.classList.remove("dz-drag-hover");},paste:noop,reset:function(){return this.element.classList.remove("dz-started");},addedfile:function(file){var node,removeFileEvent,removeLink,_i,_j,_k,_len,_len1,_len2,_ref,_ref1,_ref2,_results;if(this.element===this.previewsContainer){this.element.classList.add("dz-started");}
if(this.previewsContainer){file.previewElement=Dropzone.createElement(this.options.previewTemplate.trim());file.previewTemplate=file.previewElement;this.previewsContainer.appendChild(file.previewElement);_ref=file.previewElement.querySelectorAll("[data-dz-name]");for(_i=0,_len=_ref.length;_i<_len;_i++){node=_ref[_i];node.textContent=this._renameFilename(file.name);}
_ref1=file.previewElement.querySelectorAll("[data-dz-size]");for(_j=0,_len1=_ref1.length;_j<_len1;_j++){node=_ref1[_j];node.innerHTML=this.filesize(file.size);}
if(this.options.addRemoveLinks){file._removeLink=Dropzone.createElement("<a class=\"dz-remove\" href=\"javascript:undefined;\" data-dz-remove>"+this.options.dictRemoveFile+"</a>");file.previewElement.appendChild(file._removeLink);}
removeFileEvent=(function(_this){return function(e){e.preventDefault();e.stopPropagation();if(file.status===Dropzone.UPLOADING){return Dropzone.confirm(_this.options.dictCancelUploadConfirmation,function(){return _this.removeFile(file);});}else{if(_this.options.dictRemoveFileConfirmation){return Dropzone.confirm(_this.options.dictRemoveFileConfirmation,function(){return _this.removeFile(file);});}else{return _this.removeFile(file);}}};})(this);_ref2=file.previewElement.querySelectorAll("[data-dz-remove]");_results=[];for(_k=0,_len2=_ref2.length;_k<_len2;_k++){removeLink=_ref2[_k];_results.push(removeLink.addEventListener("click",removeFileEvent));}
return _results;}},removedfile:function(file){var _ref;if(file.previewElement){if((_ref=file.previewElement)!=null){_ref.parentNode.removeChild(file.previewElement);}}
return this._updateMaxFilesReachedClass();},thumbnail:function(file,dataUrl){var thumbnailElement,_i,_len,_ref;if(file.previewElement){file.previewElement.classList.remove("dz-file-preview");_ref=file.previewElement.querySelectorAll("[data-dz-thumbnail]");for(_i=0,_len=_ref.length;_i<_len;_i++){thumbnailElement=_ref[_i];thumbnailElement.alt=file.name;thumbnailElement.src=dataUrl;}
return setTimeout(((function(_this){return function(){return file.previewElement.classList.add("dz-image-preview");};})(this)),1);}},error:function(file,message){var node,_i,_len,_ref,_results;if(file.previewElement){file.previewElement.classList.add("dz-error");if(typeof message!=="String"&&message.error){message=message.error;}
_ref=file.previewElement.querySelectorAll("[data-dz-errormessage]");_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){node=_ref[_i];_results.push(node.textContent=message);}
return _results;}},errormultiple:noop,processing:function(file){if(file.previewElement){file.previewElement.classList.add("dz-processing");if(file._removeLink){return file._removeLink.textContent=this.options.dictCancelUpload;}}},processingmultiple:noop,uploadprogress:function(file,progress,bytesSent){var node,_i,_len,_ref,_results;if(file.previewElement){_ref=file.previewElement.querySelectorAll("[data-dz-uploadprogress]");_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){node=_ref[_i];if(node.nodeName==='PROGRESS'){_results.push(node.value=progress);}else{_results.push(node.style.width=""+progress+"%");}}
return _results;}},totaluploadprogress:noop,sending:noop,sendingmultiple:noop,success:function(file){if(file.previewElement){return file.previewElement.classList.add("dz-success");}},successmultiple:noop,canceled:function(file){return this.emit("error",file,"Upload canceled.");},canceledmultiple:noop,complete:function(file){if(file._removeLink){file._removeLink.textContent=this.options.dictRemoveFile;}
if(file.previewElement){return file.previewElement.classList.add("dz-complete");}},completemultiple:noop,maxfilesexceeded:noop,maxfilesreached:noop,queuecomplete:noop,addedfiles:noop,previewTemplate:"<div class=\"dz-preview dz-file-preview\">\n  <div class=\"dz-image\"><img data-dz-thumbnail /></div>\n  <div class=\"dz-details\">\n    <div class=\"dz-size\"><span data-dz-size></span></div>\n    <div class=\"dz-filename\"><span data-dz-name></span></div>\n  </div>\n  <div class=\"dz-progress\"><span class=\"dz-upload\" data-dz-uploadprogress></span></div>\n  <div class=\"dz-error-message\"><span data-dz-errormessage></span></div>\n  <div class=\"dz-success-mark\">\n    <svg width=\"54px\" height=\"54px\" viewBox=\"0 0 54 54\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:sketch=\"http://www.bohemiancoding.com/sketch/ns\">\n      <title>Check</title>\n      <defs></defs>\n      <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" sketch:type=\"MSPage\">\n        <path d=\"M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\" id=\"Oval-2\" stroke-opacity=\"0.198794158\" stroke=\"#747474\" fill-opacity=\"0.816519475\" fill=\"#FFFFFF\" sketch:type=\"MSShapeGroup\"></path>\n      </g>\n    </svg>\n  </div>\n  <div class=\"dz-error-mark\">\n    <svg width=\"54px\" height=\"54px\" viewBox=\"0 0 54 54\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:sketch=\"http://www.bohemiancoding.com/sketch/ns\">\n      <title>Error</title>\n      <defs></defs>\n      <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" sketch:type=\"MSPage\">\n        <g id=\"Check-+-Oval-2\" sketch:type=\"MSLayerGroup\" stroke=\"#747474\" stroke-opacity=\"0.198794158\" fill=\"#FFFFFF\" fill-opacity=\"0.816519475\">\n          <path d=\"M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\" id=\"Oval-2\" sketch:type=\"MSShapeGroup\"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>"};extend=function(){var key,object,objects,target,val,_i,_len;target=arguments[0],objects=2<=arguments.length?__slice.call(arguments,1):[];for(_i=0,_len=objects.length;_i<_len;_i++){object=objects[_i];for(key in object){val=object[key];target[key]=val;}}
return target;};function Dropzone(element,options){var elementOptions,fallback,_ref;this.element=element;this.version=Dropzone.version;this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,"");this.clickableElements=[];this.listeners=[];this.files=[];if(typeof this.element==="string"){this.element=document.querySelector(this.element);}
if(!(this.element&&(this.element.nodeType!=null))){throw new Error("Invalid dropzone element.");}
if(this.element.dropzone){throw new Error("Dropzone already attached.");}
Dropzone.instances.push(this);this.element.dropzone=this;elementOptions=(_ref=Dropzone.optionsForElement(this.element))!=null?_ref:{};this.options=extend({},this.defaultOptions,elementOptions,options!=null?options:{});if(this.options.forceFallback||!Dropzone.isBrowserSupported()){return this.options.fallback.call(this);}
if(this.options.url==null){this.options.url=this.element.getAttribute("action");}
if(!this.options.url){throw new Error("No URL provided.");}
if(this.options.acceptedFiles&&this.options.acceptedMimeTypes){throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");}
if(this.options.acceptedMimeTypes){this.options.acceptedFiles=this.options.acceptedMimeTypes;delete this.options.acceptedMimeTypes;}
this.options.method=this.options.method.toUpperCase();if((fallback=this.getExistingFallback())&&fallback.parentNode){fallback.parentNode.removeChild(fallback);}
if(this.options.previewsContainer!==false){if(this.options.previewsContainer){this.previewsContainer=Dropzone.getElement(this.options.previewsContainer,"previewsContainer");}else{this.previewsContainer=this.element;}}
if(this.options.clickable){if(this.options.clickable===true){this.clickableElements=[this.element];}else{this.clickableElements=Dropzone.getElements(this.options.clickable,"clickable");}}
this.init();}
Dropzone.prototype.getAcceptedFiles=function(){var file,_i,_len,_ref,_results;_ref=this.files;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){file=_ref[_i];if(file.accepted){_results.push(file);}}
return _results;};Dropzone.prototype.getRejectedFiles=function(){var file,_i,_len,_ref,_results;_ref=this.files;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){file=_ref[_i];if(!file.accepted){_results.push(file);}}
return _results;};Dropzone.prototype.getFilesWithStatus=function(status){var file,_i,_len,_ref,_results;_ref=this.files;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){file=_ref[_i];if(file.status===status){_results.push(file);}}
return _results;};Dropzone.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(Dropzone.QUEUED);};Dropzone.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(Dropzone.UPLOADING);};Dropzone.prototype.getAddedFiles=function(){return this.getFilesWithStatus(Dropzone.ADDED);};Dropzone.prototype.getActiveFiles=function(){var file,_i,_len,_ref,_results;_ref=this.files;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){file=_ref[_i];if(file.status===Dropzone.UPLOADING||file.status===Dropzone.QUEUED){_results.push(file);}}
return _results;};Dropzone.prototype.init=function(){var eventName,noPropagation,setupHiddenFileInput,_i,_len,_ref,_ref1;if(this.element.tagName==="form"){this.element.setAttribute("enctype","multipart/form-data");}
if(this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")){this.element.appendChild(Dropzone.createElement("<div class=\"dz-default dz-message\"><span>"+this.options.dictDefaultMessage+"</span></div>"));}
if(this.clickableElements.length){setupHiddenFileInput=(function(_this){return function(){if(_this.hiddenFileInput){_this.hiddenFileInput.parentNode.removeChild(_this.hiddenFileInput);}
_this.hiddenFileInput=document.createElement("input");_this.hiddenFileInput.setAttribute("type","file");if((_this.options.maxFiles==null)||_this.options.maxFiles>1){_this.hiddenFileInput.setAttribute("multiple","multiple");}
_this.hiddenFileInput.className="dz-hidden-input";if(_this.options.acceptedFiles!=null){_this.hiddenFileInput.setAttribute("accept",_this.options.acceptedFiles);}
if(_this.options.capture!=null){_this.hiddenFileInput.setAttribute("capture",_this.options.capture);}
_this.hiddenFileInput.style.visibility="hidden";_this.hiddenFileInput.style.position="absolute";_this.hiddenFileInput.style.top="0";_this.hiddenFileInput.style.left="0";_this.hiddenFileInput.style.height="0";_this.hiddenFileInput.style.width="0";document.querySelector(_this.options.hiddenInputContainer).appendChild(_this.hiddenFileInput);return _this.hiddenFileInput.addEventListener("change",function(){var file,files,_i,_len;files=_this.hiddenFileInput.files;if(files.length){for(_i=0,_len=files.length;_i<_len;_i++){file=files[_i];_this.addFile(file);}}
_this.emit("addedfiles",files);return setupHiddenFileInput();});};})(this);setupHiddenFileInput();}
this.URL=(_ref=window.URL)!=null?_ref:window.webkitURL;_ref1=this.events;for(_i=0,_len=_ref1.length;_i<_len;_i++){eventName=_ref1[_i];this.on(eventName,this.options[eventName]);}
this.on("uploadprogress",(function(_this){return function(){return _this.updateTotalUploadProgress();};})(this));this.on("removedfile",(function(_this){return function(){return _this.updateTotalUploadProgress();};})(this));this.on("canceled",(function(_this){return function(file){return _this.emit("complete",file);};})(this));this.on("complete",(function(_this){return function(file){if(_this.getAddedFiles().length===0&&_this.getUploadingFiles().length===0&&_this.getQueuedFiles().length===0){return setTimeout((function(){return _this.emit("queuecomplete");}),0);}};})(this));noPropagation=function(e){e.stopPropagation();if(e.preventDefault){return e.preventDefault();}else{return e.returnValue=false;}};this.listeners=[{element:this.element,events:{"dragstart":(function(_this){return function(e){return _this.emit("dragstart",e);};})(this),"dragenter":(function(_this){return function(e){noPropagation(e);return _this.emit("dragenter",e);};})(this),"dragover":(function(_this){return function(e){var efct;try{efct=e.dataTransfer.effectAllowed;}catch(_error){}
e.dataTransfer.dropEffect='move'===efct||'linkMove'===efct?'move':'copy';noPropagation(e);return _this.emit("dragover",e);};})(this),"dragleave":(function(_this){return function(e){return _this.emit("dragleave",e);};})(this),"drop":(function(_this){return function(e){noPropagation(e);return _this.drop(e);};})(this),"dragend":(function(_this){return function(e){return _this.emit("dragend",e);};})(this)}}];this.clickableElements.forEach((function(_this){return function(clickableElement){return _this.listeners.push({element:clickableElement,events:{"click":function(evt){if((clickableElement!==_this.element)||(evt.target===_this.element||Dropzone.elementInside(evt.target,_this.element.querySelector(".dz-message")))){_this.hiddenFileInput.click();}
return true;}}});};})(this));this.enable();return this.options.init.call(this);};Dropzone.prototype.destroy=function(){var _ref;this.disable();this.removeAllFiles(true);if((_ref=this.hiddenFileInput)!=null?_ref.parentNode:void 0){this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);this.hiddenFileInput=null;}
delete this.element.dropzone;return Dropzone.instances.splice(Dropzone.instances.indexOf(this),1);};Dropzone.prototype.updateTotalUploadProgress=function(){var activeFiles,file,totalBytes,totalBytesSent,totalUploadProgress,_i,_len,_ref;totalBytesSent=0;totalBytes=0;activeFiles=this.getActiveFiles();if(activeFiles.length){_ref=this.getActiveFiles();for(_i=0,_len=_ref.length;_i<_len;_i++){file=_ref[_i];totalBytesSent+=file.upload.bytesSent;totalBytes+=file.upload.total;}
totalUploadProgress=100*totalBytesSent/totalBytes;}else{totalUploadProgress=100;}
return this.emit("totaluploadprogress",totalUploadProgress,totalBytes,totalBytesSent);};Dropzone.prototype._getParamName=function(n){if(typeof this.options.paramName==="function"){return this.options.paramName(n);}else{return""+this.options.paramName+(this.options.uploadMultiple?"["+n+"]":"");}};Dropzone.prototype._renameFilename=function(name){if(typeof this.options.renameFilename!=="function"){return name;}
return this.options.renameFilename(name);};Dropzone.prototype.getFallbackForm=function(){var existingFallback,fields,fieldsString,form;if(existingFallback=this.getExistingFallback()){return existingFallback;}
fieldsString="<div class=\"dz-fallback\">";if(this.options.dictFallbackText){fieldsString+="<p>"+this.options.dictFallbackText+"</p>";}
fieldsString+="<input type=\"file\" name=\""+(this._getParamName(0))+"\" "+(this.options.uploadMultiple?'multiple="multiple"':void 0)+" /><input type=\"submit\" value=\"Upload!\"></div>";fields=Dropzone.createElement(fieldsString);if(this.element.tagName!=="FORM"){form=Dropzone.createElement("<form action=\""+this.options.url+"\" enctype=\"multipart/form-data\" method=\""+this.options.method+"\"></form>");form.appendChild(fields);}else{this.element.setAttribute("enctype","multipart/form-data");this.element.setAttribute("method",this.options.method);}
return form!=null?form:fields;};Dropzone.prototype.getExistingFallback=function(){var fallback,getFallback,tagName,_i,_len,_ref;getFallback=function(elements){var el,_i,_len;for(_i=0,_len=elements.length;_i<_len;_i++){el=elements[_i];if(/(^| )fallback($| )/.test(el.className)){return el;}}};_ref=["div","form"];for(_i=0,_len=_ref.length;_i<_len;_i++){tagName=_ref[_i];if(fallback=getFallback(this.element.getElementsByTagName(tagName))){return fallback;}}};Dropzone.prototype.setupEventListeners=function(){var elementListeners,event,listener,_i,_len,_ref,_results;_ref=this.listeners;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){elementListeners=_ref[_i];_results.push((function(){var _ref1,_results1;_ref1=elementListeners.events;_results1=[];for(event in _ref1){listener=_ref1[event];_results1.push(elementListeners.element.addEventListener(event,listener,false));}
return _results1;})());}
return _results;};Dropzone.prototype.removeEventListeners=function(){var elementListeners,event,listener,_i,_len,_ref,_results;_ref=this.listeners;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){elementListeners=_ref[_i];_results.push((function(){var _ref1,_results1;_ref1=elementListeners.events;_results1=[];for(event in _ref1){listener=_ref1[event];_results1.push(elementListeners.element.removeEventListener(event,listener,false));}
return _results1;})());}
return _results;};Dropzone.prototype.disable=function(){var file,_i,_len,_ref,_results;this.clickableElements.forEach(function(element){return element.classList.remove("dz-clickable");});this.removeEventListeners();_ref=this.files;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){file=_ref[_i];_results.push(this.cancelUpload(file));}
return _results;};Dropzone.prototype.enable=function(){this.clickableElements.forEach(function(element){return element.classList.add("dz-clickable");});return this.setupEventListeners();};Dropzone.prototype.filesize=function(size){var cutoff,i,selectedSize,selectedUnit,unit,units,_i,_len;selectedSize=0;selectedUnit="b";if(size>0){units=['TB','GB','MB','KB','b'];for(i=_i=0,_len=units.length;_i<_len;i=++_i){unit=units[i];cutoff=Math.pow(this.options.filesizeBase,4-i)/10;if(size>=cutoff){selectedSize=size/Math.pow(this.options.filesizeBase,4-i);selectedUnit=unit;break;}}
selectedSize=Math.round(10*selectedSize)/10;}
return"<strong>"+selectedSize+"</strong> "+selectedUnit;};Dropzone.prototype._updateMaxFilesReachedClass=function(){if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){if(this.getAcceptedFiles().length===this.options.maxFiles){this.emit('maxfilesreached',this.files);}
return this.element.classList.add("dz-max-files-reached");}else{return this.element.classList.remove("dz-max-files-reached");}};Dropzone.prototype.drop=function(e){var files,items;if(!e.dataTransfer){return;}
this.emit("drop",e);files=e.dataTransfer.files;this.emit("addedfiles",files);if(files.length){items=e.dataTransfer.items;if(items&&items.length&&(items[0].webkitGetAsEntry!=null)){this._addFilesFromItems(items);}else{this.handleFiles(files);}}};Dropzone.prototype.paste=function(e){var items,_ref;if((e!=null?(_ref=e.clipboardData)!=null?_ref.items:void 0:void 0)==null){return;}
this.emit("paste",e);items=e.clipboardData.items;if(items.length){return this._addFilesFromItems(items);}};Dropzone.prototype.handleFiles=function(files){var file,_i,_len,_results;_results=[];for(_i=0,_len=files.length;_i<_len;_i++){file=files[_i];_results.push(this.addFile(file));}
return _results;};Dropzone.prototype._addFilesFromItems=function(items){var entry,item,_i,_len,_results;_results=[];for(_i=0,_len=items.length;_i<_len;_i++){item=items[_i];if((item.webkitGetAsEntry!=null)&&(entry=item.webkitGetAsEntry())){if(entry.isFile){_results.push(this.addFile(item.getAsFile()));}else if(entry.isDirectory){_results.push(this._addFilesFromDirectory(entry,entry.name));}else{_results.push(void 0);}}else if(item.getAsFile!=null){if((item.kind==null)||item.kind==="file"){_results.push(this.addFile(item.getAsFile()));}else{_results.push(void 0);}}else{_results.push(void 0);}}
return _results;};Dropzone.prototype._addFilesFromDirectory=function(directory,path){var dirReader,errorHandler,readEntries;dirReader=directory.createReader();errorHandler=function(error){return typeof console!=="undefined"&&console!==null?typeof console.log==="function"?console.log(error):void 0:void 0;};readEntries=(function(_this){return function(){return dirReader.readEntries(function(entries){var entry,_i,_len;if(entries.length>0){for(_i=0,_len=entries.length;_i<_len;_i++){entry=entries[_i];if(entry.isFile){entry.file(function(file){if(_this.options.ignoreHiddenFiles&&file.name.substring(0,1)==='.'){return;}
file.fullPath=""+path+"/"+file.name;return _this.addFile(file);});}else if(entry.isDirectory){_this._addFilesFromDirectory(entry,""+path+"/"+entry.name);}}
readEntries();}
return null;},errorHandler);};})(this);return readEntries();};Dropzone.prototype.accept=function(file,done){if(file.size>this.options.maxFilesize*1024*1024){return done(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(file.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize));}else if(!Dropzone.isValidFile(file,this.options.acceptedFiles)){return done(this.options.dictInvalidFileType);}else if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){done(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles));return this.emit("maxfilesexceeded",file);}else{return this.options.accept.call(this,file,done);}};Dropzone.prototype.addFile=function(file){file.upload={progress:0,total:file.size,bytesSent:0};this.files.push(file);file.status=Dropzone.ADDED;this.emit("addedfile",file);this._enqueueThumbnail(file);return this.accept(file,(function(_this){return function(error){if(error){file.accepted=false;_this._errorProcessing([file],error);}else{file.accepted=true;if(_this.options.autoQueue){_this.enqueueFile(file);}}
return _this._updateMaxFilesReachedClass();};})(this));};Dropzone.prototype.enqueueFiles=function(files){var file,_i,_len;for(_i=0,_len=files.length;_i<_len;_i++){file=files[_i];this.enqueueFile(file);}
return null;};Dropzone.prototype.enqueueFile=function(file){if(file.status===Dropzone.ADDED&&file.accepted===true){file.status=Dropzone.QUEUED;if(this.options.autoProcessQueue){return setTimeout(((function(_this){return function(){return _this.processQueue();};})(this)),0);}}else{throw new Error("This file can't be queued because it has already been processed or was rejected.");}};Dropzone.prototype._thumbnailQueue=[];Dropzone.prototype._processingThumbnail=false;Dropzone.prototype._enqueueThumbnail=function(file){if(this.options.createImageThumbnails&&file.type.match(/image.*/)&&file.size<=this.options.maxThumbnailFilesize*1024*1024){this._thumbnailQueue.push(file);return setTimeout(((function(_this){return function(){return _this._processThumbnailQueue();};})(this)),0);}};Dropzone.prototype._processThumbnailQueue=function(){if(this._processingThumbnail||this._thumbnailQueue.length===0){return;}
this._processingThumbnail=true;return this.createThumbnail(this._thumbnailQueue.shift(),(function(_this){return function(){_this._processingThumbnail=false;return _this._processThumbnailQueue();};})(this));};Dropzone.prototype.removeFile=function(file){if(file.status===Dropzone.UPLOADING){this.cancelUpload(file);}
this.files=without(this.files,file);this.emit("removedfile",file);if(this.files.length===0){return this.emit("reset");}};Dropzone.prototype.removeAllFiles=function(cancelIfNecessary){var file,_i,_len,_ref;if(cancelIfNecessary==null){cancelIfNecessary=false;}
_ref=this.files.slice();for(_i=0,_len=_ref.length;_i<_len;_i++){file=_ref[_i];if(file.status!==Dropzone.UPLOADING||cancelIfNecessary){this.removeFile(file);}}
return null;};Dropzone.prototype.createThumbnail=function(file,callback){var fileReader;fileReader=new FileReader;fileReader.onload=(function(_this){return function(){if(file.type==="image/svg+xml"){_this.emit("thumbnail",file,fileReader.result);if(callback!=null){callback();}
return;}
return _this.createThumbnailFromUrl(file,fileReader.result,callback);};})(this);return fileReader.readAsDataURL(file);};Dropzone.prototype.createThumbnailFromUrl=function(file,imageUrl,callback,crossOrigin){var img;img=document.createElement("img");if(crossOrigin){img.crossOrigin=crossOrigin;}
img.onload=(function(_this){return function(){var canvas,ctx,resizeInfo,thumbnail,_ref,_ref1,_ref2,_ref3;file.width=img.width;file.height=img.height;resizeInfo=_this.options.resize.call(_this,file);if(resizeInfo.trgWidth==null){resizeInfo.trgWidth=resizeInfo.optWidth;}
if(resizeInfo.trgHeight==null){resizeInfo.trgHeight=resizeInfo.optHeight;}
canvas=document.createElement("canvas");ctx=canvas.getContext("2d");canvas.width=resizeInfo.trgWidth;canvas.height=resizeInfo.trgHeight;drawImageIOSFix(ctx,img,(_ref=resizeInfo.srcX)!=null?_ref:0,(_ref1=resizeInfo.srcY)!=null?_ref1:0,resizeInfo.srcWidth,resizeInfo.srcHeight,(_ref2=resizeInfo.trgX)!=null?_ref2:0,(_ref3=resizeInfo.trgY)!=null?_ref3:0,resizeInfo.trgWidth,resizeInfo.trgHeight);thumbnail=canvas.toDataURL("image/png");_this.emit("thumbnail",file,thumbnail);if(callback!=null){return callback();}};})(this);if(callback!=null){img.onerror=callback;}
return img.src=imageUrl;};Dropzone.prototype.processQueue=function(){var i,parallelUploads,processingLength,queuedFiles;parallelUploads=this.options.parallelUploads;processingLength=this.getUploadingFiles().length;i=processingLength;if(processingLength>=parallelUploads){return;}
queuedFiles=this.getQueuedFiles();if(!(queuedFiles.length>0)){return;}
if(this.options.uploadMultiple){return this.processFiles(queuedFiles.slice(0,parallelUploads-processingLength));}else{while(i<parallelUploads){if(!queuedFiles.length){return;}
this.processFile(queuedFiles.shift());i++;}}};Dropzone.prototype.processFile=function(file){return this.processFiles([file]);};Dropzone.prototype.processFiles=function(files){var file,_i,_len;for(_i=0,_len=files.length;_i<_len;_i++){file=files[_i];file.processing=true;file.status=Dropzone.UPLOADING;this.emit("processing",file);}
if(this.options.uploadMultiple){this.emit("processingmultiple",files);}
return this.uploadFiles(files);};Dropzone.prototype._getFilesWithXhr=function(xhr){var file,files;return files=(function(){var _i,_len,_ref,_results;_ref=this.files;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){file=_ref[_i];if(file.xhr===xhr){_results.push(file);}}
return _results;}).call(this);};Dropzone.prototype.cancelUpload=function(file){var groupedFile,groupedFiles,_i,_j,_len,_len1,_ref;if(file.status===Dropzone.UPLOADING){groupedFiles=this._getFilesWithXhr(file.xhr);for(_i=0,_len=groupedFiles.length;_i<_len;_i++){groupedFile=groupedFiles[_i];groupedFile.status=Dropzone.CANCELED;}
file.xhr.abort();for(_j=0,_len1=groupedFiles.length;_j<_len1;_j++){groupedFile=groupedFiles[_j];this.emit("canceled",groupedFile);}
if(this.options.uploadMultiple){this.emit("canceledmultiple",groupedFiles);}}else if((_ref=file.status)===Dropzone.ADDED||_ref===Dropzone.QUEUED){file.status=Dropzone.CANCELED;this.emit("canceled",file);if(this.options.uploadMultiple){this.emit("canceledmultiple",[file]);}}
if(this.options.autoProcessQueue){return this.processQueue();}};resolveOption=function(){var args,option;option=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];if(typeof option==='function'){return option.apply(this,args);}
return option;};Dropzone.prototype.uploadFile=function(file){return this.uploadFiles([file]);};Dropzone.prototype.uploadFiles=function(files){var file,formData,handleError,headerName,headerValue,headers,i,input,inputName,inputType,key,method,option,progressObj,response,updateProgress,url,value,xhr,_i,_j,_k,_l,_len,_len1,_len2,_len3,_m,_ref,_ref1,_ref2,_ref3,_ref4,_ref5;xhr=new XMLHttpRequest();for(_i=0,_len=files.length;_i<_len;_i++){file=files[_i];file.xhr=xhr;}
method=resolveOption(this.options.method,files);url=resolveOption(this.options.url,files);xhr.open(method,url,true);xhr.withCredentials=!!this.options.withCredentials;response=null;handleError=(function(_this){return function(){var _j,_len1,_results;_results=[];for(_j=0,_len1=files.length;_j<_len1;_j++){file=files[_j];_results.push(_this._errorProcessing(files,response||_this.options.dictResponseError.replace("{{statusCode}}",xhr.status),xhr));}
return _results;};})(this);updateProgress=(function(_this){return function(e){var allFilesFinished,progress,_j,_k,_l,_len1,_len2,_len3,_results;if(e!=null){progress=100*e.loaded/e.total;for(_j=0,_len1=files.length;_j<_len1;_j++){file=files[_j];file.upload={progress:progress,total:e.total,bytesSent:e.loaded};}}else{allFilesFinished=true;progress=100;for(_k=0,_len2=files.length;_k<_len2;_k++){file=files[_k];if(!(file.upload.progress===100&&file.upload.bytesSent===file.upload.total)){allFilesFinished=false;}
file.upload.progress=progress;file.upload.bytesSent=file.upload.total;}
if(allFilesFinished){return;}}
_results=[];for(_l=0,_len3=files.length;_l<_len3;_l++){file=files[_l];_results.push(_this.emit("uploadprogress",file,progress,file.upload.bytesSent));}
return _results;};})(this);xhr.onload=(function(_this){return function(e){var _ref;if(files[0].status===Dropzone.CANCELED){return;}
if(xhr.readyState!==4){return;}
response=xhr.responseText;if(xhr.getResponseHeader("content-type")&&~xhr.getResponseHeader("content-type").indexOf("application/json")){try{response=JSON.parse(response);}catch(_error){e=_error;response="Invalid JSON response from server.";}}
updateProgress();if(!((200<=(_ref=xhr.status)&&_ref<300))){return handleError();}else{return _this._finished(files,response,e);}};})(this);xhr.onerror=(function(_this){return function(){if(files[0].status===Dropzone.CANCELED){return;}
return handleError();};})(this);progressObj=(_ref=xhr.upload)!=null?_ref:xhr;progressObj.onprogress=updateProgress;headers={"Accept":"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};if(this.options.headers){extend(headers,this.options.headers);}
for(headerName in headers){headerValue=headers[headerName];if(headerValue){xhr.setRequestHeader(headerName,headerValue);}}
formData=new FormData();if(this.options.params){_ref1=this.options.params;for(key in _ref1){value=_ref1[key];formData.append(key,value);}}
for(_j=0,_len1=files.length;_j<_len1;_j++){file=files[_j];this.emit("sending",file,xhr,formData);}
if(this.options.uploadMultiple){this.emit("sendingmultiple",files,xhr,formData);}
if(this.element.tagName==="FORM"){_ref2=this.element.querySelectorAll("input, textarea, select, button");for(_k=0,_len2=_ref2.length;_k<_len2;_k++){input=_ref2[_k];inputName=input.getAttribute("name");inputType=input.getAttribute("type");if(input.tagName==="SELECT"&&input.hasAttribute("multiple")){_ref3=input.options;for(_l=0,_len3=_ref3.length;_l<_len3;_l++){option=_ref3[_l];if(option.selected){formData.append(inputName,option.value);}}}else if(!inputType||((_ref4=inputType.toLowerCase())!=="checkbox"&&_ref4!=="radio")||input.checked){formData.append(inputName,input.value);}}}
for(i=_m=0,_ref5=files.length-1;0<=_ref5?_m<=_ref5:_m>=_ref5;i=0<=_ref5?++_m:--_m){formData.append(this._getParamName(i),files[i],this._renameFilename(files[i].name));}
return this.submitRequest(xhr,formData,files);};Dropzone.prototype.submitRequest=function(xhr,formData,files){return xhr.send(formData);};Dropzone.prototype._finished=function(files,responseText,e){var file,_i,_len;for(_i=0,_len=files.length;_i<_len;_i++){file=files[_i];file.status=Dropzone.SUCCESS;this.emit("success",file,responseText,e);this.emit("complete",file);}
if(this.options.uploadMultiple){this.emit("successmultiple",files,responseText,e);this.emit("completemultiple",files);}
if(this.options.autoProcessQueue){return this.processQueue();}};Dropzone.prototype._errorProcessing=function(files,message,xhr){var file,_i,_len;for(_i=0,_len=files.length;_i<_len;_i++){file=files[_i];file.status=Dropzone.ERROR;this.emit("error",file,message,xhr);this.emit("complete",file);}
if(this.options.uploadMultiple){this.emit("errormultiple",files,message,xhr);this.emit("completemultiple",files);}
if(this.options.autoProcessQueue){return this.processQueue();}};return Dropzone;})(Emitter);Dropzone.version="4.3.0";Dropzone.options={};Dropzone.optionsForElement=function(element){if(element.getAttribute("id")){return Dropzone.options[camelize(element.getAttribute("id"))];}else{return void 0;}};Dropzone.instances=[];Dropzone.forElement=function(element){if(typeof element==="string"){element=document.querySelector(element);}
if((element!=null?element.dropzone:void 0)==null){throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");}
return element.dropzone;};Dropzone.autoDiscover=true;Dropzone.discover=function(){var checkElements,dropzone,dropzones,_i,_len,_results;if(document.querySelectorAll){dropzones=document.querySelectorAll(".dropzone");}else{dropzones=[];checkElements=function(elements){var el,_i,_len,_results;_results=[];for(_i=0,_len=elements.length;_i<_len;_i++){el=elements[_i];if(/(^| )dropzone($| )/.test(el.className)){_results.push(dropzones.push(el));}else{_results.push(void 0);}}
return _results;};checkElements(document.getElementsByTagName("div"));checkElements(document.getElementsByTagName("form"));}
_results=[];for(_i=0,_len=dropzones.length;_i<_len;_i++){dropzone=dropzones[_i];if(Dropzone.optionsForElement(dropzone)!==false){_results.push(new Dropzone(dropzone));}else{_results.push(void 0);}}
return _results;};Dropzone.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i];Dropzone.isBrowserSupported=function(){var capableBrowser,regex,_i,_len,_ref;capableBrowser=true;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector){if(!("classList"in document.createElement("a"))){capableBrowser=false;}else{_ref=Dropzone.blacklistedBrowsers;for(_i=0,_len=_ref.length;_i<_len;_i++){regex=_ref[_i];if(regex.test(navigator.userAgent)){capableBrowser=false;continue;}}}}else{capableBrowser=false;}
return capableBrowser;};without=function(list,rejectedItem){var item,_i,_len,_results;_results=[];for(_i=0,_len=list.length;_i<_len;_i++){item=list[_i];if(item!==rejectedItem){_results.push(item);}}
return _results;};camelize=function(str){return str.replace(/[\-_](\w)/g,function(match){return match.charAt(1).toUpperCase();});};Dropzone.createElement=function(string){var div;div=document.createElement("div");div.innerHTML=string;return div.childNodes[0];};Dropzone.elementInside=function(element,container){if(element===container){return true;}
while(element=element.parentNode){if(element===container){return true;}}
return false;};Dropzone.getElement=function(el,name){var element;if(typeof el==="string"){element=document.querySelector(el);}else if(el.nodeType!=null){element=el;}
if(element==null){throw new Error("Invalid `"+name+"` option provided. Please provide a CSS selector or a plain HTML element.");}
return element;};Dropzone.getElements=function(els,name){var e,el,elements,_i,_j,_len,_len1,_ref;if(els instanceof Array){elements=[];try{for(_i=0,_len=els.length;_i<_len;_i++){el=els[_i];elements.push(this.getElement(el,name));}}catch(_error){e=_error;elements=null;}}else if(typeof els==="string"){elements=[];_ref=document.querySelectorAll(els);for(_j=0,_len1=_ref.length;_j<_len1;_j++){el=_ref[_j];elements.push(el);}}else if(els.nodeType!=null){elements=[els];}
if(!((elements!=null)&&elements.length)){throw new Error("Invalid `"+name+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");}
return elements;};Dropzone.confirm=function(question,accepted,rejected){if(window.confirm(question)){return accepted();}else if(rejected!=null){return rejected();}};Dropzone.isValidFile=function(file,acceptedFiles){var baseMimeType,mimeType,validType,_i,_len;if(!acceptedFiles){return true;}
acceptedFiles=acceptedFiles.split(",");mimeType=file.type;baseMimeType=mimeType.replace(/\/.*$/,"");for(_i=0,_len=acceptedFiles.length;_i<_len;_i++){validType=acceptedFiles[_i];validType=validType.trim();if(validType.charAt(0)==="."){if(file.name.toLowerCase().indexOf(validType.toLowerCase(),file.name.length-validType.length)!==-1){return true;}}else if(/\/\*$/.test(validType)){if(baseMimeType===validType.replace(/\/.*$/,"")){return true;}}else{if(mimeType===validType){return true;}}}
return false;};if(typeof jQuery!=="undefined"&&jQuery!==null){jQuery.fn.dropzone=function(options){return this.each(function(){return new Dropzone(this,options);});};}
if(typeof module!=="undefined"&&module!==null){module.exports=Dropzone;}else{window.Dropzone=Dropzone;}
Dropzone.ADDED="added";Dropzone.QUEUED="queued";Dropzone.ACCEPTED=Dropzone.QUEUED;Dropzone.UPLOADING="uploading";Dropzone.PROCESSING=Dropzone.UPLOADING;Dropzone.CANCELED="canceled";Dropzone.ERROR="error";Dropzone.SUCCESS="success";detectVerticalSquash=function(img){var alpha,canvas,ctx,data,ey,ih,iw,py,ratio,sy;iw=img.naturalWidth;ih=img.naturalHeight;canvas=document.createElement("canvas");canvas.width=1;canvas.height=ih;ctx=canvas.getContext("2d");ctx.drawImage(img,0,0);data=ctx.getImageData(0,0,1,ih).data;sy=0;ey=ih;py=ih;while(py>sy){alpha=data[(py-1)*4+3];if(alpha===0){ey=py;}else{sy=py;}
py=(ey+sy)>>1;}
ratio=py/ih;if(ratio===0){return 1;}else{return ratio;}};drawImageIOSFix=function(ctx,img,sx,sy,sw,sh,dx,dy,dw,dh){var vertSquashRatio;vertSquashRatio=detectVerticalSquash(img);return ctx.drawImage(img,sx,sy,sw,sh,dx,dy,dw,dh/vertSquashRatio);};contentLoaded=function(win,fn){var add,doc,done,init,poll,pre,rem,root,top;done=false;top=true;doc=win.document;root=doc.documentElement;add=(doc.addEventListener?"addEventListener":"attachEvent");rem=(doc.addEventListener?"removeEventListener":"detachEvent");pre=(doc.addEventListener?"":"on");init=function(e){if(e.type==="readystatechange"&&doc.readyState!=="complete"){return;}
(e.type==="load"?win:doc)[rem](pre+e.type,init,false);if(!done&&(done=true)){return fn.call(win,e.type||e);}};poll=function(){var e;try{root.doScroll("left");}catch(_error){e=_error;setTimeout(poll,50);return;}
return init("poll");};if(doc.readyState!=="complete"){if(doc.createEventObject&&root.doScroll){try{top=!win.frameElement;}catch(_error){}
if(top){poll();}}
doc[add](pre+"DOMContentLoaded",init,false);doc[add](pre+"readystatechange",init,false);return win[add](pre+"load",init,false);}};Dropzone._autoDiscoverFunction=function(){if(Dropzone.autoDiscover){return Dropzone.discover();}};contentLoaded(window,Dropzone._autoDiscoverFunction);}).call(this);(function(){'use strict';var $;var Swiper=function(container,params){if(!(this instanceof Swiper))return new Swiper(container,params);var defaults={direction:'horizontal',touchEventsTarget:'container',initialSlide:0,speed:300,autoplay:false,autoplayDisableOnInteraction:true,autoplayStopOnLast:false,iOSEdgeSwipeDetection:false,iOSEdgeSwipeThreshold:20,freeMode:false,freeModeMomentum:true,freeModeMomentumRatio:1,freeModeMomentumBounce:true,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:false,freeModeMinimumVelocity:0.02,autoHeight:false,setWrapperSize:false,virtualTranslate:false,effect:'slide',coverflow:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:true},flip:{slideShadows:true,limitRotation:true},cube:{slideShadows:true,shadow:true,shadowOffset:20,shadowScale:0.94},fade:{crossFade:false},parallax:false,zoom:false,zoomMax:3,zoomMin:1,zoomToggle:true,scrollbar:null,scrollbarHide:true,scrollbarDraggable:false,scrollbarSnapOnRelease:false,keyboardControl:false,mousewheelControl:false,mousewheelReleaseOnEdges:false,mousewheelInvert:false,mousewheelForceToAxis:false,mousewheelSensitivity:1,mousewheelEventsTarged:'container',hashnav:false,hashnavWatchState:false,history:false,replaceState:false,breakpoints:undefined,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:'column',slidesPerGroup:1,centeredSlides:false,slidesOffsetBefore:0,slidesOffsetAfter:0,roundLengths:false,touchRatio:1,touchAngle:45,simulateTouch:true,shortSwipes:true,longSwipes:true,longSwipesRatio:0.5,longSwipesMs:300,followFinger:true,onlyExternal:false,threshold:0,touchMoveStopPropagation:true,touchReleaseOnEdges:false,uniqueNavElements:true,pagination:null,paginationElement:'span',paginationClickable:false,paginationHide:false,paginationBulletRender:null,paginationProgressRender:null,paginationFractionRender:null,paginationCustomRender:null,paginationType:'bullets',resistance:true,resistanceRatio:0.85,nextButton:null,prevButton:null,watchSlidesProgress:false,watchSlidesVisibility:false,grabCursor:false,preventClicks:true,preventClicksPropagation:true,slideToClickedSlide:false,lazyLoading:false,lazyLoadingInPrevNext:false,lazyLoadingInPrevNextAmount:1,lazyLoadingOnTransitionStart:false,preloadImages:true,updateOnImagesReady:true,loop:false,loopAdditionalSlides:0,loopedSlides:null,control:undefined,controlInverse:false,controlBy:'slide',normalizeSlideIndex:true,allowSwipeToPrev:true,allowSwipeToNext:true,swipeHandler:null,noSwiping:true,noSwipingClass:'swiper-no-swiping',passiveListeners:true,containerModifierClass:'swiper-container-',slideClass:'swiper-slide',slideActiveClass:'swiper-slide-active',slideDuplicateActiveClass:'swiper-slide-duplicate-active',slideVisibleClass:'swiper-slide-visible',slideDuplicateClass:'swiper-slide-duplicate',slideNextClass:'swiper-slide-next',slideDuplicateNextClass:'swiper-slide-duplicate-next',slidePrevClass:'swiper-slide-prev',slideDuplicatePrevClass:'swiper-slide-duplicate-prev',wrapperClass:'swiper-wrapper',bulletClass:'swiper-pagination-bullet',bulletActiveClass:'swiper-pagination-bullet-active',buttonDisabledClass:'swiper-button-disabled',paginationCurrentClass:'swiper-pagination-current',paginationTotalClass:'swiper-pagination-total',paginationHiddenClass:'swiper-pagination-hidden',paginationProgressbarClass:'swiper-pagination-progressbar',paginationClickableClass:'swiper-pagination-clickable',paginationModifierClass:'swiper-pagination-',lazyLoadingClass:'swiper-lazy',lazyStatusLoadingClass:'swiper-lazy-loading',lazyStatusLoadedClass:'swiper-lazy-loaded',lazyPreloaderClass:'swiper-lazy-preloader',notificationClass:'swiper-notification',preloaderClass:'preloader',zoomContainerClass:'swiper-zoom-container',observer:false,observeParents:false,a11y:false,prevSlideMessage:'Previous slide',nextSlideMessage:'Next slide',firstSlideMessage:'This is the first slide',lastSlideMessage:'This is the last slide',paginationBulletMessage:'Go to slide {{index}}',runCallbacksOnInit:true};var initialVirtualTranslate=params&&params.virtualTranslate;params=params||{};var originalParams={};for(var param in params){if(typeof params[param]==='object'&&params[param]!==null&&!(params[param].nodeType||params[param]===window||params[param]===document||(typeof Dom7!=='undefined'&&params[param]instanceof Dom7)||(typeof jQuery!=='undefined'&&params[param]instanceof jQuery))){originalParams[param]={};for(var deepParam in params[param]){originalParams[param][deepParam]=params[param][deepParam];}}
else{originalParams[param]=params[param];}}
for(var def in defaults){if(typeof params[def]==='undefined'){params[def]=defaults[def];}
else if(typeof params[def]==='object'){for(var deepDef in defaults[def]){if(typeof params[def][deepDef]==='undefined'){params[def][deepDef]=defaults[def][deepDef];}}}}
var s=this;s.params=params;s.originalParams=originalParams;s.classNames=[];if(typeof $!=='undefined'&&typeof Dom7!=='undefined'){$=Dom7;}
if(typeof $==='undefined'){if(typeof Dom7==='undefined'){$=window.Dom7||window.Zepto||window.jQuery;}
else{$=Dom7;}
if(!$)return;}
s.$=$;s.currentBreakpoint=undefined;s.getActiveBreakpoint=function(){if(!s.params.breakpoints)return false;var breakpoint=false;var points=[],point;for(point in s.params.breakpoints){if(s.params.breakpoints.hasOwnProperty(point)){points.push(point);}}
points.sort(function(a,b){return parseInt(a,10)>parseInt(b,10);});for(var i=0;i<points.length;i++){point=points[i];if(point>=window.innerWidth&&!breakpoint){breakpoint=point;}}
return breakpoint||'max';};s.setBreakpoint=function(){var breakpoint=s.getActiveBreakpoint();if(breakpoint&&s.currentBreakpoint!==breakpoint){var breakPointsParams=breakpoint in s.params.breakpoints?s.params.breakpoints[breakpoint]:s.originalParams;var needsReLoop=s.params.loop&&(breakPointsParams.slidesPerView!==s.params.slidesPerView);for(var param in breakPointsParams){s.params[param]=breakPointsParams[param];}
s.currentBreakpoint=breakpoint;if(needsReLoop&&s.destroyLoop){s.reLoop(true);}}};if(s.params.breakpoints){s.setBreakpoint();}
s.container=$(container);if(s.container.length===0)return;if(s.container.length>1){var swipers=[];s.container.each(function(){var container=this;swipers.push(new Swiper(this,params));});return swipers;}
s.container[0].swiper=s;s.container.data('swiper',s);s.classNames.push(s.params.containerModifierClass+s.params.direction);if(s.params.freeMode){s.classNames.push(s.params.containerModifierClass+'free-mode');}
if(!s.support.flexbox){s.classNames.push(s.params.containerModifierClass+'no-flexbox');s.params.slidesPerColumn=1;}
if(s.params.autoHeight){s.classNames.push(s.params.containerModifierClass+'autoheight');}
if(s.params.parallax||s.params.watchSlidesVisibility){s.params.watchSlidesProgress=true;}
if(s.params.touchReleaseOnEdges){s.params.resistanceRatio=0;}
if(['cube','coverflow','flip'].indexOf(s.params.effect)>=0){if(s.support.transforms3d){s.params.watchSlidesProgress=true;s.classNames.push(s.params.containerModifierClass+'3d');}
else{s.params.effect='slide';}}
if(s.params.effect!=='slide'){s.classNames.push(s.params.containerModifierClass+s.params.effect);}
if(s.params.effect==='cube'){s.params.resistanceRatio=0;s.params.slidesPerView=1;s.params.slidesPerColumn=1;s.params.slidesPerGroup=1;s.params.centeredSlides=false;s.params.spaceBetween=0;s.params.virtualTranslate=true;}
if(s.params.effect==='fade'||s.params.effect==='flip'){s.params.slidesPerView=1;s.params.slidesPerColumn=1;s.params.slidesPerGroup=1;s.params.watchSlidesProgress=true;s.params.spaceBetween=0;if(typeof initialVirtualTranslate==='undefined'){s.params.virtualTranslate=true;}}
if(s.params.grabCursor&&s.support.touch){s.params.grabCursor=false;}
s.wrapper=s.container.children('.'+s.params.wrapperClass);if(s.params.pagination){s.paginationContainer=$(s.params.pagination);if(s.params.uniqueNavElements&&typeof s.params.pagination==='string'&&s.paginationContainer.length>1&&s.container.find(s.params.pagination).length===1){s.paginationContainer=s.container.find(s.params.pagination);}
if(s.params.paginationType==='bullets'&&s.params.paginationClickable){s.paginationContainer.addClass(s.params.paginationModifierClass+'clickable');}
else{s.params.paginationClickable=false;}
s.paginationContainer.addClass(s.params.paginationModifierClass+s.params.paginationType);}
if(s.params.nextButton||s.params.prevButton){if(s.params.nextButton){s.nextButton=$(s.params.nextButton);if(s.params.uniqueNavElements&&typeof s.params.nextButton==='string'&&s.nextButton.length>1&&s.container.find(s.params.nextButton).length===1){s.nextButton=s.container.find(s.params.nextButton);}}
if(s.params.prevButton){s.prevButton=$(s.params.prevButton);if(s.params.uniqueNavElements&&typeof s.params.prevButton==='string'&&s.prevButton.length>1&&s.container.find(s.params.prevButton).length===1){s.prevButton=s.container.find(s.params.prevButton);}}}
s.isHorizontal=function(){return s.params.direction==='horizontal';};s.rtl=s.isHorizontal()&&(s.container[0].dir.toLowerCase()==='rtl'||s.container.css('direction')==='rtl');if(s.rtl){s.classNames.push(s.params.containerModifierClass+'rtl');}
if(s.rtl){s.wrongRTL=s.wrapper.css('display')==='-webkit-box';}
if(s.params.slidesPerColumn>1){s.classNames.push(s.params.containerModifierClass+'multirow');}
if(s.device.android){s.classNames.push(s.params.containerModifierClass+'android');}
s.container.addClass(s.classNames.join(' '));s.translate=0;s.progress=0;s.velocity=0;s.lockSwipeToNext=function(){s.params.allowSwipeToNext=false;if(s.params.allowSwipeToPrev===false&&s.params.grabCursor){s.unsetGrabCursor();}};s.lockSwipeToPrev=function(){s.params.allowSwipeToPrev=false;if(s.params.allowSwipeToNext===false&&s.params.grabCursor){s.unsetGrabCursor();}};s.lockSwipes=function(){s.params.allowSwipeToNext=s.params.allowSwipeToPrev=false;if(s.params.grabCursor)s.unsetGrabCursor();};s.unlockSwipeToNext=function(){s.params.allowSwipeToNext=true;if(s.params.allowSwipeToPrev===true&&s.params.grabCursor){s.setGrabCursor();}};s.unlockSwipeToPrev=function(){s.params.allowSwipeToPrev=true;if(s.params.allowSwipeToNext===true&&s.params.grabCursor){s.setGrabCursor();}};s.unlockSwipes=function(){s.params.allowSwipeToNext=s.params.allowSwipeToPrev=true;if(s.params.grabCursor)s.setGrabCursor();};function round(a){return Math.floor(a);}
s.setGrabCursor=function(moving){s.container[0].style.cursor='move';s.container[0].style.cursor=moving?'-webkit-grabbing':'-webkit-grab';s.container[0].style.cursor=moving?'-moz-grabbin':'-moz-grab';s.container[0].style.cursor=moving?'grabbing':'grab';};s.unsetGrabCursor=function(){s.container[0].style.cursor='';};if(s.params.grabCursor){s.setGrabCursor();}
s.imagesToLoad=[];s.imagesLoaded=0;s.loadImage=function(imgElement,src,srcset,sizes,checkForComplete,callback){var image;function onReady(){if(callback)callback();}
if(!imgElement.complete||!checkForComplete){if(src){image=new window.Image();image.onload=onReady;image.onerror=onReady;if(sizes){image.sizes=sizes;}
if(srcset){image.srcset=srcset;}
if(src){image.src=src;}}else{onReady();}}else{onReady();}};s.preloadImages=function(){s.imagesToLoad=s.container.find('img');function _onReady(){if(typeof s==='undefined'||s===null||!s)return;if(s.imagesLoaded!==undefined)s.imagesLoaded++;if(s.imagesLoaded===s.imagesToLoad.length){if(s.params.updateOnImagesReady)s.update();s.emit('onImagesReady',s);}}
for(var i=0;i<s.imagesToLoad.length;i++){s.loadImage(s.imagesToLoad[i],(s.imagesToLoad[i].currentSrc||s.imagesToLoad[i].getAttribute('src')),(s.imagesToLoad[i].srcset||s.imagesToLoad[i].getAttribute('srcset')),s.imagesToLoad[i].sizes||s.imagesToLoad[i].getAttribute('sizes'),true,_onReady);}};s.autoplayTimeoutId=undefined;s.autoplaying=false;s.autoplayPaused=false;function autoplay(){var autoplayDelay=s.params.autoplay;var activeSlide=s.slides.eq(s.activeIndex);if(activeSlide.attr('data-swiper-autoplay')){autoplayDelay=activeSlide.attr('data-swiper-autoplay')||s.params.autoplay;}
s.autoplayTimeoutId=setTimeout(function(){if(s.params.loop){s.fixLoop();s._slideNext();s.emit('onAutoplay',s);}
else{if(!s.isEnd){s._slideNext();s.emit('onAutoplay',s);}
else{if(!params.autoplayStopOnLast){s._slideTo(0);s.emit('onAutoplay',s);}
else{s.stopAutoplay();}}}},autoplayDelay);}
s.startAutoplay=function(){if(typeof s.autoplayTimeoutId!=='undefined')return false;if(!s.params.autoplay)return false;if(s.autoplaying)return false;s.autoplaying=true;s.emit('onAutoplayStart',s);autoplay();};s.stopAutoplay=function(internal){if(!s.autoplayTimeoutId)return;if(s.autoplayTimeoutId)clearTimeout(s.autoplayTimeoutId);s.autoplaying=false;s.autoplayTimeoutId=undefined;s.emit('onAutoplayStop',s);};s.pauseAutoplay=function(speed){if(s.autoplayPaused)return;if(s.autoplayTimeoutId)clearTimeout(s.autoplayTimeoutId);s.autoplayPaused=true;if(speed===0){s.autoplayPaused=false;autoplay();}
else{s.wrapper.transitionEnd(function(){if(!s)return;s.autoplayPaused=false;if(!s.autoplaying){s.stopAutoplay();}
else{autoplay();}});}};s.minTranslate=function(){return(-s.snapGrid[0]);};s.maxTranslate=function(){return(-s.snapGrid[s.snapGrid.length-1]);};s.updateAutoHeight=function(){var activeSlides=[];var newHeight=0;var i;if(s.params.slidesPerView!=='auto'&&s.params.slidesPerView>1){for(i=0;i<Math.ceil(s.params.slidesPerView);i++){var index=s.activeIndex+i;if(index>s.slides.length)break;activeSlides.push(s.slides.eq(index)[0]);}}else{activeSlides.push(s.slides.eq(s.activeIndex)[0]);}
for(i=0;i<activeSlides.length;i++){if(typeof activeSlides[i]!=='undefined'){var height=activeSlides[i].offsetHeight;newHeight=height>newHeight?height:newHeight;}}
if(newHeight)s.wrapper.css('height',newHeight+'px');};s.updateContainerSize=function(){var width,height;if(typeof s.params.width!=='undefined'){width=s.params.width;}
else{width=s.container[0].clientWidth;}
if(typeof s.params.height!=='undefined'){height=s.params.height;}
else{height=s.container[0].clientHeight;}
if(width===0&&s.isHorizontal()||height===0&&!s.isHorizontal()){return;}
width=width-parseInt(s.container.css('padding-left'),10)-parseInt(s.container.css('padding-right'),10);height=height-parseInt(s.container.css('padding-top'),10)-parseInt(s.container.css('padding-bottom'),10);s.width=width;s.height=height;s.size=s.isHorizontal()?s.width:s.height;};s.updateSlidesSize=function(){s.slides=s.wrapper.children('.'+s.params.slideClass);s.snapGrid=[];s.slidesGrid=[];s.slidesSizesGrid=[];var spaceBetween=s.params.spaceBetween,slidePosition=-s.params.slidesOffsetBefore,i,prevSlideSize=0,index=0;if(typeof s.size==='undefined')return;if(typeof spaceBetween==='string'&&spaceBetween.indexOf('%')>=0){spaceBetween=parseFloat(spaceBetween.replace('%',''))/100*s.size;}
s.virtualSize=-spaceBetween;if(s.rtl)s.slides.css({marginLeft:'',marginTop:''});else s.slides.css({marginRight:'',marginBottom:''});var slidesNumberEvenToRows;if(s.params.slidesPerColumn>1){if(Math.floor(s.slides.length/s.params.slidesPerColumn)===s.slides.length/s.params.slidesPerColumn){slidesNumberEvenToRows=s.slides.length;}
else{slidesNumberEvenToRows=Math.ceil(s.slides.length/s.params.slidesPerColumn)*s.params.slidesPerColumn;}
if(s.params.slidesPerView!=='auto'&&s.params.slidesPerColumnFill==='row'){slidesNumberEvenToRows=Math.max(slidesNumberEvenToRows,s.params.slidesPerView*s.params.slidesPerColumn);}}
var slideSize;var slidesPerColumn=s.params.slidesPerColumn;var slidesPerRow=slidesNumberEvenToRows/slidesPerColumn;var numFullColumns=slidesPerRow-(s.params.slidesPerColumn*slidesPerRow-s.slides.length);for(i=0;i<s.slides.length;i++){slideSize=0;var slide=s.slides.eq(i);if(s.params.slidesPerColumn>1){var newSlideOrderIndex;var column,row;if(s.params.slidesPerColumnFill==='column'){column=Math.floor(i/slidesPerColumn);row=i-column*slidesPerColumn;if(column>numFullColumns||(column===numFullColumns&&row===slidesPerColumn-1)){if(++row>=slidesPerColumn){row=0;column++;}}
newSlideOrderIndex=column+row*slidesNumberEvenToRows/slidesPerColumn;slide.css({'-webkit-box-ordinal-group':newSlideOrderIndex,'-moz-box-ordinal-group':newSlideOrderIndex,'-ms-flex-order':newSlideOrderIndex,'-webkit-order':newSlideOrderIndex,'order':newSlideOrderIndex});}
else{row=Math.floor(i/slidesPerRow);column=i-row*slidesPerRow;}
slide.css('margin-'+(s.isHorizontal()?'top':'left'),(row!==0&&s.params.spaceBetween)&&(s.params.spaceBetween+'px')).attr('data-swiper-column',column).attr('data-swiper-row',row);}
if(slide.css('display')==='none')continue;if(s.params.slidesPerView==='auto'){slideSize=s.isHorizontal()?slide.outerWidth(true):slide.outerHeight(true);if(s.params.roundLengths)slideSize=round(slideSize);}
else{slideSize=(s.size-(s.params.slidesPerView-1)*spaceBetween)/s.params.slidesPerView;if(s.params.roundLengths)slideSize=round(slideSize);if(s.isHorizontal()){s.slides[i].style.width=slideSize+'px';}
else{s.slides[i].style.height=slideSize+'px';}}
s.slides[i].swiperSlideSize=slideSize;s.slidesSizesGrid.push(slideSize);if(s.params.centeredSlides){slidePosition=slidePosition+slideSize/2+prevSlideSize/2+spaceBetween;if(prevSlideSize===0&&i!==0)slidePosition=slidePosition-s.size/2-spaceBetween;if(i===0)slidePosition=slidePosition-s.size/2-spaceBetween;if(Math.abs(slidePosition)<1/1000)slidePosition=0;if((index)%s.params.slidesPerGroup===0)s.snapGrid.push(slidePosition);s.slidesGrid.push(slidePosition);}
else{if((index)%s.params.slidesPerGroup===0)s.snapGrid.push(slidePosition);s.slidesGrid.push(slidePosition);slidePosition=slidePosition+slideSize+spaceBetween;}
s.virtualSize+=slideSize+spaceBetween;prevSlideSize=slideSize;index++;}
s.virtualSize=Math.max(s.virtualSize,s.size)+s.params.slidesOffsetAfter;var newSlidesGrid;if(s.rtl&&s.wrongRTL&&(s.params.effect==='slide'||s.params.effect==='coverflow')){s.wrapper.css({width:s.virtualSize+s.params.spaceBetween+'px'});}
if(!s.support.flexbox||s.params.setWrapperSize){if(s.isHorizontal())s.wrapper.css({width:s.virtualSize+s.params.spaceBetween+'px'});else s.wrapper.css({height:s.virtualSize+s.params.spaceBetween+'px'});}
if(s.params.slidesPerColumn>1){s.virtualSize=(slideSize+s.params.spaceBetween)*slidesNumberEvenToRows;s.virtualSize=Math.ceil(s.virtualSize/s.params.slidesPerColumn)-s.params.spaceBetween;if(s.isHorizontal())s.wrapper.css({width:s.virtualSize+s.params.spaceBetween+'px'});else s.wrapper.css({height:s.virtualSize+s.params.spaceBetween+'px'});if(s.params.centeredSlides){newSlidesGrid=[];for(i=0;i<s.snapGrid.length;i++){if(s.snapGrid[i]<s.virtualSize+s.snapGrid[0])newSlidesGrid.push(s.snapGrid[i]);}
s.snapGrid=newSlidesGrid;}}
if(!s.params.centeredSlides){newSlidesGrid=[];for(i=0;i<s.snapGrid.length;i++){if(s.snapGrid[i]<=s.virtualSize-s.size){newSlidesGrid.push(s.snapGrid[i]);}}
s.snapGrid=newSlidesGrid;if(Math.floor(s.virtualSize-s.size)-Math.floor(s.snapGrid[s.snapGrid.length-1])>1){s.snapGrid.push(s.virtualSize-s.size);}}
if(s.snapGrid.length===0)s.snapGrid=[0];if(s.params.spaceBetween!==0){if(s.isHorizontal()){if(s.rtl)s.slides.css({marginLeft:spaceBetween+'px'});else s.slides.css({marginRight:spaceBetween+'px'});}
else s.slides.css({marginBottom:spaceBetween+'px'});}
if(s.params.watchSlidesProgress){s.updateSlidesOffset();}};s.updateSlidesOffset=function(){for(var i=0;i<s.slides.length;i++){s.slides[i].swiperSlideOffset=s.isHorizontal()?s.slides[i].offsetLeft:s.slides[i].offsetTop;}};s.currentSlidesPerView=function(){var spv=1,i,j;if(s.params.centeredSlides){var size=s.slides[s.activeIndex].swiperSlideSize;var breakLoop;for(i=s.activeIndex+1;i<s.slides.length;i++){if(s.slides[i]&&!breakLoop){size+=s.slides[i].swiperSlideSize;spv++;if(size>s.size)breakLoop=true;}}
for(j=s.activeIndex-1;j>=0;j--){if(s.slides[j]&&!breakLoop){size+=s.slides[j].swiperSlideSize;spv++;if(size>s.size)breakLoop=true;}}}
else{for(i=s.activeIndex+1;i<s.slides.length;i++){if(s.slidesGrid[i]-s.slidesGrid[s.activeIndex]<s.size){spv++;}}}
return spv;};s.updateSlidesProgress=function(translate){if(typeof translate==='undefined'){translate=s.translate||0;}
if(s.slides.length===0)return;if(typeof s.slides[0].swiperSlideOffset==='undefined')s.updateSlidesOffset();var offsetCenter=-translate;if(s.rtl)offsetCenter=translate;s.slides.removeClass(s.params.slideVisibleClass);for(var i=0;i<s.slides.length;i++){var slide=s.slides[i];var slideProgress=(offsetCenter+(s.params.centeredSlides?s.minTranslate():0)-slide.swiperSlideOffset)/(slide.swiperSlideSize+s.params.spaceBetween);if(s.params.watchSlidesVisibility){var slideBefore=-(offsetCenter-slide.swiperSlideOffset);var slideAfter=slideBefore+s.slidesSizesGrid[i];var isVisible=(slideBefore>=0&&slideBefore<s.size)||(slideAfter>0&&slideAfter<=s.size)||(slideBefore<=0&&slideAfter>=s.size);if(isVisible){s.slides.eq(i).addClass(s.params.slideVisibleClass);}}
slide.progress=s.rtl?-slideProgress:slideProgress;}};s.updateProgress=function(translate){if(typeof translate==='undefined'){translate=s.translate||0;}
var translatesDiff=s.maxTranslate()-s.minTranslate();var wasBeginning=s.isBeginning;var wasEnd=s.isEnd;if(translatesDiff===0){s.progress=0;s.isBeginning=s.isEnd=true;}
else{s.progress=(translate-s.minTranslate())/(translatesDiff);s.isBeginning=s.progress<=0;s.isEnd=s.progress>=1;}
if(s.isBeginning&&!wasBeginning)s.emit('onReachBeginning',s);if(s.isEnd&&!wasEnd)s.emit('onReachEnd',s);if(s.params.watchSlidesProgress)s.updateSlidesProgress(translate);s.emit('onProgress',s,s.progress);};s.updateActiveIndex=function(){var translate=s.rtl?s.translate:-s.translate;var newActiveIndex,i,snapIndex;for(i=0;i<s.slidesGrid.length;i++){if(typeof s.slidesGrid[i+1]!=='undefined'){if(translate>=s.slidesGrid[i]&&translate<s.slidesGrid[i+1]-(s.slidesGrid[i+1]-s.slidesGrid[i])/2){newActiveIndex=i;}
else if(translate>=s.slidesGrid[i]&&translate<s.slidesGrid[i+1]){newActiveIndex=i+1;}}
else{if(translate>=s.slidesGrid[i]){newActiveIndex=i;}}}
if(s.params.normalizeSlideIndex){if(newActiveIndex<0||typeof newActiveIndex==='undefined')newActiveIndex=0;}
snapIndex=Math.floor(newActiveIndex/s.params.slidesPerGroup);if(snapIndex>=s.snapGrid.length)snapIndex=s.snapGrid.length-1;if(newActiveIndex===s.activeIndex){return;}
s.snapIndex=snapIndex;s.previousIndex=s.activeIndex;s.activeIndex=newActiveIndex;s.updateClasses();s.updateRealIndex();};s.updateRealIndex=function(){s.realIndex=parseInt(s.slides.eq(s.activeIndex).attr('data-swiper-slide-index')||s.activeIndex,10);};s.updateClasses=function(){s.slides.removeClass(s.params.slideActiveClass+' '+s.params.slideNextClass+' '+s.params.slidePrevClass+' '+s.params.slideDuplicateActiveClass+' '+s.params.slideDuplicateNextClass+' '+s.params.slideDuplicatePrevClass);var activeSlide=s.slides.eq(s.activeIndex);activeSlide.addClass(s.params.slideActiveClass);if(params.loop){if(activeSlide.hasClass(s.params.slideDuplicateClass)){s.wrapper.children('.'+s.params.slideClass+':not(.'+s.params.slideDuplicateClass+')[data-swiper-slide-index="'+s.realIndex+'"]').addClass(s.params.slideDuplicateActiveClass);}
else{s.wrapper.children('.'+s.params.slideClass+'.'+s.params.slideDuplicateClass+'[data-swiper-slide-index="'+s.realIndex+'"]').addClass(s.params.slideDuplicateActiveClass);}}
var nextSlide=activeSlide.next('.'+s.params.slideClass).addClass(s.params.slideNextClass);if(s.params.loop&&nextSlide.length===0){nextSlide=s.slides.eq(0);nextSlide.addClass(s.params.slideNextClass);}
var prevSlide=activeSlide.prev('.'+s.params.slideClass).addClass(s.params.slidePrevClass);if(s.params.loop&&prevSlide.length===0){prevSlide=s.slides.eq(-1);prevSlide.addClass(s.params.slidePrevClass);}
if(params.loop){if(nextSlide.hasClass(s.params.slideDuplicateClass)){s.wrapper.children('.'+s.params.slideClass+':not(.'+s.params.slideDuplicateClass+')[data-swiper-slide-index="'+nextSlide.attr('data-swiper-slide-index')+'"]').addClass(s.params.slideDuplicateNextClass);}
else{s.wrapper.children('.'+s.params.slideClass+'.'+s.params.slideDuplicateClass+'[data-swiper-slide-index="'+nextSlide.attr('data-swiper-slide-index')+'"]').addClass(s.params.slideDuplicateNextClass);}
if(prevSlide.hasClass(s.params.slideDuplicateClass)){s.wrapper.children('.'+s.params.slideClass+':not(.'+s.params.slideDuplicateClass+')[data-swiper-slide-index="'+prevSlide.attr('data-swiper-slide-index')+'"]').addClass(s.params.slideDuplicatePrevClass);}
else{s.wrapper.children('.'+s.params.slideClass+'.'+s.params.slideDuplicateClass+'[data-swiper-slide-index="'+prevSlide.attr('data-swiper-slide-index')+'"]').addClass(s.params.slideDuplicatePrevClass);}}
if(s.paginationContainer&&s.paginationContainer.length>0){var current,total=s.params.loop?Math.ceil((s.slides.length-s.loopedSlides*2)/s.params.slidesPerGroup):s.snapGrid.length;if(s.params.loop){current=Math.ceil((s.activeIndex-s.loopedSlides)/s.params.slidesPerGroup);if(current>s.slides.length-1-s.loopedSlides*2){current=current-(s.slides.length-s.loopedSlides*2);}
if(current>total-1)current=current-total;if(current<0&&s.params.paginationType!=='bullets')current=total+current;}
else{if(typeof s.snapIndex!=='undefined'){current=s.snapIndex;}
else{current=s.activeIndex||0;}}
if(s.params.paginationType==='bullets'&&s.bullets&&s.bullets.length>0){s.bullets.removeClass(s.params.bulletActiveClass);if(s.paginationContainer.length>1){s.bullets.each(function(){if($(this).index()===current)$(this).addClass(s.params.bulletActiveClass);});}
else{s.bullets.eq(current).addClass(s.params.bulletActiveClass);}}
if(s.params.paginationType==='fraction'){s.paginationContainer.find('.'+s.params.paginationCurrentClass).text(current+1);s.paginationContainer.find('.'+s.params.paginationTotalClass).text(total);}
if(s.params.paginationType==='progress'){var scale=(current+1)/total,scaleX=scale,scaleY=1;if(!s.isHorizontal()){scaleY=scale;scaleX=1;}
s.paginationContainer.find('.'+s.params.paginationProgressbarClass).transform('translate3d(0,0,0) scaleX('+scaleX+') scaleY('+scaleY+')').transition(s.params.speed);}
if(s.params.paginationType==='custom'&&s.params.paginationCustomRender){s.paginationContainer.html(s.params.paginationCustomRender(s,current+1,total));s.emit('onPaginationRendered',s,s.paginationContainer[0]);}}
if(!s.params.loop){if(s.params.prevButton&&s.prevButton&&s.prevButton.length>0){if(s.isBeginning){s.prevButton.addClass(s.params.buttonDisabledClass);if(s.params.a11y&&s.a11y)s.a11y.disable(s.prevButton);}
else{s.prevButton.removeClass(s.params.buttonDisabledClass);if(s.params.a11y&&s.a11y)s.a11y.enable(s.prevButton);}}
if(s.params.nextButton&&s.nextButton&&s.nextButton.length>0){if(s.isEnd){s.nextButton.addClass(s.params.buttonDisabledClass);if(s.params.a11y&&s.a11y)s.a11y.disable(s.nextButton);}
else{s.nextButton.removeClass(s.params.buttonDisabledClass);if(s.params.a11y&&s.a11y)s.a11y.enable(s.nextButton);}}}};s.updatePagination=function(){if(!s.params.pagination)return;if(s.paginationContainer&&s.paginationContainer.length>0){var paginationHTML='';if(s.params.paginationType==='bullets'){var numberOfBullets=s.params.loop?Math.ceil((s.slides.length-s.loopedSlides*2)/s.params.slidesPerGroup):s.snapGrid.length;for(var i=0;i<numberOfBullets;i++){if(s.params.paginationBulletRender){paginationHTML+=s.params.paginationBulletRender(s,i,s.params.bulletClass);}
else{paginationHTML+='<'+s.params.paginationElement+' class="'+s.params.bulletClass+'"></'+s.params.paginationElement+'>';}}
s.paginationContainer.html(paginationHTML);s.bullets=s.paginationContainer.find('.'+s.params.bulletClass);if(s.params.paginationClickable&&s.params.a11y&&s.a11y){s.a11y.initPagination();}}
if(s.params.paginationType==='fraction'){if(s.params.paginationFractionRender){paginationHTML=s.params.paginationFractionRender(s,s.params.paginationCurrentClass,s.params.paginationTotalClass);}
else{paginationHTML='<span class="'+s.params.paginationCurrentClass+'"></span>'+' / '+'<span class="'+s.params.paginationTotalClass+'"></span>';}
s.paginationContainer.html(paginationHTML);}
if(s.params.paginationType==='progress'){if(s.params.paginationProgressRender){paginationHTML=s.params.paginationProgressRender(s,s.params.paginationProgressbarClass);}
else{paginationHTML='<span class="'+s.params.paginationProgressbarClass+'"></span>';}
s.paginationContainer.html(paginationHTML);}
if(s.params.paginationType!=='custom'){s.emit('onPaginationRendered',s,s.paginationContainer[0]);}}};s.update=function(updateTranslate){if(!s)return;s.updateContainerSize();s.updateSlidesSize();s.updateProgress();s.updatePagination();s.updateClasses();if(s.params.scrollbar&&s.scrollbar){s.scrollbar.set();}
var newTranslate;function forceSetTranslate(){var translate=s.rtl?-s.translate:s.translate;newTranslate=Math.min(Math.max(s.translate,s.maxTranslate()),s.minTranslate());s.setWrapperTranslate(newTranslate);s.updateActiveIndex();s.updateClasses();}
if(updateTranslate){var translated;if(s.controller&&s.controller.spline){s.controller.spline=undefined;}
if(s.params.freeMode){forceSetTranslate();if(s.params.autoHeight){s.updateAutoHeight();}}
else{if((s.params.slidesPerView==='auto'||s.params.slidesPerView>1)&&s.isEnd&&!s.params.centeredSlides){translated=s.slideTo(s.slides.length-1,0,false,true);}
else{translated=s.slideTo(s.activeIndex,0,false,true);}
if(!translated){forceSetTranslate();}}}
else if(s.params.autoHeight){s.updateAutoHeight();}};s.onResize=function(forceUpdatePagination){if(s.params.onBeforeResize)s.params.onBeforeResize(s);if(s.params.breakpoints){s.setBreakpoint();}
var allowSwipeToPrev=s.params.allowSwipeToPrev;var allowSwipeToNext=s.params.allowSwipeToNext;s.params.allowSwipeToPrev=s.params.allowSwipeToNext=true;s.updateContainerSize();s.updateSlidesSize();if(s.params.slidesPerView==='auto'||s.params.freeMode||forceUpdatePagination)s.updatePagination();if(s.params.scrollbar&&s.scrollbar){s.scrollbar.set();}
if(s.controller&&s.controller.spline){s.controller.spline=undefined;}
var slideChangedBySlideTo=false;if(s.params.freeMode){var newTranslate=Math.min(Math.max(s.translate,s.maxTranslate()),s.minTranslate());s.setWrapperTranslate(newTranslate);s.updateActiveIndex();s.updateClasses();if(s.params.autoHeight){s.updateAutoHeight();}}
else{s.updateClasses();if((s.params.slidesPerView==='auto'||s.params.slidesPerView>1)&&s.isEnd&&!s.params.centeredSlides){slideChangedBySlideTo=s.slideTo(s.slides.length-1,0,false,true);}
else{slideChangedBySlideTo=s.slideTo(s.activeIndex,0,false,true);}}
if(s.params.lazyLoading&&!slideChangedBySlideTo&&s.lazy){s.lazy.load();}
s.params.allowSwipeToPrev=allowSwipeToPrev;s.params.allowSwipeToNext=allowSwipeToNext;if(s.params.onAfterResize)s.params.onAfterResize(s);};s.touchEventsDesktop={start:'mousedown',move:'mousemove',end:'mouseup'};if(window.navigator.pointerEnabled)s.touchEventsDesktop={start:'pointerdown',move:'pointermove',end:'pointerup'};else if(window.navigator.msPointerEnabled)s.touchEventsDesktop={start:'MSPointerDown',move:'MSPointerMove',end:'MSPointerUp'};s.touchEvents={start:s.support.touch||!s.params.simulateTouch?'touchstart':s.touchEventsDesktop.start,move:s.support.touch||!s.params.simulateTouch?'touchmove':s.touchEventsDesktop.move,end:s.support.touch||!s.params.simulateTouch?'touchend':s.touchEventsDesktop.end};if(window.navigator.pointerEnabled||window.navigator.msPointerEnabled){(s.params.touchEventsTarget==='container'?s.container:s.wrapper).addClass('swiper-wp8-'+s.params.direction);}
s.initEvents=function(detach){var actionDom=detach?'off':'on';var action=detach?'removeEventListener':'addEventListener';var touchEventsTarget=s.params.touchEventsTarget==='container'?s.container[0]:s.wrapper[0];var target=s.support.touch?touchEventsTarget:document;var moveCapture=s.params.nested?true:false;if(s.browser.ie){touchEventsTarget[action](s.touchEvents.start,s.onTouchStart,false);target[action](s.touchEvents.move,s.onTouchMove,moveCapture);target[action](s.touchEvents.end,s.onTouchEnd,false);}
else{if(s.support.touch){var passiveListener=s.touchEvents.start==='touchstart'&&s.support.passiveListener&&s.params.passiveListeners?{passive:true,capture:false}:false;touchEventsTarget[action](s.touchEvents.start,s.onTouchStart,passiveListener);touchEventsTarget[action](s.touchEvents.move,s.onTouchMove,moveCapture);touchEventsTarget[action](s.touchEvents.end,s.onTouchEnd,passiveListener);}
if((params.simulateTouch&&!s.device.ios&&!s.device.android)||(params.simulateTouch&&!s.support.touch&&s.device.ios)){touchEventsTarget[action]('mousedown',s.onTouchStart,false);document[action]('mousemove',s.onTouchMove,moveCapture);document[action]('mouseup',s.onTouchEnd,false);}}
window[action]('resize',s.onResize);if(s.params.nextButton&&s.nextButton&&s.nextButton.length>0){s.nextButton[actionDom]('click',s.onClickNext);if(s.params.a11y&&s.a11y)s.nextButton[actionDom]('keydown',s.a11y.onEnterKey);}
if(s.params.prevButton&&s.prevButton&&s.prevButton.length>0){s.prevButton[actionDom]('click',s.onClickPrev);if(s.params.a11y&&s.a11y)s.prevButton[actionDom]('keydown',s.a11y.onEnterKey);}
if(s.params.pagination&&s.params.paginationClickable){s.paginationContainer[actionDom]('click','.'+s.params.bulletClass,s.onClickIndex);if(s.params.a11y&&s.a11y)s.paginationContainer[actionDom]('keydown','.'+s.params.bulletClass,s.a11y.onEnterKey);}
if(s.params.preventClicks||s.params.preventClicksPropagation)touchEventsTarget[action]('click',s.preventClicks,true);};s.attachEvents=function(){s.initEvents();};s.detachEvents=function(){s.initEvents(true);};s.allowClick=true;s.preventClicks=function(e){if(!s.allowClick){if(s.params.preventClicks)e.preventDefault();if(s.params.preventClicksPropagation&&s.animating){e.stopPropagation();e.stopImmediatePropagation();}}};s.onClickNext=function(e){e.preventDefault();if(s.isEnd&&!s.params.loop)return;s.slideNext();};s.onClickPrev=function(e){e.preventDefault();if(s.isBeginning){}
s.slidePrev();};s.onClickIndex=function(e){e.preventDefault();var index=$(this).index()*s.params.slidesPerGroup;if(s.params.loop)index=index+s.loopedSlides;s.slideTo(index);};function findElementInEvent(e,selector){var el=$(e.target);if(!el.is(selector)){if(typeof selector==='string'){el=el.parents(selector);}
else if(selector.nodeType){var found;el.parents().each(function(index,_el){if(_el===selector)found=selector;});if(!found)return undefined;else return selector;}}
if(el.length===0){return undefined;}
return el[0];}
s.updateClickedSlide=function(e){var slide=findElementInEvent(e,'.'+s.params.slideClass);var slideFound=false;if(slide){for(var i=0;i<s.slides.length;i++){if(s.slides[i]===slide)slideFound=true;}}
if(slide&&slideFound){s.clickedSlide=slide;s.clickedIndex=$(slide).index();}
else{s.clickedSlide=undefined;s.clickedIndex=undefined;return;}
if(s.params.slideToClickedSlide&&s.clickedIndex!==undefined&&s.clickedIndex!==s.activeIndex){var slideToIndex=s.clickedIndex,realIndex,duplicatedSlides,slidesPerView=s.params.slidesPerView==='auto'?s.currentSlidesPerView():s.params.slidesPerView;if(s.params.loop){if(s.animating)return;realIndex=parseInt($(s.clickedSlide).attr('data-swiper-slide-index'),10);if(s.params.centeredSlides){if((slideToIndex<s.loopedSlides-slidesPerView/2)||(slideToIndex>s.slides.length-s.loopedSlides+slidesPerView/2)){s.fixLoop();slideToIndex=s.wrapper.children('.'+s.params.slideClass+'[data-swiper-slide-index="'+realIndex+'"]:not(.'+s.params.slideDuplicateClass+')').eq(0).index();setTimeout(function(){s.slideTo(slideToIndex);},0);}
else{s.slideTo(slideToIndex);}}
else{if(slideToIndex>s.slides.length-slidesPerView){s.fixLoop();slideToIndex=s.wrapper.children('.'+s.params.slideClass+'[data-swiper-slide-index="'+realIndex+'"]:not(.'+s.params.slideDuplicateClass+')').eq(0).index();setTimeout(function(){s.slideTo(slideToIndex);},0);}
else{s.slideTo(slideToIndex);}}}
else{s.slideTo(slideToIndex);}}};var isTouched,isMoved,allowTouchCallbacks,touchStartTime,isScrolling,currentTranslate,startTranslate,allowThresholdMove,formElements='input, select, textarea, button, video',lastClickTime=Date.now(),clickTimeout,velocities=[],allowMomentumBounce;s.animating=false;s.touches={startX:0,startY:0,currentX:0,currentY:0,diff:0};var isTouchEvent,startMoving;s.onTouchStart=function(e){if(e.originalEvent)e=e.originalEvent;isTouchEvent=e.type==='touchstart';if(!isTouchEvent&&'which'in e&&e.which===3)return;if(s.params.noSwiping&&findElementInEvent(e,'.'+s.params.noSwipingClass)){s.allowClick=true;return;}
if(s.params.swipeHandler){if(!findElementInEvent(e,s.params.swipeHandler))return;}
var startX=s.touches.currentX=e.type==='touchstart'?e.targetTouches[0].pageX:e.pageX;var startY=s.touches.currentY=e.type==='touchstart'?e.targetTouches[0].pageY:e.pageY;if(s.device.ios&&s.params.iOSEdgeSwipeDetection&&startX<=s.params.iOSEdgeSwipeThreshold){return;}
isTouched=true;isMoved=false;allowTouchCallbacks=true;isScrolling=undefined;startMoving=undefined;s.touches.startX=startX;s.touches.startY=startY;touchStartTime=Date.now();s.allowClick=true;s.updateContainerSize();s.swipeDirection=undefined;if(s.params.threshold>0)allowThresholdMove=false;if(e.type!=='touchstart'){var preventDefault=true;if($(e.target).is(formElements))preventDefault=false;if(document.activeElement&&$(document.activeElement).is(formElements)){document.activeElement.blur();}
if(preventDefault){e.preventDefault();}}
s.emit('onTouchStart',s,e);};s.onTouchMove=function(e){if(e.originalEvent)e=e.originalEvent;if(isTouchEvent&&e.type==='mousemove')return;if(e.preventedByNestedSwiper){s.touches.startX=e.type==='touchmove'?e.targetTouches[0].pageX:e.pageX;s.touches.startY=e.type==='touchmove'?e.targetTouches[0].pageY:e.pageY;return;}
if(s.params.onlyExternal){s.allowClick=false;if(isTouched){s.touches.startX=s.touches.currentX=e.type==='touchmove'?e.targetTouches[0].pageX:e.pageX;s.touches.startY=s.touches.currentY=e.type==='touchmove'?e.targetTouches[0].pageY:e.pageY;touchStartTime=Date.now();}
return;}
if(isTouchEvent&&s.params.touchReleaseOnEdges&&!s.params.loop){if(!s.isHorizontal()){if((s.touches.currentY<s.touches.startY&&s.translate<=s.maxTranslate())||(s.touches.currentY>s.touches.startY&&s.translate>=s.minTranslate())){return;}}
else{if((s.touches.currentX<s.touches.startX&&s.translate<=s.maxTranslate())||(s.touches.currentX>s.touches.startX&&s.translate>=s.minTranslate())){return;}}}
if(isTouchEvent&&document.activeElement){if(e.target===document.activeElement&&$(e.target).is(formElements)){isMoved=true;s.allowClick=false;return;}}
if(allowTouchCallbacks){s.emit('onTouchMove',s,e);}
if(e.targetTouches&&e.targetTouches.length>1)return;s.touches.currentX=e.type==='touchmove'?e.targetTouches[0].pageX:e.pageX;s.touches.currentY=e.type==='touchmove'?e.targetTouches[0].pageY:e.pageY;if(typeof isScrolling==='undefined'){var touchAngle;if(s.isHorizontal()&&s.touches.currentY===s.touches.startY||!s.isHorizontal()&&s.touches.currentX===s.touches.startX){isScrolling=false;}
else{touchAngle=Math.atan2(Math.abs(s.touches.currentY-s.touches.startY),Math.abs(s.touches.currentX-s.touches.startX))*180/Math.PI;isScrolling=s.isHorizontal()?touchAngle>s.params.touchAngle:(90-touchAngle>s.params.touchAngle);}}
if(isScrolling){s.emit('onTouchMoveOpposite',s,e);}
if(typeof startMoving==='undefined'){if(s.touches.currentX!==s.touches.startX||s.touches.currentY!==s.touches.startY){startMoving=true;}}
if(!isTouched)return;if(isScrolling){isTouched=false;return;}
if(!startMoving){return;}
s.allowClick=false;s.emit('onSliderMove',s,e);e.preventDefault();if(s.params.touchMoveStopPropagation&&!s.params.nested){e.stopPropagation();}
if(!isMoved){if(params.loop){s.fixLoop();}
startTranslate=s.getWrapperTranslate();s.setWrapperTransition(0);if(s.animating){s.wrapper.trigger('webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd');}
if(s.params.autoplay&&s.autoplaying){if(s.params.autoplayDisableOnInteraction){s.stopAutoplay();}
else{s.pauseAutoplay();}}
allowMomentumBounce=false;if(s.params.grabCursor&&(s.params.allowSwipeToNext===true||s.params.allowSwipeToPrev===true)){s.setGrabCursor(true);}}
isMoved=true;var diff=s.touches.diff=s.isHorizontal()?s.touches.currentX-s.touches.startX:s.touches.currentY-s.touches.startY;diff=diff*s.params.touchRatio;if(s.rtl)diff=-diff;s.swipeDirection=diff>0?'prev':'next';currentTranslate=diff+startTranslate;var disableParentSwiper=true;if((diff>0&&currentTranslate>s.minTranslate())){disableParentSwiper=false;if(s.params.resistance)currentTranslate=s.minTranslate()-1+Math.pow(-s.minTranslate()+startTranslate+diff,s.params.resistanceRatio);}
else if(diff<0&&currentTranslate<s.maxTranslate()){disableParentSwiper=false;if(s.params.resistance)currentTranslate=s.maxTranslate()+1-Math.pow(s.maxTranslate()-startTranslate-diff,s.params.resistanceRatio);}
if(disableParentSwiper){e.preventedByNestedSwiper=true;}
if(!s.params.allowSwipeToNext&&s.swipeDirection==='next'&&currentTranslate<startTranslate){currentTranslate=startTranslate;}
if(!s.params.allowSwipeToPrev&&s.swipeDirection==='prev'&&currentTranslate>startTranslate){currentTranslate=startTranslate;}
if(s.params.threshold>0){if(Math.abs(diff)>s.params.threshold||allowThresholdMove){if(!allowThresholdMove){allowThresholdMove=true;s.touches.startX=s.touches.currentX;s.touches.startY=s.touches.currentY;currentTranslate=startTranslate;s.touches.diff=s.isHorizontal()?s.touches.currentX-s.touches.startX:s.touches.currentY-s.touches.startY;return;}}
else{currentTranslate=startTranslate;return;}}
if(!s.params.followFinger)return;if(s.params.freeMode||s.params.watchSlidesProgress){s.updateActiveIndex();}
if(s.params.freeMode){if(velocities.length===0){velocities.push({position:s.touches[s.isHorizontal()?'startX':'startY'],time:touchStartTime});}
velocities.push({position:s.touches[s.isHorizontal()?'currentX':'currentY'],time:(new window.Date()).getTime()});}
s.updateProgress(currentTranslate);s.setWrapperTranslate(currentTranslate);};s.onTouchEnd=function(e){if(e.originalEvent)e=e.originalEvent;if(allowTouchCallbacks){s.emit('onTouchEnd',s,e);}
allowTouchCallbacks=false;if(!isTouched)return;if(s.params.grabCursor&&isMoved&&isTouched&&(s.params.allowSwipeToNext===true||s.params.allowSwipeToPrev===true)){s.setGrabCursor(false);}
var touchEndTime=Date.now();var timeDiff=touchEndTime-touchStartTime;if(s.allowClick){s.updateClickedSlide(e);s.emit('onTap',s,e);if(timeDiff<300&&(touchEndTime-lastClickTime)>300){if(clickTimeout)clearTimeout(clickTimeout);clickTimeout=setTimeout(function(){if(!s)return;if(s.params.paginationHide&&s.paginationContainer.length>0&&!$(e.target).hasClass(s.params.bulletClass)){s.paginationContainer.toggleClass(s.params.paginationHiddenClass);}
s.emit('onClick',s,e);},300);}
if(timeDiff<300&&(touchEndTime-lastClickTime)<300){if(clickTimeout)clearTimeout(clickTimeout);s.emit('onDoubleTap',s,e);}}
lastClickTime=Date.now();setTimeout(function(){if(s)s.allowClick=true;},0);if(!isTouched||!isMoved||!s.swipeDirection||s.touches.diff===0||currentTranslate===startTranslate){isTouched=isMoved=false;return;}
isTouched=isMoved=false;var currentPos;if(s.params.followFinger){currentPos=s.rtl?s.translate:-s.translate;}
else{currentPos=-currentTranslate;}
if(s.params.freeMode){if(currentPos<-s.minTranslate()){s.slideTo(s.activeIndex);return;}
else if(currentPos>-s.maxTranslate()){if(s.slides.length<s.snapGrid.length){s.slideTo(s.snapGrid.length-1);}
else{s.slideTo(s.slides.length-1);}
return;}
if(s.params.freeModeMomentum){if(velocities.length>1){var lastMoveEvent=velocities.pop(),velocityEvent=velocities.pop();var distance=lastMoveEvent.position-velocityEvent.position;var time=lastMoveEvent.time-velocityEvent.time;s.velocity=distance/time;s.velocity=s.velocity/2;if(Math.abs(s.velocity)<s.params.freeModeMinimumVelocity){s.velocity=0;}
if(time>150||(new window.Date().getTime()-lastMoveEvent.time)>300){s.velocity=0;}}else{s.velocity=0;}
s.velocity=s.velocity*s.params.freeModeMomentumVelocityRatio;velocities.length=0;var momentumDuration=1000*s.params.freeModeMomentumRatio;var momentumDistance=s.velocity*momentumDuration;var newPosition=s.translate+momentumDistance;if(s.rtl)newPosition=-newPosition;var doBounce=false;var afterBouncePosition;var bounceAmount=Math.abs(s.velocity)*20*s.params.freeModeMomentumBounceRatio;if(newPosition<s.maxTranslate()){if(s.params.freeModeMomentumBounce){if(newPosition+s.maxTranslate()<-bounceAmount){newPosition=s.maxTranslate()-bounceAmount;}
afterBouncePosition=s.maxTranslate();doBounce=true;allowMomentumBounce=true;}
else{newPosition=s.maxTranslate();}}
else if(newPosition>s.minTranslate()){if(s.params.freeModeMomentumBounce){if(newPosition-s.minTranslate()>bounceAmount){newPosition=s.minTranslate()+bounceAmount;}
afterBouncePosition=s.minTranslate();doBounce=true;allowMomentumBounce=true;}
else{newPosition=s.minTranslate();}}
else if(s.params.freeModeSticky){var j=0,nextSlide;for(j=0;j<s.snapGrid.length;j+=1){if(s.snapGrid[j]>-newPosition){nextSlide=j;break;}}
if(Math.abs(s.snapGrid[nextSlide]-newPosition)<Math.abs(s.snapGrid[nextSlide-1]-newPosition)||s.swipeDirection==='next'){newPosition=s.snapGrid[nextSlide];}else{newPosition=s.snapGrid[nextSlide-1];}
if(!s.rtl)newPosition=-newPosition;}
if(s.velocity!==0){if(s.rtl){momentumDuration=Math.abs((-newPosition-s.translate)/s.velocity);}
else{momentumDuration=Math.abs((newPosition-s.translate)/s.velocity);}}
else if(s.params.freeModeSticky){s.slideReset();return;}
if(s.params.freeModeMomentumBounce&&doBounce){s.updateProgress(afterBouncePosition);s.setWrapperTransition(momentumDuration);s.setWrapperTranslate(newPosition);s.onTransitionStart();s.animating=true;s.wrapper.transitionEnd(function(){if(!s||!allowMomentumBounce)return;s.emit('onMomentumBounce',s);s.setWrapperTransition(s.params.speed);s.setWrapperTranslate(afterBouncePosition);s.wrapper.transitionEnd(function(){if(!s)return;s.onTransitionEnd();});});}else if(s.velocity){s.updateProgress(newPosition);s.setWrapperTransition(momentumDuration);s.setWrapperTranslate(newPosition);s.onTransitionStart();if(!s.animating){s.animating=true;s.wrapper.transitionEnd(function(){if(!s)return;s.onTransitionEnd();});}}else{s.updateProgress(newPosition);}
s.updateActiveIndex();}
if(!s.params.freeModeMomentum||timeDiff>=s.params.longSwipesMs){s.updateProgress();s.updateActiveIndex();}
return;}
var i,stopIndex=0,groupSize=s.slidesSizesGrid[0];for(i=0;i<s.slidesGrid.length;i+=s.params.slidesPerGroup){if(typeof s.slidesGrid[i+s.params.slidesPerGroup]!=='undefined'){if(currentPos>=s.slidesGrid[i]&&currentPos<s.slidesGrid[i+s.params.slidesPerGroup]){stopIndex=i;groupSize=s.slidesGrid[i+s.params.slidesPerGroup]-s.slidesGrid[i];}}
else{if(currentPos>=s.slidesGrid[i]){stopIndex=i;groupSize=s.slidesGrid[s.slidesGrid.length-1]-s.slidesGrid[s.slidesGrid.length-2];}}}
var ratio=(currentPos-s.slidesGrid[stopIndex])/groupSize;if(timeDiff>s.params.longSwipesMs){if(!s.params.longSwipes){s.slideTo(s.activeIndex);return;}
if(s.swipeDirection==='next'){if(ratio>=s.params.longSwipesRatio)s.slideTo(stopIndex+s.params.slidesPerGroup);else s.slideTo(stopIndex);}
if(s.swipeDirection==='prev'){if(ratio>(1-s.params.longSwipesRatio))s.slideTo(stopIndex+s.params.slidesPerGroup);else s.slideTo(stopIndex);}}
else{if(!s.params.shortSwipes){s.slideTo(s.activeIndex);return;}
if(s.swipeDirection==='next'){s.slideTo(stopIndex+s.params.slidesPerGroup);}
if(s.swipeDirection==='prev'){s.slideTo(stopIndex);}}};s._slideTo=function(slideIndex,speed){return s.slideTo(slideIndex,speed,true,true);};s.slideTo=function(slideIndex,speed,runCallbacks,internal){if(typeof runCallbacks==='undefined')runCallbacks=true;if(typeof slideIndex==='undefined')slideIndex=0;if(slideIndex<0)slideIndex=0;s.snapIndex=Math.floor(slideIndex/s.params.slidesPerGroup);if(s.snapIndex>=s.snapGrid.length)s.snapIndex=s.snapGrid.length-1;var translate=-s.snapGrid[s.snapIndex];if(s.params.autoplay&&s.autoplaying){if(internal||!s.params.autoplayDisableOnInteraction){s.pauseAutoplay(speed);}
else{s.stopAutoplay();}}
s.updateProgress(translate);if(s.params.normalizeSlideIndex){for(var i=0;i<s.slidesGrid.length;i++){if(-Math.floor(translate*100)>=Math.floor(s.slidesGrid[i]*100)){slideIndex=i;}}}
if(!s.params.allowSwipeToNext&&translate<s.translate&&translate<s.minTranslate()){return false;}
if(!s.params.allowSwipeToPrev&&translate>s.translate&&translate>s.maxTranslate()){if((s.activeIndex||0)!==slideIndex)return false;}
if(typeof speed==='undefined')speed=s.params.speed;s.previousIndex=s.activeIndex||0;s.activeIndex=slideIndex;s.updateRealIndex();if((s.rtl&&-translate===s.translate)||(!s.rtl&&translate===s.translate)){if(s.params.autoHeight){s.updateAutoHeight();}
s.updateClasses();if(s.params.effect!=='slide'){s.setWrapperTranslate(translate);}
return false;}
s.updateClasses();s.onTransitionStart(runCallbacks);if(speed===0||s.browser.lteIE9){s.setWrapperTranslate(translate);s.setWrapperTransition(0);s.onTransitionEnd(runCallbacks);}
else{s.setWrapperTranslate(translate);s.setWrapperTransition(speed);if(!s.animating){s.animating=true;s.wrapper.transitionEnd(function(){if(!s)return;s.onTransitionEnd(runCallbacks);});}}
return true;};s.onTransitionStart=function(runCallbacks){if(typeof runCallbacks==='undefined')runCallbacks=true;if(s.params.autoHeight){s.updateAutoHeight();}
if(s.lazy)s.lazy.onTransitionStart();if(runCallbacks){s.emit('onTransitionStart',s);if(s.activeIndex!==s.previousIndex){s.emit('onSlideChangeStart',s);if(s.activeIndex>s.previousIndex){s.emit('onSlideNextStart',s);}
else{s.emit('onSlidePrevStart',s);}}}};s.onTransitionEnd=function(runCallbacks){s.animating=false;s.setWrapperTransition(0);if(typeof runCallbacks==='undefined')runCallbacks=true;if(s.lazy)s.lazy.onTransitionEnd();if(runCallbacks){s.emit('onTransitionEnd',s);if(s.activeIndex!==s.previousIndex){s.emit('onSlideChangeEnd',s);if(s.activeIndex>s.previousIndex){s.emit('onSlideNextEnd',s);}
else{s.emit('onSlidePrevEnd',s);}}}
if(s.params.history&&s.history){s.history.setHistory(s.params.history,s.activeIndex);}
if(s.params.hashnav&&s.hashnav){s.hashnav.setHash();}};s.slideNext=function(runCallbacks,speed,internal){if(s.params.loop){if(s.animating)return false;s.fixLoop();var clientLeft=s.container[0].clientLeft;return s.slideTo(s.activeIndex+s.params.slidesPerGroup,speed,runCallbacks,internal);}
else return s.slideTo(s.activeIndex+s.params.slidesPerGroup,speed,runCallbacks,internal);};s._slideNext=function(speed){return s.slideNext(true,speed,true);};s.slidePrev=function(runCallbacks,speed,internal){if(s.params.loop){if(s.animating)return false;s.fixLoop();var clientLeft=s.container[0].clientLeft;return s.slideTo(s.activeIndex-1,speed,runCallbacks,internal);}
else return s.slideTo(s.activeIndex-1,speed,runCallbacks,internal);};s._slidePrev=function(speed){return s.slidePrev(true,speed,true);};s.slideReset=function(runCallbacks,speed,internal){return s.slideTo(s.activeIndex,speed,runCallbacks);};s.disableTouchControl=function(){s.params.onlyExternal=true;return true;};s.enableTouchControl=function(){s.params.onlyExternal=false;return true;};s.setWrapperTransition=function(duration,byController){s.wrapper.transition(duration);if(s.params.effect!=='slide'&&s.effects[s.params.effect]){s.effects[s.params.effect].setTransition(duration);}
if(s.params.parallax&&s.parallax){s.parallax.setTransition(duration);}
if(s.params.scrollbar&&s.scrollbar){s.scrollbar.setTransition(duration);}
if(s.params.control&&s.controller){s.controller.setTransition(duration,byController);}
s.emit('onSetTransition',s,duration);};s.setWrapperTranslate=function(translate,updateActiveIndex,byController){var x=0,y=0,z=0;if(s.isHorizontal()){x=s.rtl?-translate:translate;}
else{y=translate;}
if(s.params.roundLengths){x=round(x);y=round(y);}
if(!s.params.virtualTranslate){if(s.support.transforms3d)s.wrapper.transform('translate3d('+x+'px, '+y+'px, '+z+'px)');else s.wrapper.transform('translate('+x+'px, '+y+'px)');}
s.translate=s.isHorizontal()?x:y;var progress;var translatesDiff=s.maxTranslate()-s.minTranslate();if(translatesDiff===0){progress=0;}
else{progress=(translate-s.minTranslate())/(translatesDiff);}
if(progress!==s.progress){s.updateProgress(translate);}
if(updateActiveIndex)s.updateActiveIndex();if(s.params.effect!=='slide'&&s.effects[s.params.effect]){s.effects[s.params.effect].setTranslate(s.translate);}
if(s.params.parallax&&s.parallax){s.parallax.setTranslate(s.translate);}
if(s.params.scrollbar&&s.scrollbar){s.scrollbar.setTranslate(s.translate);}
if(s.params.control&&s.controller){s.controller.setTranslate(s.translate,byController);}
s.emit('onSetTranslate',s,s.translate);};s.getTranslate=function(el,axis){var matrix,curTransform,curStyle,transformMatrix;if(typeof axis==='undefined'){axis='x';}
if(s.params.virtualTranslate){return s.rtl?-s.translate:s.translate;}
curStyle=window.getComputedStyle(el,null);if(window.WebKitCSSMatrix){curTransform=curStyle.transform||curStyle.webkitTransform;if(curTransform.split(',').length>6){curTransform=curTransform.split(', ').map(function(a){return a.replace(',','.');}).join(', ');}
transformMatrix=new window.WebKitCSSMatrix(curTransform==='none'?'':curTransform);}
else{transformMatrix=curStyle.MozTransform||curStyle.OTransform||curStyle.MsTransform||curStyle.msTransform||curStyle.transform||curStyle.getPropertyValue('transform').replace('translate(','matrix(1, 0, 0, 1,');matrix=transformMatrix.toString().split(',');}
if(axis==='x'){if(window.WebKitCSSMatrix)
curTransform=transformMatrix.m41;else if(matrix.length===16)
curTransform=parseFloat(matrix[12]);else
curTransform=parseFloat(matrix[4]);}
if(axis==='y'){if(window.WebKitCSSMatrix)
curTransform=transformMatrix.m42;else if(matrix.length===16)
curTransform=parseFloat(matrix[13]);else
curTransform=parseFloat(matrix[5]);}
if(s.rtl&&curTransform)curTransform=-curTransform;return curTransform||0;};s.getWrapperTranslate=function(axis){if(typeof axis==='undefined'){axis=s.isHorizontal()?'x':'y';}
return s.getTranslate(s.wrapper[0],axis);};s.observers=[];function initObserver(target,options){options=options||{};var ObserverFunc=window.MutationObserver||window.WebkitMutationObserver;var observer=new ObserverFunc(function(mutations){mutations.forEach(function(mutation){s.onResize(true);s.emit('onObserverUpdate',s,mutation);});});observer.observe(target,{attributes:typeof options.attributes==='undefined'?true:options.attributes,childList:typeof options.childList==='undefined'?true:options.childList,characterData:typeof options.characterData==='undefined'?true:options.characterData});s.observers.push(observer);}
s.initObservers=function(){if(s.params.observeParents){var containerParents=s.container.parents();for(var i=0;i<containerParents.length;i++){initObserver(containerParents[i]);}}
initObserver(s.container[0],{childList:false});initObserver(s.wrapper[0],{attributes:false});};s.disconnectObservers=function(){for(var i=0;i<s.observers.length;i++){s.observers[i].disconnect();}
s.observers=[];};s.createLoop=function(){s.wrapper.children('.'+s.params.slideClass+'.'+s.params.slideDuplicateClass).remove();var slides=s.wrapper.children('.'+s.params.slideClass);if(s.params.slidesPerView==='auto'&&!s.params.loopedSlides)s.params.loopedSlides=slides.length;s.loopedSlides=parseInt(s.params.loopedSlides||s.params.slidesPerView,10);s.loopedSlides=s.loopedSlides+s.params.loopAdditionalSlides;if(s.loopedSlides>slides.length){s.loopedSlides=slides.length;}
var prependSlides=[],appendSlides=[],i;slides.each(function(index,el){var slide=$(this);if(index<s.loopedSlides)appendSlides.push(el);if(index<slides.length&&index>=slides.length-s.loopedSlides)prependSlides.push(el);slide.attr('data-swiper-slide-index',index);});for(i=0;i<appendSlides.length;i++){s.wrapper.append($(appendSlides[i].cloneNode(true)).addClass(s.params.slideDuplicateClass));}
for(i=prependSlides.length-1;i>=0;i--){s.wrapper.prepend($(prependSlides[i].cloneNode(true)).addClass(s.params.slideDuplicateClass));}};s.destroyLoop=function(){s.wrapper.children('.'+s.params.slideClass+'.'+s.params.slideDuplicateClass).remove();s.slides.removeAttr('data-swiper-slide-index');};s.reLoop=function(updatePosition){var oldIndex=s.activeIndex-s.loopedSlides;s.destroyLoop();s.createLoop();s.updateSlidesSize();if(updatePosition){s.slideTo(oldIndex+s.loopedSlides,0,false);}};s.fixLoop=function(){var newIndex;if(s.activeIndex<s.loopedSlides){newIndex=s.slides.length-s.loopedSlides*3+s.activeIndex;newIndex=newIndex+s.loopedSlides;s.slideTo(newIndex,0,false,true);}
else if((s.params.slidesPerView==='auto'&&s.activeIndex>=s.loopedSlides*2)||(s.activeIndex>s.slides.length-s.params.slidesPerView*2)){newIndex=-s.slides.length+s.activeIndex+s.loopedSlides;newIndex=newIndex+s.loopedSlides;s.slideTo(newIndex,0,false,true);}};s.appendSlide=function(slides){if(s.params.loop){s.destroyLoop();}
if(typeof slides==='object'&&slides.length){for(var i=0;i<slides.length;i++){if(slides[i])s.wrapper.append(slides[i]);}}
else{s.wrapper.append(slides);}
if(s.params.loop){s.createLoop();}
if(!(s.params.observer&&s.support.observer)){s.update(true);}};s.prependSlide=function(slides){if(s.params.loop){s.destroyLoop();}
var newActiveIndex=s.activeIndex+1;if(typeof slides==='object'&&slides.length){for(var i=0;i<slides.length;i++){if(slides[i])s.wrapper.prepend(slides[i]);}
newActiveIndex=s.activeIndex+slides.length;}
else{s.wrapper.prepend(slides);}
if(s.params.loop){s.createLoop();}
if(!(s.params.observer&&s.support.observer)){s.update(true);}
s.slideTo(newActiveIndex,0,false);};s.removeSlide=function(slidesIndexes){if(s.params.loop){s.destroyLoop();s.slides=s.wrapper.children('.'+s.params.slideClass);}
var newActiveIndex=s.activeIndex,indexToRemove;if(typeof slidesIndexes==='object'&&slidesIndexes.length){for(var i=0;i<slidesIndexes.length;i++){indexToRemove=slidesIndexes[i];if(s.slides[indexToRemove])s.slides.eq(indexToRemove).remove();if(indexToRemove<newActiveIndex)newActiveIndex--;}
newActiveIndex=Math.max(newActiveIndex,0);}
else{indexToRemove=slidesIndexes;if(s.slides[indexToRemove])s.slides.eq(indexToRemove).remove();if(indexToRemove<newActiveIndex)newActiveIndex--;newActiveIndex=Math.max(newActiveIndex,0);}
if(s.params.loop){s.createLoop();}
if(!(s.params.observer&&s.support.observer)){s.update(true);}
if(s.params.loop){s.slideTo(newActiveIndex+s.loopedSlides,0,false);}
else{s.slideTo(newActiveIndex,0,false);}};s.removeAllSlides=function(){var slidesIndexes=[];for(var i=0;i<s.slides.length;i++){slidesIndexes.push(i);}
s.removeSlide(slidesIndexes);};s.effects={fade:{setTranslate:function(){for(var i=0;i<s.slides.length;i++){var slide=s.slides.eq(i);var offset=slide[0].swiperSlideOffset;var tx=-offset;if(!s.params.virtualTranslate)tx=tx-s.translate;var ty=0;if(!s.isHorizontal()){ty=tx;tx=0;}
var slideOpacity=s.params.fade.crossFade?Math.max(1-Math.abs(slide[0].progress),0):1+Math.min(Math.max(slide[0].progress,-1),0);slide.css({opacity:slideOpacity}).transform('translate3d('+tx+'px, '+ty+'px, 0px)');}},setTransition:function(duration){s.slides.transition(duration);if(s.params.virtualTranslate&&duration!==0){var eventTriggered=false;s.slides.transitionEnd(function(){if(eventTriggered)return;if(!s)return;eventTriggered=true;s.animating=false;var triggerEvents=['webkitTransitionEnd','transitionend','oTransitionEnd','MSTransitionEnd','msTransitionEnd'];for(var i=0;i<triggerEvents.length;i++){s.wrapper.trigger(triggerEvents[i]);}});}}},flip:{setTranslate:function(){for(var i=0;i<s.slides.length;i++){var slide=s.slides.eq(i);var progress=slide[0].progress;if(s.params.flip.limitRotation){progress=Math.max(Math.min(slide[0].progress,1),-1);}
var offset=slide[0].swiperSlideOffset;var rotate=-180*progress,rotateY=rotate,rotateX=0,tx=-offset,ty=0;if(!s.isHorizontal()){ty=tx;tx=0;rotateX=-rotateY;rotateY=0;}
else if(s.rtl){rotateY=-rotateY;}
slide[0].style.zIndex=-Math.abs(Math.round(progress))+s.slides.length;if(s.params.flip.slideShadows){var shadowBefore=s.isHorizontal()?slide.find('.swiper-slide-shadow-left'):slide.find('.swiper-slide-shadow-top');var shadowAfter=s.isHorizontal()?slide.find('.swiper-slide-shadow-right'):slide.find('.swiper-slide-shadow-bottom');if(shadowBefore.length===0){shadowBefore=$('<div class="swiper-slide-shadow-'+(s.isHorizontal()?'left':'top')+'"></div>');slide.append(shadowBefore);}
if(shadowAfter.length===0){shadowAfter=$('<div class="swiper-slide-shadow-'+(s.isHorizontal()?'right':'bottom')+'"></div>');slide.append(shadowAfter);}
if(shadowBefore.length)shadowBefore[0].style.opacity=Math.max(-progress,0);if(shadowAfter.length)shadowAfter[0].style.opacity=Math.max(progress,0);}
slide.transform('translate3d('+tx+'px, '+ty+'px, 0px) rotateX('+rotateX+'deg) rotateY('+rotateY+'deg)');}},setTransition:function(duration){s.slides.transition(duration).find('.swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left').transition(duration);if(s.params.virtualTranslate&&duration!==0){var eventTriggered=false;s.slides.eq(s.activeIndex).transitionEnd(function(){if(eventTriggered)return;if(!s)return;if(!$(this).hasClass(s.params.slideActiveClass))return;eventTriggered=true;s.animating=false;var triggerEvents=['webkitTransitionEnd','transitionend','oTransitionEnd','MSTransitionEnd','msTransitionEnd'];for(var i=0;i<triggerEvents.length;i++){s.wrapper.trigger(triggerEvents[i]);}});}}},cube:{setTranslate:function(){var wrapperRotate=0,cubeShadow;if(s.params.cube.shadow){if(s.isHorizontal()){cubeShadow=s.wrapper.find('.swiper-cube-shadow');if(cubeShadow.length===0){cubeShadow=$('<div class="swiper-cube-shadow"></div>');s.wrapper.append(cubeShadow);}
cubeShadow.css({height:s.width+'px'});}
else{cubeShadow=s.container.find('.swiper-cube-shadow');if(cubeShadow.length===0){cubeShadow=$('<div class="swiper-cube-shadow"></div>');s.container.append(cubeShadow);}}}
for(var i=0;i<s.slides.length;i++){var slide=s.slides.eq(i);var slideAngle=i*90;var round=Math.floor(slideAngle/360);if(s.rtl){slideAngle=-slideAngle;round=Math.floor(-slideAngle/360);}
var progress=Math.max(Math.min(slide[0].progress,1),-1);var tx=0,ty=0,tz=0;if(i%4===0){tx=-round*4*s.size;tz=0;}
else if((i-1)%4===0){tx=0;tz=-round*4*s.size;}
else if((i-2)%4===0){tx=s.size+round*4*s.size;tz=s.size;}
else if((i-3)%4===0){tx=-s.size;tz=3*s.size+s.size*4*round;}
if(s.rtl){tx=-tx;}
if(!s.isHorizontal()){ty=tx;tx=0;}
var transform='rotateX('+(s.isHorizontal()?0:-slideAngle)+'deg) rotateY('+(s.isHorizontal()?slideAngle:0)+'deg) translate3d('+tx+'px, '+ty+'px, '+tz+'px)';if(progress<=1&&progress>-1){wrapperRotate=i*90+progress*90;if(s.rtl)wrapperRotate=-i*90-progress*90;}
slide.transform(transform);if(s.params.cube.slideShadows){var shadowBefore=s.isHorizontal()?slide.find('.swiper-slide-shadow-left'):slide.find('.swiper-slide-shadow-top');var shadowAfter=s.isHorizontal()?slide.find('.swiper-slide-shadow-right'):slide.find('.swiper-slide-shadow-bottom');if(shadowBefore.length===0){shadowBefore=$('<div class="swiper-slide-shadow-'+(s.isHorizontal()?'left':'top')+'"></div>');slide.append(shadowBefore);}
if(shadowAfter.length===0){shadowAfter=$('<div class="swiper-slide-shadow-'+(s.isHorizontal()?'right':'bottom')+'"></div>');slide.append(shadowAfter);}
if(shadowBefore.length)shadowBefore[0].style.opacity=Math.max(-progress,0);if(shadowAfter.length)shadowAfter[0].style.opacity=Math.max(progress,0);}}
s.wrapper.css({'-webkit-transform-origin':'50% 50% -'+(s.size/2)+'px','-moz-transform-origin':'50% 50% -'+(s.size/2)+'px','-ms-transform-origin':'50% 50% -'+(s.size/2)+'px','transform-origin':'50% 50% -'+(s.size/2)+'px'});if(s.params.cube.shadow){if(s.isHorizontal()){cubeShadow.transform('translate3d(0px, '+(s.width/2+s.params.cube.shadowOffset)+'px, '+(-s.width/2)+'px) rotateX(90deg) rotateZ(0deg) scale('+(s.params.cube.shadowScale)+')');}
else{var shadowAngle=Math.abs(wrapperRotate)-Math.floor(Math.abs(wrapperRotate)/90)*90;var multiplier=1.5-(Math.sin(shadowAngle*2*Math.PI/360)/2+Math.cos(shadowAngle*2*Math.PI/360)/2);var scale1=s.params.cube.shadowScale,scale2=s.params.cube.shadowScale/multiplier,offset=s.params.cube.shadowOffset;cubeShadow.transform('scale3d('+scale1+', 1, '+scale2+') translate3d(0px, '+(s.height/2+offset)+'px, '+(-s.height/2/scale2)+'px) rotateX(-90deg)');}}
var zFactor=(s.isSafari||s.isUiWebView)?(-s.size/2):0;s.wrapper.transform('translate3d(0px,0,'+zFactor+'px) rotateX('+(s.isHorizontal()?0:wrapperRotate)+'deg) rotateY('+(s.isHorizontal()?-wrapperRotate:0)+'deg)');},setTransition:function(duration){s.slides.transition(duration).find('.swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left').transition(duration);if(s.params.cube.shadow&&!s.isHorizontal()){s.container.find('.swiper-cube-shadow').transition(duration);}}},coverflow:{setTranslate:function(){var transform=s.translate;var center=s.isHorizontal()?-transform+s.width/2:-transform+s.height/2;var rotate=s.isHorizontal()?s.params.coverflow.rotate:-s.params.coverflow.rotate;var translate=s.params.coverflow.depth;for(var i=0,length=s.slides.length;i<length;i++){var slide=s.slides.eq(i);var slideSize=s.slidesSizesGrid[i];var slideOffset=slide[0].swiperSlideOffset;var offsetMultiplier=(center-slideOffset-slideSize/2)/slideSize*s.params.coverflow.modifier;var rotateY=s.isHorizontal()?rotate*offsetMultiplier:0;var rotateX=s.isHorizontal()?0:rotate*offsetMultiplier;var translateZ=-translate*Math.abs(offsetMultiplier);var translateY=s.isHorizontal()?0:s.params.coverflow.stretch*(offsetMultiplier);var translateX=s.isHorizontal()?s.params.coverflow.stretch*(offsetMultiplier):0;if(Math.abs(translateX)<0.001)translateX=0;if(Math.abs(translateY)<0.001)translateY=0;if(Math.abs(translateZ)<0.001)translateZ=0;if(Math.abs(rotateY)<0.001)rotateY=0;if(Math.abs(rotateX)<0.001)rotateX=0;var slideTransform='translate3d('+translateX+'px,'+translateY+'px,'+translateZ+'px)  rotateX('+rotateX+'deg) rotateY('+rotateY+'deg)';slide.transform(slideTransform);slide[0].style.zIndex=-Math.abs(Math.round(offsetMultiplier))+1;if(s.params.coverflow.slideShadows){var shadowBefore=s.isHorizontal()?slide.find('.swiper-slide-shadow-left'):slide.find('.swiper-slide-shadow-top');var shadowAfter=s.isHorizontal()?slide.find('.swiper-slide-shadow-right'):slide.find('.swiper-slide-shadow-bottom');if(shadowBefore.length===0){shadowBefore=$('<div class="swiper-slide-shadow-'+(s.isHorizontal()?'left':'top')+'"></div>');slide.append(shadowBefore);}
if(shadowAfter.length===0){shadowAfter=$('<div class="swiper-slide-shadow-'+(s.isHorizontal()?'right':'bottom')+'"></div>');slide.append(shadowAfter);}
if(shadowBefore.length)shadowBefore[0].style.opacity=offsetMultiplier>0?offsetMultiplier:0;if(shadowAfter.length)shadowAfter[0].style.opacity=(-offsetMultiplier)>0?-offsetMultiplier:0;}}
if(s.browser.ie){var ws=s.wrapper[0].style;ws.perspectiveOrigin=center+'px 50%';}},setTransition:function(duration){s.slides.transition(duration).find('.swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left').transition(duration);}}};s.lazy={initialImageLoaded:false,loadImageInSlide:function(index,loadInDuplicate){if(typeof index==='undefined')return;if(typeof loadInDuplicate==='undefined')loadInDuplicate=true;if(s.slides.length===0)return;var slide=s.slides.eq(index);var img=slide.find('.'+s.params.lazyLoadingClass+':not(.'+s.params.lazyStatusLoadedClass+'):not(.'+s.params.lazyStatusLoadingClass+')');if(slide.hasClass(s.params.lazyLoadingClass)&&!slide.hasClass(s.params.lazyStatusLoadedClass)&&!slide.hasClass(s.params.lazyStatusLoadingClass)){img=img.add(slide[0]);}
if(img.length===0)return;img.each(function(){var _img=$(this);_img.addClass(s.params.lazyStatusLoadingClass);var background=_img.attr('data-background');var src=_img.attr('data-src'),srcset=_img.attr('data-srcset'),sizes=_img.attr('data-sizes');s.loadImage(_img[0],(src||background),srcset,sizes,false,function(){if(typeof s==='undefined'||s===null||!s)return;if(background){_img.css('background-image','url("'+background+'")');_img.removeAttr('data-background');}
else{if(srcset){_img.attr('srcset',srcset);_img.removeAttr('data-srcset');}
if(sizes){_img.attr('sizes',sizes);_img.removeAttr('data-sizes');}
if(src){_img.attr('src',src);_img.removeAttr('data-src');}}
_img.addClass(s.params.lazyStatusLoadedClass).removeClass(s.params.lazyStatusLoadingClass);slide.find('.'+s.params.lazyPreloaderClass+', .'+s.params.preloaderClass).remove();if(s.params.loop&&loadInDuplicate){var slideOriginalIndex=slide.attr('data-swiper-slide-index');if(slide.hasClass(s.params.slideDuplicateClass)){var originalSlide=s.wrapper.children('[data-swiper-slide-index="'+slideOriginalIndex+'"]:not(.'+s.params.slideDuplicateClass+')');s.lazy.loadImageInSlide(originalSlide.index(),false);}
else{var duplicatedSlide=s.wrapper.children('.'+s.params.slideDuplicateClass+'[data-swiper-slide-index="'+slideOriginalIndex+'"]');s.lazy.loadImageInSlide(duplicatedSlide.index(),false);}}
s.emit('onLazyImageReady',s,slide[0],_img[0]);});s.emit('onLazyImageLoad',s,slide[0],_img[0]);});},load:function(){var i;var slidesPerView=s.params.slidesPerView;if(slidesPerView==='auto'){slidesPerView=0;}
if(!s.lazy.initialImageLoaded)s.lazy.initialImageLoaded=true;if(s.params.watchSlidesVisibility){s.wrapper.children('.'+s.params.slideVisibleClass).each(function(){s.lazy.loadImageInSlide($(this).index());});}
else{if(slidesPerView>1){for(i=s.activeIndex;i<s.activeIndex+slidesPerView;i++){if(s.slides[i])s.lazy.loadImageInSlide(i);}}
else{s.lazy.loadImageInSlide(s.activeIndex);}}
if(s.params.lazyLoadingInPrevNext){if(slidesPerView>1||(s.params.lazyLoadingInPrevNextAmount&&s.params.lazyLoadingInPrevNextAmount>1)){var amount=s.params.lazyLoadingInPrevNextAmount;var spv=slidesPerView;var maxIndex=Math.min(s.activeIndex+spv+Math.max(amount,spv),s.slides.length);var minIndex=Math.max(s.activeIndex-Math.max(spv,amount),0);for(i=s.activeIndex+slidesPerView;i<maxIndex;i++){if(s.slides[i])s.lazy.loadImageInSlide(i);}
for(i=minIndex;i<s.activeIndex;i++){if(s.slides[i])s.lazy.loadImageInSlide(i);}}
else{var nextSlide=s.wrapper.children('.'+s.params.slideNextClass);if(nextSlide.length>0)s.lazy.loadImageInSlide(nextSlide.index());var prevSlide=s.wrapper.children('.'+s.params.slidePrevClass);if(prevSlide.length>0)s.lazy.loadImageInSlide(prevSlide.index());}}},onTransitionStart:function(){if(s.params.lazyLoading){if(s.params.lazyLoadingOnTransitionStart||(!s.params.lazyLoadingOnTransitionStart&&!s.lazy.initialImageLoaded)){s.lazy.load();}}},onTransitionEnd:function(){if(s.params.lazyLoading&&!s.params.lazyLoadingOnTransitionStart){s.lazy.load();}}};s.scrollbar={isTouched:false,setDragPosition:function(e){var sb=s.scrollbar;var x=0,y=0;var translate;var pointerPosition=s.isHorizontal()?((e.type==='touchstart'||e.type==='touchmove')?e.targetTouches[0].pageX:e.pageX||e.clientX):((e.type==='touchstart'||e.type==='touchmove')?e.targetTouches[0].pageY:e.pageY||e.clientY);var position=(pointerPosition)-sb.track.offset()[s.isHorizontal()?'left':'top']-sb.dragSize/2;var positionMin=-s.minTranslate()*sb.moveDivider;var positionMax=-s.maxTranslate()*sb.moveDivider;if(position<positionMin){position=positionMin;}
else if(position>positionMax){position=positionMax;}
position=-position/sb.moveDivider;s.updateProgress(position);s.setWrapperTranslate(position,true);},dragStart:function(e){var sb=s.scrollbar;sb.isTouched=true;e.preventDefault();e.stopPropagation();sb.setDragPosition(e);clearTimeout(sb.dragTimeout);sb.track.transition(0);if(s.params.scrollbarHide){sb.track.css('opacity',1);}
s.wrapper.transition(100);sb.drag.transition(100);s.emit('onScrollbarDragStart',s);},dragMove:function(e){var sb=s.scrollbar;if(!sb.isTouched)return;if(e.preventDefault)e.preventDefault();else e.returnValue=false;sb.setDragPosition(e);s.wrapper.transition(0);sb.track.transition(0);sb.drag.transition(0);s.emit('onScrollbarDragMove',s);},dragEnd:function(e){var sb=s.scrollbar;if(!sb.isTouched)return;sb.isTouched=false;if(s.params.scrollbarHide){clearTimeout(sb.dragTimeout);sb.dragTimeout=setTimeout(function(){sb.track.css('opacity',0);sb.track.transition(400);},1000);}
s.emit('onScrollbarDragEnd',s);if(s.params.scrollbarSnapOnRelease){s.slideReset();}},draggableEvents:(function(){if((s.params.simulateTouch===false&&!s.support.touch))return s.touchEventsDesktop;else return s.touchEvents;})(),enableDraggable:function(){var sb=s.scrollbar;var target=s.support.touch?sb.track:document;$(sb.track).on(sb.draggableEvents.start,sb.dragStart);$(target).on(sb.draggableEvents.move,sb.dragMove);$(target).on(sb.draggableEvents.end,sb.dragEnd);},disableDraggable:function(){var sb=s.scrollbar;var target=s.support.touch?sb.track:document;$(sb.track).off(sb.draggableEvents.start,sb.dragStart);$(target).off(sb.draggableEvents.move,sb.dragMove);$(target).off(sb.draggableEvents.end,sb.dragEnd);},set:function(){if(!s.params.scrollbar)return;var sb=s.scrollbar;sb.track=$(s.params.scrollbar);if(s.params.uniqueNavElements&&typeof s.params.scrollbar==='string'&&sb.track.length>1&&s.container.find(s.params.scrollbar).length===1){sb.track=s.container.find(s.params.scrollbar);}
sb.drag=sb.track.find('.swiper-scrollbar-drag');if(sb.drag.length===0){sb.drag=$('<div class="swiper-scrollbar-drag"></div>');sb.track.append(sb.drag);}
sb.drag[0].style.width='';sb.drag[0].style.height='';sb.trackSize=s.isHorizontal()?sb.track[0].offsetWidth:sb.track[0].offsetHeight;sb.divider=s.size/s.virtualSize;sb.moveDivider=sb.divider*(sb.trackSize/s.size);sb.dragSize=sb.trackSize*sb.divider;if(s.isHorizontal()){sb.drag[0].style.width=sb.dragSize+'px';}
else{sb.drag[0].style.height=sb.dragSize+'px';}
if(sb.divider>=1){sb.track[0].style.display='none';}
else{sb.track[0].style.display='';}
if(s.params.scrollbarHide){sb.track[0].style.opacity=0;}},setTranslate:function(){if(!s.params.scrollbar)return;var diff;var sb=s.scrollbar;var translate=s.translate||0;var newPos;var newSize=sb.dragSize;newPos=(sb.trackSize-sb.dragSize)*s.progress;if(s.rtl&&s.isHorizontal()){newPos=-newPos;if(newPos>0){newSize=sb.dragSize-newPos;newPos=0;}
else if(-newPos+sb.dragSize>sb.trackSize){newSize=sb.trackSize+newPos;}}
else{if(newPos<0){newSize=sb.dragSize+newPos;newPos=0;}
else if(newPos+sb.dragSize>sb.trackSize){newSize=sb.trackSize-newPos;}}
if(s.isHorizontal()){if(s.support.transforms3d){sb.drag.transform('translate3d('+(newPos)+'px, 0, 0)');}
else{sb.drag.transform('translateX('+(newPos)+'px)');}
sb.drag[0].style.width=newSize+'px';}
else{if(s.support.transforms3d){sb.drag.transform('translate3d(0px, '+(newPos)+'px, 0)');}
else{sb.drag.transform('translateY('+(newPos)+'px)');}
sb.drag[0].style.height=newSize+'px';}
if(s.params.scrollbarHide){clearTimeout(sb.timeout);sb.track[0].style.opacity=1;sb.timeout=setTimeout(function(){sb.track[0].style.opacity=0;sb.track.transition(400);},1000);}},setTransition:function(duration){if(!s.params.scrollbar)return;s.scrollbar.drag.transition(duration);}};s.controller={LinearSpline:function(x,y){var binarySearch=(function(){var maxIndex,minIndex,guess;return function(array,val){minIndex=-1;maxIndex=array.length;while(maxIndex-minIndex>1)
if(array[guess=maxIndex+minIndex>>1]<=val){minIndex=guess;}else{maxIndex=guess;}
return maxIndex;};})();this.x=x;this.y=y;this.lastIndex=x.length-1;var i1,i3;var l=this.x.length;this.interpolate=function(x2){if(!x2)return 0;i3=binarySearch(this.x,x2);i1=i3-1;return((x2-this.x[i1])*(this.y[i3]-this.y[i1]))/(this.x[i3]-this.x[i1])+this.y[i1];};},getInterpolateFunction:function(c){if(!s.controller.spline)s.controller.spline=s.params.loop?new s.controller.LinearSpline(s.slidesGrid,c.slidesGrid):new s.controller.LinearSpline(s.snapGrid,c.snapGrid);},setTranslate:function(translate,byController){var controlled=s.params.control;var multiplier,controlledTranslate;function setControlledTranslate(c){translate=c.rtl&&c.params.direction==='horizontal'?-s.translate:s.translate;if(s.params.controlBy==='slide'){s.controller.getInterpolateFunction(c);controlledTranslate=-s.controller.spline.interpolate(-translate);}
if(!controlledTranslate||s.params.controlBy==='container'){multiplier=(c.maxTranslate()-c.minTranslate())/(s.maxTranslate()-s.minTranslate());controlledTranslate=(translate-s.minTranslate())*multiplier+c.minTranslate();}
if(s.params.controlInverse){controlledTranslate=c.maxTranslate()-controlledTranslate;}
c.updateProgress(controlledTranslate);c.setWrapperTranslate(controlledTranslate,false,s);c.updateActiveIndex();}
if(Array.isArray(controlled)){for(var i=0;i<controlled.length;i++){if(controlled[i]!==byController&&controlled[i]instanceof Swiper){setControlledTranslate(controlled[i]);}}}
else if(controlled instanceof Swiper&&byController!==controlled){setControlledTranslate(controlled);}},setTransition:function(duration,byController){var controlled=s.params.control;var i;function setControlledTransition(c){c.setWrapperTransition(duration,s);if(duration!==0){c.onTransitionStart();c.wrapper.transitionEnd(function(){if(!controlled)return;if(c.params.loop&&s.params.controlBy==='slide'){c.fixLoop();}
c.onTransitionEnd();});}}
if(Array.isArray(controlled)){for(i=0;i<controlled.length;i++){if(controlled[i]!==byController&&controlled[i]instanceof Swiper){setControlledTransition(controlled[i]);}}}
else if(controlled instanceof Swiper&&byController!==controlled){setControlledTransition(controlled);}}};s.hashnav={onHashCange:function(e,a){var newHash=document.location.hash.replace('#','');var activeSlideHash=s.slides.eq(s.activeIndex).attr('data-hash');if(newHash!==activeSlideHash){s.slideTo(s.wrapper.children('.'+s.params.slideClass+'[data-hash="'+(newHash)+'"]').index());}},attachEvents:function(detach){var action=detach?'off':'on';$(window)[action]('hashchange',s.hashnav.onHashCange);},setHash:function(){if(!s.hashnav.initialized||!s.params.hashnav)return;if(s.params.replaceState&&window.history&&window.history.replaceState){window.history.replaceState(null,null,('#'+s.slides.eq(s.activeIndex).attr('data-hash')||''));}else{var slide=s.slides.eq(s.activeIndex);var hash=slide.attr('data-hash')||slide.attr('data-history');document.location.hash=hash||'';}},init:function(){if(!s.params.hashnav||s.params.history)return;s.hashnav.initialized=true;var hash=document.location.hash.replace('#','');if(hash){var speed=0;for(var i=0,length=s.slides.length;i<length;i++){var slide=s.slides.eq(i);var slideHash=slide.attr('data-hash')||slide.attr('data-history');if(slideHash===hash&&!slide.hasClass(s.params.slideDuplicateClass)){var index=slide.index();s.slideTo(index,speed,s.params.runCallbacksOnInit,true);}}}
if(s.params.hashnavWatchState)s.hashnav.attachEvents();},destroy:function(){if(s.params.hashnavWatchState)s.hashnav.attachEvents(true);}};s.history={init:function(){if(!s.params.history)return;if(!window.history||!window.history.pushState){s.params.history=false;s.params.hashnav=true;return;}
s.history.initialized=true;this.paths=this.getPathValues();if(!this.paths.key&&!this.paths.value)return;this.scrollToSlide(0,this.paths.value,s.params.runCallbacksOnInit);if(!s.params.replaceState){window.addEventListener('popstate',this.setHistoryPopState);}},setHistoryPopState:function(){s.history.paths=s.history.getPathValues();s.history.scrollToSlide(s.params.speed,s.history.paths.value,false);},getPathValues:function(){var pathArray=window.location.pathname.slice(1).split('/');var total=pathArray.length;var key=pathArray[total-2];var value=pathArray[total-1];return{key:key,value:value};},setHistory:function(key,index){if(!s.history.initialized||!s.params.history)return;var slide=s.slides.eq(index);var value=this.slugify(slide.attr('data-history'));if(!window.location.pathname.includes(key)){value=key+'/'+value;}
if(s.params.replaceState){window.history.replaceState(null,null,value);}else{window.history.pushState(null,null,value);}},slugify:function(text){return text.toString().toLowerCase().replace(/\s+/g,'-').replace(/[^\w\-]+/g,'').replace(/\-\-+/g,'-').replace(/^-+/,'').replace(/-+$/,'');},scrollToSlide:function(speed,value,runCallbacks){if(value){for(var i=0,length=s.slides.length;i<length;i++){var slide=s.slides.eq(i);var slideHistory=this.slugify(slide.attr('data-history'));if(slideHistory===value&&!slide.hasClass(s.params.slideDuplicateClass)){var index=slide.index();s.slideTo(index,speed,runCallbacks);}}}else{s.slideTo(0,speed,runCallbacks);}}};function handleKeyboard(e){if(e.originalEvent)e=e.originalEvent;var kc=e.keyCode||e.charCode;if(!s.params.allowSwipeToNext&&(s.isHorizontal()&&kc===39||!s.isHorizontal()&&kc===40)){return false;}
if(!s.params.allowSwipeToPrev&&(s.isHorizontal()&&kc===37||!s.isHorizontal()&&kc===38)){return false;}
if(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey){return;}
if(document.activeElement&&document.activeElement.nodeName&&(document.activeElement.nodeName.toLowerCase()==='input'||document.activeElement.nodeName.toLowerCase()==='textarea')){return;}
if(kc===37||kc===39||kc===38||kc===40){var inView=false;if(s.container.parents('.'+s.params.slideClass).length>0&&s.container.parents('.'+s.params.slideActiveClass).length===0){return;}
var windowScroll={left:window.pageXOffset,top:window.pageYOffset};var windowWidth=window.innerWidth;var windowHeight=window.innerHeight;var swiperOffset=s.container.offset();if(s.rtl)swiperOffset.left=swiperOffset.left-s.container[0].scrollLeft;var swiperCoord=[[swiperOffset.left,swiperOffset.top],[swiperOffset.left+s.width,swiperOffset.top],[swiperOffset.left,swiperOffset.top+s.height],[swiperOffset.left+s.width,swiperOffset.top+s.height]];for(var i=0;i<swiperCoord.length;i++){var point=swiperCoord[i];if(point[0]>=windowScroll.left&&point[0]<=windowScroll.left+windowWidth&&point[1]>=windowScroll.top&&point[1]<=windowScroll.top+windowHeight){inView=true;}}
if(!inView)return;}
if(s.isHorizontal()){if(kc===37||kc===39){if(e.preventDefault)e.preventDefault();else e.returnValue=false;}
if((kc===39&&!s.rtl)||(kc===37&&s.rtl))s.slideNext();if((kc===37&&!s.rtl)||(kc===39&&s.rtl))s.slidePrev();}
else{if(kc===38||kc===40){if(e.preventDefault)e.preventDefault();else e.returnValue=false;}
if(kc===40)s.slideNext();if(kc===38)s.slidePrev();}
s.emit('onKeyPress',s,kc);}
s.disableKeyboardControl=function(){s.params.keyboardControl=false;$(document).off('keydown',handleKeyboard);};s.enableKeyboardControl=function(){s.params.keyboardControl=true;$(document).on('keydown',handleKeyboard);};s.mousewheel={event:false,lastScrollTime:(new window.Date()).getTime()};function isEventSupported(){var eventName='onwheel';var isSupported=eventName in document;if(!isSupported){var element=document.createElement('div');element.setAttribute(eventName,'return;');isSupported=typeof element[eventName]==='function';}
if(!isSupported&&document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature('','')!==true){isSupported=document.implementation.hasFeature('Events.wheel','3.0');}
return isSupported;}
function normalizeWheel(event){var PIXEL_STEP=10;var LINE_HEIGHT=40;var PAGE_HEIGHT=800;var sX=0,sY=0,pX=0,pY=0;if('detail'in event){sY=event.detail;}
if('wheelDelta'in event){sY=-event.wheelDelta/120;}
if('wheelDeltaY'in event){sY=-event.wheelDeltaY/120;}
if('wheelDeltaX'in event){sX=-event.wheelDeltaX/120;}
if('axis'in event&&event.axis===event.HORIZONTAL_AXIS){sX=sY;sY=0;}
pX=sX*PIXEL_STEP;pY=sY*PIXEL_STEP;if('deltaY'in event){pY=event.deltaY;}
if('deltaX'in event){pX=event.deltaX;}
if((pX||pY)&&event.deltaMode){if(event.deltaMode===1){pX*=LINE_HEIGHT;pY*=LINE_HEIGHT;}else{pX*=PAGE_HEIGHT;pY*=PAGE_HEIGHT;}}
if(pX&&!sX){sX=(pX<1)?-1:1;}
if(pY&&!sY){sY=(pY<1)?-1:1;}
return{spinX:sX,spinY:sY,pixelX:pX,pixelY:pY};}
if(s.params.mousewheelControl){s.mousewheel.event=(navigator.userAgent.indexOf('firefox')>-1)?'DOMMouseScroll':isEventSupported()?'wheel':'mousewheel';}
function handleMousewheel(e){if(e.originalEvent)e=e.originalEvent;var delta=0;var rtlFactor=s.rtl?-1:1;var data=normalizeWheel(e);if(s.params.mousewheelForceToAxis){if(s.isHorizontal()){if(Math.abs(data.pixelX)>Math.abs(data.pixelY))delta=data.pixelX*rtlFactor;else return;}
else{if(Math.abs(data.pixelY)>Math.abs(data.pixelX))delta=data.pixelY;else return;}}
else{delta=Math.abs(data.pixelX)>Math.abs(data.pixelY)?-data.pixelX*rtlFactor:-data.pixelY;}
if(delta===0)return;if(s.params.mousewheelInvert)delta=-delta;if(!s.params.freeMode){if((new window.Date()).getTime()-s.mousewheel.lastScrollTime>60){if(delta<0){if((!s.isEnd||s.params.loop)&&!s.animating){s.slideNext();s.emit('onScroll',s,e);}
else if(s.params.mousewheelReleaseOnEdges)return true;}
else{if((!s.isBeginning||s.params.loop)&&!s.animating){s.slidePrev();s.emit('onScroll',s,e);}
else if(s.params.mousewheelReleaseOnEdges)return true;}}
s.mousewheel.lastScrollTime=(new window.Date()).getTime();}
else{var position=s.getWrapperTranslate()+delta*s.params.mousewheelSensitivity;var wasBeginning=s.isBeginning,wasEnd=s.isEnd;if(position>=s.minTranslate())position=s.minTranslate();if(position<=s.maxTranslate())position=s.maxTranslate();s.setWrapperTransition(0);s.setWrapperTranslate(position);s.updateProgress();s.updateActiveIndex();if(!wasBeginning&&s.isBeginning||!wasEnd&&s.isEnd){s.updateClasses();}
if(s.params.freeModeSticky){clearTimeout(s.mousewheel.timeout);s.mousewheel.timeout=setTimeout(function(){s.slideReset();},300);}
else{if(s.params.lazyLoading&&s.lazy){s.lazy.load();}}
s.emit('onScroll',s,e);if(s.params.autoplay&&s.params.autoplayDisableOnInteraction)s.stopAutoplay();if(position===0||position===s.maxTranslate())return;}
if(e.preventDefault)e.preventDefault();else e.returnValue=false;return false;}
s.disableMousewheelControl=function(){if(!s.mousewheel.event)return false;var target=s.container;if(s.params.mousewheelEventsTarged!=='container'){target=$(s.params.mousewheelEventsTarged);}
target.off(s.mousewheel.event,handleMousewheel);s.params.mousewheelControl=false;return true;};s.enableMousewheelControl=function(){if(!s.mousewheel.event)return false;var target=s.container;if(s.params.mousewheelEventsTarged!=='container'){target=$(s.params.mousewheelEventsTarged);}
target.on(s.mousewheel.event,handleMousewheel);s.params.mousewheelControl=true;return true;};function setParallaxTransform(el,progress){el=$(el);var p,pX,pY;var rtlFactor=s.rtl?-1:1;p=el.attr('data-swiper-parallax')||'0';pX=el.attr('data-swiper-parallax-x');pY=el.attr('data-swiper-parallax-y');if(pX||pY){pX=pX||'0';pY=pY||'0';}
else{if(s.isHorizontal()){pX=p;pY='0';}
else{pY=p;pX='0';}}
if((pX).indexOf('%')>=0){pX=parseInt(pX,10)*progress*rtlFactor+'%';}
else{pX=pX*progress*rtlFactor+'px';}
if((pY).indexOf('%')>=0){pY=parseInt(pY,10)*progress+'%';}
else{pY=pY*progress+'px';}
el.transform('translate3d('+pX+', '+pY+',0px)');}
s.parallax={setTranslate:function(){s.container.children('[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]').each(function(){setParallaxTransform(this,s.progress);});s.slides.each(function(){var slide=$(this);slide.find('[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]').each(function(){var progress=Math.min(Math.max(slide[0].progress,-1),1);setParallaxTransform(this,progress);});});},setTransition:function(duration){if(typeof duration==='undefined')duration=s.params.speed;s.container.find('[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]').each(function(){var el=$(this);var parallaxDuration=parseInt(el.attr('data-swiper-parallax-duration'),10)||duration;if(duration===0)parallaxDuration=0;el.transition(parallaxDuration);});}};s.zoom={scale:1,currentScale:1,isScaling:false,gesture:{slide:undefined,slideWidth:undefined,slideHeight:undefined,image:undefined,imageWrap:undefined,zoomMax:s.params.zoomMax},image:{isTouched:undefined,isMoved:undefined,currentX:undefined,currentY:undefined,minX:undefined,minY:undefined,maxX:undefined,maxY:undefined,width:undefined,height:undefined,startX:undefined,startY:undefined,touchesStart:{},touchesCurrent:{}},velocity:{x:undefined,y:undefined,prevPositionX:undefined,prevPositionY:undefined,prevTime:undefined},getDistanceBetweenTouches:function(e){if(e.targetTouches.length<2)return 1;var x1=e.targetTouches[0].pageX,y1=e.targetTouches[0].pageY,x2=e.targetTouches[1].pageX,y2=e.targetTouches[1].pageY;var distance=Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2));return distance;},onGestureStart:function(e){var z=s.zoom;if(!s.support.gestures){if(e.type!=='touchstart'||e.type==='touchstart'&&e.targetTouches.length<2){return;}
z.gesture.scaleStart=z.getDistanceBetweenTouches(e);}
if(!z.gesture.slide||!z.gesture.slide.length){z.gesture.slide=$(this);if(z.gesture.slide.length===0)z.gesture.slide=s.slides.eq(s.activeIndex);z.gesture.image=z.gesture.slide.find('img, svg, canvas');z.gesture.imageWrap=z.gesture.image.parent('.'+s.params.zoomContainerClass);z.gesture.zoomMax=z.gesture.imageWrap.attr('data-swiper-zoom')||s.params.zoomMax;if(z.gesture.imageWrap.length===0){z.gesture.image=undefined;return;}}
z.gesture.image.transition(0);z.isScaling=true;},onGestureChange:function(e){var z=s.zoom;if(!s.support.gestures){if(e.type!=='touchmove'||e.type==='touchmove'&&e.targetTouches.length<2){return;}
z.gesture.scaleMove=z.getDistanceBetweenTouches(e);}
if(!z.gesture.image||z.gesture.image.length===0)return;if(s.support.gestures){z.scale=e.scale*z.currentScale;}
else{z.scale=(z.gesture.scaleMove/z.gesture.scaleStart)*z.currentScale;}
if(z.scale>z.gesture.zoomMax){z.scale=z.gesture.zoomMax-1+Math.pow((z.scale-z.gesture.zoomMax+1),0.5);}
if(z.scale<s.params.zoomMin){z.scale=s.params.zoomMin+1-Math.pow((s.params.zoomMin-z.scale+1),0.5);}
z.gesture.image.transform('translate3d(0,0,0) scale('+z.scale+')');},onGestureEnd:function(e){var z=s.zoom;if(!s.support.gestures){if(e.type!=='touchend'||e.type==='touchend'&&e.changedTouches.length<2){return;}}
if(!z.gesture.image||z.gesture.image.length===0)return;z.scale=Math.max(Math.min(z.scale,z.gesture.zoomMax),s.params.zoomMin);z.gesture.image.transition(s.params.speed).transform('translate3d(0,0,0) scale('+z.scale+')');z.currentScale=z.scale;z.isScaling=false;if(z.scale===1)z.gesture.slide=undefined;},onTouchStart:function(s,e){var z=s.zoom;if(!z.gesture.image||z.gesture.image.length===0)return;if(z.image.isTouched)return;if(s.device.os==='android')e.preventDefault();z.image.isTouched=true;z.image.touchesStart.x=e.type==='touchstart'?e.targetTouches[0].pageX:e.pageX;z.image.touchesStart.y=e.type==='touchstart'?e.targetTouches[0].pageY:e.pageY;},onTouchMove:function(e){var z=s.zoom;if(!z.gesture.image||z.gesture.image.length===0)return;s.allowClick=false;if(!z.image.isTouched||!z.gesture.slide)return;if(!z.image.isMoved){z.image.width=z.gesture.image[0].offsetWidth;z.image.height=z.gesture.image[0].offsetHeight;z.image.startX=s.getTranslate(z.gesture.imageWrap[0],'x')||0;z.image.startY=s.getTranslate(z.gesture.imageWrap[0],'y')||0;z.gesture.slideWidth=z.gesture.slide[0].offsetWidth;z.gesture.slideHeight=z.gesture.slide[0].offsetHeight;z.gesture.imageWrap.transition(0);if(s.rtl)z.image.startX=-z.image.startX;if(s.rtl)z.image.startY=-z.image.startY;}
var scaledWidth=z.image.width*z.scale;var scaledHeight=z.image.height*z.scale;if(scaledWidth<z.gesture.slideWidth&&scaledHeight<z.gesture.slideHeight)return;z.image.minX=Math.min((z.gesture.slideWidth/2-scaledWidth/2),0);z.image.maxX=-z.image.minX;z.image.minY=Math.min((z.gesture.slideHeight/2-scaledHeight/2),0);z.image.maxY=-z.image.minY;z.image.touchesCurrent.x=e.type==='touchmove'?e.targetTouches[0].pageX:e.pageX;z.image.touchesCurrent.y=e.type==='touchmove'?e.targetTouches[0].pageY:e.pageY;if(!z.image.isMoved&&!z.isScaling){if(s.isHorizontal()&&(Math.floor(z.image.minX)===Math.floor(z.image.startX)&&z.image.touchesCurrent.x<z.image.touchesStart.x)||(Math.floor(z.image.maxX)===Math.floor(z.image.startX)&&z.image.touchesCurrent.x>z.image.touchesStart.x)){z.image.isTouched=false;return;}
else if(!s.isHorizontal()&&(Math.floor(z.image.minY)===Math.floor(z.image.startY)&&z.image.touchesCurrent.y<z.image.touchesStart.y)||(Math.floor(z.image.maxY)===Math.floor(z.image.startY)&&z.image.touchesCurrent.y>z.image.touchesStart.y)){z.image.isTouched=false;return;}}
e.preventDefault();e.stopPropagation();z.image.isMoved=true;z.image.currentX=z.image.touchesCurrent.x-z.image.touchesStart.x+z.image.startX;z.image.currentY=z.image.touchesCurrent.y-z.image.touchesStart.y+z.image.startY;if(z.image.currentX<z.image.minX){z.image.currentX=z.image.minX+1-Math.pow((z.image.minX-z.image.currentX+1),0.8);}
if(z.image.currentX>z.image.maxX){z.image.currentX=z.image.maxX-1+Math.pow((z.image.currentX-z.image.maxX+1),0.8);}
if(z.image.currentY<z.image.minY){z.image.currentY=z.image.minY+1-Math.pow((z.image.minY-z.image.currentY+1),0.8);}
if(z.image.currentY>z.image.maxY){z.image.currentY=z.image.maxY-1+Math.pow((z.image.currentY-z.image.maxY+1),0.8);}
if(!z.velocity.prevPositionX)z.velocity.prevPositionX=z.image.touchesCurrent.x;if(!z.velocity.prevPositionY)z.velocity.prevPositionY=z.image.touchesCurrent.y;if(!z.velocity.prevTime)z.velocity.prevTime=Date.now();z.velocity.x=(z.image.touchesCurrent.x-z.velocity.prevPositionX)/(Date.now()-z.velocity.prevTime)/2;z.velocity.y=(z.image.touchesCurrent.y-z.velocity.prevPositionY)/(Date.now()-z.velocity.prevTime)/2;if(Math.abs(z.image.touchesCurrent.x-z.velocity.prevPositionX)<2)z.velocity.x=0;if(Math.abs(z.image.touchesCurrent.y-z.velocity.prevPositionY)<2)z.velocity.y=0;z.velocity.prevPositionX=z.image.touchesCurrent.x;z.velocity.prevPositionY=z.image.touchesCurrent.y;z.velocity.prevTime=Date.now();z.gesture.imageWrap.transform('translate3d('+z.image.currentX+'px, '+z.image.currentY+'px,0)');},onTouchEnd:function(s,e){var z=s.zoom;if(!z.gesture.image||z.gesture.image.length===0)return;if(!z.image.isTouched||!z.image.isMoved){z.image.isTouched=false;z.image.isMoved=false;return;}
z.image.isTouched=false;z.image.isMoved=false;var momentumDurationX=300;var momentumDurationY=300;var momentumDistanceX=z.velocity.x*momentumDurationX;var newPositionX=z.image.currentX+momentumDistanceX;var momentumDistanceY=z.velocity.y*momentumDurationY;var newPositionY=z.image.currentY+momentumDistanceY;if(z.velocity.x!==0)momentumDurationX=Math.abs((newPositionX-z.image.currentX)/z.velocity.x);if(z.velocity.y!==0)momentumDurationY=Math.abs((newPositionY-z.image.currentY)/z.velocity.y);var momentumDuration=Math.max(momentumDurationX,momentumDurationY);z.image.currentX=newPositionX;z.image.currentY=newPositionY;var scaledWidth=z.image.width*z.scale;var scaledHeight=z.image.height*z.scale;z.image.minX=Math.min((z.gesture.slideWidth/2-scaledWidth/2),0);z.image.maxX=-z.image.minX;z.image.minY=Math.min((z.gesture.slideHeight/2-scaledHeight/2),0);z.image.maxY=-z.image.minY;z.image.currentX=Math.max(Math.min(z.image.currentX,z.image.maxX),z.image.minX);z.image.currentY=Math.max(Math.min(z.image.currentY,z.image.maxY),z.image.minY);z.gesture.imageWrap.transition(momentumDuration).transform('translate3d('+z.image.currentX+'px, '+z.image.currentY+'px,0)');},onTransitionEnd:function(s){var z=s.zoom;if(z.gesture.slide&&s.previousIndex!==s.activeIndex){z.gesture.image.transform('translate3d(0,0,0) scale(1)');z.gesture.imageWrap.transform('translate3d(0,0,0)');z.gesture.slide=z.gesture.image=z.gesture.imageWrap=undefined;z.scale=z.currentScale=1;}},toggleZoom:function(s,e){var z=s.zoom;if(!z.gesture.slide){z.gesture.slide=s.clickedSlide?$(s.clickedSlide):s.slides.eq(s.activeIndex);z.gesture.image=z.gesture.slide.find('img, svg, canvas');z.gesture.imageWrap=z.gesture.image.parent('.'+s.params.zoomContainerClass);}
if(!z.gesture.image||z.gesture.image.length===0)return;var touchX,touchY,offsetX,offsetY,diffX,diffY,translateX,translateY,imageWidth,imageHeight,scaledWidth,scaledHeight,translateMinX,translateMinY,translateMaxX,translateMaxY,slideWidth,slideHeight;if(typeof z.image.touchesStart.x==='undefined'&&e){touchX=e.type==='touchend'?e.changedTouches[0].pageX:e.pageX;touchY=e.type==='touchend'?e.changedTouches[0].pageY:e.pageY;}
else{touchX=z.image.touchesStart.x;touchY=z.image.touchesStart.y;}
if(z.scale&&z.scale!==1){z.scale=z.currentScale=1;z.gesture.imageWrap.transition(300).transform('translate3d(0,0,0)');z.gesture.image.transition(300).transform('translate3d(0,0,0) scale(1)');z.gesture.slide=undefined;}
else{z.scale=z.currentScale=z.gesture.imageWrap.attr('data-swiper-zoom')||s.params.zoomMax;if(e){slideWidth=z.gesture.slide[0].offsetWidth;slideHeight=z.gesture.slide[0].offsetHeight;offsetX=z.gesture.slide.offset().left;offsetY=z.gesture.slide.offset().top;diffX=offsetX+slideWidth/2-touchX;diffY=offsetY+slideHeight/2-touchY;imageWidth=z.gesture.image[0].offsetWidth;imageHeight=z.gesture.image[0].offsetHeight;scaledWidth=imageWidth*z.scale;scaledHeight=imageHeight*z.scale;translateMinX=Math.min((slideWidth/2-scaledWidth/2),0);translateMinY=Math.min((slideHeight/2-scaledHeight/2),0);translateMaxX=-translateMinX;translateMaxY=-translateMinY;translateX=diffX*z.scale;translateY=diffY*z.scale;if(translateX<translateMinX){translateX=translateMinX;}
if(translateX>translateMaxX){translateX=translateMaxX;}
if(translateY<translateMinY){translateY=translateMinY;}
if(translateY>translateMaxY){translateY=translateMaxY;}}
else{translateX=0;translateY=0;}
z.gesture.imageWrap.transition(300).transform('translate3d('+translateX+'px, '+translateY+'px,0)');z.gesture.image.transition(300).transform('translate3d(0,0,0) scale('+z.scale+')');}},attachEvents:function(detach){var action=detach?'off':'on';if(s.params.zoom){var target=s.slides;var passiveListener=s.touchEvents.start==='touchstart'&&s.support.passiveListener&&s.params.passiveListeners?{passive:true,capture:false}:false;if(s.support.gestures){s.slides[action]('gesturestart',s.zoom.onGestureStart,passiveListener);s.slides[action]('gesturechange',s.zoom.onGestureChange,passiveListener);s.slides[action]('gestureend',s.zoom.onGestureEnd,passiveListener);}
else if(s.touchEvents.start==='touchstart'){s.slides[action](s.touchEvents.start,s.zoom.onGestureStart,passiveListener);s.slides[action](s.touchEvents.move,s.zoom.onGestureChange,passiveListener);s.slides[action](s.touchEvents.end,s.zoom.onGestureEnd,passiveListener);}
s[action]('touchStart',s.zoom.onTouchStart);s.slides.each(function(index,slide){if($(slide).find('.'+s.params.zoomContainerClass).length>0){$(slide)[action](s.touchEvents.move,s.zoom.onTouchMove);}});s[action]('touchEnd',s.zoom.onTouchEnd);s[action]('transitionEnd',s.zoom.onTransitionEnd);if(s.params.zoomToggle){s.on('doubleTap',s.zoom.toggleZoom);}}},init:function(){s.zoom.attachEvents();},destroy:function(){s.zoom.attachEvents(true);}};s._plugins=[];for(var plugin in s.plugins){var p=s.plugins[plugin](s,s.params[plugin]);if(p)s._plugins.push(p);}
s.callPlugins=function(eventName){for(var i=0;i<s._plugins.length;i++){if(eventName in s._plugins[i]){s._plugins[i][eventName](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);}}};function normalizeEventName(eventName){if(eventName.indexOf('on')!==0){if(eventName[0]!==eventName[0].toUpperCase()){eventName='on'+eventName[0].toUpperCase()+eventName.substring(1);}
else{eventName='on'+eventName;}}
return eventName;}
s.emitterEventListeners={};s.emit=function(eventName){if(s.params[eventName]){s.params[eventName](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);}
var i;if(s.emitterEventListeners[eventName]){for(i=0;i<s.emitterEventListeners[eventName].length;i++){s.emitterEventListeners[eventName][i](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);}}
if(s.callPlugins)s.callPlugins(eventName,arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);};s.on=function(eventName,handler){eventName=normalizeEventName(eventName);if(!s.emitterEventListeners[eventName])s.emitterEventListeners[eventName]=[];s.emitterEventListeners[eventName].push(handler);return s;};s.off=function(eventName,handler){var i;eventName=normalizeEventName(eventName);if(typeof handler==='undefined'){s.emitterEventListeners[eventName]=[];return s;}
if(!s.emitterEventListeners[eventName]||s.emitterEventListeners[eventName].length===0)return;for(i=0;i<s.emitterEventListeners[eventName].length;i++){if(s.emitterEventListeners[eventName][i]===handler)s.emitterEventListeners[eventName].splice(i,1);}
return s;};s.once=function(eventName,handler){eventName=normalizeEventName(eventName);var _handler=function(){handler(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);s.off(eventName,_handler);};s.on(eventName,_handler);return s;};s.a11y={makeFocusable:function($el){$el.attr('tabIndex','0');return $el;},addRole:function($el,role){$el.attr('role',role);return $el;},addLabel:function($el,label){$el.attr('aria-label',label);return $el;},disable:function($el){$el.attr('aria-disabled',true);return $el;},enable:function($el){$el.attr('aria-disabled',false);return $el;},onEnterKey:function(event){if(event.keyCode!==13)return;if($(event.target).is(s.params.nextButton)){s.onClickNext(event);if(s.isEnd){s.a11y.notify(s.params.lastSlideMessage);}
else{s.a11y.notify(s.params.nextSlideMessage);}}
else if($(event.target).is(s.params.prevButton)){s.onClickPrev(event);if(s.isBeginning){s.a11y.notify(s.params.firstSlideMessage);}
else{s.a11y.notify(s.params.prevSlideMessage);}}
if($(event.target).is('.'+s.params.bulletClass)){$(event.target)[0].click();}},liveRegion:$('<span class="'+s.params.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>'),notify:function(message){var notification=s.a11y.liveRegion;if(notification.length===0)return;notification.html('');notification.html(message);},init:function(){if(s.params.nextButton&&s.nextButton&&s.nextButton.length>0){s.a11y.makeFocusable(s.nextButton);s.a11y.addRole(s.nextButton,'button');s.a11y.addLabel(s.nextButton,s.params.nextSlideMessage);}
if(s.params.prevButton&&s.prevButton&&s.prevButton.length>0){s.a11y.makeFocusable(s.prevButton);s.a11y.addRole(s.prevButton,'button');s.a11y.addLabel(s.prevButton,s.params.prevSlideMessage);}
$(s.container).append(s.a11y.liveRegion);},initPagination:function(){if(s.params.pagination&&s.params.paginationClickable&&s.bullets&&s.bullets.length){s.bullets.each(function(){var bullet=$(this);s.a11y.makeFocusable(bullet);s.a11y.addRole(bullet,'button');s.a11y.addLabel(bullet,s.params.paginationBulletMessage.replace(/{{index}}/,bullet.index()+1));});}},destroy:function(){if(s.a11y.liveRegion&&s.a11y.liveRegion.length>0)s.a11y.liveRegion.remove();}};s.init=function(){if(s.params.loop)s.createLoop();s.updateContainerSize();s.updateSlidesSize();s.updatePagination();if(s.params.scrollbar&&s.scrollbar){s.scrollbar.set();if(s.params.scrollbarDraggable){s.scrollbar.enableDraggable();}}
if(s.params.effect!=='slide'&&s.effects[s.params.effect]){if(!s.params.loop)s.updateProgress();s.effects[s.params.effect].setTranslate();}
if(s.params.loop){s.slideTo(s.params.initialSlide+s.loopedSlides,0,s.params.runCallbacksOnInit);}
else{s.slideTo(s.params.initialSlide,0,s.params.runCallbacksOnInit);if(s.params.initialSlide===0){if(s.parallax&&s.params.parallax)s.parallax.setTranslate();if(s.lazy&&s.params.lazyLoading){s.lazy.load();s.lazy.initialImageLoaded=true;}}}
s.attachEvents();if(s.params.observer&&s.support.observer){s.initObservers();}
if(s.params.preloadImages&&!s.params.lazyLoading){s.preloadImages();}
if(s.params.zoom&&s.zoom){s.zoom.init();}
if(s.params.autoplay){s.startAutoplay();}
if(s.params.keyboardControl){if(s.enableKeyboardControl)s.enableKeyboardControl();}
if(s.params.mousewheelControl){if(s.enableMousewheelControl)s.enableMousewheelControl();}
if(s.params.hashnavReplaceState){s.params.replaceState=s.params.hashnavReplaceState;}
if(s.params.history){if(s.history)s.history.init();}
if(s.params.hashnav){if(s.hashnav)s.hashnav.init();}
if(s.params.a11y&&s.a11y)s.a11y.init();s.emit('onInit',s);};s.cleanupStyles=function(){s.container.removeClass(s.classNames.join(' ')).removeAttr('style');s.wrapper.removeAttr('style');if(s.slides&&s.slides.length){s.slides.removeClass([s.params.slideVisibleClass,s.params.slideActiveClass,s.params.slideNextClass,s.params.slidePrevClass].join(' ')).removeAttr('style').removeAttr('data-swiper-column').removeAttr('data-swiper-row');}
if(s.paginationContainer&&s.paginationContainer.length){s.paginationContainer.removeClass(s.params.paginationHiddenClass);}
if(s.bullets&&s.bullets.length){s.bullets.removeClass(s.params.bulletActiveClass);}
if(s.params.prevButton)$(s.params.prevButton).removeClass(s.params.buttonDisabledClass);if(s.params.nextButton)$(s.params.nextButton).removeClass(s.params.buttonDisabledClass);if(s.params.scrollbar&&s.scrollbar){if(s.scrollbar.track&&s.scrollbar.track.length)s.scrollbar.track.removeAttr('style');if(s.scrollbar.drag&&s.scrollbar.drag.length)s.scrollbar.drag.removeAttr('style');}};s.destroy=function(deleteInstance,cleanupStyles){s.detachEvents();s.stopAutoplay();if(s.params.scrollbar&&s.scrollbar){if(s.params.scrollbarDraggable){s.scrollbar.disableDraggable();}}
if(s.params.loop){s.destroyLoop();}
if(cleanupStyles){s.cleanupStyles();}
s.disconnectObservers();if(s.params.zoom&&s.zoom){s.zoom.destroy();}
if(s.params.keyboardControl){if(s.disableKeyboardControl)s.disableKeyboardControl();}
if(s.params.mousewheelControl){if(s.disableMousewheelControl)s.disableMousewheelControl();}
if(s.params.a11y&&s.a11y)s.a11y.destroy();if(s.params.history&&!s.params.replaceState){window.removeEventListener('popstate',s.history.setHistoryPopState);}
if(s.params.hashnav&&s.hashnav){s.hashnav.destroy();}
s.emit('onDestroy');if(deleteInstance!==false)s=null;};s.init();return s;};Swiper.prototype={isSafari:(function(){var ua=window.navigator.userAgent.toLowerCase();return(ua.indexOf('safari')>=0&&ua.indexOf('chrome')<0&&ua.indexOf('android')<0);})(),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(window.navigator.userAgent),isArray:function(arr){return Object.prototype.toString.apply(arr)==='[object Array]';},browser:{ie:window.navigator.pointerEnabled||window.navigator.msPointerEnabled,ieTouch:(window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>1)||(window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>1),lteIE9:(function(){var div=document.createElement('div');div.innerHTML='<!--[if lte IE 9]><i></i><![endif]-->';return div.getElementsByTagName('i').length===1;})()},device:(function(){var ua=window.navigator.userAgent;var android=ua.match(/(Android);?[\s\/]+([\d.]+)?/);var ipad=ua.match(/(iPad).*OS\s([\d_]+)/);var ipod=ua.match(/(iPod)(.*OS\s([\d_]+))?/);var iphone=!ipad&&ua.match(/(iPhone\sOS|iOS)\s([\d_]+)/);return{ios:ipad||iphone||ipod,android:android};})(),support:{touch:(window.Modernizr&&Modernizr.touch===true)||(function(){return!!(('ontouchstart'in window)||window.DocumentTouch&&document instanceof DocumentTouch);})(),transforms3d:(window.Modernizr&&Modernizr.csstransforms3d===true)||(function(){var div=document.createElement('div').style;return('webkitPerspective'in div||'MozPerspective'in div||'OPerspective'in div||'MsPerspective'in div||'perspective'in div);})(),flexbox:(function(){var div=document.createElement('div').style;var styles=('alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient').split(' ');for(var i=0;i<styles.length;i++){if(styles[i]in div)return true;}})(),observer:(function(){return('MutationObserver'in window||'WebkitMutationObserver'in window);})(),passiveListener:(function(){var supportsPassive=false;try{var opts=Object.defineProperty({},'passive',{get:function(){supportsPassive=true;}});window.addEventListener('testPassiveListener',null,opts);}catch(e){}
return supportsPassive;})(),gestures:(function(){return'ongesturestart'in window;})()},plugins:{}};var swiperDomPlugins=['jQuery','Zepto','Dom7'];for(var i=0;i<swiperDomPlugins.length;i++){if(window[swiperDomPlugins[i]]){addLibraryPlugin(window[swiperDomPlugins[i]]);}}
var domLib;if(typeof Dom7==='undefined'){domLib=window.Dom7||window.Zepto||window.jQuery;}
else{domLib=Dom7;}
function addLibraryPlugin(lib){lib.fn.swiper=function(params){var firstInstance;lib(this).each(function(){var s=new Swiper(this,params);if(!firstInstance)firstInstance=s;});return firstInstance;};}
if(domLib){if(!('transitionEnd'in domLib.fn)){domLib.fn.transitionEnd=function(callback){var events=['webkitTransitionEnd','transitionend','oTransitionEnd','MSTransitionEnd','msTransitionEnd'],i,j,dom=this;function fireCallBack(e){if(e.target!==this)return;callback.call(this,e);for(i=0;i<events.length;i++){dom.off(events[i],fireCallBack);}}
if(callback){for(i=0;i<events.length;i++){dom.on(events[i],fireCallBack);}}
return this;};}
if(!('transform'in domLib.fn)){domLib.fn.transform=function(transform){for(var i=0;i<this.length;i++){var elStyle=this[i].style;elStyle.webkitTransform=elStyle.MsTransform=elStyle.msTransform=elStyle.MozTransform=elStyle.OTransform=elStyle.transform=transform;}
return this;};}
if(!('transition'in domLib.fn)){domLib.fn.transition=function(duration){if(typeof duration!=='string'){duration=duration+'ms';}
for(var i=0;i<this.length;i++){var elStyle=this[i].style;elStyle.webkitTransitionDuration=elStyle.MsTransitionDuration=elStyle.msTransitionDuration=elStyle.MozTransitionDuration=elStyle.OTransitionDuration=elStyle.transitionDuration=duration;}
return this;};}
if(!('outerWidth'in domLib.fn)){domLib.fn.outerWidth=function(includeMargins){if(this.length>0){if(includeMargins)
return this[0].offsetWidth+parseFloat(this.css('margin-right'))+parseFloat(this.css('margin-left'));else
return this[0].offsetWidth;}
else return null;};}}
window.Swiper=Swiper;})();if(typeof(module)!=='undefined')
{module.exports=window.Swiper;}
else if(typeof define==='function'&&define.amd){define([],function(){'use strict';return window.Swiper;});}
(function(window,site,$,undefined){var slider=$({});site.slider=slider;var defaultOptions={paginationClickable:true,watchSlidesVisibility:true,watchSlidesProgress:true,normalizeSlideIndex:true,autoplayDisableOnInteraction:false,preventClicks:false,preventClicksPropagation:false};site.slider.create=function(elementId,options,initButtons){initButtons=typeof initButtons!="undefined"?initButtons:true;options=options||{};site.slider[elementId]=new Swiper('#'+elementId,$.extend({},defaultOptions,{nextButton:initButtons?'.'+elementId+'-next':null,prevButton:initButtons?'.'+elementId+'-prev':null,pagination:'.'+elementId+'-pagination'},options));};site.slider.get=function(elementId){var result=false;if(site.slider.hasOwnProperty(elementId)){result=site.slider[elementId];}
return result;};$(function(){if(!$('#mainBomb').length){return;}
site.slider.create('relatedProducts',{slidesPerView:7,spaceBetween:0,slidesPerGroup:7});site.slider.create('mainBomb',{slidesPerView:1,spaceBetween:0,autoplay:3000,effect:'fade'},false);var canChange=true;site.slider.mainBomb.on('onSlideChangeStart',function(){canChange=false;});site.slider.mainBomb.on('onSlideChangeEnd',function(){canChange=true;});$('body').on('click','.mainBomb-next',function(){if(canChange){if(site.slider.mainBomb.realIndex>=site.slider.mainBomb.slides.length-1){site.slider.mainBomb.slideTo(0);}else{site.slider.mainBomb.slideNext();}}});$('body').on('click','.mainBomb-prev',function(){if(canChange){if(site.slider.mainBomb.realIndex===0){site.slider.mainBomb.slideTo(site.slider.mainBomb.slides.length);}else{site.slider.mainBomb.slidePrev();}}});});})(window,window.site,window.jQuery);;(function($){var tmp,loading,overlay,wrap,outer,content,close,title,nav_left,nav_right,selectedIndex=0,selectedOpts={},selectedArray=[],currentIndex=0,currentOpts={},currentArray=[],ajaxLoader=null,imgPreloader=new Image(),imgRegExp=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,swfRegExp=/[^\.]\.(swf)\s*$/i,loadingTimer,loadingFrame=1,titleHeight=0,titleStr='',start_pos,final_pos,busy=false,fx=$.extend($('<div/>')[0],{prop:0}),isIE6=$.browser.msie&&$.browser.version<7&&!window.XMLHttpRequest,_abort=function(){loading.hide();imgPreloader.onerror=imgPreloader.onload=null;if(ajaxLoader){ajaxLoader.abort();}
tmp.empty();},_error=function(){if(false===selectedOpts.onError(selectedArray,selectedIndex,selectedOpts)){loading.hide();busy=false;return;}
selectedOpts.titleShow=false;selectedOpts.width='auto';selectedOpts.height='auto';tmp.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>');_process_inline();},_start=function(){var obj=selectedArray[selectedIndex],href,type,title,str,emb,ret;_abort();selectedOpts=$.extend({},$.fn.fancybox.defaults,(typeof $(obj).data('fancybox')=='undefined'?selectedOpts:$(obj).data('fancybox')));ret=selectedOpts.onStart(selectedArray,selectedIndex,selectedOpts);if(ret===false){busy=false;return;}else if(typeof ret=='object'){selectedOpts=$.extend(selectedOpts,ret);}
title=selectedOpts.title||(obj.nodeName?$(obj).attr('title'):obj.title)||'';if(obj.nodeName&&!selectedOpts.orig){selectedOpts.orig=$(obj).children("img:first").length?$(obj).children("img:first"):$(obj);}
if(title===''&&selectedOpts.orig&&selectedOpts.titleFromAlt){title=selectedOpts.orig.attr('alt');}
href=selectedOpts.href||(obj.nodeName?$(obj).attr('href'):obj.href)||null;if((/^(?:javascript)/i).test(href)||href=='#'){href=null;}
if(selectedOpts.type){type=selectedOpts.type;if(!href){href=selectedOpts.content;}}else if(selectedOpts.content){type='html';}else if(href){if(href.match(imgRegExp)){type='image';}else if(href.match(swfRegExp)){type='swf';}else if($(obj).hasClass("iframe")){type='iframe';}else if(href.indexOf("#")===0){type='inline';}else{type='ajax';}}
if(!type){_error();return;}
if(type=='inline'){obj=href.substr(href.indexOf("#"));type=$(obj).length>0?'inline':'ajax';}
selectedOpts.type=type;selectedOpts.href=href;selectedOpts.title=title;if(selectedOpts.autoDimensions){if(selectedOpts.type=='html'||selectedOpts.type=='inline'||selectedOpts.type=='ajax'){selectedOpts.width='auto';selectedOpts.height='auto';}else{selectedOpts.autoDimensions=false;}}
if(selectedOpts.modal){selectedOpts.overlayShow=true;selectedOpts.hideOnOverlayClick=false;selectedOpts.hideOnContentClick=false;selectedOpts.enableEscapeButton=false;selectedOpts.showCloseButton=false;}
selectedOpts.padding=parseInt(selectedOpts.padding,10);selectedOpts.margin=parseInt(selectedOpts.margin,10);tmp.css('padding',(selectedOpts.padding+selectedOpts.margin));$('.fancybox-inline-tmp').unbind('fancybox-cancel').bind('fancybox-change',function(){$(this).replaceWith(content.children());});switch(type){case'html':tmp.html(selectedOpts.content);_process_inline();break;case'inline':if($(obj).parent().is('#fancybox-content')===true){busy=false;return;}
$('<div class="fancybox-inline-tmp" />').hide().insertBefore($(obj)).bind('fancybox-cleanup',function(){$(this).replaceWith(content.children());}).bind('fancybox-cancel',function(){$(this).replaceWith(tmp.children());});$(obj).appendTo(tmp);_process_inline();break;case'image':busy=false;$.fancybox.showActivity();imgPreloader=new Image();imgPreloader.onerror=function(){_error();};imgPreloader.onload=function(){busy=true;imgPreloader.onerror=imgPreloader.onload=null;_process_image();};imgPreloader.src=href;break;case'swf':selectedOpts.scrolling='no';str='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+selectedOpts.width+'" height="'+selectedOpts.height+'"><param name="movie" value="'+href+'"></param>';emb='';$.each(selectedOpts.swf,function(name,val){str+='<param name="'+name+'" value="'+val+'"></param>';emb+=' '+name+'="'+val+'"';});str+='<embed src="'+href+'" type="application/x-shockwave-flash" width="'+selectedOpts.width+'" height="'+selectedOpts.height+'"'+emb+'></embed></object>';tmp.html(str);_process_inline();break;case'ajax':busy=false;$.fancybox.showActivity();selectedOpts.ajax.win=selectedOpts.ajax.success;ajaxLoader=$.ajax($.extend({},selectedOpts.ajax,{url:href,data:selectedOpts.ajax.data||{},error:function(XMLHttpRequest,textStatus,errorThrown){if(XMLHttpRequest.status>0){_error();}},success:function(data,textStatus,XMLHttpRequest){var o=typeof XMLHttpRequest=='object'?XMLHttpRequest:ajaxLoader;if(o.status==200){if(typeof selectedOpts.ajax.win=='function'){ret=selectedOpts.ajax.win(href,data,textStatus,XMLHttpRequest);if(ret===false){loading.hide();return;}else if(typeof ret=='string'||typeof ret=='object'){data=ret;}}
tmp.html(data);_process_inline();}}}));break;case'iframe':_show();break;}},_process_inline=function(){var
w=selectedOpts.width,h=selectedOpts.height;if(w.toString().indexOf('%')>-1){w=parseInt(($(window).width()-(selectedOpts.margin*2))*parseFloat(w)/100,10)+'px';}else{w=w=='auto'?'auto':w+'px';}
if(h.toString().indexOf('%')>-1){h=parseInt(($(window).height()-(selectedOpts.margin*2))*parseFloat(h)/100,10)+'px';}else{h=h=='auto'?'auto':h+'px';}
tmp.wrapInner('<div style="width:'+w+';height:'+h+';overflow: '+(selectedOpts.scrolling=='auto'?'auto':(selectedOpts.scrolling=='yes'?'scroll':'hidden'))+';position:relative;"></div>');selectedOpts.width=tmp.width();selectedOpts.height=tmp.height();_show();},_process_image=function(){selectedOpts.width=imgPreloader.width;selectedOpts.height=imgPreloader.height;$("<img />").attr({'id':'fancybox-img','src':imgPreloader.src,'alt':selectedOpts.title}).appendTo(tmp);_show();},_show=function(){var pos,equal;loading.hide();if(wrap.is(":visible")&&false===currentOpts.onCleanup(currentArray,currentIndex,currentOpts)){$.event.trigger('fancybox-cancel');busy=false;return;}
busy=true;$(content.add(overlay)).unbind();$(window).unbind("resize.fb scroll.fb");$(document).unbind('keydown.fb');if(wrap.is(":visible")&&currentOpts.titlePosition!=='outside'){wrap.css('height',wrap.height());}
currentArray=selectedArray;currentIndex=selectedIndex;currentOpts=selectedOpts;if(currentOpts.overlayShow){overlay.css({'background-color':currentOpts.overlayColor,'opacity':currentOpts.overlayOpacity,'cursor':currentOpts.hideOnOverlayClick?'pointer':'auto','height':$(document).height()});if(!overlay.is(':visible')){if(isIE6){$('select:not(#fancybox-tmp select)').filter(function(){return this.style.visibility!=='hidden';}).css({'visibility':'hidden'}).one('fancybox-cleanup',function(){this.style.visibility='inherit';});}
overlay.show();}}else{overlay.hide();}
final_pos=_get_zoom_to();_process_title();if(wrap.is(":visible")){$(close.add(nav_left).add(nav_right)).hide();pos=wrap.position(),start_pos={top:pos.top,left:pos.left,width:wrap.width(),height:wrap.height()};equal=(start_pos.width==final_pos.width&&start_pos.height==final_pos.height);content.fadeTo(currentOpts.changeFade,0.3,function(){var finish_resizing=function(){content.html(tmp.contents()).fadeTo(currentOpts.changeFade,1,_finish);};$.event.trigger('fancybox-change');content.empty().removeAttr('filter').css({'border-width':currentOpts.padding,'width':final_pos.width-currentOpts.padding*2,'height':selectedOpts.autoDimensions?'auto':final_pos.height-titleHeight-currentOpts.padding*2});if(equal){finish_resizing();}else{fx.prop=0;$(fx).animate({prop:1},{duration:currentOpts.changeSpeed,easing:currentOpts.easingChange,step:_draw,complete:finish_resizing});}});return;}
wrap.removeAttr("style");content.css('border-width',currentOpts.padding);if(currentOpts.transitionIn=='elastic'){start_pos=_get_zoom_from();content.html(tmp.contents());wrap.show();if(currentOpts.opacity){final_pos.opacity=0;}
fx.prop=0;$(fx).animate({prop:1},{duration:currentOpts.speedIn,easing:currentOpts.easingIn,step:_draw,complete:_finish});return;}
if(currentOpts.titlePosition=='inside'&&titleHeight>0){title.show();}
content.css({'width':final_pos.width-currentOpts.padding*2,'height':selectedOpts.autoDimensions?'auto':final_pos.height-titleHeight-currentOpts.padding*2}).html(tmp.contents());wrap.css(final_pos).fadeIn(currentOpts.transitionIn=='none'?0:currentOpts.speedIn,_finish);},_format_title=function(title){if(title&&title.length){if(currentOpts.titlePosition=='float'){return'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+title+'</td><td id="fancybox-title-float-right"></td></tr></table>';}
return'<div id="fancybox-title-'+currentOpts.titlePosition+'">'+title+'</div>';}
return false;},_process_title=function(){titleStr=currentOpts.title||'';titleHeight=0;title.empty().removeAttr('style').removeClass();if(currentOpts.titleShow===false){title.hide();return;}
titleStr=$.isFunction(currentOpts.titleFormat)?currentOpts.titleFormat(titleStr,currentArray,currentIndex,currentOpts):_format_title(titleStr);if(!titleStr||titleStr===''){title.hide();return;}
title.addClass('fancybox-title-'+currentOpts.titlePosition).html(titleStr).appendTo('body').show();switch(currentOpts.titlePosition){case'inside':title.css({'width':final_pos.width-(currentOpts.padding*2),'marginLeft':currentOpts.padding,'marginRight':currentOpts.padding});titleHeight=title.outerHeight(true);title.appendTo(outer);final_pos.height+=titleHeight;break;case'over':title.css({'marginLeft':currentOpts.padding,'width':final_pos.width-(currentOpts.padding*2),'bottom':currentOpts.padding}).appendTo(outer);break;case'float':title.css('left',parseInt((title.width()-final_pos.width-40)/2,10)*-1).appendTo(wrap);break;default:title.css({'width':final_pos.width-(currentOpts.padding*2),'paddingLeft':currentOpts.padding,'paddingRight':currentOpts.padding}).appendTo(wrap);break;}
title.hide();},_set_navigation=function(){if(currentOpts.enableEscapeButton||currentOpts.enableKeyboardNav){$(document).bind('keydown.fb',function(e){if(e.keyCode==27&&currentOpts.enableEscapeButton){e.preventDefault();$.fancybox.close();}else if((e.keyCode==37||e.keyCode==39)&&currentOpts.enableKeyboardNav&&e.target.tagName!=='INPUT'&&e.target.tagName!=='TEXTAREA'&&e.target.tagName!=='SELECT'){e.preventDefault();$.fancybox[e.keyCode==37?'prev':'next']();}});}
if(!currentOpts.showNavArrows){nav_left.hide();nav_right.hide();return;}
if((currentOpts.cyclic&&currentArray.length>1)||currentIndex!==0){nav_left.show();}
if((currentOpts.cyclic&&currentArray.length>1)||currentIndex!=(currentArray.length-1)){nav_right.show();}},_finish=function(){if(!$.support.opacity){content.get(0).style.removeAttribute('filter');wrap.get(0).style.removeAttribute('filter');}
if(selectedOpts.autoDimensions){content.css('height','auto');}
wrap.css('height','auto');if(titleStr&&titleStr.length){title.show();}
if(currentOpts.showCloseButton){close.show();}
_set_navigation();if(currentOpts.hideOnContentClick){content.bind('click',$.fancybox.close);}
if(currentOpts.hideOnOverlayClick){overlay.bind('click',$.fancybox.close);}
$(window).bind("resize.fb",$.fancybox.resize);if(currentOpts.centerOnScroll){$(window).bind("scroll.fb",$.fancybox.center);}
if(currentOpts.type=='iframe'){$('<iframe id="fancybox-frame" name="fancybox-frame'+new Date().getTime()+'" frameborder="0" hspace="0" '+($.browser.msie?'allowtransparency="true""':'')+' scrolling="'+selectedOpts.scrolling+'" src="'+currentOpts.href+'"></iframe>').appendTo(content);}
wrap.show();busy=false;$.fancybox.center();currentOpts.onComplete(currentArray,currentIndex,currentOpts);_preload_images();},_preload_images=function(){var href,objNext;if((currentArray.length-1)>currentIndex){href=currentArray[currentIndex+1].href;if(typeof href!=='undefined'&&href.match(imgRegExp)){objNext=new Image();objNext.src=href;}}
if(currentIndex>0){href=currentArray[currentIndex-1].href;if(typeof href!=='undefined'&&href.match(imgRegExp)){objNext=new Image();objNext.src=href;}}},_draw=function(pos){var dim={width:parseInt(start_pos.width+(final_pos.width-start_pos.width)*pos,10),height:parseInt(start_pos.height+(final_pos.height-start_pos.height)*pos,10),top:parseInt(start_pos.top+(final_pos.top-start_pos.top)*pos,10),left:parseInt(start_pos.left+(final_pos.left-start_pos.left)*pos,10)};if(typeof final_pos.opacity!=='undefined'){dim.opacity=pos<0.5?0.5:pos;}
wrap.css(dim);content.css({'width':dim.width-currentOpts.padding*2,'height':dim.height-(titleHeight*pos)-currentOpts.padding*2});},_get_viewport=function(){return[$(window).width()-(currentOpts.margin*2),$(window).height()-(currentOpts.margin*2),$(document).scrollLeft()+currentOpts.margin,$(document).scrollTop()+currentOpts.margin];},_get_zoom_to=function(){var view=_get_viewport(),to={},resize=currentOpts.autoScale,double_padding=currentOpts.padding*2,ratio;if(currentOpts.width.toString().indexOf('%')>-1){to.width=parseInt((view[0]*parseFloat(currentOpts.width))/100,10);}else{to.width=currentOpts.width+double_padding;}
if(currentOpts.height.toString().indexOf('%')>-1){to.height=parseInt((view[1]*parseFloat(currentOpts.height))/100,10);}else{to.height=currentOpts.height+double_padding;}
if(resize&&(to.width>view[0]||to.height>view[1])){if(selectedOpts.type=='image'||selectedOpts.type=='swf'){ratio=(currentOpts.width)/(currentOpts.height);if((to.width)>view[0]){to.width=view[0];to.height=parseInt(((to.width-double_padding)/ratio)+double_padding,10);}
if((to.height)>view[1]){to.height=view[1];to.width=parseInt(((to.height-double_padding)*ratio)+double_padding,10);}}else{to.width=Math.min(to.width,view[0]);to.height=Math.min(to.height,view[1]);}}
to.top=parseInt(Math.max(view[3]-20,view[3]+((view[1]-to.height-40)*0.5)),10);to.left=parseInt(Math.max(view[2]-20,view[2]+((view[0]-to.width-40)*0.5)),10);return to;},_get_obj_pos=function(obj){var pos=obj.offset();pos.top+=parseInt(obj.css('paddingTop'),10)||0;pos.left+=parseInt(obj.css('paddingLeft'),10)||0;pos.top+=parseInt(obj.css('border-top-width'),10)||0;pos.left+=parseInt(obj.css('border-left-width'),10)||0;pos.width=obj.width();pos.height=obj.height();return pos;},_get_zoom_from=function(){var orig=selectedOpts.orig?$(selectedOpts.orig):false,from={},pos,view;if(orig&&orig.length){pos=_get_obj_pos(orig);from={width:pos.width+(currentOpts.padding*2),height:pos.height+(currentOpts.padding*2),top:pos.top-currentOpts.padding-20,left:pos.left-currentOpts.padding-20};}else{view=_get_viewport();from={width:currentOpts.padding*2,height:currentOpts.padding*2,top:parseInt(view[3]+view[1]*0.5,10),left:parseInt(view[2]+view[0]*0.5,10)};}
return from;},_animate_loading=function(){if(!loading.is(':visible')){clearInterval(loadingTimer);return;}
$('div',loading).css('top',(loadingFrame*-40)+'px');loadingFrame=(loadingFrame+1)%12;};$.fn.fancybox=function(options){if(!$(this).length){return this;}
$(this).data('fancybox',$.extend({},options,($.metadata?$(this).metadata():{}))).unbind('click.fb').bind('click.fb',function(e){e.preventDefault();if(busy){return;}
busy=true;$(this).blur();selectedArray=[];selectedIndex=0;var rel=$(this).attr('rel')||'';if(!rel||rel==''||rel==='nofollow'){selectedArray.push(this);}else{selectedArray=$("a[rel="+rel+"], area[rel="+rel+"]");selectedIndex=selectedArray.index(this);}
_start();return;});return this;};$.fancybox=function(obj){var opts;if(busy){return;}
busy=true;opts=typeof arguments[1]!=='undefined'?arguments[1]:{};selectedArray=[];selectedIndex=parseInt(opts.index,10)||0;if($.isArray(obj)){for(var i=0,j=obj.length;i<j;i++){if(typeof obj[i]=='object'){$(obj[i]).data('fancybox',$.extend({},opts,obj[i]));}else{obj[i]=$({}).data('fancybox',$.extend({content:obj[i]},opts));}}
selectedArray=jQuery.merge(selectedArray,obj);}else{if(typeof obj=='object'){$(obj).data('fancybox',$.extend({},opts,obj));}else{obj=$({}).data('fancybox',$.extend({content:obj},opts));}
selectedArray.push(obj);}
if(selectedIndex>selectedArray.length||selectedIndex<0){selectedIndex=0;}
_start();};$.fancybox.showActivity=function(){clearInterval(loadingTimer);loading.show();loadingTimer=setInterval(_animate_loading,66);};$.fancybox.hideActivity=function(){loading.hide();};$.fancybox.next=function(){return $.fancybox.pos(currentIndex+1);};$.fancybox.prev=function(){return $.fancybox.pos(currentIndex-1);};$.fancybox.pos=function(pos){if(busy){return;}
pos=parseInt(pos);selectedArray=currentArray;if(pos>-1&&pos<currentArray.length){selectedIndex=pos;_start();}else if(currentOpts.cyclic&&currentArray.length>1){selectedIndex=pos>=currentArray.length?0:currentArray.length-1;_start();}
return;};$.fancybox.cancel=function(){if(busy){return;}
busy=true;$.event.trigger('fancybox-cancel');_abort();selectedOpts.onCancel(selectedArray,selectedIndex,selectedOpts);busy=false;};$.fancybox.close=function(){if(busy||wrap.is(':hidden')){return;}
busy=true;if(currentOpts&&false===currentOpts.onCleanup(currentArray,currentIndex,currentOpts)){busy=false;return;}
_abort();$(close.add(nav_left).add(nav_right)).hide();$(content.add(overlay)).unbind();$(window).unbind("resize.fb scroll.fb");$(document).unbind('keydown.fb');content.find('iframe').attr('src',isIE6&&/^https/i.test(window.location.href||'')?'javascript:void(false)':'about:blank');if(currentOpts.titlePosition!=='inside'){title.empty();}
wrap.stop();function _cleanup(){overlay.fadeOut('fast');title.empty().hide();wrap.hide();$.event.trigger('fancybox-cleanup');content.empty();currentOpts.onClosed(currentArray,currentIndex,currentOpts);currentArray=selectedOpts=[];currentIndex=selectedIndex=0;currentOpts=selectedOpts={};busy=false;}
if(currentOpts.transitionOut=='elastic'){start_pos=_get_zoom_from();var pos=wrap.position();final_pos={top:pos.top,left:pos.left,width:wrap.width(),height:wrap.height()};if(currentOpts.opacity){final_pos.opacity=1;}
title.empty().hide();fx.prop=1;$(fx).animate({prop:0},{duration:currentOpts.speedOut,easing:currentOpts.easingOut,step:_draw,complete:_cleanup});}else{wrap.fadeOut(currentOpts.transitionOut=='none'?0:currentOpts.speedOut,_cleanup);}};$.fancybox.resize=function(){if(overlay.is(':visible')){overlay.css('height',$(document).height());}
$.fancybox.center(true);};$.fancybox.center=function(){var view,align;if(busy){return;}
align=arguments[0]===true?1:0;view=_get_viewport();if(!align&&(wrap.width()>view[0]||wrap.height()>view[1])){return;}
wrap.stop().animate({'top':parseInt(Math.max(view[3]-20,view[3]+((view[1]-content.height()-40)*0.5)-currentOpts.padding)),'left':parseInt(Math.max(view[2]-20,view[2]+((view[0]-content.width()-40)*0.5)-currentOpts.padding))},typeof arguments[0]=='number'?arguments[0]:200);};$.fancybox.init=function(){if($("#fancybox-wrap").length){return;}
$('body').append(tmp=$('<div id="fancybox-tmp"></div>'),loading=$('<div id="fancybox-loading"><div></div></div>'),overlay=$('<div id="fancybox-overlay"></div>'),wrap=$('<div id="fancybox-wrap"></div>'));outer=$('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(wrap);outer.append(content=$('<div id="fancybox-content"></div>'),close=$('<a id="fancybox-close"></a>'),title=$('<div id="fancybox-title"></div>'),nav_left=$('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),nav_right=$('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'));close.click($.fancybox.close);loading.click($.fancybox.cancel);nav_left.click(function(e){e.preventDefault();$.fancybox.prev();});nav_right.click(function(e){e.preventDefault();$.fancybox.next();});if($.fn.mousewheel){wrap.bind('mousewheel.fb',function(e,delta){if(busy){e.preventDefault();}else if($(e.target).get(0).clientHeight==0||$(e.target).get(0).scrollHeight===$(e.target).get(0).clientHeight){e.preventDefault();$.fancybox[delta>0?'prev':'next']();}});}
if(!$.support.opacity){wrap.addClass('fancybox-ie');}
if(isIE6){loading.addClass('fancybox-ie6');wrap.addClass('fancybox-ie6');$('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||'')?'javascript:void(false)':'about:blank')+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(outer);}};$.fn.fancybox.defaults={padding:10,margin:40,opacity:false,modal:false,cyclic:false,scrolling:'auto',width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:'transparent'},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:0.7,overlayColor:'#777',titleShow:true,titlePosition:'float',titleFormat:null,titleFromAlt:false,transitionIn:'fade',transitionOut:'fade',speedIn:300,speedOut:300,changeSpeed:300,changeFade:'fast',easingIn:'swing',easingOut:'swing',showCloseButton:true,showNavArrows:true,enableEscapeButton:true,enableKeyboardNav:true,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};$(document).ready(function(){$.fancybox.init();});})(jQuery);!function(t,e){function n(t,e,n){var r=t.children(),o=!1;t.empty();for(var i=0,d=r.length;d>i;i++){var l=r.eq(i);if(t.append(l),n&&t.append(n),a(t,e)){l.remove(),o=!0;break}n&&n.detach()}return o}function r(e,n,i,d,l){var s=!1,c="a, table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",u="script, .dotdotdot-keep";return e.contents().detach().each(function(){var h=this,f=t(h);if("undefined"==typeof h)return!0;if(f.is(u))e.append(f);else{if(s)return!0;e.append(f),!l||f.is(d.after)||f.find(d.after).length||e[e.is(c)?"after":"append"](l),a(i,d)&&(s=3==h.nodeType?o(f,n,i,d,l):r(f,n,i,d,l)),s||l&&l.detach()}}),n.addClass("is-truncated"),s}function o(e,n,r,o,d){var c=e[0];if(!c)return!1;var h=s(c),f=-1!==h.indexOf(" ")?" ":"",p="letter"==o.wrap?"":f,g=h.split(p),v=-1,w=-1,b=0,y=g.length-1;for(o.fallbackToLetter&&0==b&&0==y&&(p="",g=h.split(p),y=g.length-1);y>=b&&(0!=b||0!=y);){var m=Math.floor((b+y)/2);if(m==w)break;w=m,l(c,g.slice(0,w+1).join(p)+o.ellipsis),r.children().each(function(){t(this).toggle().toggle()}),a(r,o)?(y=w,o.fallbackToLetter&&0==b&&0==y&&(p="",g=g[0].split(p),v=-1,w=-1,b=0,y=g.length-1)):(v=w,b=w)}if(-1==v||1==g.length&&0==g[0].length){var x=e.parent();e.detach();var T=d&&d.closest(x).length?d.length:0;x.contents().length>T?c=u(x.contents().eq(-1-T),n):(c=u(x,n,!0),T||x.detach()),c&&(h=i(s(c),o),l(c,h),T&&d&&t(c).parent().append(d))}else h=i(g.slice(0,v+1).join(p),o),l(c,h);return!0}function a(t,e){return t.innerHeight()>e.maxHeight}function i(e,n){for(;t.inArray(e.slice(-1),n.lastCharacter.remove)>-1;)e=e.slice(0,-1);return t.inArray(e.slice(-1),n.lastCharacter.noEllipsis)<0&&(e+=n.ellipsis),e}function d(t){return{width:t.innerWidth(),height:t.innerHeight()}}function l(t,e){t.innerText?t.innerText=e:t.nodeValue?t.nodeValue=e:t.textContent&&(t.textContent=e)}function s(t){return t.innerText?t.innerText:t.nodeValue?t.nodeValue:t.textContent?t.textContent:""}function c(t){do t=t.previousSibling;while(t&&1!==t.nodeType&&3!==t.nodeType);return t}function u(e,n,r){var o,a=e&&e[0];if(a){if(!r){if(3===a.nodeType)return a;if(t.trim(e.text()))return u(e.contents().last(),n)}for(o=c(a);!o;){if(e=e.parent(),e.is(n)||!e.length)return!1;o=c(e[0])}if(o)return u(t(o),n)}return!1}function h(e,n){return e?"string"==typeof e?(e=t(e,n),e.length?e:!1):e.jquery?e:!1:!1}function f(t){for(var e=t.innerHeight(),n=["paddingTop","paddingBottom"],r=0,o=n.length;o>r;r++){var a=parseInt(t.css(n[r]),10);isNaN(a)&&(a=0),e-=a}return e}if(!t.fn.dotdotdot){t.fn.dotdotdot=function(e){if(0==this.length)return t.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){t(this).dotdotdot(e)});var o=this,i=o.contents();o.data("dotdotdot")&&o.trigger("destroy.dot"),o.data("dotdotdot-style",o.attr("style")||""),o.css("word-wrap","break-word"),"nowrap"===o.css("white-space")&&o.css("white-space","normal"),o.bind_events=function(){return o.bind("update.dot",function(e,d){switch(o.removeClass("is-truncated"),e.preventDefault(),e.stopPropagation(),typeof l.height){case"number":l.maxHeight=l.height;break;case"function":l.maxHeight=l.height.call(o[0]);break;default:l.maxHeight=f(o)}l.maxHeight+=l.tolerance,"undefined"!=typeof d&&(("string"==typeof d||"nodeType"in d&&1===d.nodeType)&&(d=t("<div />").append(d).contents()),d instanceof t&&(i=d)),g=o.wrapInner('<div class="dotdotdot" />').children(),g.contents().detach().end().append(i.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var c=!1,u=!1;return s.afterElement&&(c=s.afterElement.clone(!0),c.show(),s.afterElement.detach()),a(g,l)&&(u="children"==l.wrap?n(g,l,c):r(g,o,g,l,c)),g.replaceWith(g.contents()),g=null,t.isFunction(l.callback)&&l.callback.call(o[0],u,i),s.isTruncated=u,u}).bind("isTruncated.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(o[0],s.isTruncated),s.isTruncated}).bind("originalContent.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(o[0],i),i}).bind("destroy.dot",function(t){t.preventDefault(),t.stopPropagation(),o.unwatch().unbind_events().contents().detach().end().append(i).attr("style",o.data("dotdotdot-style")||"").data("dotdotdot",!1)}),o},o.unbind_events=function(){return o.unbind(".dot"),o},o.watch=function(){if(o.unwatch(),"window"==l.watch){var e=t(window),n=e.width(),r=e.height();e.bind("resize.dot"+s.dotId,function(){n==e.width()&&r==e.height()&&l.windowResizeFix||(n=e.width(),r=e.height(),u&&clearInterval(u),u=setTimeout(function(){o.trigger("update.dot")},100))})}else c=d(o),u=setInterval(function(){if(o.is(":visible")){var t=d(o);(c.width!=t.width||c.height!=t.height)&&(o.trigger("update.dot"),c=t)}},500);return o},o.unwatch=function(){return t(window).unbind("resize.dot"+s.dotId),u&&clearInterval(u),o};var l=t.extend(!0,{},t.fn.dotdotdot.defaults,e),s={},c={},u=null,g=null;return l.lastCharacter.remove instanceof Array||(l.lastCharacter.remove=t.fn.dotdotdot.defaultArrays.lastCharacter.remove),l.lastCharacter.noEllipsis instanceof Array||(l.lastCharacter.noEllipsis=t.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),s.afterElement=h(l.after,o),s.isTruncated=!1,s.dotId=p++,o.data("dotdotdot",!0).bind_events().trigger("update.dot"),l.watch&&o.watch(),o},t.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},t.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","",",",";",".","!","?"],noEllipsis:[]}},t.fn.dotdotdot.debug=function(t){};var p=1,g=t.fn.html;t.fn.html=function(n){return n!=e&&!t.isFunction(n)&&this.data("dotdotdot")?this.trigger("update",[n]):g.apply(this,arguments)};var v=t.fn.text;t.fn.text=function(n){return n!=e&&!t.isFunction(n)&&this.data("dotdotdot")?(n=t("<div />").text(n).html(),this.trigger("update",[n])):v.apply(this,arguments)}}}(jQuery);(function(window,site,$,undefined){var psgTimer=$({});site.psgTimer=psgTimer;$(function(){var timersArr=$('[data-timer-autoinit]');if(timersArr.length===0)return false;timersArr.each(function(index,timer){if(!$(timer).attr('data-timer-end')){$(timer).append('<h1 class="red align-center">Attribute [data-timer-end] is empty!</h1>')
timersArr.splice(index,1);}})
psgTimer.timers={};timersArr.each(function(index,timer){psgTimer.timers['timer_'+index]=new PsgTimer(timer);});})})(window,window.site,window.jQuery);(function(){var callbacks={onInit:function(){},onStart:function(){},onStop:function(){},onEnd:function(){},onChangeStart:function(){},onChangeEnd:function(){}};var base={stopped:true,timezone:0,diff:null,isEnd:false};var PsgTimer=function(selector,options){var timer=this;if(selector.nodeType===Node.ELEMENT_NODE){timer.container=$(selector);}else if(typeof selector==='string'){timer.selector=defaults.selector=selector;timer.container=$(timer.selector);}else if(typeof selector==='object'){options=selector;timer.selector=options.selector||defaults.selector;timer.container=$(timer.selector);}
timer.options=$.extend({},{selector:'#psgTimer',animation:false,multipleBlocks:false,endDateTime:undefined,currentDateTime:window.serverTime['U']*1000||Date.now(),labels:{days:timer.container.attr('data-label-days')?timer.container.attr('data-label-days'):false,hours:timer.container.attr('data-label-hours')?timer.container.attr('data-label-hours'):false,minutes:timer.container.attr('data-label-minutes')?timer.container.attr('data-label-minutes'):false,seconds:timer.container.attr('data-label-seconds')?timer.container.attr('data-label-seconds'):false}},options);timer.callbacks=timer.options.callbacks=$.extend({},callbacks,timer.options.callbacks);timer.base=$.extend({},base);if(typeof timer.options.endDateTime==='string'){timer.options.endDateTime=setTimerEndFromString(timer,timer.options.endDateTime);}
timer.container.length?timer.init():console.log('No timer element on this page');};PsgTimer.prototype.init=function(){var timer=this,options=this.options;var timerEnd=timer.container.attr('data-timer-end');if(timerEnd!==undefined){options.endDateTime=setTimerEndFromString(timer,timerEnd);}
timer.countdown=transformCountToArray(getCurrentCountDown(timer),options.multilpeBlocks);timer.container.addClass('psgTimer').append(createMarkup(timer));if(options.animation){timer.container.addClass('psgTimer_'+options.animation);}
timer.query=setQueries(timer);timer.callbacks.onInit();if(!timer.base.isEnd){timer.start();}};PsgTimer.prototype.start=function(){var timer=this;if(timer.base.stopped){timer.base.stopped=false;timer.intervalId=setInterval(function(){updateCounter(timer);},1000);timer.callbacks.onStart();}};PsgTimer.prototype.restart=function(){var timer=this;timer.options.currentDateTime=Date.now();timer.start();};PsgTimer.prototype.stop=function(){var timer=this;timer.base.stopped=true;clearTimeout(timer.intervalId);timer.callbacks.onStop();};var getCurrentCountDown=function(timer){var options=timer.options;var base=timer.base;options.currentDateTime=options.currentDateTime+1001;base.diff=options.endDateTime-options.currentDateTime;var seconds=0;var minutes=0;var hours=0;var days=0;if(base.diff>0){var total=parseFloat(((((base.diff/1000.0)/60.0)/60.0)/24.0));days=parseInt(total);total-=days;total*=24.0;hours=parseInt(total);total-=hours;total*=60.0;minutes=parseInt(total);total-=minutes;total*=60;seconds=parseInt(total);}else{timer.callbacks.onEnd();timer.stop();timer.base.isEnd=true;}
return{days:{amount:days,max:Infinity,className:'days'},hours:{amount:hours,max:24,className:'hours'},minutes:{amount:minutes,max:60,className:'minutes'},seconds:{amount:seconds,max:60,className:'seconds'}}};var transformCountToArray=function(count,multilpeBlocks){if(typeof count==='object'){for(var unit in count){if(count.hasOwnProperty(unit)){count[unit].amount=count[unit].amount.toString();if(count[unit].amount.length<2){count[unit].amount='0'+count[unit].amount;}
if(multilpeBlocks){count[unit].amount=count[unit].amount.split('');}else{count[unit].amount=[count[unit].amount];}}}}
return count;};var getTimeZone=function(string){var hours,minutes;var number=string.replace(/\D/g,'');var digit=string.replace(/[^+-]/g,'');var multiplier=digit==='-'?(-1):1;if(number.length>=3){hours=Number(number.substr(0,number.length-2));minutes=Number(number.substr(number.length-2,2));}else{hours=Number(number);minutes=0;}
return(hours+minutes/60)*multiplier;};var setTimerEndFromString=function(timer,endTimeString){var timerDate={};var timerEnd=endTimeString.split(' ');var endTime;var timeExp=/^([0-1]\d|2[0-3])(:[0-5]\d){1,2}$/;var dateExp=/(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[-/.](19|20)\d\d/;var zoneExp=/(UTC|GMT)[+-](\d{1,2}([:,.]?\d{2})?)/;for(var i=0;i<timerEnd.length;i++){if(timerEnd[i].match(timeExp)){timerDate.time=timerEnd[i].split(':');}else if(timerEnd[i].match(dateExp)){timerDate.date=timerEnd[i].split('.');}else if(timerEnd[i].match(zoneExp)){timer.base.timezone=getTimeZone(timerEnd[i]);}else{console.log('Wrong end time.');}}
timerDate.year=parseInt(timerDate.date[2])||0;timerDate.month=parseInt(timerDate.date[1])-1||0;timerDate.day=parseInt(timerDate.date[0])||0;timerDate.hours=parseInt(timerDate.time[0])||0;timerDate.minutes=parseInt(timerDate.time[1])||0;timerDate.seconds=parseInt(timerDate.time[2])||0;timerDate.miliseconds=parseInt(timerDate.time[3])||0;endTime=Date.UTC(timerDate.year,timerDate.month,timerDate.day,timerDate.hours,timerDate.minutes,timerDate.seconds,timerDate.miliseconds);return endTime;};var createMarkup=function(timer){var countdown=timer.countdown;var markup={};for(var unit in countdown){if(countdown.hasOwnProperty(unit)){var numberBlocks='';countdown[unit].amount.forEach(function(num){numberBlocks+=numberContainer(timer,num);});markup.unit+='<div class="'+countdown[unit].className+' psgTimer_unit">'+numberBlocks+'</div>';}}
markup.numbers='<div class="psgTimer_numbers">'+markup.unit+'</div>';markup.full=markup.numbers;if(timer.options.labels&&timer.options.labels.days&&timer.options.labels.hours&&timer.options.labels.minutes&&timer.options.labels.seconds){var labels=timer.options.labels;markup.labels='<div class="psgTimer_labels">'+'<div class="days">'+labels.days+'</div>'+'<div class="hours">'+labels.hours+'</div>'+'<div class="minutes">'+labels.minutes+'</div>'+'<div class="seconds">'+labels.seconds+'</div>'+'</div>';markup.full=markup.numbers+markup.labels;}else{markup.full=markup.numbers;}
return markup.full;};var numberContainer=function(timer,num){var markup='',data='data-number="'+num+'"';var numberBlock='<div class="number" '+data+'>'+num+'</div>';if(timer.options.animation==='fade'){markup='<div>'+numberBlock+'</div>';}else{markup=numberBlock;}
return markup;};var setQueries=function(timer){var countdown=timer.countdown,query={};for(var unit in countdown){if(countdown.hasOwnProperty(unit)){query[unit]=timer.container.find(numberSelector(timer,countdown[unit].className));}}
return query;};var numberSelector=function(timer,className){var selector='';if(timer.options.animation==='fade'){selector='.'+className+' .number';}else{selector='.'+className+' .number';}
return selector;};var updateCounter=function(timer){timer.callbacks.onChangeStart();timer.countdown=transformCountToArray(getCurrentCountDown(timer),timer.options.multilpeBlocks);for(var unit in timer.countdown){if(timer.countdown.hasOwnProperty(unit)){timer.countdown[unit].amount.forEach(function(number,index){if(timer.query[unit][index].getAttribute('data-number')!==number){aminate(timer.query[unit][index],number,timer.options.animation);}});}}
timer.callbacks.onChangeEnd();};var aminate=function(el,value,animationType){var $el=$(el);$el.attr('data-number',value);if(animationType==='fade'){animation.fade($el,value);}else{$el.html(value);}};var animation={fade:function($el,value){var animDuration=350;$el.context.style.transition='opacity '+animDuration+'ms';$el.context.style.opacity='0';setTimeout(function(){$el.html(value).context.style.opacity='1';},animDuration+10);}};window.PsgTimer=PsgTimer;})();(function(window,site,ui,$){var init=function(){$('[name="unsubscribereason"]:first',wrapper).attr('checked','checked');};var feedback=function(redirect){redirect=redirect||false;if($('#unsubscribe_done_form:visible').length){var form=$('#unsubscribe_done_form');var choice=$('input:radio:checked',form);var text=$('textarea',form).val();var hash=$('#hash').val();var url='/email/feedback/'+hash;var params={code:choice.val(),text:text};$.post(url,params,function(data){if(data&&redirect)redirectToHomePage();});$(this).unbind("click");}};var restore=function(){var hash=$('#hash').val();var url='/email/restore/'+hash;$.post(url,function(data){if(data){$('#unsubscribe-page .hide_after_restore').hide();$('#subscriptions_restored').show();}});};var redirectToHomePage=function(){window.location='/';};$(function(){var wrapper=$('#unsubscribe-page');var button=$('.unsubscribefeedback',wrapper);$('.page-description a',wrapper).click(function(){restore();return false;});button.click(function(){feedback(true);return false;}).mouseover(function(){$(this).addClass("over");}).mouseleave(function(){$(this).removeClass("over");});init();});})(window,window.site,window.ui,window.jQuery);;
(function(){Object.defineProperty(Object.prototype,'__get',{value:function(key,value){if(key===null)return this[key];switch(typeof key){case'number':case'string':result=this[key];break;case'object':var result=this;var keys=Array.prototype.reverse.call(key);while((result instanceof Object)&&keys.length){key=keys.pop();result=result[key];}
if(keys.length)result=undefined;break;default:console.log(['Unknown type of key to get:',typeof key,key]);}
return(result===undefined)?value:result;}});Object.defineProperty(Object.prototype,'__set',{value:function(key,value){switch(typeof key){case'number':case'string':return this[key]=value;case'object':var keys=Array.prototype.reverse.call(key);var result=this;while(keys.length>1){key=keys.pop();if(result[key]===undefined)result[key]={};result=result[key];}
return result[keys.pop()]=value;default:console.log(['Unknown type of key to set:',typeof key,key]);}}});HTMLElement.prototype.$=function(selector){return(selector!==undefined)?jQuery(this).find(selector):jQuery(this);};HTMLElement.prototype.$$=function(){var self=this,result={self:self,space:self.getAttribute('space'),name:self.getAttribute('name'),key:self.getAttribute('key'),data:{},$:function(selector){return this.self.$(selector);},master:function(space){var result=this.$().parents(space?('[space="'+space+'"]'):'[space]');if(result.length)return result[0].$$();},slave:function(space,name,key){var result=[],next=this.$(),not=space?':not([space])':(name?':not([name])':(key?':not([key])':':not([space])')),selector='';if(space)selector+='[space="'+space+'"]';if(name)selector+='[name="'+name+'"]';if(key)selector+='[key="'+key+'"]';while(next.length){next.children(selector.length?selector:'[space]').each(function(index,item){result.push(item);});next=next.children(not);}
return jQuery(result);}};var data=self.getAttribute('data');if(data!==null){result.data=JSON.parse(decodeURIComponent(data));self.removeAttribute('data');}
var $class=$$.class.__get([result.space],{});['get','set','call'].forEach(function(layer){var source=$class.__get(layer,{});result[layer]=function(key,data){var func=source.__get(key);if(typeof(func)=='function')
return(layer=='call')?func.apply(result,[].slice.call(arguments,1)):func.call(result,data);}});self.$$=function(){return result;};if(typeof($class.init)=='function')$class.init.call(result);return result;};$$=function(data){data=jQuery(data);data.filter('[space]').each(function(){this.$$();});data.find('[space]').each(function(){this.$$();});return data;};$$.script={"product\/combo":[{init:function(){site.product.createPaging();}}],"popup\/payment-info\/desktop":[{init:function(){var self=this;self.slave(null,'submit').on('click',function(){self.slave('checkout/payment/regular/selected/stripe')[0].$$().call('process-token-pay');});}}],"popup\/payment-info\/mobile":[{init:function(){var self=this;self.slave(null,'submit').on('click',function(){self.slave('checkout/payment/regular/selected/stripe')[0].$$().call('process-token-pay');});}}],"checkout\/payment\/regular\/selected\/stripe":[{init:function(){var self=this;if(!$('#stripe-js').length){var script=document.createElement('script');script.id='stripe-js';script.src='https://js.stripe.com/v3/';script.async=false;document.head.appendChild(script);script.onload=function(){self.call('init-card-field');}}else{self.call('init-card-field');}},call:{'init-card-field':function(){var self=this;self.data.stripe=Stripe(self.data.publicKey);var elements=self.data.stripe.elements();var style={base:{color:'#32325d',lineHeight:'18px',fontFamily:'Roboto, "Helvetica Neue", Helvetica, sans-serif',fontSmoothing:'antialiased',fontSize:'16px','::placeholder':{color:'#aab7c4'}},invalid:{color:'#fa755a',iconColor:'#fa755a'}};self.data.card=elements.create('card',{hidePostalCode:true,style:style});self.data.card.mount('#card-element');self.data.card.addEventListener('change',function(event){var displayError=document.getElementById('card-errors');if(event.error){displayError.textContent=event.error.message;}else{displayError.textContent='';}});},'process-token':function(){var self=this;self.data.stripe.createToken(self.data.card).then(function(result){if(result.error){var errorElement=document.getElementById('card-errors');errorElement.textContent=result.error.message;}else{site.checkout.SetDataParam('paymentToken',result.token.id);site.checkout.process();}});},'process-token-pay':function(){var self=this;self.data.stripe.createToken(self.data.card).then(function(result){if(result.error){var errorElement=document.getElementById('card-errors');errorElement.textContent=result.error.message;}else{$.ajax({url:'/processpayment/stripe/orderhistorypay/',type:"POST",data:{'order-id':self.data.orderId,'payment-token':result.token.id}});}});}}}]}
$$.class={};jQuery.each($$.script,function(name,sequence){sequence.forEach(function(next){if(next.init)$$.__set(['class',name,'init'],next.init);['get','set','call'].forEach(function(layer){jQuery.each(next.__get(layer,{}),function(key,value){$$.__set(['class',name,layer,key],value);});});});});delete $$.script;$$.html=function(data){if(data===null)return'';if(data.constructor===Array){var result=[];data.forEach(function(value){result.push($$.html(value));});return result;}
if(data===Object(data)){if((typeof data.html==='function'))return data.html();var result={};jQuery.each(data,function(key,value){result[key]=$$.html(value);});return result;}
return data;}
$$.render=function(template,token){var htmlspecialchars=function(value){return value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");},render=function(items,token){var result='';items.forEach(function(item){result+=(jQuery.type(item)=='string')?item:item.render(token);});return result;},search=/{{([\?\!\|\@\/\\])?\s*([A-Za-z_0-9]+(-[A-Za-z_0-9]+)*(\/[A-Za-z_0-9]+(-[A-Za-z_0-9]+)*)*)?\s*({\s*"[A-Za-z_0-9]+(-[A-Za-z_0-9]+)*(\/[A-Za-z_0-9]+(-[A-Za-z_0-9]+)*)*"\s*:\s*"(([^"\\])*\\["|\\|\/|\b|\n|\r|\t])*([^"\\])*"(\s*,\s*"[A-Za-z_0-9]+(-[A-Za-z_0-9]+)*(\/[A-Za-z_0-9]+(-[A-Za-z_0-9]+)*)*"\s*:\s*"(([^"\\])*\\["|\\|\/|\b|\n|\r|\t])*([^"\\])*")*\s*})?\s*}}/g,deep=[{layout:[]}],tail=0;while(rule=search.exec(template)){var offset=search.lastIndex,sign=(rule[1]===undefined)?'':rule[1].trim(),key=(rule[2]===undefined)?'':rule[2].trim(),json=(rule[6]===undefined)?[]:eval('('+rule[6].trim()+')');if(offset!=tail)
deep[deep.length-1].layout.push(template.substr(tail,offset-rule[0].length-tail));tail=offset;if((sign=='?')||(sign=='!')){var next={key:key,not:sign=='!',layout:[],else:{layout:[]},render:function(token){var value=this.key.length?token.__get(this.key.split('/')):token,type=jQuery.type(value),bool=(type=='array')&&value.length||(type=='boolean')&&value||(type=='number')&&(value!=0)||(type=='string')&&value.length&&(value!='0')||(type=='object')&&Object.keys(value).length;return render((bool&&!this.not||!bool&&this.not)?this.layout:this.else.layout,token);}};deep[deep.length-1].layout.push(next);deep.push(next);}
if(sign=='|'){if(deep[deep.length-1].else===undefined)
throw'Excessive `else` in template#'+offset+': '+template;deep.push(deep[deep.length-1].else);}
if(sign=='@'){var next={key:key,layout:[],render:function(token){var result='',type=jQuery.type(token);if(this.key.length&&(type=='object')||!this.key.length&&(type=='array')){token=this.key.length?token.__get(this.key.split('/')):token;if(jQuery.type(token)=='array'){var layout=this.layout;token.forEach(function(value){result+=render(layout,value);});}}
return result;}}
deep[deep.length-1].layout.push(next);deep.push(next);}
if(sign=='/'){if(deep.length<2)throw'Excessive `closing` in template#'+offset+': '+template;if(deep.pop().key===undefined)deep.pop();}
if((sign=='\\')||!sign.length){deep[deep.length-1].layout.push({key:key,escape:!sign.length,data:json,render:function(token){var value=this.key.length?token.__get(this.key.split('/')):token,type=jQuery.type(value);if(['number','string'].indexOf(type)>-1)
return this.escape?htmlspecialchars(String(value)):value;if(value)
if(typeof(value.copy)=='function')
if(typeof(value.token)=='function'){var z={};$.each(this.data,function(k,v){z.__set(k.split('/'),v);});return value.copy().token(z,-1,true).html();}
return'';}});}}
if(deep.length>1)throw'Insufficient `closing` in template: '+template;return render(deep.pop().layout,token)+template.substr(tail);}
$$.template={"product\/combo":"<div{{%}} class=\"sp-wrapper\">\n    <h2>{{title}}<\/h2>\n    <div class=\"special-proposition sp pagination-type-1\">\n        <div id=\"specialProposition\" class=\"swiper-container\">\n            <div class=\"swiper-wrapper\">\n                {{@ items}}\n                    <div class=\"swiper-slide {{additionalClass}}\" data-product-combo-id=\"{{comboId}}\">\n                        <div class=\"combo-kit ck\" data-ck-count=\"{{productCount}}\">\n                            {{@ productsData}}\n                                <div class=\"ck_product\" title=\"{{\\ name}}\">\n                                    <a href=\"{{url}}\" class=\"ck_product-link\">\n                                        <img class=\"ck_product-img\" src=\"{{img}}\" alt=\"{{\\ name}}\" title=\"{{\\ name}}\">\n                                        <div class=\"ck_product-right\" data-id=\"{{id}}\" data-product-id=\"{{id}}\" id=\"product_item_{{id}}\">\n                                            <div class=\"ck_product-name\">\n                                                {{\\ name}}\n                                            <\/div>\n                                            <div class=\"sp_item--price\">\n                                                <div class=\"price-block\" data-block=\"priceBlock\">\n                                                    {{\\ priceBlock}}\n                                                <\/div>\n                                            <\/div>\n                                        <\/div>\n                                    <\/a>\n                                <\/div>\n                            {{\/}}\n                            <div class=\"ck_total clearfix\">\n                                <div class=\"price-block\" data-block=\"priceBlock\">\n                                    {{\\ amount}}\n                                <\/div>\n                                <div class=\"product-button-wrapper\" data-block=\"buyButton\">\n                                    {{\\ button}}\n                                <\/div>\n                            <\/div>\n                        <\/div>\n                    <\/div>\n                {{\/}}\n            <\/div>\n        <\/div>\n\n        <div class=\"specialProposition-pagination swiper-pagination\" data-devider=\"of\"><\/div>\n        <div class=\"specialProposition-next swiper-button-next swiper-button-disabled\"><i><\/i><\/div>\n        <div class=\"specialProposition-prev swiper-button-prev swiper-button-disabled\"><i><\/i><\/div>\n    <\/div>\n<\/div>","product\/price":"<div{{%}} class=\"price{{? unavailable}} price-unavailable{{\/}}\">\n    <span class=\"old-price\" data-old-price=\"\">{{\\ formatted-old}}<\/span>\n    <span class=\"product-price{{? special-price-class}} {{special-price-class}}{{\/}}\" data-price=\"{{price}}\">{{\\ formatted-price}}<\/span>\n<\/div>","promotion\/list":"<div{{%}} class=\"tmp-flex-grid promotion-block temp-class\">\n    <h1>{{title}}<\/h1>\n    {{? items}}\n        <div class=\"row\">\n            {{@ items}}\n                <div class=\"col-12 col-sm-6 d-flex\">\n                    <div class=\"promotion-block-box pbb d-flex grow-1\">\n                        <a href=\"{{url}}\" class=\"pbb_link d-flex grow-1 flex-column flex-md-row\">\n                            <img src=\"{{image}}\"\/>\n                            <div class=\"pbb_info grow-1\">\n                                <h2 class=\"pbb_info-title\">{{name}}<\/h2>\n                                {{? short-description}}\n                                <div class=\"pbb_info-description\">{{\\ short-description}}<\/div>\n                                {{\/}}\n                            <\/div>\n                        <\/a>\n                    <\/div>\n                <\/div>\n            {{\/}}\n        <\/div>\n    {{|}}\n        <div class=\"page-description\">Currently there are no promo offers available.<\/div>\n    {{\/}}\n<\/div>","checkout\/payment\/reference-details":"<div{{%}} class=\"order-details-payment-info checkout-order-summary\">\n    <p>{{title}}<\/p>\n    <table class=\"checkout-order-summary-address\">\n        {{@items}}\n            <tr>\n                <td class=\"legend\">{{name}}:<\/td>\n                <td>{{value}}<\/td>\n            <\/tr>\n        {{\/}}\n    <\/table>\n<\/div>","page\/index\/info-block":"<div{{%}} class=\"tmp-flex-grid info-block temp-class\">\n    <div class=\"row flex-row\">\n\n        {{@ columns}}\n            <div class=\"col-12 col-sm-6 col-lg-3 d-flex\">\n                <div class=\"d-flex flex-column grow-1 info-block-box{{? gray-bg}} gray-bg{{\/}}\">\n                    <h2>{{title}}<\/h2>\n                    <div class=\"grow-1\">\n                        {{\\ content}}\n                    <\/div>\n                    <div class=\"info-block-btn\">\n                        <a href=\"{{link}}\">See all<\/a>\n                    <\/div>\n                <\/div>\n            <\/div>\n        {{\/}}\n\n    <\/div>\n<\/div>","popup\/payment-info\/desktop":"<div {{%}}>\n    <h1>Payment<\/h1>\n\n    <div class=\"styled-form\">\n        <div class=\"mb40\">\n            {{\\ payment-form}}\n        <\/div>\n\n        <div class=\"clearfix\">\n            <div class=\"left\"><button href=\"javascript:void(0)\" data-action-click=\"ui.lightbox.hide\" class=\"styled-link gray\">Cancel<\/button><\/div>\n            <div class=\"right\"><button name=\"submit\" class=\"styled-link\">Pay<\/button><\/div>\n        <\/div>\n    <\/div>\n<\/div>\n","popup\/payment-info\/mobile":"<div {{%}}>\n    <div class=\"popup-inner checkout-attention-popup\">\n        <div class=\"popup-head\">\n            <a href=\"javascript:void(0);\" data-action-click=\"site.popup.hide\" class=\"right-arrow\"><\/a>\n            <h2 class=\"back-button-text\">Payment<\/h2>\n        <\/div>\n        <div class=\"popup-content popup-content-description\">\n            {{\\ payment-form}}\n        <\/div>\n        <div class=\"white-wrapper\">\n            <div name=\"submit\" class=\"button-big green\">Pay<\/div>\n            <a href=\"javascript:void(0);\" data-action-click=\"site.popup.hide\" class=\"button-big gray\">Cancel<\/a>\n        <\/div>\n    <\/div>\n<\/div>","checkout\/delivery\/warning\/minimum-amount-not-reached":"<div{{%}} class=\"frame-warning\">\n    <div class=\"frame-content block-color-wrap block-yellow\">\n        {{@ items}}\n            <p>Shipping by <strong>{{name}}<\/strong> is available only if your order value is more than <strong>{{\\ cost}}<\/strong><\/p>\n        {{\/}}\n    <\/div>\n<\/div>","layout\/main\/header\/search":"<form{{%}} action=\"{{action}}\" method=\"get\">\n        <div class=\"search-input-control can-submit{{? can-clear}} can-clear{{\/}}\" data-hint=\"\">\n    <div class=\"search-facet-selector\">\n        <div id=\"search_facet_selector\" data-name=\"{{facet-id}}\">\n            {{facet-title}}\n        <\/div>\n        <ul class=\"facet-popup shadow\">\n            <li class=\"facet-item\" data-name=\"all\" style=\"display: none\">\n                {{all}}\n            <\/li>\n            {{@ facets}}\n                <li class=\"facet-item\" data-name=\"{{facet-id}}\">\n                    {{name}}\n                <\/li>\n            {{\/}}\n        <\/ul>\n    <\/div>\n    <input type=\"hidden\" name=\"f\" value=\"{{facet-id}}\">\n    <div class=\"search-field\">\n        <label><input type=\"text\" name=\"q\" class=\"hide-outline\" placeholder=\"Search...\" value=\"{{value}}\" maxlength=\"1000\" autocomplete=\"off\"><\/label>\n    <\/div>\n    <a href=\"javascript:void(0)\" class=\"search-input-button search-input-clear\"><\/a>\n    <a href=\"javascript:void(0)\" class=\"search-input-button search-input-submit\"><\/a>\n    <div id=\"quick-search\" class=\"quick-search temp-class\" style=\"display: none\"><\/div>\n    <\/div>\n<\/form>","checkout\/payment\/regular\/selected\/stripe":"<div{{%}}>\n\n    <form action=\"\/charge\" method=\"post\" id=\"payment-form\">\n        <div class=\"form-row\">\n            <label for=\"card-element\">\n                Credit or debit card\n            <\/label>\n            <div id=\"card-element\">\n                <!-- A Stripe Element will be inserted here. -->\n            <\/div>\n\n            <!-- Used to display form errors. -->\n            <div id=\"card-errors\" role=\"alert\"><\/div>\n        <\/div>\n    <\/form>\n<\/div>","layout\/main\/header\/search\/quick":"<div{{%}}>\n    {{? brands}}\n        <div class=\"group brands-group\">\n            <div class=\"group-title\">Catalog<\/div>\n            <div class=\"group-items\">\n                <ul class=\"brands columns-1\">\n                    {{@ brands}}\n                        <li>\n                            <a href=\"{{url}}\">\n                                <span class=\"category-label\">{{category}}<\/span>\n                                <span class=\"brand-label\">{{brand}}<\/span>\n                                {{? facet}}\n                                    In\n                                {{\/}}\n                                <span class=\"facet-label\">{{facet}}<\/span>\n                            <\/a>\n                        <\/li>\n                    {{\/}}\n                <\/ul>\n            <\/div>\n        <\/div>\n    {{\/}}\n\n    {{? products}}\n        <div class=\"group products-group\">\n            <div class=\"group-title\">Products<\/div>\n            <div class=\"group-items\">\n                <ul class=\"products\">\n                    {{@ products}}\n                        <li data-id=\"{{id}}\" data-product-id=\"{{id}}\" id=\"product_item_{{id}}\">\n                            <a href=\"{{url}}\" title=\"{{name}}\" class=\"product-imagetile-link\"><img src=\"{{image}}\" width=\"30\" height=\"30\" alt=\"{{name}}\" class=\"product-imagetile\"><\/a>\n                            <div class=\"product-info-wrapper\">\n                                <div class=\"product-title\">\n                                    <a href=\"{{url}}\" >{{name}}<\/a>\n                                <\/div>\n                            <\/div>\n                            {{? not-ordering}}\n                                <div class=\"product-price-wrapper\">\n                                    <div class=\"price-block\" data-block=\"priceBlock\">\n                                        {{\\ price}}\n                                    <\/div>\n                                <\/div>\n                            {{\/}}\n                            <div class=\"clear\"><\/div>\n                        <\/li>\n                    {{\/}}\n                <\/ul>\n            <\/div>\n            <div class=\"footer\">\n                <span class=\"qs-btn\">\n                    <input type=\"submit\" value=\"See all\">\n                <\/span>\n            <\/div>\n        <\/div>\n    {{\/}}\n\n    {{? no-results}}\n        <div class=\"empty-quick-search-message\">\n            No results for your search\n        <\/div>\n    {{\/}}\n<\/div>"};var control=function(space,name,key){var self=this;self.space=space;self.name=name;self.key=key;var token={},data={};self.token=function(input,merge,recursive){if(input===undefined)
return token;if((merge===undefined)||(merge>0))
token=jQuery.extend(Boolean(recursive),{},token,input);else if(merge<0)
token=jQuery.extend(Boolean(recursive),{},input,token);else
token=input;return self;}
self.data=function(input,merge,recursive){if(input===undefined)
return data;if((merge===undefined)||(merge>0))
data=jQuery.extend(Boolean(recursive),{},data,input);else if(merge<0)
data=jQuery.extend(Boolean(recursive),{},input,data);else
data=input;return self;};self.html=function(target){var template=$$.template.__get(self.space),result='';if(template!==undefined){var _self=' space="'+self.space+'"';if(self.name)_self+=' name="'+self.name+'"';if(self.key)_self+=' key="'+self.key+'"';if(Object.keys(data).length)_self+=' data="'+encodeURIComponent(JSON.stringify(data))+'"';result=$$.render(template.replace(/{{%}}/g,_self),token);}
if(target!==undefined){$(target).off();target.outerHTML=result;delete target.$$;return target.$$();}
return result;};self.copy=function(){return $$.control(space,name,key).token(token).data(data);};}
$$.control=function(space,name,key){return new control(space,name,key);}
jQuery(function(){$$('[space]');});})();;
(function(window,site,undefined){var analytics={};site.analytics=analytics;analytics.initialized=true;analytics.initialize=site.utils.noop;var tracker=null;var trackQueue=[];var trackTimer=null;var trackProcessor=function(){if(trackTimer)clearInterval(trackTimer);trackTimer=null;if(window.ga&&window.ga.apply&&ga.getAll&&ga.getAll.apply){if(tracker===null){var trackers=ga.getAll();if(trackers.length>0){tracker=trackers[0].get('name');}else{ga('create','UA-9143451-8',{name:'t0'});tracker='t0';}}
while(trackQueue.length>0){var args=trackQueue.shift();var temp=args.shift();if((temp===null)||(temp===undefined))temp=tracker;if(temp!=='')args[0]=temp+'.'+args[0];window.ga.apply(window,args);}}else{trackTimer=setTimeout(trackProcessor,1000);}};analytics.track=function(url,title){var args=[tracker,'send','pageview'];if(url)args.push(url);if(title)args.push(title);trackQueue.push(args);trackProcessor();}})(window,window.site);;
if(typeof executeScripts==='function'){executeScripts();}
$(window).load(function(){$('.main-banner').css({"height":"auto","overflow":"initial"});});;